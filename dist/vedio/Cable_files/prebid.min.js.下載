(()=>{var e={3426:function(e,t,r){"use strict";var n=r(2100),i=r(8287);Object.defineProperty(t,"__esModule",{value:!0}),t._internal=t.DEFAULT_INCLUDE_EVENTS=void 0,t.default=function(e){var t,r,n,i,c,p=e.url,f=e.analyticsType,A=e.global,I=e.handler,E=[],S=!1,O=(r=!1,n=function(){if(!r){r=!0;try{for(var e=0,t=0;E.length>0;){e++;var n=E.length;if(E.shift()(),E.length>=n?t++:t=0,t>=10){(0,u.logError)("Detected probable infinite loop, discarding events",E),E.length=0;return}}(0,u.logMessage)("".concat(c," analytics: processed ").concat(e," events"))}finally{r=!1}}},function(){null!=t&&(clearTimeout(t),t=null),0===y?n():t=setTimeout(n,y)});return Object.defineProperties({track:function(e){var t=e.eventType,r=e.args;"bundle"===this.getAdapterType()&&window[A](I,t,r),"endpoint"===this.getAdapterType()&&_.apply(void 0,arguments)},enqueue:T,enableAnalytics:w,disableAnalytics:function(){Object.entries(i||{}).forEach(function(e){var t=(0,o.default)(e,2),r=t[0],n=t[1];l.off(r,n)}),this.enableAnalytics=this._oldEnable?this._oldEnable:w,S=!1},getAdapterType:function(){return f},getGlobal:function(){return A},getHandler:function(){return I},getUrl:function(){return p}},{enabled:{get:function(){return S}}});function _(e){var t=e.eventType,r=e.args,n=e.callback;v.ajax(p,n,JSON.stringify({eventType:t,args:r,labels:h}))}function T(e){var t=this,r=e.eventType,n=e.args;E.push(function(){Object.keys(h||[]).length>0&&(n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}((0,s.default)({},m,h),n)),t.track({eventType:r,labels:h,args:n})}),O()}function w(e){var t=this;c=null==e?void 0:e.provider;var r=this;if("object"!==(0,a.default)(e)||"object"!==(0,a.default)(e.options)||void 0===e.options.sampling||Math.random()<parseFloat(e.options.sampling)){var n,o,s,p,f,g=(s=void 0===(o=(n=e||{}).includeEvents)?b:o,f=void 0===(p=n.excludeEvents)?[]:p,new Set(Object.values(d.EVENTS).filter(function(e){return s.includes(e)}).filter(function(e){return!f.includes(e)})));l.getEvents().forEach(function(e){if(e&&g.has(e.eventType)){var t=e.eventType,n=e.args;T.call(r,{eventType:t,args:n})}}),i=Object.fromEntries(Array.from(g).map(function(e){var r=function(r){return t.enqueue({eventType:e,args:r})};return l.on(e,r),[e,r]}))}else(0,u.logMessage)('Analytics adapter for "'.concat(A,'" disabled by sampling'));this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return(0,u.logMessage)('Analytics adapter for "'.concat(A,'" already enabled, unnecessary call to `enableAnalytics`.'))},S=!0}},t.setDebounceDelay=function(e){y=e};var o=n(r(5881)),a=n(r(8287)),s=n(r(5794)),d=r(3103),c=r(7316),u=r(4700),l=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1322)),p=r(9926);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var v=t._internal={ajax:c.ajax},m="analyticsLabels",h={};p.config.getConfig(m,function(e){h=e[m]});var b=t.DEFAULT_INCLUDE_EVENTS=Object.values(d.EVENTS).filter(function(e){return e!==d.EVENTS.AUCTION_DEBUG}),y=100},2445:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.convertKeywordStringToANMap=function(e){return(0,a.isStr)(e)&&""!==e?f(e.split(/\s*(?:,)\s*/)):{}},t.getANKewyordParamFromMaps=v,t.getANKeywordParam=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return v.apply(void 0,[g(e),m(e)].concat(r))},t.getANMapFromOrtbKeywords=g,t.getANMapFromOrtbSegments=m,t.transformBidderParamKeywords=p;var i=n(r(5881)),o=n(r(939)),a=r(4700),s=r(3635),d=r(4112),c={526:"1plusX",527:"1plusX",541:"captify_segments",540:"perid",501:"perid"},u=["user.data"].concat(d.CLIENT_SECTIONS.map(function(e){return"".concat(e,".content.data")}));function l(e,t,r){return null==t?r:(0,a.isStr)(t)?t:(0,a.isNumber)(t)?t.toString():void(0,a.logWarn)("Unsuported type for param: "+e+" required type: String")}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keywords",r=[];return(0,a._each)(e,function(e,n){if((0,a.isArray)(e)){var i=[];(0,a._each)(e,function(e){((e=l(t+"."+n,e))||""===e)&&i.push(e)}),e=i}else{if(e=l(t+"."+n,e),!(0,a.isStr)(e))return;e=[e]}e=e.filter(function(e){return""!==e});var o={key:n};e.length>0&&(o.value=e),r.push(o)}),r}function f(e){var t={};return e.forEach(function(e){if(-1!==e.indexOf("=")){var r=e.split("="),n=r[0],i=r[1];t.hasOwnProperty(n)?t[n].push(i):t[n]=[i]}else t.hasOwnProperty(e)||(t[e]=[])}),t}function g(e){return f((0,s.getAllOrtbKeywords)(e))}function v(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return p(a.mergeDeep.apply(void 0,(0,o.default)(t.map(function(e){return Object.fromEntries(Object.entries(e||{}).map(function(e){var t=(0,i.default)(e,2),r=t[0],n=t[1];return[r,(0,a.isNumber)(n)||(0,a.isStr)(n)?[n]:n]}))}))))}function m(e){var t={};return u.forEach(function(r){((0,a.deepAccess)(e,r)||[]).forEach(function(e){var r,n=c[null==e||null==(r=e.ext)?void 0:r.segtax];n&&e.segment.forEach(function(e){t[n]?t[n].push(e.id):t[n]=[e.id]})})}),t}},7359:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appnexusAliases=void 0,t.convertCamelToUnderscore=function(e){return e.replace(/(?:^|\.?)([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"")},t.fill=function(e,t){for(var r=[],i=0;i<t;i++){var o=(0,n.isPlainObject)(e)?(0,n.deepClone)(e):e;r.push(o)}return r};var n=r(4700);t.appnexusAliases=[{code:"appnexusAst",gvlid:32},{code:"emxdigital",gvlid:183},{code:"emetriq",gvlid:213},{code:"pagescience",gvlid:32},{code:"gourmetads",gvlid:32},{code:"matomy",gvlid:32},{code:"featureforward",gvlid:32},{code:"oftmedia",gvlid:32},{code:"adasta",gvlid:32},{code:"beintoo",gvlid:618},{code:"projectagora",gvlid:1032},{code:"stailamedia",gvlid:32},{code:"uol",gvlid:32},{code:"adzymic",gvlid:723}]},4585:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAutoplayEnabled=void 0;var r=null;t.isAutoplayEnabled=function(){return!1!==r};var n=navigator.userAgent.match(/iPhone OS (\d+)_(\d+)/);if(!(null!==n&&17>parseInt(n[1]))||navigator.userAgent.includes("Safari")){var i=document.createElement("video");i.src="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAADxtZGF0AAAAMGWIhAAV//73ye/Apuvb3rW/k89I/Cy3PsIqP39atohOSV14BYa1heKCYgALQC5K4QAAAwZtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAD6AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACMHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAD6AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAoAAAAFoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAA+gAAAAAAAEAAAAAAahtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAEAAAABAAFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAFTbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABE3N0YmwAAACvc3RzZAAAAAAAAAABAAAAn2F2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAoABaAEgAAABIAAAAAAAAAAEVTGF2YzYwLjMxLjEwMiBsaWJ4MjY0AAAAAAAAAAAAAAAY//8AAAA1YXZjQwFkAAr/4QAYZ2QACqzZQo35IQAAAwABAAADAAIPEiWWAQAGaOvjyyLA/fj4AAAAABRidHJ0AAAAAAAAAaAAAAGgAAAAGHN0dHMAAAAAAAAAAQAAAAEAAEAAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAABRzdHN6AAAAAAAAADQAAAABAAAAFHN0Y28AAAAAAAAAAQAAADAAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjYwLjE2LjEwMA==",i.setAttribute("playsinline","true"),i.muted=!0,i.play().then(function(){r=!0,i.src=""}).catch(function(e){e instanceof DOMException&&"NotSupportedError"===e.name||(r=!1)})}},2829:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APPNEXUS_CATEGORY_MAPPING=void 0,t.APPNEXUS_CATEGORY_MAPPING={1:"IAB20-3",2:"IAB18-5",3:"IAB10-1",4:"IAB2-3",5:"IAB19-8",6:"IAB22-1",7:"IAB18-1",8:"IAB12-3",9:"IAB5-1",10:"IAB4-5",11:"IAB13-4",12:"IAB8-7",13:"IAB9-7",14:"IAB7-1",15:"IAB20-18",16:"IAB10-7",17:"IAB19-18",18:"IAB13-6",19:"IAB18-4",20:"IAB1-5",21:"IAB1-6",22:"IAB3-4",23:"IAB19-13",24:"IAB22-2",25:"IAB3-9",26:"IAB17-18",27:"IAB19-6",28:"IAB1-7",29:"IAB9-30",30:"IAB20-7",31:"IAB20-17",32:"IAB7-32",33:"IAB16-5",34:"IAB19-34",35:"IAB11-5",36:"IAB12-3",37:"IAB11-4",38:"IAB12-3",39:"IAB9-30",41:"IAB7-44",42:"IAB7-1",43:"IAB7-30",50:"IAB19-30",51:"IAB17-12",52:"IAB19-30",53:"IAB3-1",55:"IAB13-2",56:"IAB19-30",57:"IAB19-30",58:"IAB7-39",59:"IAB22-1",60:"IAB7-39",61:"IAB21-3",62:"IAB5-1",63:"IAB12-3",64:"IAB20-18",65:"IAB11-2",66:"IAB17-18",67:"IAB9-9",68:"IAB9-5",69:"IAB7-44",71:"IAB22-3",73:"IAB19-30",74:"IAB8-5",78:"IAB22-1",85:"IAB12-2",86:"IAB22-3",87:"IAB11-3",112:"IAB7-32",113:"IAB7-32",114:"IAB7-32",115:"IAB7-32",118:"IAB9-5",119:"IAB9-5",120:"IAB9-5",121:"IAB9-5",122:"IAB9-5",123:"IAB9-5",124:"IAB9-5",125:"IAB9-5",126:"IAB9-5",127:"IAB22-1",132:"IAB1-2",133:"IAB19-30",137:"IAB3-9",138:"IAB19-3",140:"IAB2-3",141:"IAB2-1",142:"IAB2-3",143:"IAB17-13",166:"IAB11-4",175:"IAB3-1",176:"IAB13-4",182:"IAB8-9",183:"IAB3-5"}},7231:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chunk=function(e,t){for(var r=[],n=0;n<Math.ceil(e.length/t);n++){var i=n*t,o=i+t;r.push(e.slice(i,o))}return r}},8263:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.MODE_RETURN=t.MODE_MIXED=t.MODE_CALLBACK=void 0,t.cmpClient=function(e){var t,r=e.apiName,n=e.apiVersion,d=e.apiArgs,f=void 0===d?["command","callback","parameter","version"]:d,g=e.callbackArgs,v=void 0===g?["returnValue","success"]:g,m=e.mode,h=void 0===m?u:m,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,y={},A="".concat(r,"Call"),I="".concat(r,"Return");function E(e){var t,r="string"==typeof e.data&&e.data.includes(I)?JSON.parse(e.data):e.data;if(null!=r&&null!=(t=r[I])&&t.callId){var n=r[I];y.hasOwnProperty(n.callId)&&y[n.callId].apply(y,(0,a.default)(v.map(function(e){return n[e]})))}}var S=function(){for(var e,t=b,n=!1;null!=t;){try{if("function"==typeof t[r]){e=t,n=!0;break}}catch(e){}try{if(t.frames["".concat(r,"Locator")]){e=t;break}}catch(e){}if(t===b.top)break;t=t.parent}return[e,n]}(),O=(0,o.default)(S,2),_=O[0],T=O[1];if(_)return T?t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new s.PbPromise(function(t,n){var i=_[r].apply(_,(0,a.default)(w(c(c({},e),{},{callback:e.callback||h===p?C(e.callback,t,n):void 0})).map(function(e){var t=(0,o.default)(e,2);return t[0],t[1]})));(h===l||null==e.callback&&h===u)&&t(i)})}:(b.addEventListener("message",E,!1),t=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new s.PbPromise(function(r,n){var a=Math.random().toString(),s=(0,i.default)({},A,c(c({},Object.fromEntries(w(e).filter(function(e){return"callback"!==(0,o.default)(e,1)[0]}))),{},{callId:a}));y[a]=C(null==e?void 0:e.callback,r,n,(t||(null==e?void 0:e.callback)==null)&&function(){delete y[a]}),_.postMessage(s,"*"),h===l&&r()})}),Object.assign(t,{isDirect:T,close:function(){T||b.removeEventListener("message",E)}});function w(e){return e=Object.assign({version:n},e),f.map(function(t){return[t,e[t]]})}function C(e,t,r,n){var i="function"==typeof e;return function(o,a){n&&n(),h!==l&&(null==a||a?t:r)(i?void 0:o),i&&e.apply(this,arguments)}}};var i=n(r(5794)),o=n(r(5881)),a=n(r(939)),s=r(6102);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var u=t.MODE_MIXED=0,l=t.MODE_RETURN=1,p=t.MODE_CALLBACK=2},899:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConnectionType=function(){var e=navigator.connection||navigator.webkitConnection;if(!e)return 0;switch(e.type){case"ethernet":return 1;case"wifi":return 2;case"wimax":return 6;default:switch(e.effectiveType){case"slow-2g":case"2g":return 4;case"3g":return 5;case"4g":return 6;case"5g":return 7;default:return 3*("cellular"==e.type)}}}},6437:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RENDERER=void 0,t.RENDERER='(()=>{"use strict";window.render=function({ad:e,adUrl:t,width:n,height:i,instl:d},{mkFrame:r},s){if(!e&&!t)throw{reason:"noAd",message:"Missing ad markup or URL"};{if(null==i){const e=s.document?.body;[e,e?.parentElement].filter((e=>null!=e?.style)).forEach((e=>e.style.height="100%"))}const h=s.document,o={width:n??"100%",height:i??"100%"};if(t&&!e?o.src=t:o.srcdoc=e,h.body.appendChild(r(h,o)),d&&s.frameElement){const e=s.frameElement.style;e.width=n?`${n}px`:"100vw",e.height=i?`${i}px`:"100vh"}}}})();'},1659:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertCurrency=o,t.currencyCompare=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return[e.cpm,e.currency]},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a();return(0,i.keyCompare)(function(r){return t.apply(null,e(r))})},t.currencyNormalizer=a;var n=r(7045),i=r(2500);function o(e,t,r){var i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(t===r)return e;var o=e;try{o=(0,n.getGlobal)().convertCurrency(e,t,r)}catch(e){if(!i)throw e}return o}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;return function(n,i){return null==e&&(e=i),r(n,i,e,t)}}},2305:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DFP_ENDPOINT=t.DEFAULT_DFP_PARAMS=void 0,t.gdprParams=function(){var e=n.gdprDataHandler.getConsentData(),t={};return e&&("boolean"==typeof e.gdprApplies&&(t.gdpr=Number(e.gdprApplies)),e.consentString&&(t.gdpr_consent=e.consentString),e.addtlConsent&&(t.addtl_consent=e.addtlConsent)),t};var n=r(5789);t.DEFAULT_DFP_PARAMS={env:"vp",gdfp_req:1,output:"vast",unviewed_position_start:1},t.DFP_ENDPOINT={protocol:"https",host:"securepubads.g.doubleclick.net",pathname:"/gampad/ads"}},9570:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.domainOverrideToRootDomain=function(e,t){return function(){for(var r,n,i=document.domain.split("."),o="_gd".concat(Date.now(),"_").concat(t),a=0;a<i.length;a++){var s=i.slice(a).join(".");if(e.setCookie(o,"1",void 0,void 0,s),n=e.getCookie(o),e.setCookie(o,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,s),"1"!==n)return r;r=s}}}},6643:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOrigin=function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}},1014:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.getGptSlotForAdUnitCode=u,t.getGptSlotInfoForAdUnitCode=function(e){var t=u(e);return t?{gptSlot:t.getAdUnitPath(),divId:t.getSlotElementId()}:{}},t.getSegments=p,t.getSignals=function(e){return Object.entries((0,o.default)((0,o.default)({},l[0],p(e,["user.data"],4)),l[1],p(e,a.CLIENT_SECTIONS.map(function(e){return"".concat(e,".content.data")}),6))).map(function(e){var t=(0,i.default)(e,2),r=t[0],n=t[1];return n.length?{taxonomy:r,values:n}:null}).filter(function(e){return e})},t.isSlotMatchingAdUnitCode=c,t.setKeyValue=function(e,t){if(!e||"string"!=typeof e)return!1;window.googletag=window.googletag||{cmd:[]},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){window.googletag.pubads().setTargeting(e,t)})},t.subscribeToGamEvent=f,t.subscribeToGamSlotRenderEndedEvent=function(e){f("slotRenderEnded",e)},t.taxonomies=void 0;var i=n(r(5881)),o=n(r(5794)),a=r(4112),s=r(1617),d=r(4700);function c(e){return function(t){return(0,d.compareCodeAndSlot)(t,e)}}function u(e){var t;return(0,d.isGptPubadsDefined)()&&(t=(0,s.find)(window.googletag.pubads().getSlots(),c(e))),t}var l=t.taxonomies=["IAB_AUDIENCE_1_1","IAB_CONTENT_2_2"];function p(e,t,r){return t.flatMap(function(t){return(0,d.deepAccess)(e,t)||[]}).filter(function(e){var t;return(null==(t=e.ext)?void 0:t.segtax)===r}).flatMap(function(e){var t;return null==(t=e.segment)?void 0:t.map(function(e){return e.id})}).filter(function(e){return e}).filter(d.uniques)}function f(e,t){var r=function(){return window.googletag.pubads().addEventListener(e,t)};if((0,d.isGptPubadsDefined)())return void r();window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(r)}},555:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.GreedyPromise=void 0,t.greedySetTimeout=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t>0)return setTimeout(e,t);e()};var i=n(r(5881)),o=n(r(7586)),a=n(r(1770));function s(e,t,r){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}function d(e,t,r){return e.set(c(e,t),r),r}function c(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")}var u=new WeakMap,l=new WeakMap;function p(e,t,r){var n=this,i=e.length;function o(){t.apply(this,arguments),--i<=0&&r&&r()}0===e.length&&r?r():e.forEach(function(e,t){return n.resolve(e).then(function(e){return o(!0,e,t)},function(e){return o(!1,e,t)})})}t.GreedyPromise=function(){function e(t){if((0,o.default)(this,e),s(this,u,void 0),s(this,l,void 0),"function"!=typeof t)throw Error("resolver not a function");var r=[],n=[],a=[0,1].map(function(e){return function(t){if(0===e&&"function"==typeof(null==t?void 0:t.then))t.then(p,f);else if(!r.length)for(r.push(e,t);n.length;)n.shift()()}}),c=(0,i.default)(a,2),p=c[0],f=c[1];try{t(p,f)}catch(e){f(e)}d(u,this,r),d(l,this,n)}return(0,a.default)(e,[{key:"then",value:function(e,t){var r=this,n=u.get(c(u,this));return new this.constructor(function(o,a){var s=function(){var r=n[1],s=0===n[0]?[e,o]:[t,a],d=(0,i.default)(s,2),c=d[0],u=d[1];if("function"==typeof c){try{r=c(r)}catch(e){a(e);return}u=o}u(r)};n.length?s():l.get(c(l,r)).push(s)})}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"finally",value:function(e){var t,r=this;return this.then(function(r){return t=r,e()},function(n){return t=r.constructor.reject(n),e()}).then(function(){return t})}}],[{key:"race",value:function(t){var r=this;return new this(function(n,i){c(e,r,p).call(r,t,function(e,t){return e?n(t):i(t)})})}},{key:"all",value:function(t){var r=this;return new this(function(n,i){var o=[];c(e,r,p).call(r,t,function(e,t,r){return e?o[r]=t:i(t)},function(){return n(o)})})}},{key:"allSettled",value:function(t){var r=this;return new this(function(n){var i=[];c(e,r,p).call(r,t,function(e,t,r){return i[r]=e?{status:"fulfilled",value:t}:{status:"rejected",reason:t}},function(){return n(i)})})}},{key:"resolve",value:function(e){return new this(function(t){return t(e)})}},{key:"reject",value:function(e){return new this(function(t,r){return r(e)})}}])}()},9810:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WITH_IIQ=t.WITHOUT_IIQ=t.VERSION=t.SYNC_REFRESH_MILL=t.SUPPORTED_TYPES=t.SCREEN_PARAMS=t.PREBID=t.NOT_YET_DEFINED=t.META_DATA_CONSTANT=t.MAX_REQUEST_LENGTH=t.INVALID_ID=t.HOURS_24=t.GVLID=t.FIRST_PARTY_KEY=t.EMPTY=t.CLIENT_HINTS_KEY=t.BLACK_LIST=void 0,t.FIRST_PARTY_KEY="_iiq_fdata",t.SUPPORTED_TYPES=["html5","cookie"],t.WITH_IIQ="A",t.WITHOUT_IIQ="B",t.NOT_YET_DEFINED="U",t.BLACK_LIST="L",t.CLIENT_HINTS_KEY="_iiq_ch",t.EMPTY="EMPTY",t.GVLID="1323",t.VERSION=.29,t.PREBID="pbjs",t.HOURS_24=864e5,t.INVALID_ID="INVALID_ID",t.SCREEN_PARAMS={0:"windowInnerHeight",1:"windowInnerWidth",2:"devicePixelRatio",3:"windowScreenHeight",4:"windowScreenWidth",5:"language"},t.SYNC_REFRESH_MILL=36e5,t.META_DATA_CONSTANT=256,t.MAX_REQUEST_LENGTH={chrome:2097152,safari:8e4,opera:2097152,edge:2048,firefox:65536,ie:2048}},8276:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detectBrowser=function(){try{if(navigator.userAgent)return i(navigator.userAgent);if(navigator.userAgentData)return o(navigator.userAgentData)}catch(e){(0,n.logError)("Error detecting browser:",e)}return"unknown"},t.detectBrowserFromUserAgent=i,t.detectBrowserFromUserAgentData=o;var n=r(4700);function i(e){var t={opera:/Opera|OPR/,edge:/Edg/,chrome:/Chrome|CriOS/,safari:/Safari/,firefox:/Firefox/,ie:/MSIE|Trident/};if(t.edge.test(e))return"edge";if(t.opera.test(e))return"opera";if(t.chrome.test(e))return"chrome";if(t.safari.test(e)&&!t.chrome.test(e))return"safari";for(var r in t)if(t[r].test(e))return r;return"unknown"}function o(e){var t=e.brands.map(function(e){return e.brand});return t.includes("Microsoft Edge")?"edge":t.includes("Opera")?"opera":t.some(function(e){return"Chromium"===e||"Google Chrome"===e})?"chrome":"unknown"}},6275:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCmpData=function(){var e,t,r,i=n.allConsent.getConsentData();return{gdprApplies:(null==i||null==(e=i.gdpr)?void 0:e.gdprApplies)||!1,gdprString:"string"==typeof(null==i||null==(t=i.gdpr)?void 0:t.consentString)?i.gdpr.consentString:null,uspString:"string"==typeof(null==i?void 0:i.usp)?i.usp:null,gppString:"string"==typeof(null==i||null==(r=i.gpp)?void 0:r.gppString)?i.gpp.gppString:null}};var n=r(5789)},7757:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appendVrrefAndFui=function(e,t){var r=encodeURIComponent(i());return r?e+"&vrref="+o(t,r):(e+="&fui=1",e+="&vrref="+encodeURIComponent(t||""))},t.getReferrer=i,t.getRelevantRefferer=o,t.isDomainIncluded=a;var n=r(4700);function i(){try{var e=(0,n.getWindowSelf)()===(0,n.getWindowTop)()?(0,n.getWindowLocation)().href:(0,n.getWindowTop)().location.href;if(e.length>=50)return new URL(e).origin;return e}catch(e){return(0,n.logError)("Error accessing location: ".concat(e)),""}}function o(e,t){return e&&a(t,e)?t:e?encodeURIComponent(e):t}function a(e,t){try{return e.includes(t)}catch(e){return(0,n.logError)("Invalid URL provided: ".concat(e)),!1}}},853:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SYNC_KEY=void 0,t.SYNC_KEY=function(e){return"_iiq_sync_"+e}},2484:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.handleAdditionalParams=function(e,t,r,n){var a,s="";if(!Array.isArray(n))return t;for(var d=0;d<n.length;d++){var c=n[d];"object"===(0,i.default)(c)&&c.parameterName&&c.parameterValue&&c.destination&&Array.isArray(c.destination)&&c.destination[r]&&(s+="&agp_".concat(encodeURIComponent(c.parameterName),"=").concat(c.parameterValue))}var u=null!=(a=o.MAX_REQUEST_LENGTH[e])?a:2048;return t.length+s.length>u?t:t+s};var i=n(r(8287)),o=r(9810)},941:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportingServerAddress=t.iiqServerAddress=t.iiqPixelServerAddress=void 0,t.iiqServerAddress=function(e,t){return"string"==typeof(null==e?void 0:e.iiqServerAddress)?e.iiqServerAddress:t?"https://api-gdpr.intentiq.com":"https://api.intentiq.com"},t.iiqPixelServerAddress=function(e,t){return"string"==typeof(null==e?void 0:e.iiqPixelServerAddress)?e.iiqPixelServerAddress:t?"https://sync-gdpr.intentiq.com":"https://sync.intentiq.com"},t.reportingServerAddress=function(e,t){var r;return"string"==typeof(null==e||null==(r=e.params)?void 0:r.reportingServerAddress)?e.params.reportingServerAddress:t?"https://reports-gdpr.intentiq.com/report":"https://reports.intentiq.com/report"}},642:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineStorageType=function(e){if(!e||!Array.isArray(e))return["html5"];var t=e.filter(function(e){return i.SUPPORTED_TYPES.includes(e)});return t.length?t:["html5"]},t.readData=function(e,t){try{if(d.hasLocalStorage()&&t.includes("html5"))return d.getDataFromLocalStorage(e);if(d.cookiesAreEnabled()&&t.includes("cookie"))return d.getCookie(e)}catch(e){(0,n.logError)("".concat(s,": Error reading data"),e)}return null},t.removeDataByKey=function(e,t){try{if(d.hasLocalStorage()&&t.includes("html5")&&d.removeDataFromLocalStorage(e),d.cookiesAreEnabled()&&t.includes("cookie")){var r=new Date(0).toUTCString();d.setCookie(e,"",r,"LAX")}}catch(e){(0,n.logError)(e)}},t.storage=void 0,t.storeData=function(e,t,r,o){try{if(null!=o&&o.isOptedOut&&e!==i.FIRST_PARTY_KEY)return;if((0,n.logInfo)(s+": storing data: key="+e+" value="+t),t&&(d.hasLocalStorage()&&r.includes("html5")&&d.setDataInLocalStorage(e,t),d.cookiesAreEnabled()&&r.includes("cookie"))){var a=new Date(Date.now()+31536e6).toUTCString();d.setCookie(e,t,a,"LAX")}}catch(e){(0,n.logError)(e)}},t.tryParse=function(e){try{return JSON.parse(e)}catch(e){return(0,n.logError)(e),null}};var n=r(4700),i=r(9810),o=r(1122),a=r(4840),s="intentIqId",d=t.storage=(0,o.getStorageManager)({moduleType:a.MODULE_TYPE_UID,moduleName:s})},2863:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.appendSPData=function(e,t){var r=null!=t&&t.spd?encodeURIComponent("object"===(0,i.default)(t.spd)?JSON.stringify(t.spd):t.spd):"";return e+(r?"&spd="+r:"")};var i=n(r(8287))},3635:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.getAllOrtbKeywords=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return d.apply(void 0,(0,i.default)(s.map(function(t){return(0,a.deepAccess)(e,t)})).concat(r))},t.mergeKeywords=d;var i=n(r(939)),o=r(4112),a=r(4700),s=["user.keywords"].concat(o.CLIENT_SECTIONS.flatMap(function(e){return["keywords","content.keywords"].map(function(t){return"".concat(e,".").concat(t)})}));function d(){for(var e=new Set,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.filter(function(e){return e}).flatMap(function(e){return Array.isArray(e)?e:e.split(",")}).map(function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}).filter(function(e){return e}).forEach(function(t){return e.add(t)}),Array.from(e.keys())}},5241:function(e,t,r){"use strict";var n=r(8287);Object.defineProperty(t,"__esModule",{value:!0}),t.liveIntentIdSubmodule=void 0,t.reset=function(){window&&window.liQ_instances&&(window.liQ_instances.forEach(function(e){return e.eventBus.off(v,A)}),window.liQ_instances=[]),S.setModuleMode(null),b=!1,y=null},t.setEventFiredFlag=A,t.storage=void 0;var i=r(4700),o=r(7316),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}(r(1322)),s=r(3103),d=r(9577),c=r(2508),u=r(778),l=r(1122),p=r(4840),f=r(7953);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}var v="pre_lips",m=t.storage=(0,l.getStorageManager)({moduleType:p.MODULE_TYPE_UID,moduleName:f.MODULE_NAME}),h={ajaxGet:function(e,t,r,n,i){(0,o.ajaxBuilder)(n)(e,{success:t,error:r},void 0,{method:"GET",withCredentials:!0,customHeaders:i})},pixelGet:function(e,t){return(0,i.triggerPixel)(e,t)}},b=!1,y=null;function A(){b=!0}function I(e){if(y)return y;var t,r,n=(e=e||{}).fpid||{},i={publisherId:e.publisherId||"any",requestedAttributes:(0,f.parseRequestedAttributes)(e.requestedAttributesOverrides),extraAttributes:{ipv4:e.ipv4,ipv6:e.ipv6}};e.url&&(i.url=e.url),i.ajaxTimeout=e.ajaxTimeout||f.DEFAULT_AJAX_TIMEOUT;var o=(t=e.liCollectConfig,r={},(t=t||{}).appId&&(r.appId=t.appId),t.fpiStorageStrategy&&(r.storageStrategy=t.fpiStorageStrategy),t.fpiExpirationDays&&(r.expirationDays=t.fpiExpirationDays),t.collectorUrl&&(r.collectorUrl=t.collectorUrl),r.ajaxTimeout=t.ajaxTimeout||f.DEFAULT_AJAX_TIMEOUT,r);e.partner&&(i.source=e.partner),o.wrapperName="prebid",o.trackerVersion="9.40.0",o.identityResolutionConfig=i,o.identifiersToResolve=e.identifiersToResolve||[],o.fireEventDelay=e.fireEventDelay,o.idCookie={},o.idCookie.name=n.name,o.idCookie.strategy="html5"==n.strategy?"localStorage":n.strategy;var a=d.uspDataHandler.getConsentData();a&&(o.usPrivacyString=a);var s=d.gdprDataHandler.getConsentData();s&&(o.gdprApplies=s.gdprApplies,o.gdprConsent=s.consentString);var c=d.gppDataHandler.getConsentData();c&&(o.gppString=c.gppString,o.gppApplicableSections=c.applicableSections),y=S.getInitializer()(o,m,h);var u=(0,f.makeSourceEventToSend)(e);return null!=u&&y.push(u),y}function E(){!b&&y&&setTimeout(function(){window.liQ_instances.forEach(function(e){return e.eventBus.once(v,A)}),!b&&y&&y.fire()},y.config.fireEventDelay||f.DEFAULT_DELAY)}var S=t.liveIntentIdSubmodule={moduleMode:"standard",name:f.MODULE_NAME,gvlid:f.GVLID,setModuleMode:function(e){this.moduleMode=e},getInitializer:function(){var e=this;return function(t,r,n){return(0,u.LiveConnect)(t,r,n,e.moduleMode)}},decode:function(e,t){var r=t&&t.params||{};return(0,f.setUpTreatment)(r),y||I(r),E(),(0,f.composeResult)(e,r)},getId:function(e){var t=e&&e.params||{};(0,f.setUpTreatment)(t);var r=I(t);if(r)return E(),{callback:function(e){r.resolve(function(t){a.emit(s.EVENTS.LIVEINTENT_RESOLVED,t),e(t)},function(t){(0,i.logError)("".concat(f.MODULE_NAME,": ID fetch encountered an error: "),t),e()})}}},primaryIds:f.PRIMARY_IDS,eids:f.eids};(0,c.submodule)("userId",S)},7953:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.PRIMARY_IDS=t.MODULE_NAME=t.LI_PROVIDER_DOMAIN=t.GVLID=t.DEFAULT_TREATMENT_RATE=t.DEFAULT_REQUESTED_ATTRIBUTES=t.DEFAULT_DELAY=t.DEFAULT_AJAX_TIMEOUT=void 0,t.composeResult=function(e,t){return t.activatePartialTreatment?window.liModuleEnabled?h(e):{}:h(e)},t.eids=void 0,t.makeSourceEventToSend=function(e){var t={},r=!1;if("string"==typeof e.emailHash&&(r=!0,t.emailHash=e.emailHash),"string"==typeof e.ipv4&&(r=!0,t.ipv4=e.ipv4),"string"==typeof e.ipv6&&(r=!0,t.ipv6=e.ipv6),"string"==typeof e.userAgent&&(r=!0,t.userAgent=e.userAgent),r)return t},t.parseRequestedAttributes=function(e){function t(e){return Object.entries(e).flatMap(function(e){var t=(0,a.default)(e,2),r=t[0],n=t[1];return"boolean"==typeof n&&n?["fpid"===r?"idCookie":r]:[]})}return t("object"===(0,o.default)(e)?f(f({},v),e):v)},t.setUpTreatment=function(e){if(void 0===window.liModuleEnabled&&e.activatePartialTreatment){var t=(0,l.isNumber)(window.liTreatmentRate)?window.liTreatmentRate:m;window.liModuleEnabled=Math.random()<t,window.liTreatmentRate=t}};var i=n(r(5794)),o=n(r(8287)),a=n(r(5881)),s=r(9316),d=r(4051),c=r(2339),u=r(9577),l=r(4700);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}t.PRIMARY_IDS=["libp"],t.GVLID=148,t.DEFAULT_AJAX_TIMEOUT=5e3,t.DEFAULT_DELAY=500,t.MODULE_NAME="liveIntentId";var g=t.LI_PROVIDER_DOMAIN="liveintent.com",v=t.DEFAULT_REQUESTED_ATTRIBUTES={nonId:!0},m=t.DEFAULT_TREATMENT_RATE=.95;function h(e){var t,r={},n=e.nonId||e.unifiedId;return r.lipb=n?f(f({},e),{},{lipbid:n}):e,null==(t=r.lipb)||delete t.unifiedId,e.uid2&&(r.uid2={id:e.uid2,ext:{provider:g}}),e.bidswitch&&(r.bidswitch={id:e.bidswitch,ext:{provider:g}}),e.triplelift&&(r.triplelift={id:e.triplelift,ext:{provider:g}}),e.zetassp&&(r.zetassp={id:e.zetassp,ext:{provider:g}}),e.medianet&&(r.medianet={id:e.medianet,ext:{provider:g}}),e.magnite&&(r.magnite={id:e.magnite,ext:{provider:g}}),e.index&&(r.index={id:e.index,ext:{provider:g}}),e.openx&&(r.openx={id:e.openx,ext:{provider:g}}),e.pubmatic&&(r.pubmatic={id:e.pubmatic,ext:{provider:g}}),e.sovrn&&(r.sovrn={id:e.sovrn,ext:{provider:g}}),e.idCookie&&(u.coppaDataHandler.getCoppa()||(r.lipb=f(f({},r.lipb),{},{fpid:e.idCookie}),r.fpid={id:e.idCookie}),delete r.lipb.idCookie),e.triplelift&&(r.triplelift={id:e.triplelift,ext:{provider:g}}),e.thetradedesk&&(r.lipb=f(f({},r.lipb),{},{tdid:e.thetradedesk}),r.tdid={id:e.thetradedesk,ext:{rtiPartner:"TDID",provider:(0,c.getRefererInfo)().domain||g}},delete r.lipb.thetradedesk),e.sharethrough&&(r.sharethrough={id:e.sharethrough,ext:{provider:g}}),e.sonobi&&(r.sonobi={id:e.sonobi,ext:{provider:g}}),e.vidazoo&&(r.vidazoo={id:e.vidazoo,ext:{provider:g}}),r}t.eids=f(f(f({},s.UID1_EIDS),d.UID2_EIDS),{},{lipb:{getValue:function(e){return e.lipbid},source:"liveintent.com",atype:3,getEidExt:function(e){if(Array.isArray(e.segments)&&e.segments.length)return{segments:e.segments}}},bidswitch:{source:"bidswitch.net",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},medianet:{source:"media.net",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},magnite:{source:"rubiconproject.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},index:{source:"liveintent.indexexchange.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},openx:{source:"openx.net",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},pubmatic:{source:"pubmatic.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},sovrn:{source:"liveintent.sovrn.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},fpid:{source:"fpid.liveintent.com",atype:1,getValue:function(e){return e.id}},sharethrough:{source:"sharethrough.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},sonobi:{source:"liveintent.sonobi.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},triplelift:{source:"liveintent.triplelift.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},zetassp:{source:"zeta-ssp.liveintent.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},vidazoo:{source:"liveintent.vidazoo.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}}})},9762:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDM=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{e=t.top.navigator.deviceMemory}catch(t){e=void 0}return e},t.getHC=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{e=t.top.navigator.hardwareConcurrency}catch(t){e=void 0}return e},t.getHLen=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{e=t.top.history.length}catch(t){e=void 0}return e}},8604:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.objectGuard=function(e){var t={},r=[];e.forEach(function(e){e.wp&&r.push(e),e.get&&e.paths.forEach(function(r){var n=t;r.split(".").forEach(function(e){n.children=n.children||{},n.children[e]=n.children[e]||{},n=n.children[e]}),n.rule=e})});var n=(0,o.objectTransformer)(r);return function(e){for(var r,a={},s=arguments.length,d=Array(s>1?s-1:0),c=1;c<s;c++)d[c-1]=arguments[c];return{obj:function e(t,r,n){return new Proxy(t,{get:function(t,a,s){var d=Reflect.get(t,a,s);if(r.hasOwnProperty(a)){var c=r[a],u=c.children,l=c.rule;if(u&&null!=d&&"object"===(0,i.default)(d))return e(d,u,n);if(l&&(0,o.isData)(d)&&n(l))return l.get(d)}return d}})}(e,t.children||{},o.sessionedApplies.apply(void 0,[a].concat(d))),verify:(r=n.apply(void 0,[a,e].concat(d)),function(){r.forEach(function(e){return e()})})}}},t.writeProtectRule=function(e){return Object.assign({wp:!0,run:function(e,t,r,n,s){var d=r&&r.hasOwnProperty(n),c=d?r[n]:void 0,u=d&&null!=c&&"object"===(0,i.default)(c)?(0,a.deepClone)(c):c;return function(){var r=null==t?e:(0,a.deepAccess)(e,t),i=r&&(0,o.isData)(r[n]),l=i?r[n]:void 0;!d&&i&&s()?delete r[n]:(d!==i||l!==c||!(0,a.deepEqual)(l,u))&&s()&&(0,a.deepSetValue)(e,(null==t?[]:[t]).concat(n).join("."),u)}}},e)};var i=n(r(8287)),o=r(7199),a=r(4700)},894:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.guardOrtb2Fragments=void 0,t.ortb2FragmentsGuardFactory=p,t.ortb2Guard=void 0,t.ortb2GuardFactory=u;var i=n(r(5881)),o=r(3364),a=r(1851),s=r(7199),d=r(8604),c=r(4700);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.isActivityAllowed;return(0,d.objectGuard)((0,s.ortb2TransmitRules)(e).concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.isActivityAllowed;return[{name:a.ACTIVITY_ENRICH_EIDS,paths:s.ORTB_EIDS_PATHS,applies:(0,s.appliesWhenActivityDenied)(a.ACTIVITY_ENRICH_EIDS,e)},{name:a.ACTIVITY_ENRICH_UFPD,paths:s.ORTB_UFPD_PATHS,applies:(0,s.appliesWhenActivityDenied)(a.ACTIVITY_ENRICH_UFPD,e)}].map(d.writeProtectRule)}(e)))}var l=t.ortb2Guard=u();function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return function(t,r){t.global=t.global||{},t.bidder=t.bidder||{};var n=new Set(Object.keys(t.bidder)),o=[];function a(t){var n=e(t,r);return o.push(n.verify),n.obj}var s={global:a(t.global),bidder:Object.fromEntries(Object.entries(t.bidder).map(function(e){var t=(0,i.default)(e,2);return[t[0],a(t[1])]}))};return{obj:s,verify:function(){Object.entries(s.bidder).filter(function(e){var t=(0,i.default)(e,1)[0];return!n.has(t)}).forEach(function(n){var o=(0,i.default)(n,2),a=o[0],s=o[1],d={},u=e(d,r);(0,c.mergeDeep)(u.obj,s),u.verify(),t.bidder[a]=d}),o.forEach(function(e){return e()})}}}}t.guardOrtb2Fragments=p()},6107:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.EXT_PROMOTIONS=t.DEFAULT_RULES=void 0,t.moveRule=c,t.ortb25Translator=l,t.splitPath=d,t.toOrtb25=void 0;var i=n(r(939)),o=n(r(5881)),a=r(4700),s=t.EXT_PROMOTIONS=["device.sua","source.schain","regs.gdpr","regs.us_privacy","regs.gpp","regs.gpp_sid","user.consent","user.eids"];function d(e){var t=e.split(".");return[t.slice(0,t.length-1).join("."),t[t.length-1]]}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return"".concat(e,".ext.").concat(t)},r=d(e),n=(0,o.default)(r,2),i=n[0],s=n[1];return t=t(i,s),function(e){var r=(0,a.deepAccess)(e,i);if((null==r?void 0:r[s])!=null)return(0,a.deepSetValue)(e,t,r[s]),function(){return delete r[s]}}}var u=t.DEFAULT_RULES=Object.freeze([].concat((0,i.default)(s.map(function(e){return c(e)})),(0,i.default)(["app","content","site","user"].map(function(e){return function(t){var r,n=null==(r=t[e])?void 0:r.kwarray;if(null!=n){var o=(t[e].keywords||"").split(",");return Array.isArray(n)&&o.push.apply(o,(0,i.default)(n)),t[e].keywords=o.join(","),function(){return delete t[e].kwarray}}}}))));function l(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;return function(r){return t.forEach(function(t){try{var n=t(r);"function"==typeof n&&e&&n()}catch(e){(0,a.logError)("Error translating request to ORTB 2.5",e)}}),r}}t.toOrtb25=l()},9579:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProcessors=void 0,t.ortbConverter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,r=void 0===t?{}:t,o=e.processors,s=void 0===o?d:o,c=e.overrides,u=void 0===c?{}:c,l=e.imp,p=e.request,f=e.bidResponse,g=e.response,v=new WeakMap;function m(e,t,r,i){var o;return function(){return null==o&&(o=function(){var o=r.bind(this,(0,n.compose)(s()[e]||{},u[e]||{}));return t&&(o=t.bind(this,o)),function(){try{return o.apply(this,arguments)}catch(e){i.call.apply(i,[this,e].concat(Array.prototype.slice.call(arguments)))}}}()),o.apply(this,arguments)}}var h=m(a.IMP,l,function(e,t,r){var n={};return e(n,t,r),n},function(e,t,r){(0,i.logError)("Error while converting bidRequest to ORTB imp; request skipped.",{error:e,bidRequest:t,context:r})}),b=m(a.REQUEST,p,function(e,t,r,n){var i={imp:t};return e(i,r,n),i},function(e,t,r,n){throw(0,i.logError)("Error while converting to ORTB request",{error:e,imps:t,bidderRequest:r,context:n}),e}),y=m(a.BID_RESPONSE,f,function(e,t,r){var n={};return e(n,t,r),n},function(e,t,r){(0,i.logError)("Error while converting ORTB seatbid.bid to bidResponse; bid skipped.",{error:e,bid:t,context:r})}),A=m(a.RESPONSE,g,function(e,t,r,n){var i={bids:t};return e(i,r,n),i},function(e,t,r,n){throw(0,i.logError)("Error while converting from ORTB response",{error:e,bidResponses:t,ortbResponse:r,context:n}),e});return{toORTB:function(e){var t=e.bidderRequest,n=e.bidRequests,o=e.context,a=void 0===o?{}:o,s={req:Object.assign({bidRequests:n=n||t.bids},r,a),imp:{}};s.req.impContext=s.imp;var d=b(n.map(function(e){var n=Object.assign({bidderRequest:t,reqContext:s.req},r,a),o=h(e,n);if(null!=o){if(o.hasOwnProperty("id"))return Object.assign(n,{bidRequest:e,imp:o}),s.imp[o.id]=n,o;(0,i.logError)("Converted ORTB imp does not specify an id, ignoring bid request",e,o)}}).filter(Boolean),t,s.req);return s.req.bidderRequest=t,null!=d&&v.set(d,s),d},fromORTB:function(e){var t=e.request,r=e.response,n=v.get(t);if(null==n)throw Error("ortbRequest passed to `fromORTB` must be the same object returned by `toORTB`");function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign(e,{ortbRequest:t},r)}var a=Object.fromEntries((t.imp||[]).map(function(e){return[e.id,e]}));return A((r.seatbid||[]).flatMap(function(e){return(e.bid||[]).map(function(t){if(a.hasOwnProperty(t.impid)&&n.imp.hasOwnProperty(t.impid))return y(t,o(n.imp[t.impid],{imp:a[t.impid],seatbid:e,ortbResponse:r}));(0,i.logError)("ORTB response seatbid[].bid[].impid does not match any imp in request; ignoring bid",t)})}).filter(Boolean),r,o(n.req))}}};var n=r(1879),i=r(4700),o=r(6858),a=r(9092),s=r(8651),d=t.defaultProcessors=(0,i.memoize)(function(){return(0,s.mergeProcessors)(o.DEFAULT_PROCESSORS,(0,a.getProcessors)(a.DEFAULT))})},1879:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.compose=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!o.has(e)){var r=Object.entries(e);r.sort(function(e,t){return(e=e[1].priority||0)===(t=t[1].priority||0)?0:e>t?-1:1}),o.set(e,r.map(function(e){var t=(0,i.default)(e,2);return[t[0],t[1].fn]}))}var n=o.get(e).filter(function(e){var r=(0,i.default)(e,1)[0];return!t.hasOwnProperty(r)||t[r]}).map(function(e){var r=(0,i.default)(e,2),n=r[0],o=r[1];return t.hasOwnProperty(n)?t[n].bind(this,o):o});return function(){var e=this,t=Array.from(arguments);n.forEach(function(r){r.apply(e,t)})}};var i=n(r(5881)),o=new WeakMap},8651:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeProcessors=function e(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=r.shift(),a=r.length>1?e.apply(void 0,r):r[0];return Object.fromEntries(n.PROCESSOR_TYPES.map(function(e){return[e,Object.assign({},o[e],a[e])]}))};var n=r(9092)},7322:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bannerResponseProcessor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.createPixel,r=void 0===t?function(e){return(0,n.createTrackPixelHtml)(decodeURIComponent(e),n.encodeMacroURI)}:t;return function(e,t){e.mediaType===i.BANNER&&(t.adm&&t.nurl?(e.ad=t.adm,e.ad+=r(t.nurl)):t.adm?e.ad=t.adm:t.nurl&&(e.adUrl=t.nurl))}},t.fillBannerImp=function(e,t,r){if(!r.mediaType||r.mediaType===i.BANNER){var o=null==t||null==(a=t.mediaTypes)?void 0:a.banner;if(o){var a,s,d={topframe:+(!0!==(0,n.inIframe)())};o.sizes&&(null==(s=t.ortb2Imp)||null==(s=s.banner)?void 0:s.format)==null&&(d.format=(0,n.sizesToSizeTuples)(o.sizes).map(n.sizeTupleToRtbSize)),o.hasOwnProperty("pos")&&(d.pos=o.pos),e.banner=(0,n.mergeDeep)(d,e.banner)}}};var n=r(4700),i=r(4607)},6858:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROCESSORS=void 0;var i=n(r(5794)),o=n(r(5881)),a=r(4700),s=r(7322),d=r(2446),c=r(2280),u=r(8552),l=r(9092),p=r(4112),f=t.DEFAULT_PROCESSORS=(0,i.default)((0,i.default)((0,i.default)({},l.REQUEST,{fpd:{priority:99,fn:function(e,t){(0,a.mergeDeep)(e,t.ortb2)}},onlyOneClient:{priority:-99,fn:(0,p.clientSectionChecker)("ORTB request")},props:{fn:function(e,t){Object.assign(e,{id:e.id||(0,a.generateUUID)(),test:e.test||0});var r=parseInt(t.timeout,10);isNaN(r)||(e.tmax=r)}}}),l.IMP,{fpd:{priority:99,fn:function(e,t){(0,a.mergeDeep)(e,t.ortb2Imp)}},id:{fn:function(e,t){e.id=t.bidId}},banner:{fn:s.fillBannerImp},pbadslot:{fn:function(e){var t,r,n=null==(t=e.ext)||null==(t=t.data)?void 0:t.pbadslot;n&&"string"==typeof n||null==(r=e.ext)||null==(r=r.data)||delete r.pbadslot}},secure:{fn:function(e){e.secure=1}}}),l.BID_RESPONSE,{mediaType:{priority:99,fn:c.setResponseMediaType},banner:{fn:(0,s.bannerResponseProcessor)()},props:{fn:function(e,t,r){if(Object.entries({requestId:null==(c=r.bidRequest)?void 0:c.bidId,seatBidId:t.id,cpm:t.price,currency:r.ortbResponse.cur||r.currency,width:t.w,height:t.h,wratio:t.wratio,hratio:t.hratio,dealId:t.dealid,creative_id:t.crid,creativeId:t.crid,burl:t.burl,ttl:t.exp||r.ttl,netRevenue:r.netRevenue,pbsHost:null==(u=r.bidRequest)?void 0:u.pbsHost}).filter(function(e){var t=(0,o.default)(e,2);return void 0!==(t[0],t[1])}).forEach(function(t){var r=(0,o.default)(t,2),n=r[0],i=r[1];return e[n]=i}),e.meta||(e.meta={}),t.adomain&&(e.meta.advertiserDomains=t.adomain),null!=(l=t.ext)&&l.dsa&&(e.meta.dsa=t.ext.dsa),t.cat&&(e.meta.primaryCatId=t.cat[0],e.meta.secondaryCatIds=t.cat.slice(1)),t.attr&&(e.meta.attr=t.attr),null!=(p=r.ortbResponse)&&null!=(p=p.ext)&&p.responsetimemillis){var n,i,a,s,d,c,u,l,p,f,g,v,m,h,b,y,A,I=r.ortbResponse.ext.responsetimemillis,E=null==r||null==(A=r.bidRequest)?void 0:A.bidder;I[E]&&(e.responseTimeMillis=I[E])}if(null!=(f=r.ortbResponse)&&null!=(f=f.ext)&&f.seatnonbid&&(null==(g=r.ortbResponse)||null==(g=g.ext)?void 0:g.seatnonbid.length)>0){var S,O,_=null==r||null==(S=r.bidRequest)?void 0:S.bidder,T=r.ortbResponse.ext.seatnonbid.find(function(e){return e.seat===_});T&&(e.seatNonBidStatusCode=null==(O=(T.nonbid||[])[0])?void 0:O.statuscode)}null!=(v=t.ext)&&v.eventtrackers&&(e.eventtrackers=(null!=(n=e.eventtrackers)?n:[]).concat(t.ext.eventtrackers)),null!=(m=t.ext)&&m.dspid&&(null!=(i=e.meta).dspid||(i.dspid=t.ext.dspid)),null!=(h=t.ext)&&h.networkId&&(null!=(a=e.meta).networkId||(a.networkId=t.ext.networkId)),null!=(b=t.ext)&&b.networkName&&(null!=(s=e.meta).networkName||(s.networkName=t.ext.networkName)),null!=(y=t.ext)&&null!=(y=y.prebid)&&null!=(y=y.meta)&&y.demandSource&&(null!=(d=e.meta).demandSource||(d.demandSource=t.ext.prebid.meta.demandSource))}}});f[l.IMP].native={fn:u.fillNativeImp},f[l.BID_RESPONSE].native={fn:u.fillNativeResponse},f[l.IMP].video={fn:d.fillVideoImp},f[l.BID_RESPONSE].video={fn:d.fillVideoResponse}},2280:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ORTB_MTYPES=void 0,t.setResponseMediaType=function(e,t,r){if(!e.mediaType){var n=r.mediaType;if(!n&&!i.hasOwnProperty(t.mtype))throw Error("Cannot determine mediaType for response");e.mediaType=n||i[t.mtype]}};var n=r(4607),i=t.ORTB_MTYPES={1:n.BANNER,2:n.VIDEO,4:n.NATIVE}},8552:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fillNativeImp=function(e,t,r){if(!r.mediaType||r.mediaType===i.NATIVE){var o,a=t.nativeOrtbRequest;a&&(null!=(o=(a=Object.assign({},r.nativeRequest,a)).assets)&&o.length?e.native=(0,n.mergeDeep)({},{request:JSON.stringify(a),ver:a.ver},e.native):(0,n.logWarn)("mediaTypes.native is set, but no assets were specified. Native request skipped.",t))}},t.fillNativeResponse=function(e,t){if(e.mediaType===i.NATIVE){var r;if(r="string"==typeof t.adm?JSON.parse(t.adm):t.adm,(0,n.isPlainObject)(r)&&Array.isArray(r.assets))e.native={ortb:r};else throw Error("ORTB native response contained no assets")}};var n=r(4700),i=r(4607)},2446:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.fillVideoImp=function(e,t,r){if(!r.mediaType||r.mediaType===a.VIDEO){var n,d=null==t||null==(n=t.mediaTypes)?void 0:n.video;if(!(0,o.isEmpty)(d)){var c=Object.fromEntries(Object.entries(d).filter(function(e){var t=(0,i.default)(e,1)[0];return s.ORTB_VIDEO_PARAMS.has(t)}));if(d.playerSize){var u=(0,o.sizesToSizeTuples)(d.playerSize).map(o.sizeTupleToRtbSize);u.length>1&&(0,o.logWarn)("video request specifies more than one playerSize; all but the first will be ignored"),Object.assign(c,u[0])}e.video=(0,o.mergeDeep)(c,e.video)}}},t.fillVideoResponse=function(e,t,r){if(e.mediaType===a.VIDEO){var n,i;if(null!=r&&null!=(n=r.imp)&&null!=(n=n.video)&&n.w&&null!=r&&null!=(i=r.imp)&&null!=(i=i.video)&&i.h){var o=[r.imp.video.w,r.imp.video.h];e.playerWidth=o[0],e.playerHeight=o[1]}t.adm&&(e.vastXml=t.adm),t.nurl&&(e.vastUrl=t.nurl)}};var i=n(r(5881)),o=r(4700),a=r(4607),s=r(5236)},106:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pbsExtensions=void 0;var n=r(8651),i=r(5480),o=r(9092),a=r(9579);t.pbsExtensions=(0,r(4700).memoize)(function(){return(0,n.mergeProcessors)((0,a.defaultProcessors)(),i.PBS_PROCESSORS,(0,o.getProcessors)(o.PBS))})},606:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setImpAdUnitCode=function(e,t){var r=t.adUnitCode;r&&(0,n.deepSetValue)(e,"ext.prebid.adunitcode",r)};var n=r(4700)},8034:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.setRequestExtPrebidAliases=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=n.am,d=void 0===s?i.default:s;if(d.aliasRegistry[t.bidderCode]){var c=d.bidderRegistry[t.bidderCode];if(!c||!c.getSpec().skipPbsAliasing){(0,a.deepSetValue)(e,"ext.prebid.aliases.".concat(t.bidderCode),d.aliasRegistry[t.bidderCode]);var u,l=o.config.getConfig("gvlMapping.".concat(t.bidderCode))||(null==c||null==(u=c.getSpec)?void 0:u.call(c).gvlid);l&&(0,a.deepSetValue)(e,"ext.prebid.aliasgvlids.".concat(t.bidderCode),l)}}};var i=n(r(9577)),o=r(9926),a=r(4700)},4161:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.addEventTrackers=function(e,t){var r;e.eventtrackers=e.eventtrackers||[],[[t.burl,o.EVENT_TYPE_IMPRESSION],[null==t||null==(r=t.ext)||null==(r=r.prebid)||null==(r=r.events)?void 0:r.win,o.EVENT_TYPE_WIN]].filter(function(t){var r=(0,i.default)(t,2),n=r[0],a=r[1];return n&&null==e.eventtrackers.find(function(e){var t=e.method,r=e.event,i=e.url;return r===a&&t===o.TRACKER_METHOD_IMG&&i===n})}).forEach(function(t){var r=(0,i.default)(t,2),n=r[0],a=r[1];e.eventtrackers.push({method:o.TRACKER_METHOD_IMG,event:a,url:n})})};var i=n(r(5881)),o=r(491)},1714:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.SUPPORTED_MEDIA_TYPES=void 0,t.extPrebidMediaType=function(e,t,r){var n,i=r.mediaType;!i&&(i=a.ORTB_MTYPES.hasOwnProperty(t.mtype)?a.ORTB_MTYPES[t.mtype]:null==(n=t.ext)||null==(n=n.prebid)?void 0:n.type,s.hasOwnProperty(i)||(i=o.BANNER)),e.mediaType=i};var i=n(r(5794)),o=r(4607),a=r(2280),s=t.SUPPORTED_MEDIA_TYPES=(0,i.default)((0,i.default)((0,i.default)({},o.BANNER,"banner"),o.NATIVE,"native"),o.VIDEO,"video")},4458:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setImpBidParams=function(e,t){var r=t.params;r&&(0,n.deepSetValue)(e,"ext.prebid.bidder.".concat(t.bidder),r)};var n=r(4700)},5480:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.PBS_PROCESSORS=void 0;var i=n(r(5794)),o=n(r(5881)),a=r(9092),s=r(4700),d=r(1714),c=r(8034),u=r(4458),l=r(606),p=r(6651),f=r(7562),g=r(4161);t.PBS_PROCESSORS=(0,i.default)((0,i.default)((0,i.default)((0,i.default)({},a.REQUEST,{extPrebid:{fn:p.setRequestExtPrebid},extPrebidChannel:{fn:p.setRequestExtPrebidChannel},extPrebidAliases:{fn:c.setRequestExtPrebidAliases}}),a.IMP,{params:{fn:u.setImpBidParams},adUnitCode:{fn:l.setImpAdUnitCode}}),a.BID_RESPONSE,{mediaType:{fn:d.extPrebidMediaType,priority:99},videoCache:{fn:f.setBidResponseVideoCache,priority:-10},bidderCode:{fn:function(e,t,r){var n;e.bidderCode=r.seatbid.seat,e.adapterCode=(0,s.deepAccess)(t,"ext.prebid.meta.adaptercode")||(null==(n=r.bidRequest)?void 0:n.bidder)||e.bidderCode}},pbsBidId:{fn:function(e,t){var r=(0,s.deepAccess)(t,"ext.prebid.bidid");(0,s.isStr)(r)&&(e.pbsBidId=r)}},adserverTargeting:{fn:function(e,t){var r=(0,s.deepAccess)(t,"ext.prebid.targeting");(0,s.isPlainObject)(r)&&(e.adserverTargeting=r)}},extPrebidMeta:{fn:function(e,t){e.meta=(0,s.mergeDeep)({},(0,s.deepAccess)(t,"ext.prebid.meta"),e.meta)}},pbsWinTrackers:{fn:g.addEventTrackers}}),a.RESPONSE,{serverSideStats:{fn:function(e,t,r){Object.entries({errors:"serverErrors",responsetimemillis:"serverResponseTimeMs"}).forEach(function(e){var n=(0,o.default)(e,2),i=n[0],a=n[1],d=(0,s.deepAccess)(t,"ext.".concat(i,".").concat(r.bidderRequest.bidderCode));d&&(r.bidderRequest[a]=d,r.bidRequests.forEach(function(e){return e[a]=d}))})}}})},6651:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRequestExtPrebid=function(e,t){var r;(0,n.deepSetValue)(e,"ext.prebid",(0,n.mergeDeep)({auctiontimestamp:t.auctionStart,targeting:{includewinners:!0,includebidderkeys:!1}},null==(r=e.ext)?void 0:r.prebid)),i.config.getConfig("debug")&&(e.ext.prebid.debug=!0)},t.setRequestExtPrebidChannel=function(e){var t;(0,n.deepSetValue)(e,"ext.prebid.channel",Object.assign({name:"pbjs",version:(0,o.getGlobal)().version},null==(t=e.ext)||null==(t=t.prebid)?void 0:t.channel))};var n=r(4700),i=r(9926),o=r(7045)},7562:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setBidResponseVideoCache=function(e,t){if(e.mediaType===n.VIDEO){var r=(0,i.deepAccess)(t,"ext.prebid.cache.vastXml")||{},o=r.cacheId,a=r.url;if(!o||!a){var s=(0,i.deepAccess)(t,"ext.prebid.targeting")||{},d=s.hb_uuid,c=s.hb_cache_host,u=s.hb_cache_path;d&&c&&u&&(o=d,a="https://".concat(c).concat(u,"?uuid=").concat(d))}o&&a&&Object.assign(e,{videoCacheKey:o,vastUrl:a})}};var n=r(4607),i=r(4700)},5191:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OPENRTB=void 0,t.interpretNativeAd=s,t.interpretNativeBid=function(e){return{requestId:e.impid,mediaType:i.NATIVE,cpm:e.price,creativeId:e.adid||e.crid,width:1,height:1,ttl:55,meta:{advertiserDomains:e.adomain},netRevenue:!0,currency:"USD",native:s((0,o.macroReplace)(e.adm,e.price))}};var n=r(4700),i=r(4607),o=r(8203),a=t.OPENRTB={NATIVE:{IMAGE_TYPE:{ICON:1,MAIN:3},ASSET_ID:{TITLE:1,IMAGE:2,ICON:3,BODY:4,SPONSORED:5,CTA:6},DATA_ASSET_TYPE:{SPONSORED:1,DESC:2,CTA_TEXT:12}}};function s(e){try{var t=JSON.parse(e).native;if(t){var r={clickUrl:encodeURI(t.link.url),impressionTrackers:t.imptrackers||t.eventtrackers[0].url};return t.link.clicktrackers&&(r.clickTrackers=t.link.clicktrackers[0]),t.assets.forEach(function(e){switch(e.id){case a.NATIVE.ASSET_ID.TITLE:r.title=(0,n.deepAccess)(e,"title.text");break;case a.NATIVE.ASSET_ID.IMAGE:r.image={url:encodeURI(e.img.url),width:(0,n.deepAccess)(e,"img.w"),height:(0,n.deepAccess)(e,"img.h")};break;case a.NATIVE.ASSET_ID.ICON:r.icon={url:encodeURI(e.img.url),width:(0,n.deepAccess)(e,"img.w"),height:(0,n.deepAccess)(e,"img.h")};break;case a.NATIVE.ASSET_ID.BODY:r.body=(0,n.deepAccess)(e,"data.value");break;case a.NATIVE.ASSET_ID.SPONSORED:r.sponsoredBy=(0,n.deepAccess)(e,"data.value");break;case a.NATIVE.ASSET_ID.CTA:r.cta=(0,n.deepAccess)(e,"data.value")}}),r}}catch(e){(0,n.logInfo)("Error in bidUtils interpretNativeAd"+e)}}},8203:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildBidResponse=function(e){var t=e.body,r=[];return t.seatbid.forEach(function(e){e.bid.forEach(function(e){if(e.price)if(0===e.adm.indexOf("{")){var t=(0,s.interpretNativeBid)(e);r.push(t)}else r.push({requestId:e.impid,cpm:e.price,width:e.w,height:e.h,creativeId:e.crid,ad:d(e.adm,e.price),currency:"USD",netRevenue:!0,ttl:300,meta:{advertiserDomains:e.adomain||""}})})}),r},t.buildRequests=void 0,t.interpretResponse=function(e){var t=[];return e.body.seatbid.forEach(function(e){e.bid.forEach(function(e){t.push({requestId:e.impid,cpm:e.price,width:e.w,height:e.h,creativeId:e.crid,ad:d(e.adm,e.price),currency:"USD",netRevenue:!0,ttl:300,meta:{advertiserDomains:e.adomain||""}})})}),t},t.macroReplace=d,t.onBidWon=function(e){if(e.nurl){var t=(0,i.replaceAuctionPrice)(e.nurl,e.price);(0,o.ajax)(t)}};var n=r(8172),i=r(4700),o=r(7316),a=r(28),s=r(5191);function d(e,t){return(0,i.replaceAuctionPrice)(e,t)}t.buildRequests=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;t=(0,n.convertOrtbRequestToProprietaryNative)(t);var o=Intl.DateTimeFormat().resolvedOptions().timeZone,s={id:t[0].auctionId,imp:t.map(function(e){var t,r,n;return r=0,n={id:(t=e).bidId,bidFloor:(0,a.getBidFloor)(t)},"native"===t.mediaType||(0,i.deepAccess)(t,"mediaTypes.native")?n.native=function(e){if("native"===e.mediaType||(0,i.deepAccess)(e,"mediaTypes.native"))return{request:JSON.stringify({assets:e.nativeOrtbRequest.assets||e.nativeParams.ortb.assets,ver:"1.2"})}}(t):n.banner=function(e){if(e.mediaTypes.banner)return{format:(e.mediaTypes.banner.sizes||e.sizes).map(function(e){return{w:e[0],h:e[1]}})}}(t),n}),user:{id:t[0].userId.pubcid||"",buyeruid:t[0].buyerUid||"",geo:{country:t[0].params.region||o,region:t[0].params.region||o}},device:t[0].ortb2.device,site:t[0].ortb2.site,source:t[0].ortb2.source,bcat:t[0].ortb2.bcat||t[0].params.bcat,badv:t[0].ortb2.badv||t[0].params.badv,wlang:t[0].ortb2.wlang||t[0].params.wlang};return s.device&&"undefined"!=s.device&&(s.device.geo={country:s.user.geo.country,region:s.user.geo.region}),s.site.publisher={publisherId:t[0].params.publisherId},(0,a.consentCheck)(r,s),{method:"POST",url:e,data:s}}}},28:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.bidWinReport=function(e){var t=(0,a.deepAccess)(e,"adserverTargeting.hb_pb")||"";(0,a.isStr)(e.nurl)&&""!==e.nurl&&(e.nurl=e.nurl.replace(/\${AUCTION_PRICE}/,t),(0,a.triggerPixel)(e.nurl))},t.buildUserSyncs=t.buildBidRequests=void 0,t.consentCheck=l,t.getBidFloor=u,t.interpretResponse=function(e){for(var t=[],r=0;r<e.body.length;r++){var n=e.body[r];if(function(e){if(!e.requestId||!e.cpm||!e.creativeId||!e.ttl||!e.currency||!e.meta)return!1;switch(e.mediaType){case s.BANNER:return!!(e.width&&e.height&&e.ad);case s.VIDEO:return!!(e.vastXml||e.vastUrl);case s.NATIVE:return!!(e.native&&e.native.impressionTrackers);default:return!1}}(n)){var i=n.adomain&&n.adomain.length?n.adomain:[];n.meta=c(c({},n.meta),{},{advertiserDomains:i}),t.push(n)}}return t},t.isBidRequestValid=function(e){return!!(e.bidId&&e.params&&e.params.placementId)};var i=n(r(5794)),o=r(9926),a=r(4700),s=r(4607);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e){if(!(0,a.isFn)(e.getFloor))return(0,a.deepAccess)(e,"params.bidFloor",0);try{var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return null==t?void 0:t.floor}catch(e){return 0}}function l(e,t){e&&(e.uspConsent&&(t.ccpa=e.uspConsent),e.gdprConsent&&(t.gdpr=e.gdprConsent),e.gppConsent&&(t.gpp=e.gppConsent))}t.buildBidRequests=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=(0,a.getWindowTop)(),i=n.location,o=[],d={deviceWidth:n.screen.width,deviceHeight:n.screen.height,language:navigator&&navigator.language?navigator.language.split("-")[0]:"",host:i.host,page:i.pathname,placements:o};l(r,d);for(var c=t.length,p=0;p<c;p++){var f=t[p],g={placementId:f.params.placementId,bidId:f.bidId,schain:f.schain||{},bidfloor:u(f)};void 0!==f.userId&&(g.userId=f.userId);var v=f.mediaTypes;v&&v[s.BANNER]&&v[s.BANNER].sizes&&(g.sizes=v[s.BANNER].sizes,g.adFormat=s.BANNER),o.push(g)}return{method:"POST",url:e,data:d}}},t.buildUserSyncs=function(e,t,r,n,i){var a=e.iframeEnabled?"iframe":"image",s=i.includes("ck.2trk.info"),d=s?i:"".concat(i,"/").concat(a,"?pbjs=1");if(r&&r.consentString?"boolean"==typeof r.gdprApplies?d+="&gdpr=".concat(Number(r.gdprApplies),"&gdpr_consent=").concat(r.consentString):d+="&gdpr=0&gdpr_consent=".concat(r.consentString):d+=s?"&gdpr=0&gdpr_consent=":"",s)d+=n?"&us_privacy=".concat(n):"&us_privacy=",d+=e.iframeEnabled?"&t=4":"&t=2";else{n&&n.consentString&&(d+="&ccpa_consent=".concat(n.consentString));var c=+!!o.config.getConfig("coppa");d+="&coppa=".concat(c)}return[{type:a,url:d}]}},175:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBidFromResponse=function(e,t){return e?e.bid?e.bid[0]||(0,n.logError)(t.noBid):(0,n.logError)(t.hasNoArrayOfBids+JSON.stringify(e)):(0,n.logError)(t.emptySeatbid),e&&e.bid&&e.bid[0]};var n=r(4700)},5572:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTimeToFirstByte=function(e){var t=e.performance||e.webkitPerformance||e.msPerformance||e.mozPerformance,r=t&&"function"==typeof t.getEntriesByType&&"[object Function]"===Object.prototype.toString.call(t.getEntriesByType)&&t.getEntriesByType("navigation")[0]&&t.getEntriesByType("navigation")[0].responseStart&&t.getEntriesByType("navigation")[0].requestStart&&t.getEntriesByType("navigation")[0].responseStart>0&&t.getEntriesByType("navigation")[0].requestStart>0&&Math.round(t.getEntriesByType("navigation")[0].responseStart-t.getEntriesByType("navigation")[0].requestStart);if(r)return r.toString();var n=t&&t.timing.responseStart&&t.timing.requestStart&&t.timing.responseStart>0&&t.timing.requestStart>0&&t.timing.responseStart-t.timing.requestStart;return n?n.toString():""}},2753:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.timeoutQueue=function(){var e=[];return{submit:function(t,r,n){var i=[r,setTimeout(function(){e.splice(e.indexOf(i),1),n()},t)];e.push(i)},resume:function(){for(;e.length;){var t=e.shift(),r=(0,i.default)(t,2),n=r[0];clearTimeout(r[1]),n()}}}};var i=n(r(5881))},1648:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertTypes=function(e,t){return Object.keys(e).forEach(function(r){if(t[r]){if((0,n.isFn)(e[r]))t[r]=e[r](t[r]);else{var i,o;t[r]=(i=e[r],o=t[r],"string"===i?o&&o.toString():"number"===i?Number(o):o)}isNaN(t[r])&&delete t.key}}),t};var n=r(4700)},9316:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.UID1_EIDS=void 0;var i=n(r(5794));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}t.UID1_EIDS={tdid:{source:"adserver.org",atype:1,getValue:function(e){return e.id?e.id:e},getUidExt:function(e){return a(a({},{rtiPartner:"TDID"}),e.ext)}}}},4051:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UID2_EIDS=void 0,t.UID2_EIDS={uid2:{source:"uidapi.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}}}},426:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryAppendQueryString=function(e,t,r){return r?e+t+"="+encodeURIComponent(r)+"&":e}},8826:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserSyncParams=function(e,t,r){var n,i={};return e&&("boolean"==typeof e.gdprApplies&&(i.gdpr=Number(e.gdprApplies)),"string"==typeof e.consentString&&(i.gdpr_consent=e.consentString)),t&&(i.us_privacy=encodeURIComponent(t)),null!=r&&r.gppString&&(i.gpp=r.gppString,i.gpp_sid=null==(n=r.applicableSections)?void 0:n.toString()),i}},2882:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewportCoordinates=function(){try{var e=(0,n.getWindowTop)(),t=e.scrollY,r=e.scrollX,o=i(),a=o.height,s=o.width;return{top:t,right:r+s,bottom:t+a,left:r}}catch(e){return{}}},t.getViewportSize=i;var n=r(4700);function i(){var e=(0,n.getWinDimensions)();try{var t=e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight||0;return{width:e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth||0,height:t}}catch(e){return{}}}},1845:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.auctionStore=void 0,t.weakStore=i;var n=r(3479);function i(e){var t=new WeakMap;return function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e(r);if(null!=i)return t.has(i)||t.set(i,n),t.get(i)}}t.auctionStore=function(){return i(function(e){return n.auctionManager.index.getAuction({auctionId:e})})}},1778:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t;return{parse:function(t){return(!e&&(e=new DOMParser),e).parseFromString(t,"application/xml")},serialize:function(e){return(!t&&(t=new XMLSerializer),t).serializeToString(e)}}}},447:function(e,t,r){"use strict";var n=r(2100),i=n(r(5794)),o=n(r(4132)),a=n(r(5881)),s=r(7045),d=r(4700),c=r(7316),u=r(2508),l=r(9577),p=r(1122),f=r(4840),g=r(9570),v=["enabledStorageTypes","expires"],m="33acrossId",h="33acrossIdFp",b="33acrossIdTp",y="33acrossIdHm",A=(0,p.getStorageManager)({moduleType:f.MODULE_TYPE_UID,moduleName:m}),I={domainOverride:(0,g.domainOverrideToRootDomain)(A,m)};function E(e){if(A.cookiesAreEnabled()){var t=new Date(0).toUTCString();A.setCookie(e,"",t,"Lax",I.domainOverride())}A.removeDataFromLocalStorage(e)}function S(e,t){var r;return t.find(function(t){return t===p.STORAGE_TYPE_COOKIES?r=A.getCookie(e):t===p.STORAGE_TYPE_LOCALSTORAGE&&(r=A.getDataFromLocalStorage(e)),!!r}),r}var O={name:m,gvlid:58,decode:function(e){return(0,i.default)({},m,{envelope:e})},getId:function(e){var t,r=e.params,n=void 0===r?{}:r,i=e.enabledStorageTypes,s=void 0===i?[]:i,u=e.storage,f=void 0===u?{}:u,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},O=g.gdpr;if("string"!=typeof n.pid)return void(0,d.logError)("".concat(m,": Submodule requires a partner ID to be defined"));if((null==O?void 0:O.gdprApplies)===!0)return void(0,d.logWarn)("".concat(m,": Submodule cannot be used where GDPR applies"));var _=n.storeFpid,T=void 0===_||_,w=n.storeTpid,C=void 0===w||w,x=n.apiUrl,P=void 0===x?"https://lexicon.33across.com/v1/envelope":x,D=n.pid,R=n.hem||(null==(t=window._33across)||null==(t=t.hem)?void 0:t.sha256);return{callback:function(e){(0,c.ajaxBuilder)(1e4)(P,{success:function(t){var r,n,i,c,u,l,g,S,O,_,w,x,P,D={};try{D=(r=JSON.parse(t)).succeeded?r.data.envelope?{envelope:r.data.envelope,fp:r.data.fp,tp:r.data.tp}:((0,d.logMessage)("".concat(m,": No envelope was received")),{}):("Cookied User"==r.error?(0,d.logMessage)("".concat(m,": Unsuccessful response").concat(" ",r.error)):(0,d.logError)("".concat(m,": Unsuccessful response").concat(" ",r.error)),{})}catch(e){(0,d.logError)("".concat(m,": ID reading error:"),e)}D.envelope||["","_last","_exp","_cst"].forEach(function(e){E("".concat(m).concat(e))}),n={fp:D.fp,tp:D.tp,hem:R},c=(i={storeFpid:T,storeTpid:C,envelopeAvailable:!!D.envelope,enabledStorageTypes:s,expires:f.expires}).enabledStorageTypes,u=i.expires,(l=(0,o.default)(i,v),g=n.tp,S=n.fp,O=n.hem,_=l.storeFpid,w=l.storeTpid,x=l.envelopeAvailable,P=[],_&&P.push([h,S,!S],[y,O,!x]),w&&P.push([b,g,!g]),P).forEach(function(e){!function(e,t){var r,n,i=(0,a.default)(e,3),o=i[0],s=i[1];if(i[2])return E(o);s&&(r=t.enabledStorageTypes,n=t.expires,r.forEach(function(e){if(e===p.STORAGE_TYPE_COOKIES){var t=new Date(Date.now()+864e5*n);A.setCookie(o,s,t.toUTCString(),"Lax",I.domainOverride())}else e===p.STORAGE_TYPE_LOCALSTORAGE&&A.setDataInLocalStorage(o,s)}))}(e,{enabledStorageTypes:c,expires:u})}),e(D.envelope)},error:function(t){(0,d.logError)("".concat(m,": ID error response"),t),e()}},function(e,t,r){var n=e.pid,i=e.pubProvidedHem,o=l.uspDataHandler.getConsentData(),a=l.coppaDataHandler.getCoppa(),s=l.gppDataHandler.getConsentData(),d={pid:n,gdpr:0,src:"pbjs",ver:"9.40.0",coppa:Number(a)};if(o&&(d.us_privacy=o),s){var c=s.gppString,u=s.applicableSections;d.gpp=void 0===c?"":c,d.gpp_sid=encodeURIComponent((void 0===u?[]:u).join(","))}null!=t&&t.consentString&&(d.gdpr_consent=t.consentString);var p=S(h,r);p&&(d.fp=encodeURIComponent(p));var f=S(b,r);f&&(d.tp=encodeURIComponent(f));var g=i||S(y,r);return g&&(d.sha256=encodeURIComponent(g)),d}({pid:D,pubProvidedHem:R},O,s),{method:"GET",withCredentials:!0})}}},domainOverride:I.domainOverride,eids:{"33acrossId":{source:"33across.com",atype:1,getValue:function(e){return e.envelope}}}};(0,u.submodule)("userId",O),(0,s.registerModule)("33acrossIdSystem")},5635:function(e,t,r){"use strict";var n,i,o,a,s=r(2100)(r(5881)),d=r(7045),c=r(9926),u=r(3364);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var p="allowActivities",f="".concat(p," config");n=u.registerActivityControl,i=new Map,o=new Map,a=new Map,c.config.getConfig(p,function(e){a.clear(),Array.from(i.values()).flatMap(function(e){return Array.from(e.values())}).forEach(function(e){return e()}),i.clear(),Array.from(o.values()).forEach(function(e){return e()}),o.clear(),Object.entries(e[p]).forEach(function(e){var t=(0,s.default)(e,2),r=t[0],d=t[1];!1===d.default&&(o.has(r)||o.set(r,n(r,f,function(){return{allow:!1,reason:"activity denied by default"}},1/0)));var c=new Map;a.set(r,c),(d.rules||[]).forEach(function(e){var t=null==e.priority?1:e.priority;c.has(t)||c.set(t,[]),c.get(t).push(e)}),Array.from(c.keys()).forEach(function(e){var t;return i.has(r)||i.set(r,new Map),void(!(t=i.get(r)).has(e)&&t.set(e,n(r,f,function(t){var n,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(a.get(r).get(e));try{for(i.s();!(n=i.n()).done;){var o=n.value;if(!o.condition||o.condition(Object.fromEntries(Object.entries(t).filter(function(e){return!(0,s.default)(e,1)[0].startsWith("_")}))))return{allow:o.allow,reason:o}}}catch(e){i.e(e)}finally{i.f()}},e)))})})}),(0,d.registerModule)("allowActivities")},7630:function(e,t,r){"use strict";var n=r(2100),i=n(r(8287)),o=n(r(939)),a=r(7045),s=r(4700),d=r(8915),c=r(9926),u=r(523),l=r(4607),p=r(1617),f=r(5236),g=r(1122),v=r(3951),m=r(8700),h=r(8172),b=r(2829),y=r(2445),A=r(7359),I=r(1648),E=r(7231),S="appnexus",O=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],_=["minduration","maxduration","skip","skipafter","playbackmethod","api","startdelay","placement","plcmt"],T=["age","externalUid","external_uid","segments","gender","dnt","language"],w=["geo","device_id"],C=["enabled","dongle","member_id","debug_timeout"],x={apn_debug_dongle:"dongle",apn_debug_member_id:"member_id",apn_debug_timeout:"debug_timeout"},P={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5,"in-feed":6,interstitial:7,accompanying_content_pre_roll:8,accompanying_content_mid_roll:9,accompanying_content_post_roll:10}},D={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},R=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,k=(0,g.getStorageManager)({bidderCode:S}),j=new Map([[1,"Mobile/Tablet - General"],[2,"Personal Computer"],[3,"Connected TV"],[4,"Phone"],[5,"Tablet"],[6,"Connected Device"],[7,"Set Top Box"],[8,"OOH Device"]]),N={code:S,gvlid:32,aliases:A.appnexusAliases,supportedMediaTypes:[l.BANNER,l.VIDEO,l.NATIVE],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.placement_id||e.params.member&&(e.params.invCode||e.params.inv_code))},buildRequests:function(e,t){var r,n,i,a,d,u,l,f=(e=(0,h.convertOrtbRequestToProprietaryNative)(e)).map(B),g=(0,p.find)(e,M),v={};!0===c.config.getConfig("coppa")&&(v={coppa:!0}),g&&Object.keys(g.params.user).filter(function(e){return(0,p.includes)(T,e)}).forEach(function(e){var t=(0,A.convertCamelToUnderscore)(e);if("segments"===e&&(0,s.isArray)(g.params.user[e])){var r=[];g.params.user[e].forEach(function(e){(0,s.isNumber)(e)?r.push({id:e}):(0,s.isPlainObject)(e)&&r.push(e)}),v[t]=r}else"segments"!==e&&(v[t]=g.params.user[e])});var b=(0,p.find)(e,q);b&&b.params&&b.params.app&&(u={},Object.keys(b.params.app).filter(function(e){return(0,p.includes)(w,e)}).forEach(function(e){return u[e]=b.params.app[e]}));var S=(0,p.find)(e,L);S&&S.params&&b.params.app&&b.params.app.id&&(l={appid:S.params.app.id});var O={},_={},P=k.getCookie("apn_prebid_debug")||null;if(P)try{O=JSON.parse(P)}catch(e){(0,s.logError)("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{Object.keys(x).forEach(function(e){var t=(0,s.getParameterByName)(e);(0,s.isStr)(t)&&""!==t&&(O[x[e]]=t,O.enabled=!0)}),O=(0,I.convertTypes)({member_id:"number",debug_timeout:"number"},O);var D=(0,p.find)(e,F);D&&D.debug&&(O=D.debug)}O&&O.enabled&&Object.keys(O).filter(function(e){return(0,p.includes)(C,e)}).forEach(function(e){_[e]=O[e]});var R=(0,p.find)(e,V),N=R?parseInt(R.params.member,10):0,U=e[0].schain,H=(0,p.find)(e,W),Y={tags:(0,o.default)(f),user:v,sdk:{source:"pbjs",version:"9.40.0"},schain:U};H&&(Y.iab_support={omidpn:"Appnexus",omidpv:"9.40.0"}),N>0&&(Y.member_id=N),b&&(Y.device=u),S&&(Y.app=l),null!=t&&null!=(i=t.ortb2)&&i.device&&(Y.device=Y.device||{},(0,s.mergeDeep)(Y.device,Object.keys(n={useragent:(r=t.ortb2.device).ua,devicetype:j.get(r.devicetype),make:r.make,model:r.model,os:r.os,os_version:r.osv,w:r.w,h:r.h,ppi:r.ppi,pxratio:r.pxratio}).reduce(function(e,t){return n[t]&&(e[t]=n[t]),e},{})));var J=(0,s.deepClone)(t&&t.ortb2),K=(0,s.deepClone)(c.config.getConfig("appnexusAuctionKeywords"))||{},Q=(0,y.getANKeywordParam)(J,K);if(Q.length>0&&(Y.keywords=Q),c.config.getConfig("adpod.brandCategoryExclusion")&&(Y.brand_category_uniqueness=!0),_.enabled&&(Y.debug=_,(0,s.logInfo)("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(_,null,4))),t&&t.gdprConsent&&(Y.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~"))){var X=t.gdprConsent.addtlConsent,$=X.substring(X.indexOf("~")+1);Y.gdpr_consent.addtl_consent=$.split(".").map(function(e){return parseInt(e,10)})}if(t&&t.uspConsent&&(Y.us_privacy=t.uspConsent),null!=t&&t.gppConsent?Y.privacy={gpp:t.gppConsent.gppString,gpp_sid:t.gppConsent.applicableSections}:null!=t&&null!=(a=t.ortb2)&&null!=(a=a.regs)&&a.gpp&&(Y.privacy={gpp:t.ortb2.regs.gpp,gpp_sid:t.ortb2.regs.gpp_sid}),t&&t.refererInfo){var Z={rd_ref:encodeURIComponent(t.refererInfo.topmostLocation),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map(function(e){return encodeURIComponent(e)}).join(",")},ee=t.refererInfo.canonicalUrl;(0,s.isStr)(ee)&&""!==ee&&(Z.rd_can=ee),Y.referrer_detection=Z}if((0,p.find)(e,G)&&e.filter(G).forEach(function(e){var t=function(e,t){var r,n,i,a,s,d=t.mediaTypes.video,c=d.durationRangeSec,u=d.requireExactDuration,l=(n=(r=t.mediaTypes.video).adPodDurationSec,i=r.durationRangeSec,a=r.requireExactDuration,s=Math.floor(n/Math.min.apply(Math,(0,o.default)(i))),a?Math.max(s,i.length):s),p=Math.max.apply(Math,(0,o.default)(c)),f=e.filter(function(e){return e.uuid===t.bidId}),g=A.fill.apply(void 0,(0,o.default)(f).concat([l]));if(u){var v=Math.ceil(l/c.length),m=(0,E.chunk)(g,v);c.forEach(function(e,t){m[t].map(function(t){z(t,"minduration",e),z(t,"maxduration",e)})})}else g.map(function(e){return z(e,"maxduration",p)});return g}(f,e),r=Y.tags.filter(function(t){return t.uuid!==e.bidId});Y.tags=[].concat((0,o.default)(r),(0,o.default)(t))}),e[0].userId){var et=[];e[0].userIdAsEids&&e[0].userIdAsEids.forEach(function(e){e&&e.uids&&!(e.uids.length<1)&&e.uids.forEach(function(t){var r={source:e.source,id:t.id};"adserver.org"==e.source||"adsrvr.org"==e.source?r.rti_partner="TDID":"uidapi.com"==e.source&&(r.rti_partner="UID2"),et.push(r)})}),et.length&&(Y.eids=et)}if(null!=t&&null!=(d=t.ortb2)&&null!=(d=d.regs)&&null!=(d=d.ext)&&d.dsa){var er=t.ortb2.regs.ext.dsa,en={};if(["dsarequired","pubrender","datatopub"].forEach(function(e){(0,s.isNumber)(er[e])&&(en[e]=er[e])}),(0,s.isArray)(er.transparency)&&er.transparency.every(function(e){return(0,s.isPlainObject)(e)})){var ei=[];er.transparency.forEach(function(e){(0,s.isStr)(e.domain)&&""!=e.domain&&(0,s.isArray)(e.dsaparams)&&e.dsaparams.every(function(e){return(0,s.isNumber)(e)})&&ei.push(e)}),ei.length>0&&(en.transparency=ei)}(0,s.isEmpty)(en)||(Y.dsa=en)}return f[0].publisher_id&&(Y.publisher_id=f[0].publisher_id),function(e,t){var r=[],n={withCredentials:!0},i="https://ib.adnxs.com/ut/v3/prebid";if((0,m.hasPurpose1Consent)(null==t?void 0:t.gdprConsent)||(i="https://ib.adnxs-simple.com/ut/v3/prebid"),("TRUE"===(0,s.getParameterByName)("apn_test").toUpperCase()||!0===c.config.getConfig("apn_test"))&&(n.customHeaders={"X-Is-Test":1}),e.tags.length>15){var o=(0,s.deepClone)(e);(0,E.chunk)(e.tags,15).forEach(function(e){o.tags=e;var a=JSON.stringify(o);r.push({method:"POST",url:i,data:a,bidderRequest:t,options:n})})}else{var a=JSON.stringify(e);r={method:"POST",url:i,data:a,bidderRequest:t,options:n}}return r}(Y,t)},interpretResponse:function(e,t){var r=this,n=t.bidderRequest;e=e.body;var i=[];if(!e||e.error){var o="in response for ".concat(n.bidderCode," adapter");return e&&e.error&&(o+=": ".concat(e.error)),(0,s.logError)(o),i}if(e.tags&&e.tags.forEach(function(e){var t=(o=e)&&o.ads&&o.ads.length&&(0,p.find)(o.ads,function(e){return e.rtb});if(t&&(!0===v.bidderSettings.get(n.bidderCode,"allowZeroCpmBids")?t.cpm>=0:t.cpm>0)&&(0,p.includes)(r.supportedMediaTypes,t.ad_type)){var o,a,c=function(e,t,r){var n=(0,s.getBidRequest)(e.uuid,[r]),i=(0,s.getUniqueIdentifierStr)(),o={adId:i,requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:t.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:n.adUnitCode,appnexus:{buyerMemberId:t.buyer_member_id,dealPriority:t.deal_priority,dealCode:t.deal_code}};if(t.adomain&&(o.meta=Object.assign({},o.meta,{advertiserDomains:[t.adomain]})),t.advertiser_id&&(o.meta=Object.assign({},o.meta,{advertiserId:t.advertiser_id})),t.dsa&&(o.meta=Object.assign({},o.meta,{dsa:t.dsa})),t.buyer_member_id&&(o.meta=Object.assign({},o.meta,{dchain:{ver:"1.0",complete:0,nodes:[{bsid:t.buyer_member_id.toString()}]}})),t.brand_id&&(o.meta=Object.assign({},o.meta,{brandId:t.brand_id})),t.rtb.video)switch(Object.assign(o,{width:t.rtb.video.player_width,height:t.rtb.video.player_height,vastImpUrl:t.notify_url,ttl:3600}),(0,s.deepAccess)(n,"mediaTypes.video.context")){case l.ADPOD:var a=b.APPNEXUS_CATEGORY_MAPPING[t.brand_category_id]?b.APPNEXUS_CATEGORY_MAPPING[t.brand_category_id]:null;o.meta=Object.assign({},o.meta,{primaryCatId:a});var c=t.deal_priority;o.video={context:l.ADPOD,durationSeconds:Math.floor(t.rtb.video.duration_ms/1e3),dealTier:c},o.vastUrl=t.rtb.video.asset_url;break;case f.OUTSTREAM:if(o.adResponse=e,o.adResponse.ad=o.adResponse.ads[0],o.adResponse.ad.video=o.adResponse.ad.rtb.video,o.vastXml=t.rtb.video.content,t.renderer_url){var u=(0,p.find)(r.bids,function(t){return t.bidId===e.uuid}),g=(0,s.deepAccess)(u,"mediaTypes.video.renderer.options");g||(g=(0,s.deepAccess)(u,"renderer.options")),o.renderer=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=d.Renderer.install({id:t.renderer_id,url:t.renderer_url,config:r,loaded:!1,adUnitCode:e});try{n.setRender(H)}catch(e){(0,s.logWarn)("Prebid Error calling setRender on renderer",e)}return n.setEventHandlers({impression:function(){return(0,s.logMessage)("AppNexus outstream video impression event")},loaded:function(){return(0,s.logMessage)("AppNexus outstream video loaded event")},ended:function(){(0,s.logMessage)("AppNexus outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),n}(o.adUnitCode,t,g)}break;case f.INSTREAM:o.vastUrl=t.notify_url+"&redir="+encodeURIComponent(t.rtb.video.asset_url)}else if(t.rtb[l.NATIVE]){var v,m=t.rtb[l.NATIVE];if(function(e){if(!e||""===e)return!1;var t=e.match(R),r=null!=t&&t.length>=1,n=e.match("trk.js"),i=null!=n&&n.length>=1;return e.startsWith("<script")&&i&&r}(t.viewability.config)){var h="pbjs_adid="+i+";pbjs_auc="+n.adUnitCode;v=t.viewability.config.replace("dom_id=%native_dom_id%",h)}var y=m.javascript_trackers;void 0==y?y=v:(0,s.isStr)(y)?y=[y,v]:y.push(v),o[l.NATIVE]={title:m.title,body:m.desc,body2:m.desc2,cta:m.ctatext,rating:m.rating,sponsoredBy:m.sponsored,privacyLink:m.privacy_link,address:m.address,downloads:m.downloads,likes:m.likes,phone:m.phone,price:m.price,salePrice:m.saleprice,clickUrl:m.link.url,displayUrl:m.displayurl,clickTrackers:m.link.click_trackers,impressionTrackers:m.impression_trackers,video:m.video,javascriptTrackers:y},m.main_img&&(o[l.NATIVE].image={url:m.main_img.url,height:m.main_img.height,width:m.main_img.width}),m.icon&&(o[l.NATIVE].icon={url:m.icon.url,height:m.icon.height,width:m.icon.width}),o[l.NATIVE].ext={video:m.video,customImage1:m.image1&&{url:m.image1.url,height:m.image1.height,width:m.image1.width},customImage2:m.image2&&{url:m.image2.url,height:m.image2.height,width:m.image2.width},customImage3:m.image3&&{url:m.image3.url,height:m.image3.height,width:m.image3.width},customImage4:m.image4&&{url:m.image4.url,height:m.image4.height,width:m.image4.width},customImage5:m.image5&&{url:m.image5.url,height:m.image5.height,width:m.image5.width},customIcon1:m.icon1&&{url:m.icon1.url,height:m.icon1.height,width:m.icon1.width},customIcon2:m.icon2&&{url:m.icon2.url,height:m.icon2.height,width:m.icon2.width},customIcon3:m.icon3&&{url:m.icon3.url,height:m.icon3.height,width:m.icon3.width},customIcon4:m.icon4&&{url:m.icon4.url,height:m.icon4.height,width:m.icon4.width},customIcon5:m.icon5&&{url:m.icon5.url,height:m.icon5.height,width:m.icon5.width},customSocialIcon1:m.socialicon1&&{url:m.socialicon1.url,height:m.socialicon1.height,width:m.socialicon1.width},customSocialIcon2:m.socialicon2&&{url:m.socialicon2.url,height:m.socialicon2.height,width:m.socialicon2.width},customSocialIcon3:m.socialicon3&&{url:m.socialicon3.url,height:m.socialicon3.height,width:m.socialicon3.width},customSocialIcon4:m.socialicon4&&{url:m.socialicon4.url,height:m.socialicon4.height,width:m.socialicon4.width},customSocialIcon5:m.socialicon5&&{url:m.socialicon5.url,height:m.socialicon5.height,width:m.socialicon5.width},customTitle1:m.title1,customTitle2:m.title2,customTitle3:m.title3,customTitle4:m.title4,customTitle5:m.title5,customBody1:m.body1,customBody2:m.body2,customBody3:m.body3,customBody4:m.body4,customBody5:m.body5,customCta1:m.ctatext1,customCta2:m.ctatext2,customCta3:m.ctatext3,customCta4:m.ctatext4,customCta5:m.ctatext5,customDisplayUrl1:m.displayurl1,customDisplayUrl2:m.displayurl2,customDisplayUrl3:m.displayurl3,customDisplayUrl4:m.displayurl4,customDisplayUrl5:m.displayurl5,customSocialUrl1:m.socialurl1,customSocialUrl2:m.socialurl2,customSocialUrl3:m.socialurl3,customSocialUrl4:m.socialurl4,customSocialUrl5:m.socialurl5}}else{Object.assign(o,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{if(t.rtb.trackers)for(var A=0;A<t.rtb.trackers[0].impression_urls.length;A++){var I=t.rtb.trackers[0].impression_urls[A],E=(0,s.createTrackPixelHtml)(I);o.ad+=E}}catch(e){(0,s.logError)("Error appending tracking pixel",e)}}return o}(e,t,n);c.mediaType=(a=t.ad_type)===l.VIDEO?l.VIDEO:a===l.NATIVE?l.NATIVE:l.BANNER,i.push(c)}}),e.debug&&e.debug.debug_info){var a="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info;a=a.replace(/(<td>|<th>)/gm,"	").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/igm,""),(0,s.logMessage)("https://console.appnexus.com/docs/understanding-the-debug-auction"),(0,s.logMessage)(a)}return i},getUserSyncs:function(e,t,r,n,i){return e.iframeEnabled&&(0,m.hasPurpose1Consent)(r)?[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]:e.pixelEnabled?["https://px.ads.linkedin.com/setuid?partner=appNexus"].map(function(e){return{type:"image",url:e}}):void 0}};function B(e){var t,r={};Object.keys(e.params).forEach(function(t){var r=(0,A.convertCamelToUnderscore)(t);r!==t&&(e.params[r]=e.params[t],delete e.params[t])}),r.sizes=U(e.sizes),r.primary_size=r.sizes[0],r.ad_types=[],r.uuid=e.bidId,e.params.placement_id?r.id=parseInt(e.params.placement_id,10):r.code=e.params.inv_code;var n=(0,s.getParameterByName)("ast_override_div");if((0,s.isStr)(n)&&""!==n){var i=decodeURIComponent(n).split(",").find(function(t){return t.startsWith("".concat(e.adUnitCode,":"))});if(i){var o=i.split(":")[1];o&&(r.force_creative_id=parseInt(o,10))}}r.allow_smaller_sizes=e.params.allow_smaller_sizes||!1,r.use_pmt_rule="boolean"==typeof e.params.use_payment_rule?e.params.use_payment_rule:"boolean"==typeof e.params.use_pmt_rule&&e.params.use_pmt_rule,r.prebid=!0,r.disable_psa=!0;var a=function(e){if(!(0,s.isFn)(e.getFloor))return e.params.reserve?e.params.reserve:null;var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return(0,s.isPlainObject)(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null}(e);if(a&&(r.reserve=a),e.params.position)r.position=({above:1,below:2})[e.params.position]||0;else{var d=(0,s.deepAccess)(e,"mediaTypes.banner.pos")||(0,s.deepAccess)(e,"mediaTypes.video.pos");(0===d||1===d||3===d)&&(r.position=3===d?2:d)}e.params.traffic_source_code&&(r.traffic_source_code=e.params.traffic_source_code),e.params.private_sizes&&(r.private_sizes=U(e.params.private_sizes)),e.params.supply_type&&(r.supply_type=e.params.supply_type),e.params.pub_click&&(r.pubclick=e.params.pub_click),e.params.ext_inv_code&&(r.ext_inv_code=e.params.ext_inv_code),e.params.publisher_id&&(r.publisher_id=parseInt(e.params.publisher_id,10)),e.params.external_imp_id&&(r.external_imp_id=e.params.external_imp_id);var c=(0,y.getANKewyordParamFromMaps)((0,y.convertKeywordStringToANMap)((0,s.deepAccess)(e,"ortb2Imp.ext.data.keywords")),null==(t=e.params)?void 0:t.keywords);c.length>0&&(r.keywords=c);var u=(0,s.deepAccess)(e,"ortb2Imp.ext.gpid")||(0,s.deepAccess)(e,"ortb2Imp.ext.data.pbadslot");if(u&&(r.gpid=u),(e.mediaType===l.NATIVE||(0,s.deepAccess)(e,"mediaTypes.".concat(l.NATIVE)))&&(r.ad_types.push(l.NATIVE),0===r.sizes.length&&(r.sizes=U([1,1])),e.nativeParams)){var f,g,v=(f=e.nativeParams,g={},Object.keys(f).forEach(function(e){var t=D[e]&&D[e].serverName||D[e]||e,r=D[e]&&D[e].requiredParams;if(g[t]=Object.assign({},r,f[e]),(t===D.image.serverName||t===D.icon.serverName)&&g[t].sizes){var n=g[t].sizes;((0,s.isArrayOfNums)(n)||(0,s.isArray)(n)&&n.length>0&&n.every(function(e){return(0,s.isArrayOfNums)(e)}))&&(g[t].sizes=U(g[t].sizes))}t===D.privacyLink&&(g.privacy_supported=!0)}),g);r[l.NATIVE]={layouts:[v]}}var m=(0,s.deepAccess)(e,"mediaTypes.".concat(l.VIDEO)),h=(0,s.deepAccess)(e,"mediaTypes.video.context");return m&&"adpod"===h?r.hb_source=7:r.hb_source=1,(e.mediaType===l.VIDEO||m)&&r.ad_types.push(l.VIDEO),(e.mediaType===l.VIDEO||m&&"outstream"!==h)&&(r.require_asset_url=!0),e.params.video&&(r.video={},Object.keys(e.params.video).filter(function(e){return(0,p.includes)(O,e)}).forEach(function(t){switch(t){case"context":case"playback_method":var n=e.params.video[t];n=(0,s.isArray)(n)?n[0]:n,r.video[t]=P[t][n];break;case"frameworks":break;default:r.video[t]=e.params.video[t]}}),e.params.video.frameworks&&(0,s.isArray)(e.params.video.frameworks)&&(r.video_frameworks=e.params.video.frameworks)),m&&(r.video=r.video||{},Object.keys(m).filter(function(e){return(0,p.includes)(_,e)}).forEach(function(e){switch(e){case"minduration":case"maxduration":"number"!=typeof r.video[e]&&(r.video[e]=m[e]);break;case"skip":"boolean"!=typeof r.video.skippable&&(r.video.skippable=1===m[e]);break;case"skipafter":"number"!=typeof r.video.skipoffset&&(r.video.skippoffset=m[e]);break;case"playbackmethod":if("number"!=typeof r.video.playback_method){var t=m[e];(t=(0,s.isArray)(t)?t[0]:t)>=1&&t<=4&&(r.video.playback_method=t)}break;case"api":!r.video_frameworks&&(0,s.isArray)(m[e])&&(r.video_frameworks=m[e].map(function(e){var t=4===e?5:5===e?4:e;if(t>=1&&t<=5)return t}).filter(function(e){return e}));break;case"startdelay":case"plcmt":case"placement":if("number"!=typeof r.video.context){var n=m.plcmt,i=m.placement,o=m.startdelay,a=function(e,t){if(e){if(2===e){if(void 0===t)return;if(0===t)return"accompanying_content_pre_roll";if(-1===t)return"accompanying_content_mid_roll";if(-2===t)return"accompanying_content_post_roll"}else if(3===e)return"interstitial";else if(4===e)return"outstream"}}(n,o)||function(e){if(e){if(2===e)return"in-banner";else if(3===e)return"outstream";else if(4===e)return"in-feed";else if(5===e)return"intersitial"}}(i)||function(e){if(void 0!==e){if(0===e)return"pre_roll";else if(-1===e)return"mid_roll";else if(-2===e)return"post_roll"}}(o);r.video.context=P.context[a]}}})),e.renderer&&(r.video=Object.assign({},r.video,{custom_renderer_present:!0})),e.params.frameworks&&(0,s.isArray)(e.params.frameworks)&&(r.banner_frameworks=e.params.frameworks),(0,s.deepAccess)(e,"mediaTypes.".concat(l.BANNER))&&r.ad_types.push(l.BANNER),0===r.ad_types.length&&delete r.ad_types,r}function U(e){var t=[],r={};if((0,s.isArray)(e)&&2===e.length&&!(0,s.isArray)(e[0]))r.width=parseInt(e[0],10),r.height=parseInt(e[1],10),t.push(r);else if("object"===(0,i.default)(e))for(var n=0;n<e.length;n++){var o=e[n];(r={}).width=parseInt(o[0],10),r.height=parseInt(o[1],10),t.push(r)}return t}function M(e){return!!e.params.user}function V(e){return!!parseInt(e.params.member,10)}function q(e){if(e.params)return!!e.params.app}function L(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function F(e){return!!e.debug}function G(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===l.ADPOD}function W(e){var t=!1,r=e.params,n=e.params.video;return r.frameworks&&(0,s.isArray)(r.frameworks)&&(t=(0,p.includes)(e.params.frameworks,6)),!t&&n&&n.frameworks&&(0,s.isArray)(n.frameworks)&&(t=(0,p.includes)(e.params.video.frameworks,6)),t}function z(e,t,r){(0,s.isEmpty)(e.video)&&(e.video={}),e.video[t]=r}function H(e,t){var r=e.adUnitCode;try{var n=document.getElementById(r).querySelectorAll("div[id^='google_ads']");n[0]&&n[0].style.setProperty("display","none")}catch(e){}var i=e.adUnitCode;try{var o=document.getElementById(i).querySelectorAll("script[id^='sas_script']");o[0].nextSibling&&"iframe"===o[0].nextSibling.localName&&o[0].nextSibling.style.setProperty("display","none")}catch(e){}e.renderer.push(function(){((null==t?void 0:t.defaultView)||window).ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},Y.bind(null,e))})}function Y(e,t,r){e.renderer.handleVideoEvent({id:t,eventName:r})}(0,u.registerBidder)(N),(0,a.registerModule)("appnexusBidAdapter")},9359:function(e,t,r){"use strict";var n=r(7045),i=r(7316),o=r(2508),a=r(1617),s=r(2339),d=r(1122),c=r(4700),u=r(4840),l="connectId",p="__PIXEL_ID__",f="https://ups.analytics.yahoo.com/ups/".concat(p,"/fed"),g=["pixelId","he","puid"],v=["yahoo.com","aol.com","aol.ca","aol.de","aol.co.uk","engadget.com","techcrunch.com","autoblog.com"],m=(0,d.getStorageManager)({moduleType:u.MODULE_TYPE_UID,moduleName:l});function h(e){var t=Date.now()+31536e6;m.cookiesAreEnabled()&&b(l,JSON.stringify(e),new Date(t),I()),m.localStorageIsEnabled()&&m.setDataInLocalStorage(l,JSON.stringify(e))}function b(e,t,r,n){for(var i=n.split("."),o=0;o<i.length;++o){var a=i.slice(i.length-o-1,i.length).join(".");try{m.setCookie(e,t,r.toUTCString(),null,"."+a);var s=m.getCookie(e);if(s&&s===t)break}catch(e){}}}function y(){if(m.localStorageIsEnabled()){var e=m.getDataFromLocalStorage(l);if(e){try{e=JSON.parse(e)}catch(e){(0,c.logError)("".concat(l," module: error while reading the local storage data."))}return(0,c.isPlainObject)(e)&&e.__expires&&e.__expires<=Date.now()?(m.removeDataFromLocalStorage(l),null):e}}return null}function A(e){if(function(){var e=(0,s.getRefererInfo)().ref;if(e){var t=(e=(0,c.parseUrl)(e).hostname).split(".");e=t.slice(t.length-2,t.length).join(".")}return v.indexOf(e)>=0}())return!0;if((0,c.isPlainObject)(e)&&e.lastSynced){var t=e.ttl||12096e5;return e.lastSynced+t<=Date.now()}return!1}function I(){return(0,c.parseUrl)((0,s.getRefererInfo)().page).hostname}var E={name:l,gvlid:25,decode:function(e){if(!E.userHasOptedOut())return(0,c.isPlainObject)(e)&&(e.connectId||e.connectid)?{connectId:e.connectId||e.connectid}:void 0},getId:function(e,t){if(!E.userHasOptedOut()){var r,n=e.params||{};if(!n||void 0===n.pixelId&&void 0===n.endpoint)return void(0,c.logError)("".concat(l," module: configuration requires the 'pixelId'."));var i=((r=function(){if(m.cookiesAreEnabled())try{return JSON.parse(m.getCookie(l))}catch(e){}return null}())||(r=y())&&!A(r)&&function(){if(m.cookiesAreEnabled()){var e=y(),t=Date.now()+31536e6;b(l,JSON.stringify(e),new Date(t),I())}}(),r),o=A(i);if(i&&((0,c.isPlainObject)(i)&&i.puid&&i.lastUsed&&!n.puid&&i.lastUsed+2592e6<=Date.now()&&(delete i.puid,o=!0),(n.he&&n.he!==i.he||n.puid&&n.puid!==i.puid)&&(o=!0),!o))return i.lastUsed=Date.now(),h(i),{id:i};var d=t.usp||"",u={v:"1","1p":(0,a.includes)([1,"1",!0],n["1p"])?"1":"0",gdpr:E.isEUConsentRequired(null==t?void 0:t.gdpr)?"1":"0",gdpr_consent:E.isEUConsentRequired(null==t?void 0:t.gdpr)?t.gdpr.consentString:"",us_privacy:d},v=t.gpp;v&&(u.gpp="".concat(v.gppString?v.gppString:""),Array.isArray(v.applicableSections)&&(u.gpp_sid=v.applicableSections.join(",")));var S=(0,s.getRefererInfo)().topmostLocation;"string"==typeof S&&(u.url=S.split("?")[0]),g.forEach(function(e){void 0!==n[e]&&(u[e]=n[e])});var O=n.he||(null==i?void 0:i.he);O&&(u.he=O),!u.puid&&null!=i&&i.puid&&(u.puid=i.puid);var _={callback:function(e){var t=f.replace(p,n.pixelId),r="".concat(n.endpoint||t,"?").concat((0,c.formatQS)(u));E.getAjaxFn()(r,{success:function(t){var r;if(t)try{if(r=JSON.parse(t),(0,c.isPlainObject)(r)&&Object.keys(r).length>0&&(r.connectId||r.connectid)){if(r.he=n.he,r.puid=n.puid||r.puid,r.lastSynced=Date.now(),r.lastUsed=Date.now(),(0,c.isNumber)(r.ttl)){var i=60*r.ttl*6e4;i>12096e5&&(i=12096e5),r.ttl=i}h(r)}else(0,c.logError)("".concat(l," module: UPS response returned an invalid payload ").concat(t))}catch(e){(0,c.logError)(e)}e(r)},error:function(t){(0,c.logError)("".concat(l," module: ID fetch encountered an error"),t),e()}},null,{method:"GET",withCredentials:!0})}};return o&&i&&(_.id=i),_}},isEUConsentRequired:function(e){return!!(null!=e&&e.gdprApplies)},userHasOptedOut:function(){try{if(m.localStorageIsEnabled())return"1"===m.getDataFromLocalStorage("connectIdOptOut");return!0}catch(e){return!1}},getAjaxFn:function(){return i.ajax},eids:{connectId:{source:"yahoo.com",atype:3}}};(0,o.submodule)("userId",E),(0,n.registerModule)("connectIdSystem")},5080:function(e,t,r){"use strict";var n,i,o=r(2100),a=r(8287),s=o(r(8287)),d=r(7045),c=r(4700),u=r(9926),l=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&({}).hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(9577)),p=r(8538),f=r(2508),g=r(2994),v=r(8263);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var h="iab",b=50,y=!1,A={iab:function(e){var t,r=e.onSuccess,n=e.onError,i=(t={},{consentDataCallback:function(e,i){i&&e.uspString&&(t.usPrivacy=e.uspString),t.usPrivacy?S(t,{onSuccess:r,onError:n}):n("Unable to get USP consent string.")}}),o=(0,v.cmpClient)({apiName:"__uspapi",apiVersion:1,apiArgs:["command","version","callback"]});if(!o)return n("USP CMP not found.");o.isDirect?(0,c.logInfo)("Detected USP CMP is directly accessible, calling it now..."):(0,c.logInfo)("Detected USP CMP is outside the current iframe where Prebid.js is located, calling it now..."),o({command:"getUSPData",callback:i.consentDataCallback}),o({command:"registerDeletion",callback:function(e,t){return(null==t||t)&&l.default.callDataDeletionRequest(e)}}).catch(function(e){(0,c.logError)("Error invoking CMP `registerDeletion`:",e)})},static:function(e){var t=e.onSuccess,r=e.onError;S(n,{onSuccess:t,onError:r})}};function I(e){var t=null,r=!1;function n(n,i){if(null!=t&&clearTimeout(t),r=!0,l.uspDataHandler.setConsentData(n),null!=e){for(var o=arguments.length,a=Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];e.apply(void 0,[i].concat(a))}}if(!A[h])return void n(null,"USP framework (".concat(h,") is not a supported framework. Aborting consentManagement module and resuming auction."));var i={onSuccess:n,onError:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n.apply(void 0,[null,"".concat(e," Resuming auction without consent data as per consentManagement config.")].concat(r))}};A[h](i),r||(0===b?S(void 0,i):t=setTimeout(i.onError.bind(null,"USPAPI workflow exceeded timeout threshold."),b))}var E=(0,p.timedAuctionHook)("usp",function(e,t){var r=this;y||O(),I(function(n){if(null!=n){for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];c.logWarn.apply(void 0,[n].concat(o))}e.call(r,t)})});function S(e,t){var r,n=t.onSuccess,o=t.onError;if(!(e&&e.usPrivacy))return void o("USPAPI returned unexpected value during lookup process.",e);(r=e)&&r.usPrivacy&&(i=r.usPrivacy),n(i)}function O(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];y||((0,c.logInfo)("USPAPI consentManagement module has been activated".concat(e?"":" using default values (api: '".concat(h,"', timeout: ").concat(b,"ms)"))),y=!0,l.uspDataHandler.enable()),I()}u.config.getConfig("consentManagement",function(e){var t;(t=(t=e.consentManagement)&&t.usp)&&"object"===(0,s.default)(t)||(0,c.logWarn)("consentManagement.usp config not defined, using defaults"),t&&(0,c.isStr)(t.cmpApi)?h=t.cmpApi:(h="iab",(0,c.logInfo)("consentManagement.usp config did not specify cmpApi. Using system default setting (".concat("iab",")."))),t&&(0,c.isNumber)(t.timeout)?b=t.timeout:(b=50,(0,c.logInfo)("consentManagement.usp config did not specify timeout. Using system default setting (".concat(50,")."))),"static"===h&&((0,c.isPlainObject)(t.consentData)&&(0,c.isPlainObject)(t.consentData.getUSPData)?(t.consentData.getUSPData.uspString&&(n={usPrivacy:t.consentData.getUSPData.uspString}),b=0):(0,c.logError)("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),O(!0)}),(0,f.getHook)("requestBids").before(E,50),g.enrichFPD.before(function(e,t){return e(t.then(function(e){var t=l.uspDataHandler.getConsentData();return t&&(0,c.deepSetValue)(e,"regs.ext.us_privacy",t),e}))}),(0,d.registerModule)("consentManagementUsp")},4067:function(e,t,r){"use strict";var n=r(2100)(r(5794)),i=r(7045),o=r(4700),a=r(523),s=r(4607),d=r(1122),c=r(2339),u=r(8700),l=r(8915),p=r(5236),f=r(7316),g=r(9579),v=r(6107);function m(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return h(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,n.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var A="criteo",I=(0,d.getStorageManager)({bidderCode:A}),E="Criteo: ",S=(0,v.ortb25Translator)(),O="cto_optout",_="cto_bundle",T=(0,g.ortbConverter)({context:{netRevenue:!0,ttl:60},imp:function(e,t,r){var n=e(t,r),i=t.params;if(n.tagid=t.adUnitCode,(0,o.deepSetValue)(n,"ext",y(y(y({},t.params.ext),n.ext),{},{rwdd:n.rwdd,floors:function(e){try{var t,r,n,i,a,d={},c=function(e){if(e.getFloor)return e.getFloor;if(e.params.bidFloor&&e.params.bidFloorCur)try{var t=parseFloat(e.params.bidFloor);return function(){return{currency:e.params.bidFloorCur,floor:t}}}catch(e){}}(e);if(c)return null!=(t=e.mediaTypes)&&t.banner&&(d.banner={},D(null==e||null==(i=e.mediaTypes)||null==(i=i.banner)?void 0:i.sizes).forEach(function(t){return d.banner[R(t).toString()]=c.call(e,{size:t,mediaType:s.BANNER})})),null!=(r=e.mediaTypes)&&r.video&&(d.video={},D(null==e||null==(a=e.mediaTypes)||null==(a=a.video)?void 0:a.playerSize).forEach(function(t){return d.video[R(t).toString()]=c.call(e,{size:t,mediaType:s.VIDEO})})),null!=(n=e.mediaTypes)&&n.native&&(d.native={},d.native["*"]=c.call(e,{size:"*",mediaType:s.NATIVE})),d}catch(e){(0,o.logError)("Could not parse floors from Prebid: "+e)}}(t),bidder:{publishersubid:null==i?void 0:i.publisherSubId,zoneid:null==i?void 0:i.zoneId,uid:null==i?void 0:i.uid}})),delete n.rwdd,!r.fledgeEnabled&&null!=(a=n.ext.igs)&&a.ae&&delete n.ext.igs.ae,k(t)){var a,d,c=t.params.video;void 0!==c&&(0,o.deepSetValue)(n,"video",y(y({},n.video),{},{skip:n.video.skip||c.skip||0,placement:n.video.placement||c.placement,minduration:n.video.minduration||c.minduration,playbackmethod:n.video.playbackmethod||c.playbackmethod,startdelay:n.video.startdelay||c.startdelay||0})),(0,o.deepSetValue)(n,"video.ext",{context:t.mediaTypes.video.context,playersizes:D(null==t||null==(d=t.mediaTypes)||null==(d=d.video)?void 0:d.playerSize,R),plcmt:t.mediaTypes.video.plcmt,poddur:t.mediaTypes.video.adPodDurationSec,rqddurs:t.mediaTypes.video.durationRangeSec})}if(n.native&&void 0!==n.native.request){var u=JSON.parse(n.native.request);u.assets&&(1!==u.assets.length||Object.keys(u.assets[0]).length)||delete u.assets,(0,o.deepSetValue)(n,"native.request_native",u),delete n.native.request}return n},request:function(e,t,r,n){var i=e(t,r,n);return void 0!==n.publisherId&&(void 0!==i.app?(0,o.deepSetValue)(i,"app.publisher.id",n.publisherId):(0,o.deepSetValue)(i,"site.publisher.id",n.publisherId)),r&&r.gdprConsent&&(0,o.deepSetValue)(i,"regs.ext.gdprversion",r.gdprConsent.apiVersion),i=S(i)},bidResponse:function(e,t,r){r.mediaType=null==t||null==(n=t.ext)?void 0:n.mediatype,r.mediaType===s.NATIVE&&void 0!==t.adm_native&&(t.adm=t.adm_native,delete t.adm_native);var n,i,a,d,c,u,f=e(t,r),g=r.bidRequest;return f.currency=null==t||null==(i=t.ext)?void 0:i.cur,void 0!==(null==t||null==(a=t.ext)?void 0:a.meta)&&(0,o.deepSetValue)(f,"meta",y(y({},f.meta),t.ext.meta)),void 0!==(null==t||null==(d=t.ext)||null==(d=d.paf)?void 0:d.content_id)&&(0,o.deepSetValue)(f,"meta.paf.content_id",t.ext.paf.content_id),f.mediaType===s.VIDEO&&(f.vastUrl=null==(c=t.ext)?void 0:c.displayurl,(null==g||null==(u=g.mediaTypes)||null==(u=u.video)?void 0:u.context)===p.OUTSTREAM&&(f.renderer=function(e){if((null==(t=e.ext)?void 0:t.videoPlayerConfig)!==void 0&&(null==(r=e.ext)?void 0:r.videoPlayerType)!==void 0){var t,r,n=l.Renderer.install({url:"https://static.criteo.net/js/ld/publishertag.renderer.js",config:{documentResolver:function(e,t,r){return null!=r?r:t}}});return n.setRender(function(t,r){var n,i={slotid:e.id,vastUrl:null==(n=e.ext)?void 0:n.displayurl,vastXml:e.adm,documentContext:r},o=e.ext.videoPlayerConfig;window.CriteoOutStream[e.ext.videoPlayerType].play(i,o)}),n}}(t))),f},response:function(e,t,r,n){var i,a=e(t,r,n),s=null==r||null==(i=r.ext)||null==(i=i.paf)?void 0:i.transmission;return a.bids.forEach(function(e){var t;void 0!==s&&void 0!==(null==e||null==(t=e.meta)||null==(t=t.paf)?void 0:t.content_id)?(0,o.deepSetValue)(e,"meta.paf.transmission",s):delete e.meta.paf}),a}}),w={code:A,gvlid:91,supportedMediaTypes:[s.BANNER,s.VIDEO,s.NATIVE],getUserSyncs:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=i.gppString,s=void 0===a?"":a,d=i.applicableSections,l=void 0===d?[]:d,p=(0,c.getRefererInfo)(),f="criteoPrebidAdapter";if(e.iframeEnabled&&(0,u.hasPurpose1Consent)(r)){var g=[];if(g.push("origin=".concat(f)),g.push("topUrl=".concat(p.domain)),r&&(r.gdprApplies&&g.push("gdpr=".concat(+(!0==r.gdprApplies))),r.consentString&&g.push("gdpr_consent=".concat(r.consentString))),n&&g.push("us_privacy=".concat(n)),g.push("gpp=".concat(s)),Array.isArray(l)){var v,h=m(l);try{for(h.s();!(v=h.n()).done;){var b=v.value;g.push("gpp_sid=".concat(b))}}catch(e){h.e(e)}finally{h.f()}}var y=Math.random().toString(),A={bundle:C(_),cw:I.cookiesAreEnabled(),lsw:I.localStorageIsEnabled(),optoutCookie:C(O),origin:f,requestId:y,tld:p.domain,topUrl:p.domain,version:"9.40.0".replace(/\./g,"_")};window.addEventListener("message",function e(t){if(t.data&&"https://gum.criteo.com"==t.origin&&t.data.requestId===y){this.removeEventListener("message",e),t.stopImmediatePropagation();var r,n,i=t.data;i.optout?(P(_),x(O,!0,43200,p.domain)):(i.bundle&&x(_,i.bundle,9360,p.domain),null==i||null==(r=i.callbacks)||null==(n=r.forEach)||n.call(r,o.triggerPixel))}},!0);var E=JSON.stringify(A).replace(/"/g,"%22");return[{type:"iframe",url:"https://gum.criteo.com/syncframe?".concat(g.join("&"),"#").concat(E)}]}if(e.pixelEnabled&&(0,u.hasPurpose1Consent)(r)){var S=[];if(S.push("profile=207"),r&&(!0===r.gdprApplies&&S.push("gdprapplies=true"),r.consentString&&S.push("gdpr=".concat(r.consentString))),n&&S.push("ccpa=".concat(n)),S.push("gpp=".concat(s)),Array.isArray(l)){var T,w=m(l);try{for(w.s();!(T=w.n()).done;){var D=T.value;S.push("gpp_sid=".concat(D))}}catch(e){w.e(e)}finally{w.f()}}return[{type:"image",url:"https://ssp-sync.criteo.com/user-sync/redirect?".concat(S.join("&"))}]}return[]},isBidRequestValid:function(e){var t,r;return!(!(e&&e.params&&(e.params.zoneId||e.params.networkId))||k(e)&&(t=e,r=!0,["mimes","playerSize","maxduration","protocols","api","skip","placement","playbackmethod"].forEach(function(e){var n,i,a,s,d,c;"placement"===e?(null==t||null==(n=t.mediaTypes)||null==(n=n.video)?void 0:n[e])===void 0&&(null==t||null==(i=t.params)||null==(i=i.video)?void 0:i[e])===void 0&&(null==t||null==(a=t.mediaTypes)||null==(a=a.video)?void 0:a.plcmt)===void 0&&(null==t||null==(s=t.params)||null==(s=s.video)?void 0:s.plcmt)===void 0&&(r=!1,(0,o.logError)("Criteo Bid Adapter: mediaTypes.video."+e+" or mediaTypes.video.plcmt is required")):(null==t||null==(d=t.mediaTypes)||null==(d=d.video)?void 0:d[e])===void 0&&(null==t||null==(c=t.params)||null==(c=c.video)?void 0:c[e])===void 0&&(r=!1,(0,o.logError)("Criteo Bid Adapter: mediaTypes.video."+e+" is required"))}),!r))},buildRequests:function(e,t){e.forEach(function(e){var t,r,n,i;if((null==(t=e)||null==(r=t.mediaTypes)?void 0:r.native)!==void 0){(i=e).nativeParams&&(i.nativeParams.image&&(!0!==i.nativeParams.image.sendId||!0===i.nativeParams.image.sendTargetingKeys)||i.nativeParams.icon&&(!0!==i.nativeParams.icon.sendId||!0===i.nativeParams.icon.sendTargetingKeys)||i.nativeParams.clickUrl&&(!0!==i.nativeParams.clickUrl.sendId||!0===i.nativeParams.clickUrl.sendTargetingKeys)||i.nativeParams.displayUrl&&(!0!==i.nativeParams.displayUrl.sendId||!0===i.nativeParams.displayUrl.sendTargetingKeys)||i.nativeParams.privacyLink&&(!0!==i.nativeParams.privacyLink.sendId||!0===i.nativeParams.privacyLink.sendTargetingKeys)||i.nativeParams.privacyIcon&&(!0!==i.nativeParams.privacyIcon.sendId||!0===i.nativeParams.privacyIcon.sendTargetingKeys))&&(0,o.logWarn)(E+"all native assets containing URL should be sent as placeholders with sendId(icon, image, clickUrl, displayUrl, privacyLink, privacyIcon)"),(null==e||null==(n=e.nativeOrtbRequest)?void 0:n.assets)==null&&((0,o.logWarn)(E+"native asset requirements are missing"),(0,o.deepSetValue)(e,"nativeOrtbRequest.assets",[{}]))}});var r,n,i,a,s,d,c,u,l,p,f,g=(r=e,n=t,u=(0,o.parseUrl)(null==n||null==(i=n.refererInfo)?void 0:i.topmostLocation).search,{url:(null==n||null==(a=n.refererInfo)?void 0:a.page)||"",debug:"1"===u.pbt_debug,noLog:"1"===u.pbt_nolog,fledgeEnabled:null==(s=n.paapi)?void 0:s.enabled,amp:r.some(function(e){return"amp"===e.params.integrationMode}),networkId:null==(d=r.find(function(e){var t;return null==(t=e.params)?void 0:t.networkId}))?void 0:d.params.networkId,publisherId:null==(c=r.find(function(e){var t;return null==(t=e.params)?void 0:t.pubid}))?void 0:c.params.pubid}),v=(l=g,p="https://grid-bidder.criteo.com/openrtb_2_5/pbjs/auction/request?profileId=207&av="+String(37)+("&wv="+encodeURIComponent("9.40.0"))+("&cb="+String(Math.floor(0x174876e7ff*Math.random()))),I.localStorageIsEnabled()?p+="&lsavail=1":p+="&lsavail=0",l.amp&&(p+="&im=1"),l.debug&&(p+="&debug=1"),l.noLog&&(p+="&nolog=1"),(f=C(_))&&(p+="&bundle=".concat(f)),C(O)&&(p+="&optout=1"),l.networkId&&(p+="&networkId="+l.networkId),p),m=T.toORTB({bidderRequest:t,bidRequests:e,context:g});if(m)return{method:"POST",url:v,data:m,bidRequests:e}},interpretResponse:function(e,t){if(void 0===(null==e?void 0:e.body))return[];var r,n=T.fromORTB({response:e.body,request:t.data}).bids||[],i=null==(r=e.body)||null==(r=r.ext)||null==(r=r.igi)?void 0:r.filter(function(e){return(0,o.isArray)(null==e?void 0:e.igs)}).flatMap(function(e){return e.igs});return null!=i&&i.length?{bids:n,paapi:i}:n},onDataDeletionRequest:function(e){var t=C(_);t&&(P(_),(0,f.ajax)("https://privacy.criteo.com/api/privacy/datadeletionrequest",null,JSON.stringify({publisherUserId:t}),{contentType:"application/json",method:"POST"}))}};function C(e){var t=I.getCookie(e),r=I.getDataFromLocalStorage(e);return t||r||void 0}function x(e,t,r,n){var i=new Date;i.setTime(i.getTime()+60*r*6e4);for(var o="expires=".concat(i.toUTCString()),a=n.split("."),s=0;s<a.length;++s){var d=a.slice(a.length-s-1,a.length).join(".");try{I.setCookie(e,t,o,null,"."+d);var c=I.getCookie(e);if(c&&c===t)break}catch(e){}}I.setDataInLocalStorage(e,t)}function P(e){I.setCookie(e,"",0),I.removeDataFromLocalStorage(e)}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return void 0==e?[]:Array.isArray(e[0])?e.map(function(e){return t(e)}):[t(e)]}function R(e){return e[0]+"x"+e[1]}function k(e){var t;return(null==e||null==(t=e.mediaTypes)?void 0:t.video)!==void 0}(0,a.registerBidder)(w),(0,i.registerModule)("criteoBidAdapter")},427:function(e,t,r){"use strict";var n=r(7045),i=r(4700),o=r(7316),a=r(2339),s=r(2508),d=r(1122),c=r(4840),u=r(9577),l="criteo",p=(0,d.getStorageManager)({moduleType:c.MODULE_TYPE_UID,moduleName:l}),f="cto_bidid",g="cto_bundle",v="html5",m="cookie",h=new Date(0).toString(),b=new Date((0,i.timestamp)()+33696e6).toString();function y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,i.parseUrl)(e,{noDecodeWholeURL:!0});return t?"".concat(r.hostname):"".concat(r.protocol,"://").concat(r.hostname).concat(r.port?":"+r.port:"","/")}function A(e,t){var r,n;return(null==e||null==(r=e.storage)?void 0:r.type)===v?p.getDataFromLocalStorage(t):(null==e||null==(n=e.storage)?void 0:n.type)===m?p.getCookie(t):p.getCookie(t)||p.getDataFromLocalStorage(t)}function I(e,t,r,n){if(t&&r){var i,o;(null==e||null==(i=e.storage)?void 0:i.type)===v?p.setDataInLocalStorage(t,r):((null==e||null==(o=e.storage)?void 0:o.type)===m||p.setDataInLocalStorage(t,r),E(t,r,b,n,!0))}}function E(e,t,r,n,i){for(var o=n.split("."),a=0;a<o.length;++a){var s=o.slice(o.length-a-1,o.length).join(".");try{if(p.setCookie(e,t,r,null,"."+s),i){var d=p.getCookie(e);if(d&&d===t)break}}catch(e){}}}(0,s.submodule)("userId",{name:l,gvlid:91,decode:function(e){return e},getId:function(e){var t={bundle:A(e,g),dnaBundle:A(e,"cto_dna_bundle"),bidId:A(e,f)};return{id:t.bidId?{criteoId:t.bidId}:void 0,callback:function(r){var n,s,d,c,l,b,A,S,O,_,T,w,C,x,P,D;return l=((null==e||null==(n=e.storage)?void 0:n.type)===void 0||(null==e||null==(s=e.storage)?void 0:s.type)===m)&&p.cookiesAreEnabled(),b=((null==e||null==(d=e.storage)?void 0:d.type)===void 0||(null==e||null==(c=e.storage)?void 0:c.type)===v)&&p.localStorageIsEnabled(),A=y((0,a.getRefererInfo)().page),S=y(document.location.href,!0),O="undefined"!=typeof criteo_pubtag,_=t.bundle,T=t.dnaBundle,w="https://gum.criteo.com/sid/json?origin=prebid"+"".concat(A?"&topUrl="+encodeURIComponent(A):"")+"".concat(S?"&domain="+encodeURIComponent(S):"")+"".concat(_?"&bundle="+encodeURIComponent(_):"")+"".concat(T?"&info="+encodeURIComponent(T):"")+"".concat(l?"&cw=1":"")+"".concat(O?"&pbt=1":"")+"".concat(b?"&lsw=1":""),(C=u.uspDataHandler.getConsentData())&&(w+="&us_privacy=".concat(encodeURIComponent(C))),(x=u.gdprDataHandler.getConsentData())&&(w+="".concat(x.consentString?"&gdprString="+encodeURIComponent(x.consentString):""),w+="&gdpr=".concat(+(!0===x.gdprApplies))),(P=u.gppDataHandler.getConsentData())&&(w+="".concat(P.gppString?"&gpp="+encodeURIComponent(P.gppString):""),w+="".concat(P.applicableSections?"&gpp_sid="+encodeURIComponent(P.applicableSections):"")),D=w,void(0,o.ajax)(D,{success:function(t){var n=JSON.parse(t);(n.pixels&&n.pixels.forEach(function(t){t.writeBundleInStorage&&t.bundlePropertyName&&t.storageKeyName?(0,o.ajax)(t.pixelUrl,{success:function(r){if(r){var n=JSON.parse(r);n&&n[t.bundlePropertyName]&&I(e,t.storageKeyName,n[t.bundlePropertyName],S)}},error:function(e){(0,i.logError)("criteoIdSystem: unable to sync user id",e)}},void 0,{method:"GET",withCredentials:!0}):(0,i.triggerPixel)(t.pixelUrl)}),n.acwsUrl?("string"==typeof n.acwsUrl?[n.acwsUrl]:n.acwsUrl).forEach(function(e){return(0,i.triggerPixel)(e)}):n.bundle&&I(e,g,n.bundle,S),n.bidId)?(I(e,f,n.bidId,S),r({criteoId:n.bidId})):(E(f,"",h,S,!0),p.removeDataFromLocalStorage(f),r())},error:function(e){(0,i.logError)("criteoIdSystem: unable to sync user id",e),r()}},void 0,{method:"GET",contentType:"application/json",withCredentials:!0})}}},eids:{criteoId:{source:"criteo.com",atype:1}}}),(0,n.registerModule)("criteoIdSystem")},5917:function(e,t,r){"use strict";var n,i,o=r(2100),a=o(r(5881)),s=o(r(8287)),d=r(7045),c=r(4700),u=r(3103),l=r(7316),p=r(9926),f=r(2508),g=r(6102),v=r(9092),m=r(8538),h=r(1322),b=r(2994),y=r(2753),A=[],I={},E=!1,S=!0,O="USD",_=!1,T={},w={},C=(0,g.defer)(),x=(0,y.timeoutQueue)(),P=0;function D(e){i?((0,c.logWarn)(e),(0,c.logWarn)("Currency failed loading rates, falling back to currency.defaultRates")):(0,c.logError)(e)}function R(){S?(S=!1,E=!1,(0,l.ajax)(n,{success:function(e){try{T=JSON.parse(e),(0,c.logInfo)("currencyRates set to "+JSON.stringify(T)),I={},E=!0,B(),x.resume()}catch(t){D("Failed to parse currencyRates response: "+e)}},error:function(){D.apply(void 0,arguments),E=!0,B(),x.resume(),S=!0}})):B()}p.config.getConfig("currency",function(e){return function(e){if(n="https://cdn.jsdelivr.net/gh/prebid/currency-file@1/latest.json?date=$$TODAY$$",null!==e.rates&&"object"===(0,s.default)(e.rates)&&(T.conversions=e.rates,E=!0,S=!1),null!==e.defaultRates&&"object"===(0,s.default)(e.defaultRates)&&(i=e.defaultRates,T.conversions=i,E=!0),"string"==typeof e.adServerCurrency){P=e.auctionDelay,(0,c.logInfo)("enabling currency support",arguments),O=e.adServerCurrency,e.conversionRateFile&&((0,c.logInfo)("currency using override conversionRateFile:",e.conversionRateFile),n=e.conversionRateFile);var t=n.indexOf("$$TODAY$$");if(-1!==t){var r=new Date,o="".concat(r.getMonth()+1),a="".concat(r.getDate());o.length<2&&(o="0".concat(o)),a.length<2&&(a="0".concat(a));var l="".concat(r.getFullYear()).concat(o).concat(a);n="".concat(n.substring(0,t)).concat(l).concat(n.substring(t+9,n.length))}I={},_||(_=!0,(0,d.getGlobal)().convertCurrency=function(e,t,r){return parseFloat(e)*U(t,r)},(0,f.getHook)("addBidResponse").before(j,100),(0,f.getHook)("responsesReady").before(k),b.enrichFPD.before(V),(0,f.getHook)("requestBids").before(q,50),(0,h.on)(u.EVENTS.AUCTION_TIMEOUT,N),(0,h.on)(u.EVENTS.AUCTION_INIT,R),R())}else P=0,(0,c.logInfo)("disabling currency support"),function(){_&&((0,f.getHook)("addBidResponse").getHooks({hook:j}).remove(),(0,f.getHook)("responsesReady").getHooks({hook:k}).remove(),b.enrichFPD.getHooks({hook:V}).remove(),(0,f.getHook)("requestBids").getHooks({hook:q}).remove(),(0,h.off)(u.EVENTS.AUCTION_TIMEOUT,N),(0,h.off)(u.EVENTS.AUCTION_INIT,R),delete(0,d.getGlobal)().convertCurrency,O="USD",I={},_=!1,E=!1,S=!0,T={},w={},C=(0,g.defer)())}();"object"===(0,s.default)(e.bidderCurrencyDefault)&&(w=e.bidderCurrencyDefault)}(e.currency)});function k(e,t){e(t.then(function(){return C.promise}))}var j=(0,m.timedBidResponseHook)("currency",function(e,t,r,n){if(!r)return e.call(this,t,r,n);var i=r.bidderCode||r.bidder;if(w[i]){var o=w[i];r.currency&&o!==r.currency?(0,c.logWarn)("Currency default '".concat(i,": ").concat(o,"' ignored. adapter specified '").concat(r.currency,"'")):r.currency=o}if(r.currency||((0,c.logWarn)('Currency not specified on bid.  Defaulted to "USD"'),r.currency="USD"),r.getCpmInNewCurrency=function(e){return(parseFloat(this.cpm)*U(this.currency,e)).toFixed(3)},r.currency===O)return e.call(this,t,r,n);A.push([e,this,t,r,n]),(!_||E)&&B()});function N(e){var t=e.auctionId;A=A.filter(function(e){var r=(0,a.default)(e,5),n=(r[0],r[1],r[2],r[3]),i=r[4];if(n.auctionId!==t)return!0;i(u.REJECTION_REASON.CANNOT_CONVERT_CURRENCY)})}function B(){for(;A.length>0;){var e=A.shift(),t=(0,a.default)(e,5),r=t[0],n=t[1],i=t[2],o=t[3],s=t[4];if(void 0!==o&&"currency"in o&&"cpm"in o){var d=o.currency;try{var l=U(d);1!==l&&(o.cpm=(parseFloat(o.cpm)*l).toFixed(4),o.currency=O)}catch(e){(0,c.logWarn)("getCurrencyConversion threw error: ",e),s(u.REJECTION_REASON.CANNOT_CONVERT_CURRENCY);continue}}r.call(n,i,o,s)}C.resolve()}function U(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,n=null,i="".concat(e,"->").concat(r);if(i in I)n=I[i],(0,c.logMessage)("Using conversionCache value "+n+" for "+i);else if(!1===_)if("USD"===e)n=1;else throw Error("Prebid currency support has not been enabled and fromCurrency is not USD");else if(e===r)n=1;else if(e in T.conversions){if(!(r in(t=T.conversions[e])))throw Error("Specified adServerCurrency in config '"+r+"' not found in the currency rates file");n=t[r],(0,c.logInfo)("getCurrencyConversion using direct "+e+" to "+r+" conversionRate "+n)}else if(r in T.conversions){if(!(e in(t=T.conversions[r])))throw Error("Specified fromCurrency '"+e+"' not found in the currency rates file");n=M(1/t[e],4),(0,c.logInfo)("getCurrencyConversion using reciprocal "+e+" to "+r+" conversionRate "+n)}else{var o=Object.keys(T.conversions)[0];if(!(e in T.conversions[o]))throw Error("Specified fromCurrency '"+e+"' not found in the currency rates file");var a=1/T.conversions[o][e];if(!(r in T.conversions[o]))throw Error("Specified adServerCurrency in config '"+r+"' not found in the currency rates file");n=M(a*T.conversions[o][r],4),(0,c.logInfo)("getCurrencyConversion using intermediate "+e+" thru "+o+" to "+r+" conversionRate "+n)}return i in I||((0,c.logMessage)("Adding conversionCache value "+n+" for "+i),I[i]=n),n}function M(e,t){for(var r=1,n=0;n<t;n++)r+="0";return Math.round(e*r)/r}function V(e,t){return e(t.then(function(e){return(0,c.deepSetValue)(e,"ext.prebid.adServerCurrency",O),e}))}(0,v.registerOrtbProcessor)({type:v.REQUEST,name:"currency",fn:function(e,t,r){_&&(e.cur=e.cur||[r.currency||O])}});var q=(0,m.timedAuctionHook)("currency",function(e,t){var r,n=(r=this,function(){return e.call(r,t)});!E&&P>0?x.submit(P,n,function(){(0,c.logWarn)("".concat("currency",": Fetch attempt did not return in time for auction ").concat(t.auctionId)),n()}):n()});(0,d.registerModule)("currency")},1996:function(e,t,r){"use strict";var n=r(2100),i=r(8287),o=n(r(4602)),a=n(r(7583)),s=n(r(5794)),d=n(r(5881)),c=r(7045),u=r(1014),l=r(2568),p=r(4385),f=r(3479),g=r(9926),v=r(3103),m=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1322)),h=r(2508),b=r(2339),y=r(7419),A=r(4700),I=r(2305),E=r(5836),S=r(7316),O=n(r(1778));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}var T={ri:b.getRefererInfo},w="VASTAdTagURI";function C(e){if(!e.params&&!e.url)return void(0,A.logError)("A params object or a url is required to use pbjs.adServers.dfp.buildVideoUrl");var t,r,n,i,o,a,s,c,l,g=e.adUnit,v=e.bid||y.targeting.getWinningBids(g.code)[0],m={};if(e.url&&(m=(0,A.parseUrl)(e.url,{noDecodeWholeURL:!0}),(0,A.isEmpty)(e.params))){return t=m,r=v,n=e,(i=x(r,t,"search"))&&(t.search.description_url=i),t.search.cust_params=P(r,n,t.search.cust_params),(0,A.buildUrl)(t)}var h={correlator:Date.now(),sz:(0,A.parseSizesInput)(null==g||null==(o=g.mediaTypes)||null==(o=o.video)?void 0:o.playerSize).join("|"),url:encodeURIComponent(location.href)},b=m.search,E=b&&b.sz;E&&(h.sz=E+"|"+h.sz);var S=P(v,e,b&&b.cust_params),O=Object.assign({},I.DEFAULT_DFP_PARAMS,m.search,h,e.params,{cust_params:S},(0,I.gdprParams)()),_=x(v,e,"params");if(_&&(O.description_url=_),!O.ppid){var T=(0,p.getPPID)();null!=T&&(O.ppid=T)}var w=null==(a=e.adUnit)||null==(a=a.mediaTypes)?void 0:a.video;Object.entries({plcmt:function(){return null==w?void 0:w.plcmt},vpos:function(){var e=null==w?void 0:w.startdelay;if((0,A.isNumber)(e))return -2===e?"postroll":-1===e||e>0?"midroll":"preroll"},vpmute:function(){if(Array.isArray(null==w?void 0:w.playbackmethod)){var e=w.playbackmethod.some(function(e){return[2,6].includes(e)}),t=w.playbackmethod.some(function(e){return[1,3,4,5].includes(e)});if(e&&!t)return"1";if(t&&!e)return"0"}}}).forEach(function(e){var t=(0,d.default)(e,2),r=t[0],n=t[1];if(!O.hasOwnProperty(r)){var i=n();null!=i&&(O[r]=i)}});var C=null!=(s=null==(c=f.auctionManager.index.getBidRequest(e.bid||{}))?void 0:c.ortb2)?s:null==(l=f.auctionManager.index.getAuction(e.bid||{}))||null==(l=l.getFPD())?void 0:l.global,D=(0,u.getSignals)(C);return D.length&&(O.ppsj=btoa(JSON.stringify({PublisherProvidedTaxonomySignals:D}))),(0,A.buildUrl)(Object.assign({},I.DFP_ENDPOINT,m,{search:O}))}function x(e,t,r){var n;return(null==t||null==(n=t[r])?void 0:n.description_url)||encodeURIComponent(T.ri().page)}function P(e,t,r){var n,i=e&&e.adserverTargeting||{},o={},a=t&&t.adUnit;if(a){var d=y.targeting.getAllTargeting(a.code);o=d?d[a.code]:{}}var c=Object.assign({},{hb_uuid:e&&e.videoCacheKey},{hb_cache_id:e&&e.videoCacheKey},o,i);m.emit(v.EVENTS.SET_TARGETING,(0,s.default)({},a.code,c));var u=Object.assign({},c,null==t||null==(n=t.params)?void 0:n.cust_params),l=encodeURIComponent((0,A.formatQS)(u));return r&&(l=r+"%26"+l),l}function D(){return(D=(0,a.default)(o.default.mark(function e(t,r){var n,i,a,s,c,u,l,p,f;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(!(a=(i=(n=(0,O.default)()).parse(t)).querySelectorAll(w)[0])||!a.textContent)){e.next=6;break}return e.abrupt("return",t);case 6:if(s=RegExp("[A-Fa-f0-9]{8}-(?:[A-Fa-f0-9]{4}-){3}[A-Fa-f0-9]{12}","gi"),1==(c=Array.from(a.textContent.matchAll(s)).map(function(e){return(0,d.default)(e,1)[0]}).filter(function(e){return r.has(e)})).length){e.next=12;break}return(0,A.logWarn)("Unable to determine unique uuid in ".concat(w)),e.abrupt("return",t);case 12:return u=c[0],l=r.get(u),e.next=16,function(e){return k.apply(this,arguments)}(l);case 16:return p=e.sent,f=i.createCDATASection(p),a.textContent="",a.appendChild(f),e.abrupt("return",n.serialize(i));case 23:return e.prev=23,e.t0=e.catch(0),(0,A.logWarn)("Unable to process xml",e.t0),e.abrupt("return",t);case 27:case"end":return e.stop()}},e,null,[[0,23]])}))).apply(this,arguments)}g.config.getConfig("brandCategoryTranslation.translationFile")&&(0,h.getHook)("registerAdserver").before(function(e){e.call(this,"dfp")});function R(){return(R=(0,a.default)(o.default.mark(function e(t){var r,n,i,a,s,d=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:E.vastLocalCache,n=C(t),e.next=4,(0,S.fetch)(n);case 4:if((i=e.sent).ok){e.next=7;break}throw Error("Unable to fetch GAM VAST wrapper");case 7:return e.next=9,i.text();case 9:if(a=e.sent,!g.config.getConfig("cache.useLocal")){e.next=15;break}return e.next=13,function(e,t){return D.apply(this,arguments)}(a,r);case 13:return s=e.sent,e.abrupt("return",s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(){return(k=(0,a.default)(o.default.mark(function e(t){var r,n,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.fetch)(t);case 2:if((r=e.sent).ok){e.next=6;break}throw(0,A.logError)("Unable to fetch blob"),Error("Blob not found");case 6:return e.next=8,r.text();case 8:return n=e.sent,i="data://text/xml;base64,".concat(btoa(n)),e.abrupt("return",i);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}(0,l.registerVideoSupport)("dfp",{buildVideoUrl:C,getVastXml:function(e){return R.apply(this,arguments)}}),(0,c.registerModule)("dfpAdServerVideo")},2041:function(e,t,r){"use strict";var n=r(7045),i=r(4700),o=r(7316),a=r(2508),s=r(2339);function d(e,t){if(t){var r=t.split("?")[0];if(e.has(r)){var n=e.get(r);t.length>n.length&&e.set(r,t)}else e.set(r,t)}}(0,a.submodule)("userId",{name:"fabrickId",decode:function(e){return e&&e.fabrickId?{fabrickId:e.fabrickId}:void 0},getId:function(e,t,r){try{var n=e&&e.params||{};if(window.fabrickMod1&&window.fabrickMod1(n,null==t?void 0:t.gdpr,r),!n||!n.apiKey||"string"!=typeof n.apiKey)return void(0,i.logError)("fabrick submodule requires an apiKey.");try{var a,c,u=(a=n).url?a.url:"https://fid.agkn.com/f?",l=Object.keys(n);for(var p in l){var f=l[p];if("url"!==f&&"refererInfo"!==f&&(!(f.length>3)||"max"!==f.substring(0,3))){var g=n[f];if(Array.isArray(g))for(var v in g)("string"==typeof g[v]||"number"==typeof g[v])&&(u+="".concat(f,"=").concat(g[v],"&"));else("string"==typeof g||"number"==typeof g)&&(u+="".concat(f,"=").concat(g,"&"))}}u=u.slice(0,-1);var m=(c=n).refererInfo?c.refererInfo:(0,s.getRefererInfo)(),h=new Map;return d(h,m.topmostLocation),m.stack&&m.stack[0]&&d(h,m.stack[0]),d(h,m.canonicalUrl),d(h,window.location.href),h.forEach(function(e){u=function(e,t,r,n){var i=n&&n.maxUrlLen||2e3,o=n&&n.maxRefLen||1e3,a=n&&n.maxSpaceAvailable||50;if(!r||!(e.length<i-a))return e;var s=i-e.length;return s>o&&(s=o),(r="&".concat("r","=").concat(encodeURIComponent(r))).length>=s&&("%"===(r=r.substring(0,s)).charAt(r.length-1)?r=r.substring(0,s-1):"%"===r.charAt(r.length-2)&&(r=r.substring(0,s-2))),"".concat(e).concat(r)}(u,"r",e,n)}),{callback:function(e){(0,o.ajax)(u,{success:function(o){var a;if(window.fabrickMod2)return window.fabrickMod2(e,o,n,null==t?void 0:t.gdpr,r);if(o)try{a=JSON.parse(o)}catch(e){(0,i.logError)(e),a={}}e(a)},error:function(t){(0,i.logError)("fabrickId fetch encountered an error",t),e()}},null,{method:"GET",withCredentials:!0})}}}catch(e){(0,i.logError)("fabrickIdSystem encountered an error",e)}}catch(e){(0,i.logError)("fabrickIdSystem encountered an error",e)}},eids:{fabrickId:{source:"neustar.biz",atype:1}}}),(0,n.registerModule)("fabrickIdSystem")},5801:function(e,t,r){"use strict";var n=r(7045),i=r(9926),o=r(2508),a=r(4700),s=r(6102),d=r(8538),c=[],u=(0,d.timedAuctionHook)("fpd",function(e,t){var r=this;(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.global,r=e.bidder,n=i.config.getConfig("firstPartyData")||{},o=s.PbPromise.resolve({global:void 0===t?{}:t,bidder:void 0===r?{}:r});return c.sort(function(e,t){return(e.queue||1)-(t.queue||1)}).forEach(function(e){o=o.then(function(t){var r=t.global,i=t.bidder;return s.PbPromise.resolve(e.processFpd(n,{global:r,bidder:i})).catch(function(t){return(0,a.logError)("Error in FPD module ".concat(e.name),t),{}}).then(function(e){return{global:e.global||r,bidder:e.bidder||i}})})}),o})(t.ortb2Fragments).then(function(n){Object.assign(t.ortb2Fragments,n),e.call(r,t)})});(0,o.module)("firstPartyData",function(e){c.push(e)}),(0,o.getHook)("startAuction").before(u,10),(0,n.registerModule)("fpdModule")},2757:function(e,t,r){"use strict";var n=r(8287),i=r(7045),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}(r(4700)),a=r(2508),s=r(1122),d=r(6296),c=r(4840);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l="ftrackId",p="FTRACK - ",f="html5",g="ftrackId",v="".concat(g,"_privacy"),m=(0,s.getStorageManager)({moduleType:c.MODULE_TYPE_UID,moduleName:l}),h={gdpr:{applies:0,consentString:null,pd:null},usPrivacy:{value:null}};(0,a.submodule)("userId",{name:"ftrack",decode:function(e,t){if(e){var r={ftrackId:{uid:"",ext:{}}};for(var n in e){var i=e[n];Array.isArray(i)?i=i.join("|"):"string"!=typeof e[n]&&(i=""),r.ftrackId.ext[n]=i}return r.ftrackId.ext.hasOwnProperty("DeviceID")&&(r.ftrackId.uid=r.ftrackId.ext.DeviceID),r}},getId:function(e,t,r){if(!1!==this.isConfigOk(e)&&!1!==this.isThereConsent(t))return{callback:function(t){window.D9v={UserID:"99999999999999",CampID:"3175",CCampID:"148556"},window.D9r={callback:function(e){return e&&(m.setDataInLocalStorage("".concat(g,"_exp"),new Date(Date.now()+2592e6).toUTCString()),m.setDataInLocalStorage("".concat(g),JSON.stringify(e)),m.setDataInLocalStorage("".concat(v,"_exp"),new Date(Date.now()+2592e6).toUTCString()),m.setDataInLocalStorage("".concat(v),JSON.stringify(h))),"function"==typeof t&&t(e),e}},e.params.hasOwnProperty("ids")?(e.params.ids.hasOwnProperty("device id")&&!0===e.params.ids["device id"]&&(window.D9r.DeviceID=!0),e.params.ids.hasOwnProperty("single device id")&&!0===e.params.ids["single device id"]&&(window.D9r.SingleDeviceID=!0),e.params.ids.hasOwnProperty("household id")&&!0===e.params.ids["household id"]&&(window.D9r.HHID=!0)):(window.D9r.DeviceID=!0,window.D9r.SingleDeviceID=!0),(0,d.loadExternalScript)(e.params.url,c.MODULE_TYPE_UID,l)}}},extendId:function(e,t,r){return this.isConfigOk(e),r},isConfigOk:function(e){return e.storage&&e.storage.type&&e.storage.name?(e.storage.type!==f&&o.logWarn(p+'config.storage.type recommended to be "'+f+'".'),e.storage.name!==g&&o.logWarn(p+'config.storage.name recommended to be "'+g+'".'),!!e.hasOwnProperty("params")&&!!e.params.hasOwnProperty("url")||(o.logWarn(p+"config.params.url is required for ftrack to run."),!1)):(o.logError(p+"config.storage required to be set."),!1)},isThereConsent:function(e){var t,r,n=!0,i=null!=e?e:{},a=i.gdpr,s=i.usp;return((null==a?void 0:a.gdprApplies)===!0||(null==a?void 0:a.gdprApplies)===1)&&(h.gdpr.applies=1,n=!1),void 0===(null==a?void 0:a.consentString)||o.isEmpty(a.consentString)||o.isEmptyStr(a.consentString)||(h.gdpr.consentString=e.consentString),void 0===s||o.isEmpty(s)||o.isEmptyStr(s)||(h.usPrivacy.value=s,t=s[0],r=s[2]),1==t&&"Y"===r&&(n=!1),n},eids:{ftrackId:{source:"flashtalking.com",atype:1,getValue:function(e){var t="";return e&&e.ext&&e.ext.DeviceID&&(t=e.ext.DeviceID),t},getUidExt:function(e){return e&&e.ext}}}}),(0,i.registerModule)("ftrackIdSystem")},7697:function(e,t,r){"use strict";var n=r(2100),i=n(r(8287)),o=n(r(5881)),a=r(7045),s=n(r(3426)),d=r(4700),c=r(1322),u=n(r(9577)),l=r(7316),p={batchSize:1,batchDelay:100,method:"POST"},f={handler:"function",batchSize:"number",batchDelay:"number",gvlid:"number"};u.default.registerAnalyticsAdapter({adapter:function(){var e,t,r,n,a=(0,s.default)({analyticsType:"endpoint"}),u=(0,d.prefixLog)("Generic analytics:"),g=u.logError,v=u.logWarn,m=[],h=0;function b(){var e=m;m=[],h++;try{if(20===h&&g("detected probable infinite recursion, discarding events",e),h>=20)return;try{t(e)}catch(e){g("error executing options.handler",e)}}finally{h--}}return Object.assign(Object.create(a),{gvlid:function(e){var t;return null==e||null==(t=e.options)?void 0:t.gvlid},enableAnalytics:function(r){if(function(e){if(!e.url&&!e.handler)return g("options must specify either `url` or `handler`"),!1;if(e.hasOwnProperty("method")&&!["GET","POST"].includes(e.method))return g("options.method must be GET or POST"),!1;for(var t=0,r=Object.entries(f);t<r.length;t++){var n=(0,o.default)(r[t],2),a=n[0],s=n[1];if(e.hasOwnProperty(a)&&(0,i.default)(e[a])!==s)return g("options.".concat(a," must be a ").concat(s)),!1}if(e.hasOwnProperty("events")){if(!(0,d.isPlainObject)(e.events))return g("options.events must be an object"),!1;for(var u=0,l=Object.entries(e.events);u<l.length;u++){var p=(0,o.default)(l[u],2),m=p[0],h=p[1];if((0,c.has)(m)||v("options.events.".concat(m," does not match any known Prebid event")),"function"!=typeof h)return g("options.events.".concat(m," must be a function")),!1}}return!0}((null==r?void 0:r.options)||{})){var s;t=(e=Object.assign({},p,r.options)).handler||function(e){var t=e.url,r=e.method,n=e.batchSize,i=e.ajax,o=void 0===i?(0,l.ajaxBuilder)():i,a={success:function(){},error:function(){}},s=n>1?function(e){return e}:function(e){return e[0]},d="GET"===r?function(e){return{data:JSON.stringify(e)}}:function(e){return JSON.stringify(e)};return function(e){o(t,a,d(s(e)),{method:r,keepalive:!0})}}(e),n=(s=e.events)?function(e){var t=e.eventType,r=e.args;if(s.hasOwnProperty(t))try{return s[t](r)}catch(e){g("error executing options.events.".concat(t),e)}}:function(e){return e},a.enableAnalytics.call(this,r)}},track:function(t){var i=n(t);null!=i&&(m.push(i),null!=r&&(clearTimeout(r),r=null),m.length>=e.batchSize?b():r=setTimeout(b,e.batchDelay))}})}(),code:"generic"}),(0,a.registerModule)("genericAnalyticsAdapter")},3870:function(e,t,r){"use strict";var n=r(7045),i=r(1014),o=r(3479),a=r(9926),s=r(3103),d=r(2508),c=r(1617),u=r(4700),l=void 0,p={},f=!1;function g(e){return(0,i.getSignals)(e)}var v=function(e){var t=p.customGptSlotMatching;if((0,u.isGptPubadsDefined)()){var r=e.reduce(function(e,t){return e[t.code]=e[t.code]||[],e[t.code].push(t),e},{}),n={};return window.googletag.pubads().getSlots().forEach(function(e){var i=(0,c.find)(Object.keys(r),t?t(e):(0,u.isAdUnitCodeMatchingSlot)(e));if(i){var o={name:"gam",adslot:m(n[i]=e.getAdUnitPath())};r[i].forEach(function(e){var t;(0,u.deepSetValue)(e,"ortb2Imp.ext.data.adserver",Object.assign({},null==(t=e.ortb2Imp)||null==(t=t.ext)||null==(t=t.data)?void 0:t.adserver,o))})}}),n}},m=function(e){return(a.config.getConfig("gptPreAuction")||{}).mcmEnabled?e.replace(/(^\/\d*),\d*\//,"$1/"):e},h=function(e,t,r){var n=e.ortb2Imp.ext.data;if(n.pbadslot)return n.pbadslot;if((0,u.isGptPubadsDefined)()){var i=window.googletag.pubads().getSlots().filter(function(e){return e.getAdUnitPath()===r});if(0!==i.length)return 1===i.length?t:"".concat(t,"#").concat(e.code)}},b=function(e){var t=e.ortb2Imp.ext.data,r=p.customPbAdSlot;if(!t.pbadslot){if(r){t.pbadslot=r(e.code,(0,u.deepAccess)(t,"adserver.adslot"));return}try{var n=document.getElementById(e.code);if(n.dataset.adslotid){t.pbadslot=n.dataset.adslotid;return}}catch(e){}if((0,u.deepAccess)(t,"adserver.adslot")){t.pbadslot=t.adserver.adslot;return}return t.pbadslot=e.code,!0}};function y(e){(0,u.logWarn)("pbadslot is deprecated and will soon be removed, use gpid instead",e)}var A=function(e,t){var r=v(t),n=p,i=n.useDefaultPreAuction,o=n.customPreAuction;t.forEach(function(e){e.ortb2Imp=e.ortb2Imp||{},e.ortb2Imp.ext=e.ortb2Imp.ext||{},e.ortb2Imp.ext.data=e.ortb2Imp.ext.data||{};var t=e.ortb2Imp.ext;if(o||i){null!=(n=t.data)&&n.pbadslot&&y(e);var n,a,s=(0,u.deepAccess)(t,"data.adserver.adslot");o?a=o(e,s,null==r?void 0:r[e.code]):i&&(a=h(e,s,null==r?void 0:r[e.code])),a&&(t.gpid=t.data.pbadslot=a)}else{y(e);var d=b(e);t.gpid||d||(t.gpid=t.data.pbadslot)}});for(var a=arguments.length,s=Array(a>2?a-2:0),d=2;d<a;d++)s[d-2]=arguments[d];return e.call.apply(e,[l,t].concat(s))},I=function(e,t){var r,n,a=(r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.auctionManager.index;return e.map(function(e){var r;return null==(r=t.getAuction({auctionId:e}))||null==(r=r.getFPD())?void 0:r.global}).map(g).filter(function(e){return e})}(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.auctionManager;return Object.values(e).flatMap(function(e){return Object.entries(e)}).filter(function(e){return e[0]===s.TARGETING_KEYS.AD_ID||e[0].startsWith(s.TARGETING_KEYS.AD_ID+"_")}).flatMap(function(e){return e[1]}).map(function(e){var r;return null==(r=t.findBidByAdId(e))?void 0:r.auctionId}).filter(function(e){return null!=e}).filter(u.uniques)}(t)),n={},i.taxonomies.forEach(function(e){var t=r.flatMap(function(e){return e}).filter(function(t){return t.taxonomy===e}).map(function(e){return e.values});n[e]=t.length?t.reduce(function(e,t){return e.filter(function(e){return t.includes(e)})}):[],n[e]={values:n[e]}}),n);window.googletag.setConfig&&window.googletag.setConfig({pps:{taxonomies:a}}),e(t)},E=function(e){(p=(0,u.pick)(e,["enabled",function(e){return!1!==e},"customGptSlotMatching",function(e){return"function"==typeof e&&e},"customPbAdSlot",function(e){return"function"==typeof e&&e},"customPreAuction",function(e){return"function"==typeof e&&e},"useDefaultPreAuction",function(e){return null==e||e}])).enabled?f||((0,d.getHook)("makeBidRequests").before(A),(0,d.getHook)("targetingDone").after(I),f=!0):((0,u.logInfo)("".concat("GPT Pre-Auction",": Turning off module")),p={},(0,d.getHook)("makeBidRequests").getHooks({hook:A}).remove(),(0,d.getHook)("targetingDone").getHooks({hook:I}).remove(),f=!1)};a.config.getConfig("gptPreAuction",function(e){return E(e.gptPreAuction)}),E({}),(0,n.registerModule)("gptPreAuction")},8313:function(e,t,r){"use strict";var n=r(2100),i=n(r(8287)),o=n(r(4132)),a=n(r(5881)),s=n(r(939)),d=n(r(5794)),c=r(7045),u=r(4700),l=r(7316),p=r(523),f=r(8915),g=r(4607),v=r(9926),m=r(1122),h=r(175),b=["mind","maxd","size","playerSize","protocols","durationRangeSec"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,d.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var I="grid",E="https://grid.bidswitch.net/hbjson",S="tmguid",O=(0,m.getStorageManager)({bidderCode:I}),_={noAdid:"Bid from response has no adid parameter - ",noAdm:"Bid from response has no adm parameter - ",noBid:"Array of bid objects is empty",emptyUids:"Uids should be not empty",emptySeatbid:"Seatbid array from response has empty item",emptyResponse:"Response is empty",hasEmptySeatbidArray:"Response has empty seatbid array",hasNoArrayOfBids:"Seatbid from response has no array of bid objects - "},T={trustx:{endpoint:"https://grid.bidswitch.net/hbjson?sp=trustx",syncurl:"https://x.bidswitch.net/sync?ssp=themediagrid",bidResponseExternal:{netRevenue:!1}},gridNM:{defaultParams:{multiRequest:!0}}},w=!1,C={code:I,gvlid:686,aliases:["playwire","adlivetech","gridNM",{code:"trustx",skipPbsAliasing:!0}],supportedMediaTypes:[g.BANNER,g.VIDEO],isBidRequestValid:function(e){return e&&!!(e.params.uid||e.params.secid)},buildRequests:function(e,t){if(!e.length)return null;var r,n,d=null,c=null,l=null,p=null,f=null,m=null,h=null,y=!1,I=t||{},_=I.bidderRequestId,w=I.gdprConsent,C=I.uspConsent,x=I.timeout,P=I.refererInfo,D=I.gppConsent,R=P?encodeURIComponent(P.page):"",k=parseInt(x)||null,j=[],N={},B=[],U=[],M=[];e.forEach(function(e){var r={bid:e,savedPrebidBid:null};if(e.params.uid||e.params.secid){_||(_=e.bidderRequestId),l||(l=e.schain),p||(p=e.userIdAsEids),h||(h=T[e.bidder]&&T[e.bidder].endpoint);var n=e.params,i=e.mediaTypes,s=e.bidId,f=e.adUnitCode,v=e.rtd,m=e.ortb2Imp,I=A(A({},(T[e.bidder]||{}).defaultParams),n),E=I.secid,S=I.pubid,O=I.source,w=I.uid,C=I.keywords,x=I.forceBidder,P=I.multiRequest,D=I.content,V=I.video,q=function(e,t){var r=e.video?"video":"banner",n=parseFloat(t.params.bidFloor||t.params.floorcpm||0)||null;if("function"==typeof t.getFloor){var i=t.getFloor({currency:"USD",mediaType:r,size:t.sizes.map(function(e){var t=(0,a.default)(e,2);return{w:t[0],h:t[1]}})});(0,u.isPlainObject)(i)&&"USD"===i.currency&&!isNaN(parseFloat(i.floor))&&(n=Math.max(n,parseFloat(i.floor)))}return n}(i||{},e),L=v&&v.jwplayer&&v.jwplayer.targeting;L&&!c&&L.content&&(c=L.content);var F={id:s.toString(),tagid:(E||w).toString(),ext:{divid:f.toString()}};if(m&&(m.instl&&(F.instl=parseInt(m.instl)||null),m.ext&&(F.ext.gpid=(null==(z=m.ext.gpid)?void 0:z.toString())||(null==(H=m.ext.data)||null==(H=H.pbadslot)?void 0:H.toString())||(null==(Y=m.ext.data)||null==(Y=Y.adserver)||null==(Y=Y.adslot)?void 0:Y.toString()),m.ext.data&&(F.ext.data=m.ext.data))),(0,u.isEmpty)(C)||(d||(d=C),F.ext.bidder={keywords:C}),q&&(F.bidfloor=q),!i||i[g.BANNER]){var G=function(e,t){var r=t.sizes||e.sizes;if(r&&r.length){var n=r.map(function(e){return(0,u.parseGPTSingleSizeArrayToRtbSize)(e)}),i=(0,u.parseGPTSingleSizeArrayToRtbSize)(r[0]);return n.length&&(i.format=n),i}}(e,i?i[g.BANNER]:{});G&&(F.banner=G)}if(i&&i[g.VIDEO]){var W=function(e,t,r){var n=A(A({},t),e),i=n.mind,a=n.maxd,s=n.size,d=n.playerSize,c=n.protocols,l=n.durationRangeSec,p=void 0===l?[]:l,f=(0,o.default)(n,b);if(s&&(0,u.isStr)(s)){var g=s.split("x");2===g.length&&parseInt(g[0])&&parseInt(g[1])&&(f.w=parseInt(g[0]),f.h=parseInt(g[1]))}if(!f.w||!f.h){var v=((d||r||[]).toString().match(/^\d+,\d+/)||[])[0],m=v&&v.split(",").map(function(e){return parseInt(e)});m&&2===m.length&&Object.assign(f,(0,u.parseGPTSingleSizeArrayToRtbSize)(m))}if(f.w&&f.h){var h=i||p[0]||parseInt(f.minduration)||null,y=a||p[1]||parseInt(f.maxduration)||null;return h&&(f.minduration=h),y&&(f.maxduration=y),c&&c.length&&(f.protocols=c),f}}(V,i[g.VIDEO],e.sizes);W&&(F.video=W)}if(F.banner||F.video)if(P){var z,H,Y,J,K,Q={tid:null==t||null==(J=t.ortb2)||null==(J=J.source)||null==(J=J.tid)||null==(K=J.toString)?void 0:K.call(J),ext:{wrapper:"Prebid_js",wrapper_version:"9.40.0"}};e.schain&&(Q.ext.schain=e.schain);var X={id:e.bidderRequestId&&e.bidderRequestId.toString(),site:{page:R},tmax:k,source:Q,imp:[F]};S&&(X.site.publisher={id:S});var $=D||L&&L.content;$&&(X.site.content=$),B.push(X),U.push(O),M.push(r)}else N[s]=r,j.push(F);!y&&x&&T[x]&&(y=x)}}),(y=v.config.getConfig("forceBidderName")||y)&&T[y]&&(h=T[y].endpoint,this.forceBidderName=y);var V={tid:null==t||null==(r=t.ortb2)||null==(r=r.source)||null==(r=r.tid)||null==(n=r.toString)?void 0:n.call(r),ext:{wrapper:"Prebid_js",wrapper_version:"9.40.0"}};l&&(V.ext.schain=l);var q=j.length||!B.length?{id:_&&_.toString(),site:{page:R},tmax:k,source:V,imp:j}:null;return c&&(q.site.content=c),[].concat(B,[q]).forEach(function(e){if(e){f=null;var r=(0,u.deepAccess)(t,"ortb2.user.data");r&&r.length&&(f={data:(0,s.default)(r)}),w&&w.consentString&&(m={consent:w.consentString});var n=(0,u.deepAccess)(t,"ortb2.user.ext.device");n&&((m=m||{}).device=A({},n)),null!=t&&null!=(b=t.ortb2)&&b.device&&(e.device=t.ortb2.device),p&&p.length&&((m=m||{}).eids=(0,s.default)(p)),m&&Object.keys(m).length&&((f=f||{}).ext=m);var o=O.getDataFromLocalStorage(S)||function(){if(v.config.getConfig("localStorageWriteAllowed")){var e=(0,u.generateUUID)().replace(/-/g,"");return O.setDataInLocalStorage(S,e),e}return null}();o&&((f=f||{}).id=o.toString()),f&&(e.user=f);var a=(0,u.deepAccess)(t,"ortb2.user.keywords")||null,c=(0,u.deepAccess)(t,"ortb2.site.keywords")||null;a&&((d=d||{}).user=d.user||{},d.user.ortb2=[{name:"keywords",keywords:a.split(",")}]),c&&((d=d||{}).site=d.site||{},d.site.ortb2=[{name:"keywords",keywords:c.split(",")}]),d&&(h={},Object.keys(g=d).forEach(function(e){var t=g[e];if(t)if("site"===e||"user"===e){var r={};Object.keys(t).forEach(function(e){if(Array.isArray(t[e])){var n=[];t[e].forEach(function(e){if("object"===(0,i.default)(e)&&e.name){var t={name:e.name,segments:[]};Object.keys(e).forEach(function(r){Array.isArray(e[r])&&e[r].forEach(function(e){e&&("string"==typeof e?t.segments.push({name:r,value:e}):"segments"===r&&"string"==typeof e.name&&"string"==typeof e.value&&t.segments.push(e))})}),t.segments.length&&n.push(t)}}),n.length&&(r[e]=n)}}),h[e]=r}else h[e]=t}),d=Object.keys(h).length&&h)&&(e.ext={keywords:d}),w&&w.gdprApplies&&(e.regs={ext:{gdpr:+!!w.gdprApplies}});var l=(0,u.deepAccess)(t,"ortb2.regs")||{};if(D||null!=l&&l.gpp){var g,h,b,y,I,E,_,T={gpp:null!=(I=null==D?void 0:D.gppString)?I:null==l?void 0:l.gpp,gpp_sid:null!=(E=null==D?void 0:D.applicableSections)?E:null==l?void 0:l.gpp_sid};e.regs=(0,u.mergeDeep)(null!=(_=null==e?void 0:e.regs)?_:{},T)}C&&(e.regs||(e.regs={ext:{}}),e.regs.ext||(e.regs.ext={}),e.regs.ext.us_privacy=C),!0===v.config.getConfig("coppa")&&(e.regs||(e.regs={}),e.regs.coppa=1),null!=l&&null!=(y=l.ext)&&y.dsa&&(e.regs||(e.regs={ext:{}}),e.regs.ext||(e.regs.ext={}),e.regs.ext.dsa=l.ext.dsa);var x=(0,u.deepAccess)(t,"ortb2.site");if(x){var P=[].concat((0,s.default)(x.cat||[]),(0,s.default)(x.pagecat||[])).filter(function(e){return e&&"string"==typeof e});P.length&&(e.site.cat=P);var R=(0,u.deepAccess)(x,"content.genre");R&&"string"==typeof R&&(e.site.content=A(A({},e.site.content),{},{genre:R}));var k=(0,u.deepAccess)(x,"content.data");if(k&&k.length){var j=e.site.content||{};e.site.content=(0,u.mergeDeep)(j,{data:k})}var N=(0,u.deepAccess)(x,"content.id");N&&(e.site.content=A(A({},e.site.content),{},{id:N}))}}}),[].concat((0,s.default)(B.map(function(e,t){var r,n=(h||E).replace(/[?&]sp=([^?&=]+)/,function(e,t){return t&&(r=t),""}),i=U[t]||r;return{method:"POST",url:n+(n.indexOf("?")>-1?"&":"?")+"no_mapping=1"+(i?"&sp=".concat(i):""),data:JSON.stringify(e),bidObject:M[t]}})),(0,s.default)(q?[{method:"POST",url:h||E,data:JSON.stringify(q),bidsMap:N}]:[]))},interpretResponse:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.Renderer;e=e&&e.body;var i=[];e?e.seatbid&&!e.seatbid.length&&(r=_.hasEmptySeatbidArray):r=_.emptyResponse;var o=this.forceBidderName||this.code;return!r&&e.seatbid&&e.seatbid.forEach(function(e){!function(e,t,r,n,i){if(e){if(e.adid||(s=_.noAdid+JSON.stringify(e)),s||e.adm||e.nurl){var o,a,s,d=t.bidsMap?t.bidsMap[e.impid]:t.bidObject,c=d||{},l=c.bid,p=c.savedPrebidBid;if(l&&(o=e.price,a=p&&p.cpm,!(0,u.isNumber)(a)||o>a||o===a&&Math.random()>.5)){var f={requestId:l.bidId,cpm:e.price,width:e.w,height:e.h,creativeId:e.adid,currency:"USD",netRevenue:!0,ttl:360,meta:{advertiserDomains:e.adomain?e.adomain:[]},dealId:e.dealid};d.savedPrebidBid=f,e.ext&&e.ext.bidder&&e.ext.bidder.grid&&e.ext.bidder.grid.demandSource&&(f.adserverTargeting={hb_ds:e.ext.bidder.grid.demandSource},f.meta.demandSource=e.ext.bidder.grid.demandSource),e.ext&&e.ext.dsa&&(f.meta.dsa=e.ext.dsa),"video"===e.content_type?(e.adm?(f.vastXml=e.adm,f.adResponse={content:f.vastXml}):e.nurl&&(f.vastUrl=e.nurl),f.mediaType=g.VIDEO,l.renderer||l.mediaTypes&&l.mediaTypes.video&&"outstream"!==l.mediaTypes.video.context||(f.renderer=function(e,t,r){var n=r.install({id:t.id,url:t.url,loaded:!1});try{n.setRender(x)}catch(e){(0,u.logWarn)("Prebid Error calling setRender on renderer",e)}return n}(0,{id:l.bidId,url:"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js"},n))):(f.ad=e.adm,f.mediaType=g.BANNER);var v=T[i]&&T[i].bidResponseExternal||{};r.push((0,u.mergeDeep)(f,v))}}else s=_.noAdm+JSON.stringify(e);s&&(0,u.logError)(s)}}((0,h.getBidFromResponse)(e,_),t,i,n,o)}),r&&(0,u.logError)(r),i},getUserSyncs:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],i=t[2],o=t[3];if(!w&&n.pixelEnabled){var a="";i&&("boolean"==typeof i.gdprApplies&&(a+="&gdpr=".concat(Number(i.gdprApplies))),"string"==typeof i.consentString&&(a+="&gdpr_consent=".concat(i.consentString))),o&&(a+="&us_privacy=".concat(o));var s=this.forceBidderName||this.code,d=T[s]&&T[s].syncurl||"https://x.bidswitch.net/sync?ssp=themediagrid";return w=!0,{type:"image",url:d+a}}},ajaxCall:function(e,t,r,n){return n.browsingTopics=!1,(0,l.ajax)(e,t,r,n)},onDataDeletionRequest:function(e){C.ajaxCall("https://media.grid.bidswitch.net/uspapi_delete_c2s",null,null,{method:"GET"})}};function x(e){e.renderer.push(function(){window.ANOutstreamVideo.renderAd({targetId:e.adUnitCode,adResponse:e.adResponse})})}(0,p.registerBidder)(C),(0,c.registerModule)("gridBidAdapter")},4764:function(e,t,r){"use strict";var n=r(2100),i=n(r(5794)),o=n(r(8287)),a=n(r(5881)),s=r(7045),d=r(4607),c=r(4700),u=r(9926),l=r(1122),p=r(1617),f=r(523);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h="gumgum",b=(0,l.getStorageManager)({bidderCode:h}),y={t:0,rq:8,pbv:"9.40.0"},A=[d.BANNER,d.VIDEO],I=["dac.co.jp","audigent.com","id5-sync.com","liveramp.com","intentiq.com","liveintent.com","crwdcntrl.net","quantcast.com","adserver.org","yahoo.com"],E={},S=null;function O(e){var t=0,r=0,n=0;return e.forEach(function(e){var i=(0,a.default)(e,2),o=i[0],s=i[1],d=o>s?o:s;(d>n||d===n&&o>=t&&s>=r)&&(n=d,t=o,r=s)}),[t,r]}function _(e){if(e.content&&Array.isArray(e.content.data)){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return g(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(e.content.data);try{for(r.s();!(t=r.n()).done;){var n,i=t.value;if("string"==typeof(null==i?void 0:i.name)&&(i.name.includes("iris.com")||i.name.includes("iris.tv")))return Array.isArray(null==(n=i.ext)?void 0:n.cids)?i.ext.cids.join(","):""}}catch(e){r.e(e)}finally{r.f()}}return null}(0,f.registerBidder)({code:h,gvlid:61,aliases:["gg"],isBidRequestValid:function(e){var t=e.params,r=e.adUnitCode,n=t.inScreen||t.inScreenPubID||t.inSlot||t.ICV||t.video||t.inVideo||t.slot||t.native||t.zone||t.pubID;if(E[n])return(0,c.logWarn)("[GumGum] Please check the implementation for ".concat(n," for the placement ").concat(r)),!1;switch(!0){case!!t.zone:case!!t.pubId:case!!t.inScreen:case!!t.inScreenPubID:case!!t.inSlot:case!!t.ICV:case!!t.video:case!!t.inVideo:case!!t.videoPubID:break;default:return(0,c.logWarn)("[GumGum] No product selected for the placement ".concat(r,", please check your implementation.")),!1}return!t.bidfloor||!!("number"==typeof t.bidfloor&&isFinite(t.bidfloor))||((0,c.logWarn)("[GumGum] bidfloor must be a Number"),!1)},buildRequests:function(e,t){var n=[],i=t&&t.gdprConsent,s=t&&t.uspConsent,d=t&&t.gppConsent,l=t&&t.timeout,p=+(!0===u.config.getConfig("coppa")),f=t&&t.refererInfo&&t.refererInfo.page,g=t&&t.refererInfo&&t.refererInfo.topmostLocation;return(0,c._each)(e,function(e){var u,v,h,A,E,T=e.bidId,w=e.mediaTypes,C=void 0===w?{}:w,x=e.params,P=void 0===x?{}:x,D=e.schain,R=e.userId,k=void 0===R?{}:R,j=e.ortb2Imp,N=e.adUnitCode,B=void 0===N?"":N,U=function(e,t,r){var n=Object.keys(e)[0]||"banner",i={floor:0,currency:"USD"};if("function"==typeof r.getFloor){var o=r.getFloor({mediaType:n,size:"*"})||{},a=o.currency,s=o.floor;s&&(i.floor=s),a&&(i.currency=a),t&&s&&"USD"===a&&(i.floor=Math.max(t,parseFloat(s)))}else t&&(i.floor=t);return i}(C,P.bidfloor,e),M=U.currency,V=U.floor,q=(J=["uid","eid","lipbid","envelope"],Object.keys(k).reduce(function(e,t){var r=k[t];switch((0,o.default)(r)){case"string":e[t]=r;break;case"object":var n=J.filter(function(e){return r.hasOwnProperty(e)});n.length&&(e[t]=r[n[0]])}return e},{})),L=(0,c.deepAccess)(j,"ext.gpid")||(0,c.deepAccess)(j,"ext.data.pbadslot"),F=1===(0,c.deepAccess)(j,"ext.ae"),G=[1,1],W={};W.displaymanager="Prebid.js - gumgum",W.displaymanagerver="9.40.0";var z=new Date,H=z.getTime(),Y=z.getTimezoneOffset();if(W.lt=H,W.to=Y,k&&k.pubProvidedId){var J,K,Q=k.pubProvidedId.filter(function(e){return I.includes(e.source)}),X=(K=JSON.stringify(Q)).length<=1800?K:K=JSON.stringify(Q.slice(0,Math.floor(Q.length*(1800/K.length))));W.pubProvidedId=X}for(var $ in k&&k.id5id&&k.id5id.uid&&k.id5id.ext&&(W.id5Id=k.id5id.uid||null,W.id5IdLinkType=k.id5id.ext.linkType||null),B&&(W.aun=B),q)W[$]=q[$];if(C.banner?G=C.banner.sizes:C.video&&(G=C.video.playerSize,ei=(en=C.video).minduration,eo=en.maxduration,ea=en.linearity,es=en.startdelay,ed=en.placement,ec=en.plcmt,el=void 0===(eu=en.protocols)?[]:eu,ep=en.playerSize,ef=en.skip,eg=en.api,ev=en.mimes,em=en.playbackmethod,eh=en.playbackend,ey=(eb=(0,c.parseSizesInput)(void 0===ep?[]:ep))[0]&&eb[0].split("x"),eI=(eA=(0,a.default)(ey,2))[0],eE=eA[1],eS="",el.length&&(eS=el.join(",")),eO={mind:ei,maxd:eo,li:ea,sd:es,pt:ed,pr:eS,viw:eI,vih:eE,skip:ef,pbe:eh},null!=ec&&(eO.vplcmt=ec),eg&&eg.length&&(eO.api=eg.join(",")),ev&&ev.length&&(eO.mimes=ev.join(",")),em&&em.length&&(eO.pbm=em.join(",")),W=eO),L&&(W.gpid=L),S&&(W.pv=S),V&&(W.fp=V,W.fpc=M),t&&t.ortb2&&t.ortb2.site){Z=W,ee=t.ortb2.site,et=P,(er=_(ee))?Z.irisid=er:et.irisid&&"string"==typeof et.irisid&&(Z.irisid=et.irisid);var Z,ee,et,er,en,ei,eo,ea,es,ed,ec,eu,el,ep,ef,eg,ev,em,eh,eb,ey,eA,eI,eE,eS,eO,e_,eT,ew=null==(eT=t.ortb2.site.content)?void 0:eT.url;ew&&(W.curl=ew)}if(P.iriscat&&"string"==typeof P.iriscat&&(W.iriscat=P.iriscat),P.zone||P.pubId)if(P.zone?W.t=P.zone:W.pubId=P.pubId,W.pi=2,P.slot){var eC=O(G),ex=(0,a.default)(eC,2),eP=ex[0],eD=ex[1];W.maxw=eP,W.maxh=eD,W.si=P.slot,W.pi=3,W.bf=G.reduce(function(e,t){return"".concat(e).concat(e&&",").concat(t[0],"x").concat(t[1])},"")}else P.native?(W.ni=P.native,W.pi=5):C.video?W.pi=2===C.video.linearity?6:7:P.product&&"skins"===P.product.toLowerCase()&&(W.pi=8);else W=m(m({},W),function(e,t){var r={};if(e.inScreenPubID&&(r.pubId=e.inScreenPubID,r.pi=2),e.inScreen&&(r.t=e.inScreen,r.pi=2),e.inSlot){var n=O(t),i=(0,a.default)(n,2),o=i[0],s=i[1];r.maxw=o,r.maxh=s,r.si=e.inSlot,r.pi=3,r.bf=t.reduce(function(e,t){return"".concat(e).concat(e&&",").concat(t[0],"x").concat(t[1])},"")}return e.ICV&&(r.ni=e.ICV,r.pi=5),e.videoPubID&&(r.pubId=e.videoPubID,r.pi=7),e.video&&(r.t=e.video,r.pi=7),e.inVideo&&(r.t=e.inVideo,r.pi=6),r}(P,G));F&&(W.ae=F),i&&(W.gdprApplies=+!!i.gdprApplies),W.gdprApplies&&(W.gdprConsent=i.consentString),s&&(W.uspConsent=s),d?(W.gppString=t.gppConsent.gppString?t.gppConsent.gppString:"",W.gppSid=Array.isArray(t.gppConsent.applicableSections)?t.gppConsent.applicableSections.join(","):""):!d&&null!=t&&null!=(e_=t.ortb2)&&null!=(e_=e_.regs)&&e_.gpp&&(W.gppString=t.ortb2.regs.gpp,W.gppSid=Array.isArray(t.ortb2.regs.gpp_sid)?t.ortb2.regs.gpp_sid.join(","):"");var eR=(0,c.deepAccess)(t,"ortb2.regs.ext.dsa");eR&&(W.dsa=JSON.stringify(eR)),p&&(W.coppa=p),D&&D.nodes&&(W.schain=(u="".concat(D.ver,",").concat(D.complete),D.nodes.map(function(e){u+="!".concat(encodeURIComponent(e.asi||""),","),u+="".concat(encodeURIComponent(e.sid||""),","),u+="".concat(encodeURIComponent(e.hp||""),","),u+="".concat(encodeURIComponent(e.rid||""),","),u+="".concat(encodeURIComponent(e.name||""),","),u+="".concat(encodeURIComponent(e.domain||""))}),u));var ek=(0,c.deepAccess)(j,"ext.tid")||(0,c.deepAccess)(t,"ortb2.source.tid")||"";W.tId=ek,Object.assign(W,function(e,t){var n,i,o,a,s,d,u,l,p,f,g,v=function(e){return RegExp("[?#&](".concat(e,"=(.*?))($|&)"),"i")},m={};try{d=(s=r.g.top).screen,u=e||"",l=t||""}catch(e){return(0,c.logError)(e),m}return m={vw:(0,c.getWinDimensions)().innerWidth,vh:(0,c.getWinDimensions)().innerHeight,sw:d.width,sh:d.height,pu:["ggad","ggdeal"].reduce(function(e,t){var r=n.match(v(t));return r&&(r[1]&&(e=e.replace(r[1],"")),r[3]&&(e=e.replace(r[3],""))),e},n=u),tpl:l,ce:b.cookiesAreEnabled(),dpr:s.devicePixelRatio||1,jcsi:JSON.stringify(y),ogu:(i=(document&&document.getElementsByTagName("head")[0]).querySelector("meta[property='og:url']"))?i.content:null},(g=(a=(o=window.navigator&&(window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection))&&(o.downlink||o.bandwidth))?Math.round(1024*a):null)&&(m.ns=g),(p=(u.match(v("ggad"))||[0,0,0])[2])&&(m[isNaN(p)?"eAdBuyId":"adBuyId"]=p),(f=(u.match(v("ggdeal"))||[0,0,0])[2])&&(m.ggdeal=f),m}(f,g),(v=null==t?void 0:t.ortb2,Object.keys(E={ip:(A=(0,c.deepAccess)(v,"device")||{}).ip,ipv6:A.ipv6,ua:A.ua,dnt:A.dnt,os:A.os,osv:A.osv,dt:A.devicetype,lang:A.language,make:A.make,model:A.model,ppi:A.ppi,pxratio:A.pxratio,foddid:null==A||null==(h=A.ext)?void 0:h.fiftyonedegrees_deviceId}).reduce(function(e,t){return void 0!==E[t]&&(e[t]=E[t]),e},{}))),n.push({id:T,tmax:l,tId:ek,pi:W.pi,selector:P.selector,sizes:G,url:"https://g2.gumgum.com/hbid/imp",method:"GET",data:W})}),n},interpretResponse:function(e,t){var r,n=[],i=e.body;if(!i||i.err){var o=t.data||{},s=o.si||o.ni||o.t||o.pubId,u=i?i.err.drt:18e5;E[s]={productId:o.pi,timestamp:new Date().getTime()},setTimeout(function(){E[s]&&delete E[s]},u),(0,c.logWarn)("[GumGum] Please check the implementation for ".concat(s))}var l=Object.assign({ad:{price:0,id:0,markup:"",width:0,height:0},pag:{pvid:0},meta:{adomain:[],mediaType:""}},i),f=l.ad,g=f.price,v=f.id,h=f.markup,b=f.cur,A=f.width,I=f.height,O=f.maxw,_=f.maxh,T=l.cw,w=l.pag.pvid,C=l.jcsi,x=l.meta,P=x.adomain,D=x.mediaType,R=t.data||{},k=R.pi,j=6===k||7===k?d.VIDEO:d.BANNER,N=3===k&&9===R.si,B=(0,c.parseSizesInput)(t.sizes);if(O&&_)B=["".concat(O,"x").concat(_)];else if(5===k&&(0,p.includes)(B,"1x1"))B=["1x1"];else if(2===k&&(0,p.includes)(B,"1x1")||3===k){var U=t.sizes&&t.sizes.reduce(function(e,t){var r=(0,a.default)(t,2),n=r[0],i=r[1];return A===n&&I===i&&e.push(t.join("x")),e},[])||[];B=U.length?U:(0,c.parseSizesInput)(t.sizes)}var M=B[0].split("x"),V=(0,a.default)(M,2),q=V[0],L=V[1];return C&&(i.jcsi=y),S=w,v&&n.push(m(m({ad:T?(r=Object.assign({},i,{bidRequest:t}),T.replace("AD_JSON",window.btoa(JSON.stringify(r)))):h},j===d.VIDEO&&{ad:h,vastXml:h}),{},{mediaType:j,cpm:N?.1:g,creativeId:v,currency:b||"USD",height:L,netRevenue:!0,requestId:t.id,ttl:60,width:q,meta:{advertiserDomains:P||[],mediaType:D||j}})),n},getUserSyncs:function(e,t){return t.map(function(e){return e.body&&e.body.pxs&&e.body.pxs.scr||[]}).reduce(function(e,t){return e.concat(t)},[]).map(function(e){return{type:"f"===e.t?"iframe":"image",url:e.u}})},supportedMediaTypes:A,getCids:_}),(0,s.registerModule)("gumgumBidAdapter")},4136:function(e,t,r){"use strict";var n,i=r(2100),o=r(8287),a=i(r(4602)),s=i(r(5794)),d=i(r(7583)),c=i(r(7586)),u=i(r(1770)),l=i(r(5881)),p=r(7045),f=r(4700),g=r(7316),v=r(2508),m=r(2339),h=r(1122),b=r(4840),y=r(6102),A=r(6296),I=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=S(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1322)),E=r(3103);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(S=function(e){return e?r:t})(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function T(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")}var w="id5id",C="User ID - ID5 submodule: ",x="id5-sync.com",P=(0,h.getStorageManager)({moduleType:b.MODULE_TYPE_UID,moduleName:"id5Id"}),D={id5id:{getValue:function(e){return e.uid},source:x,atype:1,getUidExt:function(e){if(e.ext)return e.ext}},euid:{getValue:function(e){return e.uid},getSource:function(e){return e.source},atype:3,getUidExt:function(e){if(e.ext)return e.ext}},trueLinkId:{getValue:function(e){return e.uid},getSource:function(e){return"true-link-id5-sync.com"},atype:1,getUidExt:function(e){if(e.ext)return e.ext}}},R=new WeakSet,k=(0,u.default)(function e(t,r,n,i,o){(0,c.default)(this,e),function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,R),R.add(this),this.submoduleConfig=t,this.gdprConsentData=r,this.cacheIdObj=n,this.usPrivacyData=i,this.gppData=o},[{key:"execute",value:(n=(0,d.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=T(R,this,q).call(this),!T(R,this,j).call(this)){e.next=14;break}return e.prev=2,e.next=5,T(R,this,N).call(this,t);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),(0,f.logError)(C+"Error while performing ID5 external module flow. Continuing with regular flow.",e.t0),e.abrupt("return",T(R,this,M).call(this,t));case 12:e.next=15;break;case 14:return e.abrupt("return",T(R,this,M).call(this,t));case 15:case"end":return e.stop()}},e,this,[[2,8]])})),function(){return n.apply(this,arguments)})}]);function j(){return"string"==typeof this.submoduleConfig.params.externalModuleUrl}function N(e){return B.apply(this,arguments)}function B(){return(B=(0,d.default)(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e){return J.apply(this,arguments)}(this.submoduleConfig.params.externalModuleUrl);case 2:return e.next=4,t;case 4:return r=e.sent,e.abrupt("return",T(R,this,U).call(this).fetchId5Id(r,this.submoduleConfig.params,(0,m.getRefererInfo)(),this.gdprConsentData,this.usPrivacyData,this.gppData));case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function U(){return window.id5Prebid&&window.id5Prebid.integration}function M(e){return V.apply(this,arguments)}function V(){return(V=(0,d.default)(a.default.mark(function e(t){var r,n,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return r=e.sent,e.next=5,T(R,this,F).call(this,r.extensionsCall);case 5:return n=e.sent,e.next=8,T(R,this,W).call(this,r.fetchCall,n);case 8:return i=e.sent,e.abrupt("return",T(R,this,Y).call(this,i));case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function q(){return L.apply(this,arguments)}function L(){return(L=(0,d.default)(a.default.mark(function e(){var t,r,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.submoduleConfig.params.configUrl||"https://id5-sync.com/api/config/prebid",e.next=3,(0,g.fetch)(t,{method:"POST",body:JSON.stringify(_(_({},this.submoduleConfig),{},{bounce:!0})),credentials:"include"});case 3:if((r=e.sent).ok){e.next=6;break}throw Error("Error while calling config endpoint: ",r);case 6:return e.next=8,r.json();case 8:return n=e.sent,(0,f.logInfo)(C+"config response received from the server",n),e.abrupt("return",n);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function F(e){return G.apply(this,arguments)}function G(){return(G=(0,d.default)(a.default.mark(function e(t){var r,n,i,o,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return",void 0);case 2:return r=t.url,i="GET"===(n=t.method||"GET")?void 0:JSON.stringify(t.body||{}),e.next=7,(0,g.fetch)(r,{method:n,body:i});case 7:if((o=e.sent).ok){e.next=10;break}throw Error("Error while calling extensions endpoint: ",o);case 10:return e.next=12,o.json();case 12:return s=e.sent,(0,f.logInfo)(C+"extensions response received from the server",s),e.abrupt("return",s);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(e,t){return z.apply(this,arguments)}function z(){return(z=(0,d.default)(a.default.mark(function e(t,r){var n,i,o,s,d;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,i=t.overrides||{},o=JSON.stringify(_(_(_({},T(R,this,H).call(this)),i),{},{extensions:r})),e.next=5,(0,g.fetch)(n,{method:"POST",body:o,credentials:"include"});case 5:if((s=e.sent).ok){e.next=8;break}throw Error("Error while calling fetch endpoint: ",s);case 8:return e.next=10,s.json();case 10:return d=e.sent,(0,f.logInfo)(C+"fetch response received from the server",d),e.abrupt("return",d);case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function H(){var e=this.submoduleConfig.params,t=this.gdprConsentData&&"boolean"==typeof this.gdprConsentData.gdprApplies&&this.gdprConsentData.gdprApplies?1:0,r=(0,m.getRefererInfo)(),n=this.cacheIdObj?this.cacheIdObj.signature:void 0,i=K(this.cacheIdObj),o=window.id5Bootstrap?window.id5Bootstrap.getTrueLinkInfo():{booted:!1},a={partner:e.partner,gdpr:t,nbPage:i,o:"pbjs",tml:r.topmostLocation,ref:r.ref,cu:r.canonicalUrl,top:+!!r.reachedTop,u:r.stack[0]||window.location.href,v:"9.40.0",storage:this.submoduleConfig.storage,localStorage:+!!P.localStorageIsEnabled(),true_link:o};!t||void 0===this.gdprConsentData.consentString||(0,f.isEmpty)(this.gdprConsentData.consentString)||(0,f.isEmptyStr)(this.gdprConsentData.consentString)||(a.gdpr_consent=this.gdprConsentData.consentString),void 0===this.usPrivacyData||(0,f.isEmpty)(this.usPrivacyData)||(0,f.isEmptyStr)(this.usPrivacyData)||(a.us_privacy=this.usPrivacyData),this.gppData&&(a.gpp_string=this.gppData.gppString,a.gpp_sid=this.gppData.applicableSections),void 0===n||(0,f.isEmptyStr)(n)||(a.s=n),void 0===e.pd||(0,f.isEmptyStr)(e.pd)||(a.pd=e.pd),void 0===e.provider||(0,f.isEmptyStr)(e.provider)||(a.provider=e.provider);var s=e.abTesting||{enabled:!1};return s.enabled&&(a.ab_testing={enabled:!0,control_group_pct:s.controlGroupPct}),a}function Y(e){try{e.privacy&&window.id5Bootstrap&&window.id5Bootstrap.setPrivacy&&window.id5Bootstrap.setPrivacy(e.privacy)}catch(e){(0,f.logError)(C+"Error while writing privacy info into local storage.",e)}return e}function J(){return(J=(0,d.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new y.PbPromise(function(e,r){if(window.id5Prebid)e();else try{(0,A.loadExternalScript)(t,b.MODULE_TYPE_UID,"id5",e)}catch(e){r(e)}}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function K(e){return e&&void 0!==e.nbPage?e.nbPage+1:1}function Q(e){var t=e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies,r=(0,f.deepAccess)(e,"vendorData.purpose.consents.1"),n=(0,f.deepAccess)(e,"vendorData.vendor.consents.".concat("131"));return!t||!!r&&!!n}(0,v.submodule)("userId",{name:"id5Id",gvlid:131,decode:function(e,t){if(e&&void 0!==e.ids){var r,n,i={},o={};return Object.entries(e.ids).forEach(function(e){var t,r=(0,l.default)(e,2),n=r[0],a=r[1].eid,s=null==a||null==(t=a.uids)?void 0:t[0];i[n]={uid:null==s?void 0:s.id,ext:null==s?void 0:s.ext},o[n]=function(){return a}}),this.eids=o,i}var a={};if(e&&"string"==typeof e.universal_uid){r=e.universal_uid,a=e.ext||a,n=e.publisherTrueLinkId,this.eids=D;var s={id5id:{uid:r,ext:a}};switch((0,f.isPlainObject)(a.euid)&&(s.euid={uid:a.euid.uids[0].id,source:a.euid.source,ext:{provider:x}}),n&&(s.trueLinkId={uid:n}),(0,f.deepAccess)(e,"ab_testing.result")){case"control":(0,f.logInfo)(C+"A/B Testing - user is in the Control Group: ID5 ID is NOT exposed"),(0,f.deepSetValue)(s,"id5id.ext.abTestingControlGroup",!0);break;case"error":(0,f.logError)(C+"A/B Testing ERROR! controlGroupPct must be a number >= 0 and <= 1");break;case"normal":(0,f.logInfo)(C+"A/B Testing - user is NOT in the Control Group"),(0,f.deepSetValue)(s,"id5id.ext.abTestingControlGroup",!1)}return(0,f.logInfo)(C+"Decoded ID",s),s}},getId:function(e,t,r){if(function(e){if(!e||!e.params||!e.params.partner)return(0,f.logError)(C+"partner required to be defined"),!1;var t=e.params.partner;if("string"==typeof t||t instanceof String){var r=parseInt(t);if(isNaN(r)||r<0)return(0,f.logError)(C+"partner required to be a number or a String parsable to a positive integer"),!1;e.params.partner=r}else if("number"!=typeof t)return(0,f.logError)(C+"partner required to be a number or a String parsable to a positive integer"),!1;return e.storage&&e.storage.type&&e.storage.name?(e.storage.name!==w&&(0,f.logWarn)(C+"storage name recommended to be '".concat(w,"'.")),!0):((0,f.logError)(C+"storage required to be set"),!1)}(e))return Q(null==t?void 0:t.gdpr)?{callback:function(n){new k(e,null==t?void 0:t.gdpr,r,null==t?void 0:t.usp,null==t?void 0:t.gpp).execute().then(function(e){I.emit(E.EVENTS.ID5_RESOLVED,e),n(e)}).catch(function(e){(0,f.logError)(C+"getId fetch encountered an error",e),n()})}}:void(0,f.logInfo)(C+"Skipping ID5 local storage write because no consent given.")},extendId:function(e,t,r){return Q(null==t?void 0:t.gdpr)?((0,f.logInfo)(C+"using cached ID",r),r&&(r.nbPage=K(r))):(0,f.logInfo)(C+"No consent given for ID5 local storage writing, skipping nb increment."),r},primaryIds:["id5id","trueLinkId"],eids:D,_reset:function(){this.eids=D}}),(0,p.registerModule)("id5IdSystem")},8004:function(e,t,r){"use strict";var n=r(8287),i=r(7045),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}(r(4700)),a=r(7316),s=r(2508),d=r(1122),c=r(4840);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l="identityLink",p=(0,d.getStorageManager)({moduleType:c.MODULE_TYPE_UID,moduleName:l}),f="_lr_env";function g(e,t,r){var n;r.notUse3P||p.getCookie("_lr_retry_request")?t():((n=new Date).setTime(n.getTime()+36e5),p.setCookie("_lr_retry_request","true",n.toUTCString()),o.logInfo("identityLink: A 3P retrieval is attempted!"),v(!1),(0,a.ajax)(e,{success:function(e){var r;if(e)try{r=JSON.parse(e)}catch(e){o.logInfo(e)}t(r&&r.envelope?r.envelope:"")},error:function(e){o.logInfo("identityLink: identityLink: ID fetch encountered an error",e),t()}},void 0,{method:"GET",withCredentials:!0}))}function v(e){var t=new Date;t.setTime(t.getTime()+2592e6),p.setCookie("_lr_env_src_ats",e,t.toUTCString())}(0,s.submodule)("userId",{name:l,gvlid:97,decode:function(e){return{idl_env:e}},getId:function(e,t){var r=e&&e.params||{};if(!r||"string"!=typeof r.pid)return void o.logError("identityLink: requires partner id to be defined");var n=null!=t?t:{},i=n.gdpr,a=n.gpp,s=i&&"boolean"==typeof i.gdprApplies&&i.gdprApplies?1:0,d=s?i.consentString:"";if(s&&(!d||""===d))return void o.logInfo("identityLink: Consent string is required to call envelope API.");var c=!!a&&!!a.gppString&&a.gppString,u=!!a&&!!a.gppString&&a.applicableSections.length>0&&-1!==a.applicableSections[0]&&a.applicableSections[0],l="https://api.rlcdn.com/api/identity/envelope?pid=".concat(r.pid).concat(s?"&ct=4&cv="+d:"").concat(c&&u?"&gpp="+c+"&gpp_sid="+u:"");return{callback:function(e){if(window.ats&&window.ats.retrieveEnvelope)o.logInfo("identityLink: ATS exists!"),window.ats.retrieveEnvelope(function(t){t?(o.logInfo("identityLink: An envelope can be retrieved from ATS!"),v(!0),e(JSON.parse(t).envelope)):g(l,e,r)});else{var t,n=(t=p.getCookie(f)||p.getDataFromLocalStorage(f))?window.atob(t):void 0;n?(o.logInfo("identityLink: LiveRamp envelope successfully retrieved from storage!"),e(JSON.parse(n).envelope)):g(l,e,r)}}}},eids:{idl_env:{source:"liveramp.com",atype:3}}}),(0,i.registerModule)("identityLinkIdSystem")},6525:function(e,t,r){"use strict";var n,i,o,a,s=r(2100),d=s(r(5881)),c=r(7045),u=r(4700),l=r(7316),p=r(2508),f=s(r(1421)),g=s(r(5728)),v=r(8276),m=r(2863),h=r(7757),b=r(6275),y=r(642),A=r(9810),I=r(853),E=r(941),S=r(2484),O="intentIqId",_={brands:0,mobile:1,platform:2,architecture:3,bitness:4,model:5,platformVersion:6,wow64:7,fullVersionList:8},T=A.FIRST_PARTY_KEY,w=0,C=0,x=0;function P(e,t,r){return e+=t.pid?"&pid="+encodeURIComponent(t.pid):"",e+=t.pcid?"&iiqidtype=2&iiqpcid="+encodeURIComponent(t.pcid):"",e+=t.pcidDate?"&iiqpciddate="+encodeURIComponent(t.pcidDate):""}function D(e,t){var r,n="string"==typeof t.partnerClientId?encodeURIComponent(t.partnerClientId):"",i="number"==typeof t.partnerClientIdType&&(0===(r=t.partnerClientIdType)||1===r||3===r||4===r)?r:-1;return -1===i||""!==n&&(e=(e=e+"&pcid="+n)+"&idtype="+i),e}function R(e,t){return e+=t.uspString?"&us_privacy="+encodeURIComponent(t.uspString):"",e+=t.gppString?"&gpp="+encodeURIComponent(t.gppString):"",e+=t.gdprApplies?"&gdpr_consent="+encodeURIComponent(t.gdprString)+"&gdpr=1":"&gdpr=0"}function k(e,t){return"number"!=typeof t||isNaN(t)?e:e+"&fbp="+t}function j(e,t,r){(0,u.isPlainObject)(e)&&e.cmd&&e.cmd.push(function(){e.pubads().setTargeting(t,r||A.NOT_YET_DEFINED)})}function N(e,t,r){var n;null!=e&&null!=(n=e.eids)&&n.length?w++:x++,B(t,r)}function B(e,t){t.callCount=w,t.failCount=C,t.noDataCounter=x,(0,y.storeData)(o,JSON.stringify(t),e,a)}var U={name:O,gvlid:A.GVLID,decode:function(){},getId:function(e){var t,r,s,c,p,U,M,V,q,L,F,G,W,z,H,Y,J,K,Q,X,$,Z,ee,et,er,en=(null==e?void 0:e.params)||{},ei=function(){en.callback&&!eo&&(eo=!0,er&&clearTimeout(er),eb&&(ea={eids:[]}),en.callback(ea))};if("number"!=typeof en.partner){(0,u.logError)("User ID - intentIqId submodule requires a valid partner to be defined"),ei();return}var eo=!1,ea={eids:[]},es=(0,u.isPlainObject)(en.gamObjectReference)?en.gamObjectReference:void 0,ed=en.gamParameterName?en.gamParameterName:"intent_iq_group",ec="function"==typeof en.groupChanged?en.groupChanged:void 0,eu="boolean"==typeof en.siloEnabled&&en.siloEnabled;n=(0,u.isStr)(en.sourceMetaData)?function(e){try{var t=e.split(".");return((t[0]*A.META_DATA_CONSTANT+ +t[1])*A.META_DATA_CONSTANT+ +t[2])*A.META_DATA_CONSTANT+ +t[3]}catch(e){return NaN}}(en.sourceMetaData):"",i=(0,u.isNumber)(en.sourceMetaDataExternal)?en.sourceMetaDataExternal:void 0;var el=en.additionalParams?en.additionalParams:void 0;o="".concat(A.FIRST_PARTY_KEY,"_").concat(en.partner);var ep=(0,y.defineStorageType)(e.enabledStorageTypes),ef=0,eg={},ev=!1;T="".concat(A.FIRST_PARTY_KEY).concat(eu?"_p_"+en.partner:"");var em=(0,b.getCmpData)(),eh=em.gdprString,eb=(null==(J=a=(0,y.tryParse)((0,y.readData)(T,ep)))?void 0:J.group)===A.WITHOUT_IIQ;j(es,ed,null==(K=a)?void 0:K.group),ec&&ec((null==(Q=a)?void 0:Q.group)||A.NOT_YET_DEFINED),er=setTimeout(function(){ei()},en.timeoutInMillis||500);var ey=(0,v.detectBrowser)(),eA="string"==typeof en.browserBlackList?en.browserBlackList.toLowerCase():"",eI=!1;null!=(X=a)&&X.pcid?a.pcidDate||(a.pcidDate=Date.now(),(0,y.storeData)(T,JSON.stringify(a),ep,a)):(a={pcid:en.partnerClientId&&encodeURIComponent(en.partnerClientId)||(Y=new Date().getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(Y+16*Math.random())%16|0;return Y=Math.floor(Y/16),("x"==e?t:3&t|8).toString(16)})),pcidDate:Date.now(),group:A.NOT_YET_DEFINED,uspString:A.EMPTY,gppString:A.EMPTY,gdprString:A.EMPTY,date:Date.now()},eI=!0,(0,y.storeData)(T,JSON.stringify(a),ep,a)),!eh||"isOptedOut"in a||(a.isOptedOut=!0);var eE=(0,y.readData)(A.CLIENT_HINTS_KEY,ep);null!=($=navigator)&&null!=($=$.userAgentData)&&$.getHighEntropyValues&&navigator.userAgentData.getHighEntropyValues(["brands","mobile","bitness","wow64","architecture","model","platform","platformVersion","fullVersionList"]).then(function(e){eE=function(e){var t={},r=function(r){if(e.hasOwnProperty(r)&&""!==e[r])if(["brands","fullVersionList"].includes(r)){var n="";e[r].forEach(function(t,i){var o=i<e[r].length-1;n+='"'.concat(t.brand,'";v="').concat(t.version,'"').concat(o?", ":"")}),t[_[r]]=n}else"boolean"==typeof e[r]?t[_[r]]="?".concat(+!!e[r]):t[_[r]]='"'.concat(e[r],'"')};for(var n in e)r(n);return Object.keys(t).length?JSON.stringify(t):""}(e),(0,y.storeData)(A.CLIENT_HINTS_KEY,eE,ep,a)});var eS=(0,y.tryParse)((0,y.readData)(o,ep));if(eS&&("number"==typeof(eg=eS).callCount&&(w=eg.callCount),"number"==typeof eg.failCount&&(C=eg.failCount),"number"==typeof eg.noDataCounter&&(x=eg.noDataCounter),eg.wsrvcll&&(eg.wsrvcll=!1,(0,y.storeData)(o,JSON.stringify(eg),ep,a))),eg.data&&eg.data.length&&(ea=(0,y.tryParse)((t=eg.data,f.default.decrypt(t,O).toString(g.default)))),r=a,s=em,("".concat(r.gdprString).concat(r.gppString).concat(r.uspString)!=="".concat(s.gdprString).concat(s.gppString).concat(s.uspString)||!a.sCal||eS&&(!eg.cttl||!eg.date||Date.now()-eg.date>eg.cttl))&&(a.uspString=em.uspString,a.gppString=em.gppString,a.gdprString=em.gdprString,ev=!0,(0,y.storeData)(T,JSON.stringify(a),ep,a),(0,y.storeData)(o,JSON.stringify(eg),ep,a)),ev||(ev=!eS&&!a.isOptedOut||Date.now()>a.sCal+A.HOURS_24),a.isOptedOut&&(eg.data=ea={eids:[]},ei()),(a.group===A.WITHOUT_IIQ||a.group!==A.WITHOUT_IIQ&&null!=(Z=ea)&&null!=(Z=Z.eids)&&Z.length)&&ei(),null!=eA&&eA.includes(ey)){(0,u.logError)("User ID - intentIqId submodule: browser is in blacklist! Data will be not provided."),en.callback&&en.callback(""),function(e,t,r,n,i){var o=Number((0,y.readData)((0,I.SYNC_KEY)(r)||"",e))||!1,a=Date.now()-o;if(n.isOptedOut){var s=Date.now()-((null==n?void 0:n.date)||(null==n?void 0:n.sCal)||Date.now())>A.SYNC_REFRESH_MILL;(i||s)&&((0,l.ajax)(t,function(){},void 0,{method:"GET",withCredentials:!0}),null!=n&&n.date&&(n.date=Date.now(),(0,y.storeData)(T,JSON.stringify(n),e,n)))}else(!o||a>A.SYNC_REFRESH_MILL)&&((0,y.storeData)((0,I.SYNC_KEY)(r),Date.now()+"",e),(0,l.ajax)(t,function(){},void 0,{method:"GET",withCredentials:!0}))}(ep,(c=a,p=eE,U=en,M=eg,V=em,W={windowInnerHeight:(q=(0,u.getWinDimensions)()).innerHeight,windowInnerWidth:q.innerWidth,devicePixelRatio:q.devicePixelRatio,windowScreenHeight:q.screen.height,windowScreenWidth:q.screen.width,language:navigator.language},z=(0,v.detectBrowser)(),H=(L=(H=D(H=P(H=(0,E.iiqPixelServerAddress)(U,V.gdprString)+"/profiles_engine/ProfilesEngineServlet?at=20&mi=10&secure=1"+("&dpi="+U.partner),c,M),U))+("&tsrnd="+Math.floor(1e3*Math.random())+"_")+new Date().getTime())+(null!=M&&M.clientType?"&idtype="+M.clientType:""),W&&(F=H,G=Object.entries(A.SCREEN_PARAMS).map(function(e){var t=(0,d.default)(e,2),r=t[0],n=W[t[1]];return"".concat(r,":").concat(n)}).join(","),F+="&cz=".concat(encodeURIComponent(G)),H=F+="&dw=".concat(W.windowScreenWidth,"&dh=").concat(W.windowScreenHeight,"&dpr=").concat(W.devicePixelRatio,"&lan=").concat(W.language)),H+=A.VERSION?"&jsver="+A.VERSION:"",p&&(H+="&uh="+encodeURIComponent(p)),H=k(H=R(H=(0,h.appendVrrefAndFui)(H,U.domainName),V),i||n),H=(0,S.handleAdditionalParams)(z,H,0,U.additionalParams),H=(0,m.appendSPData)(H,c)+"&source="+A.PREBID),en.partner,a,eI);return}if(!ev)return eb&&(ea={eids:[]}),ei(),N(ea,ep,eg),{id:JSON.stringify(ea.eids)};var eO="".concat((0,E.iiqServerAddress)(en,eh),"/profiles_engine/ProfilesEngineServlet?at=39&mi=10&dpi=").concat(en.partner,"&pt=17&dpn=1");eO+=en.pai?"&pai="+encodeURIComponent(en.pai):"",eO=k(eO=(eO=R(eO=D(eO=P(eO,a,eg),en)+(eg.cttl?"&cttl="+encodeURIComponent(eg.cttl):"")+(eg.rrtt?"&rrtt="+encodeURIComponent(eg.rrtt):""),em)+"&japs="+encodeURIComponent(!0===en.siloEnabled))+"&jaesc="+encodeURIComponent(w)+"&jafc="+encodeURIComponent(C)+"&jaensc="+encodeURIComponent(x)+(eE?"&uh="+encodeURIComponent(eE):"")+(A.VERSION?"&jsver="+A.VERSION:"")+(null!=(ee=a)&&ee.group?"&testGroup="+encodeURIComponent(a.group):""),i||n),eO=(0,S.handleAdditionalParams)(ey,eO,1,el),eO=(0,m.appendSPData)(eO,a)+"&source="+A.PREBID,eO=(0,h.appendVrrefAndFui)(eO,en.domainName);var e_=function(){var e;eg.eidl=(null==(e=ea)||null==(e=e.eids)?void 0:e.length)||-1,(0,y.storeData)(T,JSON.stringify(a),ep,a),(0,y.storeData)(o,JSON.stringify(eg),ep,a)},eT={callback:function(e){ef=Date.now(),eg.wsrvcll=!0,(0,y.storeData)(o,JSON.stringify(eg),ep,a),w=0,C=0,x=0,B(ep,eg),(0,l.ajax)(eO,{success:function(t){var r=(0,y.tryParse)(t);if(r){eg.date=Date.now(),a.sCal=Date.now();var n,i=function(){r.data=eg.data=ea={eids:[]},e_(),ei(),e(JSON.stringify(ea.eids||[]))};if(er&&clearTimeout(er),"cttl"in r?eg.cttl=r.cttl:eg.cttl=A.HOURS_24,"tc"in r){if(eg.terminationCause=r.tc,41==r.tc){a.group=A.WITHOUT_IIQ,(0,y.storeData)(T,JSON.stringify(a),ep,a),ec&&ec(a.group),i(),es&&j(es,ed,a.group);return}a.group=A.WITH_IIQ,es&&j(es,ed,a.group),ec&&ec(a.group)}if("isOptedOut"in r&&(r.isOptedOut!==a.isOptedOut&&(a.isOptedOut=r.isOptedOut),!0===r.isOptedOut)){r.data=eg.data=ea={eids:[]},[o,A.CLIENT_HINTS_KEY].forEach(function(e){return(0,y.removeDataByKey)(e,ep)}),(0,y.storeData)(T,JSON.stringify(a),ep,a),ei(),e(JSON.stringify(ea.eids||[]));return}if("pid"in r&&(a.pid=r.pid),"dbsaved"in r&&(a.dbsaved=r.dbsaved),"ls"in r){if(!1===r.ls)return void i();""==r.data?r.data=A.INVALID_ID:r.data&&"string"==typeof r.data&&(r.data={eids:[r.data]}),eg.data=r.data}if("ct"in r&&(eg.clientType=r.ct),"sid"in r&&(eg.siteId=r.sid),"spd"in r&&(a.spd=r.spd),ef&&ef>0&&(eg.rrtt=Date.now()-ef),null!=(n=r.data)&&n.eids){ea=r.data,e(JSON.stringify(r.data.eids)),ei();var s,d=(s=JSON.stringify(r.data),f.default.encrypt(s,O).toString());eg.data=d}else e(JSON.stringify(ea.eids||[])),ei();N(ea,ep,eg),e_()}else e(JSON.stringify(ea.eids||[])),ei()},error:function(t){(0,u.logError)(O+": ID fetch encountered an error",t),C++,N(ea,ep,eg),e(JSON.stringify(ea.eids||[]))}},void 0,{method:"GET",withCredentials:!0})}};return null!=(et=ea)&&null!=(et=et.eids)&&et.length&&(eT.id=JSON.stringify(ea.eids)),eT},eids:{intentIqId:{source:"intentiq.com",atype:1,getSource:function(e){return e.source},getValue:function(e){var t;return null!=e&&null!=(t=e.uids)&&t.length?e.uids[0].id:null},getUidExt:function(e){var t;return null!=e&&null!=(t=e.uids)&&t.length?e.uids[0].ext:null}}}};(0,p.submodule)("userId",U),(0,c.registerModule)("intentIqIdSystem")},3984:function(e,t,r){"use strict";var n=r(2100),i=n(r(939)),o=n(r(5794)),a=n(r(8287)),s=r(7045),d=r(4700),c=r(4607),u=r(9926),l=r(1122),p=r(1617),f=r(523),g=r(5236),v=r(8915),m=r(1014);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return A(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var I=[c.BANNER,c.VIDEO,c.NATIVE],E={JPY:1},S=["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],O=["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"],_={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID","adsrvr.org":"TDID"},T=["lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId","pairId"],w=["mimes","minduration","maxduration"],C=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h","plcmt"],x="".concat("ix","_features"),P=(0,l.getStorageManager)({bidderCode:"ix"}),D={REQUESTED_FEATURE_TOGGLES:["pbjs_enable_multiformat","pbjs_allow_all_eids"],featureToggles:{},isFeatureEnabled:function(e){return(0,d.deepAccess)(this.featureToggles,"features.".concat(e,".activated"),!1)},getFeatureToggles:function(){if(P.localStorageIsEnabled()){var e=(0,d.safeJSONParse)(P.getDataFromLocalStorage(x));(0,d.deepAccess)(e,"expiry")&&e.expiry>=new Date().getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:function(e){var t=e.body,r=new Date,n=(0,d.deepAccess)(t,"ext.features");n&&(this.featureToggles={expiry:r.setHours(r.getHours()+1),features:n},P.localStorageIsEnabled()&&P.setDataInLocalStorage(x,JSON.stringify(this.featureToggles)))},clearFeatureToggles:function(){this.featureToggles={},P.localStorageIsEnabled()&&P.removeDataFromLocalStorage(x)}},R=0,k="",j="",N=!1;function B(e){var t,r=M(e,c.VIDEO),n=(0,d.deepAccess)(e,"mediaTypes.video"),i=(0,d.deepAccess)(e,"params.video");if(F(n,i).length)return{};r.video=i?(0,d.deepClone)(e.params.video):{};var o=(0,d.deepAccess)(e,"ortb2Imp.ext.tid");for(var s in o&&(0,d.deepSetValue)(r,"ext.tid",o),!function(e,t){if((0,d.deepAccess)(t,"mediaTypes.video.context")===g.OUTSTREAM){var r=(0,d.deepAccess)(t,"mediaTypes.video.renderer");if(r||(r=(0,d.deepAccess)(t,"renderer")),(0,d.deepAccess)(t,"schain",!1))e.displaymanager="pbjs_wrapper";else if(r&&"object"===(0,a.default)(r)){if(void 0!==r.url){var n="";try{n=new URL(r.url).hostname}catch(e){return}n.includes("js-sec.indexww")?e.displaymanager="ix":e.displaymanager=r.url}}else e.displaymanager="ix"}}(r,e),z(r,e),n)-1===C.indexOf(s)||r.video.hasOwnProperty(s)||(r.video[s]=n[s]);if(r.video.minduration>r.video.maxduration)return(0,d.logError)("IX Bid Adapter: video minduration [".concat(r.video.minduration,"] cannot be greater than video maxduration [").concat(r.video.maxduration,"]")),{};var u=i&&i.context||n&&n.context;if((t=r).video.hasOwnProperty("plcmt")&&(!(0,d.isInteger)(t.video.plcmt)||t.video.plcmt<1||t.video.plcmt>4)&&((0,d.logWarn)("IX Bid Adapter: video.plcmt [".concat(t.video.plcmt,"] must be an integer between 1-4 inclusive")),delete t.video.plcmt),u&&!r.video.hasOwnProperty("placement")&&(u===g.INSTREAM?r.video.placement=1:u===g.OUTSTREAM?(0,d.deepAccess)(i,"playerConfig.floatOnScroll")?r.video.placement=5:(r.video.placement=3,N=!0):(0,d.logWarn)("IX Bid Adapter: Video context '".concat(u,"' is not supported"))),!(r.video.w&&r.video.h)){var l=G((0,d.deepAccess)(r,"video.playerSize"))||G((0,d.deepAccess)(e,"params.size"));if(!l)return(0,d.logWarn)("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};r.video.w=l[0],r.video.h=l[1]}return V(e,r,c.VIDEO),r}function U(e){var t=M(e,c.NATIVE),r=e.nativeOrtbRequest;r.eventtrackers=[{event:1,methods:[1,2]}],r.privacy=1,t.native={request:JSON.stringify(r),ver:"1.2"};var n=(0,d.deepAccess)(e,"ortb2Imp.ext.tid");return n&&(0,d.deepSetValue)(t,"ext.tid",n),z(t,e),V(e,t,c.NATIVE),t}function M(e,t){var r={};if(r.id=e.bidId,r.ext={},K()&&(0,d.deepAccess)(e,"params.externalId")&&(0,d.deepSetValue)(r,"ext.externalID",e.params.externalId),(0,d.deepAccess)(e,"params.".concat(t,".siteId"))&&!isNaN(Number(e.params[t].siteId)))switch(t){case c.BANNER:(0,d.deepSetValue)(r,"ext.siteID",e.params.banner.siteId.toString());break;case c.VIDEO:(0,d.deepSetValue)(r,"ext.siteID",e.params.video.siteId.toString());break;case c.NATIVE:(0,d.deepSetValue)(r,"ext.siteID",e.params.native.siteId.toString())}else e.params.siteId&&(0,d.deepSetValue)(r,"ext.siteID",e.params.siteId.toString());return e.params.hasOwnProperty("id")&&("string"==typeof e.params.id||"number"==typeof e.params.id)&&(0,d.deepSetValue)(r,"ext.sid",String(e.params.id)),r}function V(e,t,r){var n=null,i=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(n={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),(0,d.isFn)(e.getFloor)){var o="*",a="*";if(r&&(0,d.contains)(I,r)){var s=t[r],u=s.w,l=s.h;o=r,a=[u,l]}try{i=e.getFloor({mediaType:o,size:a})}catch(e){(0,d.logWarn)("priceFloors module call getFloor failed, error : ",e)}}var p=!1;i?(t.bidfloor=i.floor,t.bidfloorcur=i.currency,(0,d.deepSetValue)(t,"ext.fl","p"),p=!0):n&&(t.bidfloor=n.floor,t.bidfloorcur=n.currency,(0,d.deepSetValue)(t,"ext.fl","x"),p=!0),p&&(r==c.BANNER?((0,d.deepSetValue)(t,"banner.ext.bidfloor",t.bidfloor),(0,d.deepSetValue)(t,"banner.ext.fl",t.ext.fl)):r==c.VIDEO?((0,d.deepSetValue)(t,"video.ext.bidfloor",t.bidfloor),(0,d.deepSetValue)(t,"video.ext.fl",t.ext.fl)):((0,d.deepSetValue)(t,"native.ext.bidfloor",t.bidfloor),(0,d.deepSetValue)(t,"native.ext.fl",t.ext.fl)))}function q(e){return Array.isArray(e)&&2===e.length&&(0,d.isInteger)(e[0])&&(0,d.isInteger)(e[1])}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(q(e))return e[0]===t[0]&&e[1]===t[1];for(var r=0;r<e.length;r++)if(e[r][0]===t[0]&&e[r][1]===t[1])return!0;return!1}function F(e,t){var r=[];e||(0,d.logWarn)("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");var n,i=y(w);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=e&&e.hasOwnProperty(o),s=t&&t.hasOwnProperty(o);a||s||r.push("IX Bid Adapter: ".concat(o," is not included in either the adunit or params level"))}}catch(e){i.e(e)}finally{i.f()}var c=e&&e.hasOwnProperty("protocol"),u=e&&e.hasOwnProperty("protocols"),l=t&&t.hasOwnProperty("protocol"),p=t&&t.hasOwnProperty("protocols");return c||u||l||p||r.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),r}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return q(e)?e:!!q(e[0])&&e[0]}function W(e,t,r,n){var o,s,l,p,f,g,v,m,h,A,I="https://htlb.casalemedia.com/openrtb/pbjs",E=function(e){var t=[],r={};if((0,d.isArray)(e)){var n,i=y(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=_.hasOwnProperty(o.source);if((0,d.deepAccess)(o,"uids.0")&&(r[o.source]=!0,a&&""!==_[o.source]&&(o.uids[0].ext={rtiPartner:_[o.source]}),t.push(o),t.length>=50))break}}catch(e){i.e(e)}finally{i.f()}}return{toSend:t,seenSources:r}}((0,d.deepAccess)(e,"0.userIdAsEids")),w=E.toSend;window.headertag&&"function"==typeof window.headertag.getIdentityInfo&&function(e,t){var r=window.headertag.getIdentityInfo();if(r&&"object"===(0,a.default)(r))for(var n in r){if(e.length>=50)return;if(r.hasOwnProperty(n)){var i=r[n];!i.responsePending&&i.data&&"object"===(0,a.default)(i.data)&&Object.keys(i.data).length&&!t.seenSources[i.data.source]&&e.push(i.data)}}}(w,E);var C=[],x=((o={}).id=e[0].bidderRequestId.toString(),o.site={},o.ext={},o.ext.source="prebid",o.ext.ixdiag={},o.ext.ixdiag.ls=P.localStorageIsEnabled(),o.ext.ixdiag.msd=0,o.ext.ixdiag.msi=0,o.imp=[],o.at=1,o);s=x,(l=D.REQUESTED_FEATURE_TOGGLES).length>0&&(s.ext.features={},l.forEach(function(e){s.ext.features[e]={activated:D.isFeatureEnabled(e)}})),x=s;var B=function(e,t){var r,n,i=e.map(function(e){return e.adUnitCode}).filter(function(e,t,r){return r.indexOf(e)===t}),o=(0,d.deepAccess)(e,"0.userIdAsEids",[]),a={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"9.40.0",userIds:(r=e[0].userId||{},T.filter(function(e){return r[e]})),url:window.location.href.split("?")[0],vpd:N,ae:t,eidLength:o.length},s=y(i);try{for(s.s();!(n=s.n()).done;)!function(){var t=n.value,r=e.filter(function(e){return e.adUnitCode===t})[0];(0,d.deepAccess)(r,"mediaTypes")&&(Object.keys(r.mediaTypes).length>1&&a.mfu++,(0,d.deepAccess)(r,"mediaTypes.native")&&a.nu++,(0,d.deepAccess)(r,"mediaTypes.banner")&&a.bu++,"outstream"===(0,d.deepAccess)(r,"mediaTypes.video.context")&&(a.ou++,J(r)&&(a.ren=!0)),"instream"===(0,d.deepAccess)(r,"mediaTypes.video.context")&&a.iu++,a.allu++)}()}catch(e){s.e(e)}finally{s.f()}return a}(e,(0,d.deepAccess)(t,"paapi.enabled"));for(var U in B)x.ext.ixdiag[U]=B[U];x=function(e,t){if(t){t.gdprConsent&&((k=t.gdprConsent).hasOwnProperty("gdprApplies")&&(e.regs={ext:{gdpr:+!!k.gdprApplies}}),k.hasOwnProperty("consentString")&&(e.user=e.user||{},e.user.ext={consent:k.consentString||""},k.hasOwnProperty("addtlConsent")&&k.addtlConsent&&(e.user.ext.consented_providers_settings={addtl_consent:k.addtlConsent}))),t.uspConsent&&((0,d.deepSetValue)(e,"regs.ext.us_privacy",t.uspConsent),j=t.uspConsent);var r=(0,d.deepAccess)(t,"refererInfo.page");r&&(e.site.page=r),t.gppConsent&&((0,d.deepSetValue)(e,"regs.gpp",t.gppConsent.gppString),(0,d.deepSetValue)(e,"regs.gpp_sid",t.gppConsent.applicableSections))}return u.config.getConfig("coppa")&&(0,d.deepSetValue)(e,"regs.coppa",1),e}((p=x,f=t,g=r,v=e,m=w,(A=(0,d.deepAccess)(f,"timeout"))&&(p.ext.ixdiag.tmax=A),u.config.getConfig("userSync")&&(p.ext.ixdiag.syncsPerBidder=u.config.getConfig("userSync").syncsPerBidder),p.ext.ixdiag.imps=Object.keys(g).length,p.source={tid:null==f||null==(h=f.ortb2)||null==(h=h.source)?void 0:h.tid},v[0].schain&&(p.source.ext={},p.source.ext.schain=v[0].schain),m.length>0&&(p.user={},p.user.eids=m),document.referrer&&""!==document.referrer&&(p.site.ref=document.referrer),x=p),t);var M={};e[0].params.siteId&&(M.s=R=e[0].params.siteId);for(var V=Object.keys(r),q=!1,L=0;L<V.length&&!(C.length>=4);L++){x=function(e,t,r,n){var o=e[t[n]],a=o.missingCount,s=void 0===a?0:a,u=o.missingImps,l=void 0===u?[]:u,p=o.ixImps,f={ixImps:void 0===p?[]:p,missingBannerImpressions:l},g=Object.keys(f).map(function(e){return f[e]}).filter(function(e){return Array.isArray(e)}).reduce(function(e,t){return e.concat.apply(e,(0,i.default)(t))},[]),v=e[t[n]].gpid,m=e[t[n]].dfp_ad_unit_code,h=e[t[n]].tid,b=e[t[n]].sid,y=e[t[n]].ae,A=e[t[n]].paapi,I=g.filter(function(e){return c.BANNER in e}),E=g.filter(function(e){return!(c.BANNER in e)});if(I.length>0){var S=I.reduce(function(e,t){return e[t.adunitCode]||(e[t.adunitCode]=[]),e[t.adunitCode].push(t),e},{});for(var O in S){for(var _=S[O],T=_[0],w=T.id,C=T.banner.topframe,x=(0,d.deepAccess)(_[0],"ext.externalID"),P={id:w,banner:{topframe:C,format:_.map(function(e){var t=e.banner;return{w:t.w,h:t.h,ext:e.ext}})}},D=0;D<P.banner.format.length;D++)null!=P.banner.format[D].ext&&(null!=P.banner.format[D].ext.sid&&delete P.banner.format[D].ext.sid,null!=P.banner.format[D].ext.externalID&&delete P.banner.format[D].ext.externalID),"bidfloor"in _[D]&&(P.banner.format[D].ext.bidfloor=_[D].bidfloor),"{}"===JSON.stringify(P.banner.format[D].ext)&&delete P.banner.format[D].ext;var R=e[t[n]].pos;(0,d.isInteger)(R)&&(P.banner.pos=R),(m||v||h||b||y||x||A)&&(P.ext={},P.ext.dfp_ad_unit_code=m,P.ext.gpid=v,P.ext.tid=h,P.ext.sid=b,P.ext.externalID=x,1==y&&(P.ext.ae=1,P.ext.paapi=A)),"bidfloor"in _[0]&&(P.bidfloor=_[0].bidfloor),"bidfloorcur"in _[0]&&(P.bidfloorcur=_[0].bidfloorcur);var k=e[t[n]].adUnitFPD;k&&(0,d.deepSetValue)(P,"ext.data",k),r.imp.push(P),r.ext.ixdiag||(r.ext.ixdiag={}),r.ext.ixdiag.msd+=s,r.ext.ixdiag.msi+=l.length}}return E.length>0&&E.forEach(function(e){if(v&&(0,d.deepSetValue)(e,"ext.gpid",v),r.imp.length>0){var t=!1;r.imp.forEach(function(n,i){e.id===n.id&&c.VIDEO in e?(n.video=e.video,n.video.ext=Object.assign({},e.video.ext,e.ext),(0,d.deepAccess)(n,"video.ext.bidfloor",!1)&&(0,d.deepAccess)(n,"bidfloor",!1)&&n.video.ext.bidfloor<n.bidfloor&&(n.bidfloor=n.video.ext.bidfloor),!(0,d.deepAccess)(n,"ext.siteID",!1)&&(0,d.deepAccess)(e,"video.ext.siteID")&&((0,d.deepSetValue)(n,"ext.siteID",e.video.ext.siteID),(0,d.deepSetValue)(r,"ext.ixdiag.usid",!0)),t=!0):e.id===n.id&&c.NATIVE in e&&(n.native=e.native,n.native.ext=Object.assign({},e.native.ext,e.ext),(0,d.deepAccess)(n,"native.ext.bidfloor",!1)&&(0,d.deepAccess)(n,"bidfloor",!1)&&n.native.ext.bidfloor<n.bidfloor&&(n.bidfloor=n.native.ext.bidfloor),!(0,d.deepAccess)(n,"ext.siteID",!1)&&(0,d.deepAccess)(e,"native.ext.siteID",!1)&&((0,d.deepSetValue)(n,"ext.siteID",e.native.ext.siteID),(0,d.deepSetValue)(r,"ext.ixdiag.usid",!0)),t=!0)}),t||r.imp.push(e)}else r.imp.push(e)}),r}(r,V,x,L);var F=(0,d.deepAccess)(t,"ortb2")||{},G=b({},F.site||F.context);G.page=function(e,t){var r=e&&e.bidderCode||"ix",n=u.config.getConfig(r),i="";return(i=(0,d.deepAccess)(e,"ortb2.site.page")?e.ortb2.site.page:(0,d.deepAccess)(e,"refererInfo.page"),n&&"object"===(0,a.default)(n.firstPartyData))?function(e,t,r,n){var i,o=Object.keys(n),a="",s="?#",c=n[o[0]].adUnitCode;try{i=new URL(t)}catch(r){(0,d.logWarn)("IX Bid Adapter: Invalid URL set in ortb2.site.page: ".concat(t,". Using referer URL instead.")),i=new URL((0,d.deepAccess)(e,"refererInfo.page"))}for(var u in r)if("HVP"===u.toUpperCase()){var l=r[u];if(c&&l&&l[c]>=0){var p="".concat(l[c]),f=s.match(/\#PD:\S+?\#/i);f&&f[0]?s=s.replace(f[0],"".concat(f[0],"HVP:").concat(p,"#")):a="HVP:".concat(p)}}else"PD"===u.toUpperCase()&&a?s+="".concat(u,":").concat(r[u],"#").concat(a,"#"):s+="".concat(u,":").concat(r[u],"#");return s=s.slice(0,-1),i.search="",i.toString()+s}(e,i,n.firstPartyData,t):i}(t,r);var W=b({},F.user);(0,d.isEmpty)(F)||q||((x=function(e,t,r,n,i){if(t.ext.ixdiag.fpd=!0,Object.keys(n).forEach(function(e){-1===S.indexOf(e)&&delete n[e]}),Object.keys(i).forEach(function(e){-1===O.indexOf(e)&&delete i[e]}),r.device){var o,a=b({},r.device.sua);(0,d.isEmpty)(a)||(0,d.deepSetValue)(t,"device.sua",a)}if(r.hasOwnProperty("regs")&&!e.gppConsent&&(r.regs.hasOwnProperty("gpp")&&"string"==typeof r.regs.gpp&&(0,d.deepSetValue)(t,"regs.gpp",r.regs.gpp),r.regs.hasOwnProperty("gpp_sid")&&Array.isArray(r.regs.gpp_sid)&&(0,d.deepSetValue)(t,"regs.gpp_sid",r.regs.gpp_sid),null!=(o=r.regs.ext)&&o.dsa)){var s=r.regs.ext.dsa,c={};if(["dsarequired","pubrender","datatopub"].forEach(function(e){(0,d.isNumber)(s[e])&&(c[e]=s[e])}),(0,d.isArray)(s.transparency)){var u=[];s.transparency.forEach(function(e){(0,d.isPlainObject)(e)&&(0,d.isStr)(e.domain)&&""!=e.domain&&(0,d.isArray)(e.dsaparams)&&e.dsaparams.every(function(e){return(0,d.isNumber)(e)})&&u.push(e)}),u.length>0&&(c.transparency=u)}(0,d.isEmpty)(c)||(0,d.deepSetValue)(t,"regs.ext.dsa",c)}return t}(t,x,F,G,W)).site=(0,d.mergeDeep)({},x.site,G),x.user=(0,d.mergeDeep)({},x.user,W),q=!0),x=function(e,t,r,n,i,o){var a=e[r[n]].pbadslot,s=e[r[n]].tagId,d=e[r[n]].adUnitCode,c=e[r[n]].divId;return(a||s||d||c)&&(t.ext.ixdiag.pbadslot=a,t.ext.ixdiag.tagid=s,t.ext.ixdiag.adunitcode=d,t.ext.ixdiag.divId=c),t}(r,x,V,L,0,0);var z=L===V.length-1;if(x=function(e){return e.imp.forEach(function(t,r){if(void 0==t.ext)return e;if(!(2>Q(t))){if(c.BANNER in t){var n=t.banner.ext;if(void 0!==n&&void 0!==n.siteID&&delete e.imp[r].banner.ext.siteID,void 0!==t.banner.format)for(var i=0;i<t.banner.format.length;i++)void 0!==t.banner.format[i].ext&&void 0!==t.banner.format[i].ext.siteID&&((0,d.deepSetValue)(e.imp[r],"ext.siteID",t.banner.format[i].ext.siteID),(0,d.deepSetValue)(e,"ext.ixdiag.usid",!0),delete e.imp[r].banner.format[i].ext.siteID)}if(c.VIDEO in t){var o=t.video.ext;void 0!==o&&void 0!==o.siteID&&delete e.imp[r].video.ext.siteID}if(c.NATIVE in t){var a=t.native.ext;void 0!==a&&void 0!==a.siteID&&delete e.imp[r].native.ext.siteID}}}),e}(x=function(e){return e.imp.forEach(function(t,r){var n=t.ext;if(void 0==n)return e;2>Q(t)||Object.keys(n).forEach(function(i){if(c.BANNER in t){var o=t.banner.ext;if(void 0!==o&&void 0!==o[i]&&o[i]==n[i]&&delete e.imp[r].banner.ext[i],void 0!==t.banner.format)for(var a=0;a<t.banner.format.length;a++)void 0!=t.banner.format[a].ext&&void 0!=t.banner.format[a].ext[i]&&t.banner.format[a].ext[i]==n[i]&&delete e.imp[r].banner.format[a].ext[i]}if(c.VIDEO in t){var s=t.video.ext;void 0!==s&&void 0!==s[i]&&s[i]==n[i]&&delete e.imp[r].video.ext[i]}if(c.NATIVE in t){var d=t.native.ext;void 0!==d&&void 0!==d[i]&&d[i]==n[i]&&delete e.imp[r].native.ext[i]}})}),e}(x=function(e){return void 0==e.device&&(e.device={}),e.device.h=window.screen.height,e.device.w=window.screen.width,e}(x))),z){var H="".concat(I,"?");0!==R&&(H+="s=".concat(R)),K()&&(H+=0!==R?"&":"",H+="p=".concat(u.config.getConfig("exchangeId"))),C.push({method:"POST",url:H,data:(0,d.deepClone)(x),options:{contentType:"text/plain",withCredentials:!0},validBidRequests:e}),x.imp=[],x.ext.ixdiag.msd=0,x.ext.ixdiag.msi=0,q=!1}}return C}function z(e,t){var r=(0,d.deepAccess)(t,"ortb2Imp.ext.data");r&&(0,d.deepSetValue)(e,"ext.data",r)}function H(e,t){if(t)for(var r=0;r<e.length;r++){var n=e[r];if(t[0]===n[0]&&t[1]===n[1]){e.splice(r,1);break}}}function Y(e){e.renderer.push(function(){var t=e.adUnitCode,r=document.getElementById(t)?t:(0,m.getGptSlotInfoForAdUnitCode)(t).divId;if(!r)return void(0,d.logWarn)("IX Bid Adapter: adUnitCode: ".concat(r," not found on page."));window.createIXPlayer(r,e)})}function J(e){if("outstream"!==(0,d.deepAccess)(e,"mediaTypes.video.context"))return!1;var t=(0,d.deepAccess)(e,"mediaTypes.video.renderer");return t||(t=(0,d.deepAccess)(e,"renderer")),!("object"===(0,a.default)(t)&&t.url&&t.render)||t.backupOnly}function K(){var e=u.config.getConfig("exchangeId");return!!("number"==typeof e&&isFinite(e)||"string"==typeof e&&""!==e.trim()&&isFinite(Number(e)))}function Q(e){var t=0;return void 0!==e.banner&&(t+=1),void 0!==e.video&&(t+=1),void 0!==e.native&&(t+=1),t}(0,f.registerBidder)({code:"ix",gvlid:10,supportedMediaTypes:I,isBidRequestValid:function(e){var t,r,n=(u.config.getConfig("ix")||{}).largeFormatSizes,i=(0,d.deepAccess)(e,"params.video"),o=(0,d.deepAccess)(e,"params.size"),a=(0,d.deepAccess)(e,"mediaTypes.banner.sizes"),s=(0,d.deepAccess)(e,"mediaTypes.video"),c=(0,d.deepAccess)(e,"mediaTypes.video.playerSize"),l=e.params.hasOwnProperty("bidFloor"),p=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!(0,d.contains)(I,e.mediaType))return(0,d.logWarn)("IX Bid Adapter: media type is not supported."),!1;if((0,d.deepAccess)(e,"mediaTypes.banner")&&!a)return!1;if(o){var f=G(o);if(!f)return(0,d.logError)("IX Bid Adapter: size has invalid format."),!1;if(!L(e.sizes,f)&&!L(c,f)&&!(L(a,f)||L(n,f)))return(0,d.logError)("IX Bid Adapter: bid size is not included in ad unit sizes or player size."),!1}if(!K()&&void 0==e.params.siteId)return(0,d.logError)("IX Bid Adapter: Invalid configuration - either siteId or exchangeId must be configured."),!1;if(void 0!==e.params.siteId){if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return(0,d.logError)("IX Bid Adapter: siteId must be string or number type."),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return(0,d.logError)("IX Bid Adapter: siteId must valid value"),!1}if((l||p)&&!(l&&p&&(t=e.params.bidFloor,r=e.params.bidFloorCur,"number"==typeof t&&"string"==typeof r&&r.match(/^[A-Z]{3}$/))))return(0,d.logError)("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format."),!1;if(s&&i){var v=B(e).video,m=F(s,i);if((0,d.deepAccess)(e,"mediaTypes.video.context")===g.OUTSTREAM&&J(e)&&v){var h=[(0,d.deepAccess)(v,"w"),(0,d.deepAccess)(v,"h")];if(!(h[0]>=144&&h[1]>=144))return(0,d.logError)("IX Bid Adapter: ".concat(h," is an invalid size for IX outstream renderer")),!1}if(m.length)return m.forEach(function(e){(0,d.logError)(e)}),!1}return void 0===(0,d.deepAccess)(e,"mediaTypes.native")||e.nativeOrtbRequest&&Array.isArray(e.nativeOrtbRequest.assets)&&e.nativeOrtbRequest.assets.length>0},resetSiteID:function(){R=0},buildRequests:function(e,t){var r,n=[],o={},a={},s={},l={};for(var p in D.getFeatureToggles(),e.forEach(function(e){var r=Object.keys((0,d.deepAccess)(e,"mediaTypes",{}));for(var n in r)switch(r[n]){case c.BANNER:!function(e,t,r,n){var o,a,s,l=b(b({},{detectMissingSizes:!0}),u.config.getConfig("ix")),p=((a=M(o=e,c.BANNER)).banner={},a.adunitCode=o.adUnitCode,(s=(0,d.deepAccess)(o,"params.size"))&&(a.banner.w=s[0],a.banner.h=s[1]),a.banner.topframe=+!(0,d.inIframe)(),V(o,a,c.BANNER),a),f=l.largeFormatSizes||[],g=L([].concat((0,i.default)((0,d.deepAccess)(e,"mediaTypes.banner.sizes")),(0,i.default)(f)),(0,d.deepAccess)(e,"params.size"));if(r.hasOwnProperty(e.adUnitCode)||(r[e.adUnitCode]={}),r[e.adUnitCode].gpid=(0,d.deepAccess)(e,"ortb2Imp.ext.gpid"),r[e.adUnitCode].dfp_ad_unit_code=(0,d.deepAccess)(e,"ortb2Imp.ext.data.adserver.adslot"),r[e.adUnitCode].tid=(0,d.deepAccess)(e,"ortb2Imp.ext.tid"),r[e.adUnitCode].pbadslot=(0,d.deepAccess)(e,"ortb2Imp.ext.data.pbadslot"),r[e.adUnitCode].tagId=(0,d.deepAccess)(e,"params.tagId"),r[e.adUnitCode].pos=(0,d.deepAccess)(e,"mediaTypes.banner.pos"),(0,d.deepAccess)(n,"paapi.enabled")){var v=(0,d.deepAccess)(e,"ortb2Imp.ext.ae"),h=(0,d.deepAccess)(e,"ortb2Imp.ext.paapi");h&&(r[e.adUnitCode].paapi=h),v&&((0,d.isInteger)(v)?r[e.adUnitCode].ae=v:(0,d.logWarn)("error setting auction environment flag - must be an integer"))}var y=(0,d.deepAccess)(e,"ortb2Imp.ext.data");y&&(r[e.adUnitCode].adUnitFPD=y);var A=(0,d.deepAccess)(e,"params.id");A&&("string"==typeof A||"number"==typeof A)&&(r[e.adUnitCode].sid=String(A));var I=e.adUnitCode,E=document.getElementById(I)?I:(0,m.getGptSlotInfoForAdUnitCode)(I).divId;r[e.adUnitCode].adUnitCode=I,r[e.adUnitCode].divId=E,g&&(r[e.adUnitCode].hasOwnProperty("ixImps")||(r[e.adUnitCode].ixImps=[]),r[e.adUnitCode].ixImps.push(p)),l.hasOwnProperty("detectMissingSizes")&&l.detectMissingSizes&&function(e,t,r){if(t.hasOwnProperty(e.adUnitCode)){var n=[];t[e.adUnitCode].hasOwnProperty("missingSizes")&&(n=t[e.adUnitCode].missingSizes),H(n,e.params.size),t[e.adUnitCode].missingSizes=n}else if((0,d.deepAccess)(e,"mediaTypes.banner.sizes")){var i=(0,d.deepClone)(e.mediaTypes.banner.sizes);H(i,e.params.size),t[e.adUnitCode]={missingSizes:i,impression:r}}}(e,t,p)}(e,l,o,t);break;case c.VIDEO:!function(e,t){var r=B(e);if(0!=Object.keys(r).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(r),t[e.adUnitCode].gpid=(0,d.deepAccess)(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=(0,d.deepAccess)(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=(0,d.deepAccess)(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=(0,d.deepAccess)(e,"params.tagId");var n=e.adUnitCode,i=document.getElementById(n)?n:(0,m.getGptSlotInfoForAdUnitCode)(n).divId;t[e.adUnitCode].adUnitCode=n,t[e.adUnitCode].divId=i}}(e,a);break;case c.NATIVE:!function(e,t){var r=U(e);if(0!=Object.keys(r).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(r),t[e.adUnitCode].gpid=(0,d.deepAccess)(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=(0,d.deepAccess)(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=(0,d.deepAccess)(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=(0,d.deepAccess)(e,"params.tagId");var n=e.adUnitCode,i=document.getElementById(n)?n:(0,m.getGptSlotInfoForAdUnitCode)(n).divId;t[e.adUnitCode].adUnitCode=n,t[e.adUnitCode].divId=i}}(e,s);break;default:(0,d.logWarn)("IX Bid Adapter: ad unit mediaTypes ".concat(n," is not supported"))}}),l)if(l.hasOwnProperty(p)){var f=l[p].missingSizes;o.hasOwnProperty(p)||(o[p]={}),o[p].hasOwnProperty("missingImps")||(o[p].missingImps=[]),o[p].hasOwnProperty("missingCount")||(o[p].missingCount=0);for(var g=l[p].impression,v=0;v<f.length;v++){var h=function(e,t,r){var n=(0,d.deepClone)(t);return n.banner.w=r[0],n.banner.h=r[1],V(e,n,c.BANNER),n}(e[0],g,f[v]);o[p].missingImps.push(h),o[p].missingCount++}}var y=[];return Object.keys(o).length>0&&y.push(o),Object.keys(a).length>0&&y.push(a),Object.keys(s).length>0&&y.push(s),D.isFeatureEnabled("pbjs_enable_multiformat")?n.push.apply(n,(0,i.default)(W(e,t,(r={},y.forEach(function(e){Object.keys(e).forEach(function(t){Object.keys(r).includes(t)?r[t].hasOwnProperty("ixImps")&&e[t].hasOwnProperty("ixImps")?r[t].ixImps=[].concat((0,i.default)(r[t].ixImps),(0,i.default)(e[t].ixImps)):r[t].hasOwnProperty("missingImps")&&e[t].hasOwnProperty("missingImps")?r[t].missingImps=[].concat((0,i.default)(r[t].missingImps),(0,i.default)(e[t].missingImps)):e[t].hasOwnProperty("ixImps")?r[t].ixImps=e[t].ixImps:e[t].hasOwnProperty("missingImps")&&(r[t].missingImps=e[t].missingImps):r[t]=e[t]})}),r)))):(Object.keys(o).length>0&&n.push.apply(n,(0,i.default)(W(e,t,o,7.2))),Object.keys(a).length>0&&n.push.apply(n,(0,i.default)(W(e,t,a,8.1))),Object.keys(s).length>0&&n.push.apply(n,(0,i.default)(W(e,t,s)))),n},interpretResponse:function(e,t){var r=[],n=null,i=(0,d.deepAccess)(e,"body.ext.protectedAudienceAuctionConfigs")||[];if(D.setFeatureToggles(e),!e.hasOwnProperty("body"))return r;for(var o=e.body,s=o.seatbid||[],u=0;u<s.length;u++)if(s[u].hasOwnProperty("bid")){for(var l=s[u].bid,f=t.data,g=0;g<l.length;g++){var m=function(e,t,r){if(e)return b(b({},(0,p.find)(r,function(t){return t.bidId===e})),(0,p.find)(t,function(t){return t.id===e}))}(l[g].impid,f.imp,t.validBidRequests);if((n=function(e,t,r){var n,i,o={},a=!!((0,d.deepAccess)(e,"exp")&&(0,d.isInteger)(e.exp)),s=(0,d.deepAccess)(e,"dealid")||(0,d.deepAccess)(e,"ext.dealid");E.hasOwnProperty(t)?o.cpm=e.price/E[t]:o.cpm=e.price/100,o.requestId=e.impid,s&&(o.dealId=s),o.netRevenue=!0,o.currency=t,o.creativeId=e.hasOwnProperty("crid")?e.crid:"-",2!=e.mtype||(!e.ext||e.ext.vasturl)&&e.ext?e.ext&&e.ext.vasturl&&(o.vastUrl=e.ext.vasturl):o.vastXml=e.adm;var u=null;if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{u=JSON.parse(e.adm)}catch(e){(0,d.logWarn)("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||2==e.mtype?(o.width=r.video.w,o.height=r.video.h,o.mediaType=c.VIDEO,o.mediaTypes=r.mediaTypes,o.ttl=a?e.exp:3600):u&&u.native?(o.native={ortb:u.native},o.width=e.w?e.w:1,o.height=e.h?e.h:1,o.mediaType=c.NATIVE,o.ttl=a?e.exp:3600):(o.ad=e.adm,o.width=e.w,o.height=e.h,o.mediaType=c.BANNER,o.ttl=a?e.exp:300),o.meta={},o.meta.networkId=(0,d.deepAccess)(e,"ext.dspid"),o.meta.brandId=(0,d.deepAccess)(e,"ext.advbrandid"),o.meta.brandName=(0,d.deepAccess)(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(o.meta.advertiserDomains=e.adomain),null!=(n=e.ext)&&n.dsa&&(o.meta.dsa=e.ext.dsa),null!=(i=e.ext)&&i.ibv&&(o.ext=o.ext||{},o.ext.ibv=e.ext.ibv),o}(l[g],o.cur,m)).mediaType===c.VIDEO&&J(m)){var h=(0,d.deepAccess)(o,"ext.videoplayerurl");if(h&&(n.renderer=function(e,t){var r=v.Renderer.install({id:e,url:t,loaded:!1});try{r.setRender(Y)}catch(e){return(0,d.logWarn)("Prebid Error calling setRender on renderer",e),null}return t?r:((0,d.logWarn)("Outstream renderer URL not found"),null)}(l[g].bidId,h),!n.renderer))continue}r.push(n)}if((0,d.deepAccess)(f,"ext.ixdiag.err")&&P.localStorageIsEnabled())try{P.removeDataFromLocalStorage("ixdiag")}catch(e){(0,d.logError)("ix can not clear ixdiag from localStorage.")}}if(!Array.isArray(i)||!(i.length>0))return r;i=i.filter(function(e){var t;return t=e,"object"===(0,a.default)(t)&&null!==t||((0,d.logWarn)("Malformed auction config detected:",e),!1)});try{return{bids:r,paapi:i}}catch(e){return(0,d.logWarn)("Error attaching AuctionConfigs",e),r}},getUserSyncs:function(e,t){var r=[],n=null;if(t.length>0&&(n=(0,d.deepAccess)(t[0],"body.ext.publishersyncsperbidderoverride")),void 0!==n&&0==n)return[];if(e.iframeEnabled)r.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{var i=null;u.config.getConfig("userSync")&&(i=u.config.getConfig("userSync").syncsPerBidder),0===i&&(i=n),i=n&&(0===i||i)?n>i?i:n:1;for(var o=0;o<i;o++)r.push({type:"image",url:function(e,t){var r="",n="0";return k&&k.hasOwnProperty("gdprApplies")&&(n=k.gdprApplies?"1":"0"),k&&k.hasOwnProperty("consentString")&&(r=k.consentString||""),"https://dsum.casalemedia.com/pbusermatch?origin=prebid"+(0!==R?"&site_id="+R.toString():"")+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+n+"&gdpr_consent="+r+"&us_privacy="+(j||"")}(i,o)})}return r}}),(0,s.registerModule)("ixBidAdapter")},4692:function(e,t,r){"use strict";var n,i,o,a=r(2100),s=a(r(5881)),d=a(r(8287)),c=r(7045),u=r(4700),l=r(9926),p=r(523),f=r(1122),g=r(4607),v=Object.freeze({CODE:"kargo",HOST:"krk2.kargo.com",REQUEST_METHOD:"POST",REQUEST_ENDPOINT:"/api/v1/prebid",TIMEOUT_ENDPOINT:"/api/v1/event/timeout",GVLID:972,SUPPORTED_MEDIA_TYPES:[g.BANNER,g.VIDEO]}),m=(0,f.getStorageManager)({bidderCode:v.CODE}),h=Object.freeze({KEY:"currency",US_DOLLAR:"USD"}),b=Object.freeze({USER_DATA:"ortb2.user.data",SOCIAL_CANVAS:"params.socialCanvas",SUA:"ortb2.device.sua",TDID_ADAPTER:"userId.tdid"}),y=Object.freeze({BROWSERS:"browsers",MOBILE:"mobile",MODEL:"model",PLATFORM:"platform",SOURCE:"source"}),A=[y.BROWSERS,y.MOBILE,y.MODEL,y.SOURCE,y.PLATFORM],I=Object.freeze({KEY:"krg_crb",SYNC_URL:"https://crb.kargo.com/api/v1/initsyncrnd/{UUID}?seed={SEED}&gdpr={GDPR}&gdpr_consent={GDPR_CONSENT}&us_privacy={US_PRIVACY}&gpp={GPP_STRING}&gpp_sid={GPP_SID}",SYNC_COUNT:5,PAGE_VIEW_ID:"pageViewId",PAGE_VIEW_TIMESTAMP:"pageViewTimestamp",PAGE_VIEW_URL:"pageViewUrl"});function E(){try{var e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=-177&e[6]|64,e[8]=-65&e[8]|128;var t=Array.prototype.map.call(new Uint8Array(e),function(e){return("00"+e.toString(16)).slice(-2)}).join("");return t.slice(0,8)+"-"+t.slice(8,12)+"-"+t.slice(12,16)+"-"+t.slice(16,20)+"-"+t.slice(20)}catch(e){return""}}function S(){return n||(n=E()),n}function O(e){try{return m.getDataFromLocalStorage(e)}catch(e){return null}}var _={gvlid:v.GVLID,code:v.CODE,isBidRequestValid:function(e){return!!e&&!!e.params&&!!e.params.placementId},buildRequests:function(e,t){var r,n,a,s,d,c,p=l.config.getConfig(h.KEY),f=p&&p.adServerCurrency?p.adServerCurrency:null,g=[];(0,u._each)(e,function(e){g.push(function(e){var t,r={id:e.bidId,tid:null==(t=e.ortb2Imp)||null==(t=t.ext)?void 0:t.tid,pid:e.params.placementId,code:e.adUnitCode};null!=e.floorData&&e.floorData.floorMin>0&&(r.floor=e.floorData.floorMin),e.bidRequestsCount>0&&(r.bidRequestCount=e.bidRequestsCount),e.bidderRequestsCount>0&&(r.bidderRequestCount=e.bidderRequestsCount),e.bidderWinsCount>0&&(r.bidderWinCount=e.bidderWinsCount);var n=(0,u.deepAccess)(e,"ortb2Imp.ext.gpid")||(0,u.deepAccess)(e,"ortb2Imp.ext.data.pbadslot");if(n&&(r.fpd={gpid:n}),e.ortb2Imp&&(r.ext={ortb2Imp:e.ortb2Imp}),e.mediaTypes){var i=e.mediaTypes,o=i.banner,a=i.video,s=i.native;o&&(r.banner=o),a&&(r.video=a),s&&(r.native=s)}return r}(e))});var E=e[0],T=(0,u.deepAccess)(E,b.TDID_ADAPTER),w={pageURL:null==(r=t)||null==(n=r.refererInfo)?void 0:n.page,rawCRB:m.getCookie(I.KEY),rawCRBLocalStorage:O(I.KEY)},C=Object.assign({},{pbv:"9.40.0",aid:E.auctionId,sid:S(),url:w.pageURL,timeout:t.timeout,ts:new Date().getTime(),device:{size:[window.screen.width,window.screen.height]},imp:g,user:function(e,t,r,n,i){var o=_._getCrb(),a={crbIDs:o.syncIds||{}};if(!e&&o.tdID?a.tdID=o.tdID:e&&(a.tdID=e),t&&(a.usp=t),r&&(a.gdpr={consent:r.consentString||"",applies:!!r.gdprApplies}),null!=o.lexId&&(a.kargoID=o.lexId),null!=o.clientId&&(a.clientID=o.clientId),null!=o.optOut&&(a.optOut=o.optOut),null!=n&&(a.sharedIDEids=n),i){var s={};i.consentString&&(s.gppString=i.consentString),i.applicableSections&&(s.applicableSections=i.applicableSections),(0,u.isEmpty)(s)||(a.gpp=s)}return a}(T,t.uspConsent,t.gdprConsent,E.userIdAsEids,t.gppConsent),ext:(a=E.ortb2,s=null==t?void 0:t.refererInfo,d={},a&&(d.ortb2=a),s&&(d.refererInfo=s),d)});(null==(c=E.ortb2)||null==(c=c.site)?void 0:c.cat)!=null&&(C.site={cat:E.ortb2.site.cat}),E.schain&&E.schain.nodes&&(C.schain=E.schain),C.user.data=(0,u.deepAccess)(E,b.USER_DATA)||[];var x=i===window.location.pathname?++o:(i=window.location.pathname,o=0);null!=x&&(C.requestCount=x),null!=f&&f!=h.US_DOLLAR&&(C.cur=f),null!=w.rawCRB&&(C.rawCRB=w.rawCRB),null!=w.rawCRBLocalStorage&&(C.rawCRBLocalStorage=w.rawCRBLocalStorage);var P=(0,u.deepAccess)(E,b.SOCIAL_CANVAS);null!=P&&(C.socan=P);var D=(0,u.deepAccess)(E,b.SUA);if(D){var R=[];A.forEach(function(e){var t=D[e];if(t&&("string"!=typeof t||""!==t.trim()))switch(e){case y.MOBILE&&t<1:case y.SOURCE&&t<1:break;default:R.push(e)}}),C.device.sua=(0,u.pick)(D,R)}var k=null!=O(I.PAGE_VIEW_ID),j=null!=O(I.PAGE_VIEW_TIMESTAMP),N=null!=O(I.PAGE_VIEW_URL),B={};return k&&(B.id=O(I.PAGE_VIEW_ID)),j&&(B.timestamp=Number(O(I.PAGE_VIEW_TIMESTAMP))),N&&(B.url=O(I.PAGE_VIEW_URL)),(0,u.isEmpty)(B)||(C.page=B),C.ext&&0===Object.keys(C.ext).length&&delete C.ext,Object.assign({},t,{method:v.REQUEST_METHOD,url:"https://".concat(v.HOST).concat(v.REQUEST_ENDPOINT),data:C,currency:f})},interpretResponse:function(e,t){var r=e.body,n=[],i=[];if((0,u.isEmpty)(r)||"object"!==(0,d.default)(r))return i;for(var o=0,a=Object.entries(r);o<a.length;o++){var c,l=(0,s.default)(a[o],2),p=l[0],f=l[1],m={mediaType:f.mediaType&&v.SUPPORTED_MEDIA_TYPES.includes(f.mediaType)?f.mediaType:g.BANNER};null!=(c=f.metadata)&&c.landingPageDomain&&(m.clickUrl=f.metadata.landingPageDomain[0],m.advertiserDomains=f.metadata.landingPageDomain);var h={requestId:p,cpm:Number(f.cpm),width:f.width,height:f.height,ttl:300,creativeId:f.creativeID,dealId:f.targetingCustom,netRevenue:!0,currency:f.currency||t.currency,mediaType:m.mediaType,meta:m};m.mediaType==g.VIDEO?f.admUrl?h.vastUrl=f.admUrl:h.vastXml=f.adm:h.ad=f.adm,i.push(h),f.auctionConfig&&n.push({bidId:p,config:f.auctionConfig})}return n.length>0?{bids:i,paapi:n}:i},getUserSyncs:function(e,t,r,n,i){var o=[],a=E(),s=_._getCrb().clientId,d=r&&r.gdprApplies?1:0,c=r&&r.consentString?r.consentString:"",u=i&&i.consentString?i.consentString:"",l=i&&i.applicableSections&&Array.isArray(i.applicableSections)?i.applicableSections.join(","):"";return"string"==typeof n&&4==n.length&&1==n[0]&&"Y"==n[2]||e.iframeEnabled&&a&&s&&o.push({type:"iframe",url:I.SYNC_URL.replace("{UUID}",s).replace("{SEED}",a).replace("{GDPR}",d).replace("{GDPR_CONSENT}",c).replace("{US_PRIVACY}",n||"").replace("{GPP_STRING}",u).replace("{GPP_SID}",l)}),o},supportedMediaTypes:v.SUPPORTED_MEDIA_TYPES,onTimeout:function(e){null!=e&&e.forEach(function(e){var t,r;t=e.auctionId,r=e.timeout,fetch((0,u.buildUrl)({protocol:"https",hostname:v.HOST,pathname:v.TIMEOUT_ENDPOINT,search:{aid:t,ato:r}}),{method:"GET",keepalive:!0}).catch(function(e){(0,u.logError)("Kargo: sendTimeoutData/fetch threw an error: ",e)})})},_getCrb:function(){var e=function(){try{return JSON.parse(atob(O(I.KEY)))}catch(e){return{}}}();return Object.keys(e).length?e:function(){try{var e=JSON.parse(m.getCookie(I.KEY));if(e&&e.v){var t=JSON.parse(atob(e.v));if(t)return t}return{}}catch(e){return{}}}()},_getSessionId:S};(0,p.registerBidder)(_),(0,c.registerModule)("kargoBidAdapter")},8950:function(e,t,r){"use strict";var n=r(2100)(r(5794)),i=r(7045),o=r(4700),a=r(2508),s=r(1122),d=r(4840),c=r(9577);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var l="linkedInAdsId",p="LinkedIn Ads ID: ",f=(0,s.getStorageManager)({moduleType:d.MODULE_TYPE_UID,moduleName:l});(0,a.submodule)("userId",{name:l,getCookieIds:function(){return{li_fat:f.getCookie("li_fat"),li_giant:f.getCookie("li_giant")}},decode:function(e){var t=this.getCookieIds();return(0,o.logInfo)("".concat(p," found Legacy cookies: ").concat(JSON.stringify(t))),{linkedInAdsId:{li_adsId:e,ext:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,n.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t)}}},getId:function(e){var t,r=(null==e||null==(t=e.storage)?void 0:t.name)||"li_adsId",n=f.localStorageIsEnabled()&&f.getDataFromLocalStorage(r);return this.hasConsent()&&!n&&((0,o.logInfo)("".concat(p," existing id not found, generating a new li_adsId")),n=(0,o.generateUUID)()),{id:n}},hasConsent:function(){var e=c.gdprDataHandler.getConsentData(),t=!(null!=e&&e.gdprApplies),r=c.coppaDataHandler.getCoppa(),n=c.uspDataHandler.getConsentData()||"",i=4!==n.length||"Y"!==n[1]||"Y"!==n[2];return t&&i&&!r},eids:{linkedInAdsId:{source:"linkedin.com",getValue:function(e){return e.li_adsId},getUidExt:function(e){if(e.ext)return e.ext},atype:1}}}),(0,i.registerModule)("linkedInAdsIdSystem")},5284:function(e,t,r){"use strict";var n=r(7045);r(5241),(0,n.registerModule)("liveIntentIdSystem")},2362:function(e,t,r){"use strict";var n=r(7045),i=r(2508),o=r(4840),a=r(1122),s="lmpid",d="__lmpid",c=(0,a.getStorageManager)({moduleType:o.MODULE_TYPE_UID,moduleName:s});(0,i.submodule)("userId",{name:s,decode:function(e){return e?{lmpid:e}:void 0},getId:function(e){var t=window[d]||(c.localStorageIsEnabled()?c.getDataFromLocalStorage(d):null);return t?{id:t}:void 0},eids:{lmpid:{source:"loblawmedia.ca",atype:3}}}),(0,n.registerModule)("lmpIdSystem")},9398:function(e,t,r){"use strict";var n,i=r(7045),o=r(4700),a=r(7316),s=r(2508),d=r(1122),c=r(4840),u="panoramaId",l="".concat(u,"_expiry"),p="_cc_id",f="lotamePanoramaId",g=(0,d.getStorageManager)({moduleType:c.MODULE_TYPE_UID,moduleName:f}),v={type:"cookie&html5",name:"panoramaId"};function m(e){var t=null;return y(!1)&&(t=g.getCookie(e,void 0)),null===t&&A(!1)&&(t=g.getDataFromLocalStorage(e,void 0)),t}function h(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.timestamp)()+6048e5;if(e&&t){var i=new Date(r).toUTCString();y()&&g.setCookie(e,t,i,"Lax",n,void 0),A()&&g.setDataInLocalStorage(e,t,void 0)}}function b(e){if(e){if(y(!1)){var t=new Date(0).toUTCString();g.setCookie(e,"",t,"Lax",n,void 0)}A(!1)&&g.removeDataFromLocalStorage(e,void 0)}}function y(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return e?g.cookiesAreEnabled()&&v.type.includes("cookie"):g.cookiesAreEnabled()}function A(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return e?g.hasLocalStorage()&&v.type.includes("html5"):g.hasLocalStorage()}var I={name:f,gvlid:95,decode:function(e,t){return(0,o.isStr)(e)?{lotamePanoramaId:e}:void 0},getId:function(e,t,r){if(!function(e){var t=null;if(void 0!==e.storage){Object.assign(v,v,e.storage);var r="Lotame ID module",n=["cookie","html5","cookie&html5"];void 0!==e.storage.name&&e.storage.name!==u?((0,o.logError)("Misconfigured ".concat(r,', "storage.name" is expected to be "').concat(u,'", actual is "').concat(e.storage.name,'"')),t=!0):"undefined"===e.storage.type||n.includes(e.storage.type)||(0,o.logError)("Misconfigured ".concat(r,', "storage.type" is expected to be one of "').concat(n.join(", "),'", actual is "').concat(e.storage.type,'"'))}return t}(e)){n=I.findRootDomain();var i,s=(e&&e.params||{}).clientId,d=!(0,o.isEmpty)(s),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t={data:m(u),expiryTimestampMs:0,clientExpiryTimestampMs:0};try{if(e){var r=m("".concat(l,"_").concat(e));(0,o.isStr)(r)&&(t.clientExpiryTimestampMs=parseInt(r,10))}var n=m(l);(0,o.isStr)(n)&&(t.expiryTimestampMs=parseInt(n,10))}catch(e){(0,o.logError)(e)}return t}(s),f=Date.now()>c.expiryTimestampMs;if(d&&Date.now()<c.clientExpiryTimestampMs)return{id:void 0,reason:"NO_CLIENT_CONSENT"};if(!f)return{id:c.data};var E=(y(!1)&&(i=g.getCookie(p,void 0)),!i&&A(!1)&&(i=g.getDataFromLocalStorage(p,void 0)),i);return{callback:function(e){var r,i,c,f={};E&&(f.fp=E),t&&((0,o.isBoolean)(null==(i=t.gdpr)?void 0:i.gdprApplies)&&(f.gdpr_applies=t.gdpr.gdprApplies),r=null==(c=t.gdpr)?void 0:c.consentString),r&&(f.gdpr_consent=r),d&&(f.c=s);var v=(0,o.buildUrl)({protocol:"https",host:navigator.userAgent&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?"c.ltmsphrcl.net":"id.crwdcntrl.net",pathname:"/id",search:(0,o.isEmpty)(f)?void 0:f});(0,a.ajax)(v,function(t){var r;if(t)try{var i=JSON.parse(t),a=!((0,o.isArray)(i.errors)&&-1!==i.errors.indexOf(111));if(d){if(a)b("".concat(l,"_").concat(s));else if((0,o.isStr)(i.no_consent)&&"CLIENT"===i.no_consent){h("".concat(l,"_").concat(s),i.expiry_ts,i.expiry_ts),e();return}}h(l,i.expiry_ts,i.expiry_ts),(0,o.isStr)(i.profile_id)?(a&&function(e){if(y()){var t=new Date((0,o.timestamp)()+23328e6).toUTCString();g.setCookie(p,e,t,"Lax",n,void 0)}A()&&g.setDataInLocalStorage(p,e,void 0)}(i.profile_id),(0,o.isStr)(i.core_id)?(h(u,i.core_id,i.expiry_ts),r=i.core_id):b(u)):(a&&b(p),b(u))}catch(e){(0,o.logError)(e)}e(r)},void 0,{method:"GET",withCredentials:!0})}}}},eids:{lotamePanoramaId:{source:"crwdcntrl.net",atype:1}}};(0,s.submodule)("userId",I),(0,i.registerModule)("lotamePanoramaIdSystem")},8776:function(e,t,r){"use strict";var n=r(8287),i=r(7045),o=r(4700),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}(r(7316)),s=r(2508),d=r(1122),c=r(4840);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l="merkleId",p="https://prebid.sv.rkdms.com/identity/",f="_svsid",g=(0,d.getStorageManager)({moduleType:c.MODULE_TYPE_UID,moduleName:l});function v(e,t){var r,n,i=(r="string"==typeof e.sv_session?e.sv_session:g.getCookie(f),n=e.endpoint+"?sv_domain=".concat(e.sv_domain,"&sv_pubid=").concat(e.sv_pubid,"&ssp_ids=").concat(e.ssp_ids.join()),r&&(n="".concat(n,"&sv_session=").concat(r)),(0,o.logInfo)("Merkle url :"+n),n);return function(e){a.ajaxBuilder()(i,function(r){if(r)try{var n,i,a,s;d=JSON.parse(r),n=d,(0,o.logInfo)("Merkle setting "+"".concat(f)),n&&n[f]&&"string"==typeof n[f]&&(i=n[f],a=t.expires,(s=new Date).setTime(s.getTime()+1e3*a*60),g.setCookie(f,i,s.toUTCString(),"Lax")),(0,o.logInfo)("Merkle responseObj "+JSON.stringify(d))}catch(e){(0,o.logError)(e)}var d,c=new Date().toUTCString();d.date=c,(0,o.logInfo)("Merkle responseObj with date "+JSON.stringify(d)),e(d)},function(t){(0,o.logError)("".concat(l,": merkleId fetch encountered an error"),t),e()},{method:"GET",withCredentials:!0})}}var m={name:l,decode:function(e){var t=e&&e.pam_id&&"string"==typeof e.pam_id.id?e.pam_id:void 0;if((0,o.logInfo)("Merkle id "+JSON.stringify(t)),t)return{merkleId:t};var r=e&&null!=e&&e.merkleId&&Array.isArray(e.merkleId)?e.merkleId:void 0;return(0,o.logInfo)("merkleIds: "+JSON.stringify(r)),r?{merkleId:r}:void 0},getId:function(e,t){(0,o.logInfo)("User ID - merkleId generating id");var r,n=e&&e.params||{};return"string"!=typeof n.sv_pubid?void(0,o.logError)("User ID - merkleId submodule requires a valid sv_pubid string to be defined"):Array.isArray(n.ssp_ids)?(null==t||null==(r=t.gdpr)?void 0:r.gdprApplies)===!0?void(0,o.logError)("User ID - merkleId submodule does not currently handle consent strings"):("string"!=typeof n.endpoint&&((0,o.logWarn)("User ID - merkleId submodule endpoint string is not defined"),n.endpoint=p),"string"!=typeof n.sv_domain&&(n.sv_domain=m.findRootDomain()),{callback:v(n,e&&e.storage||{})}):void(0,o.logError)("User ID - merkleId submodule requires a valid ssp_ids array to be defined")},extendId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;(0,o.logInfo)("User ID - stored id "+r);var n=e&&e.params||{};if("string"!=typeof n.endpoint&&((0,o.logWarn)("User ID - merkleId submodule endpoint string is not defined"),n.endpoint=p),t&&"boolean"==typeof t.gdprApplies&&t.gdprApplies)return void(0,o.logError)("User ID - merkleId submodule does not currently handle consent strings");"string"!=typeof n.sv_domain&&(n.sv_domain=m.findRootDomain());var i=e&&e.storage||{};if(i&&i.refreshInSeconds&&"number"==typeof n.refreshInSeconds)return{id:r};var a=25200;n&&n.refreshInSeconds&&"number"==typeof n.refreshInSeconds&&(a=n.refreshInSeconds,(0,o.logInfo)("User ID - merkleId param refreshInSeconds"+a));var s=new Date(r.date);return s&&s&&Date.now()-s.getTime()>1e3*a?((0,o.logInfo)("User ID - merkleId needs refreshing id"),{callback:v(n,i)}):((0,o.logInfo)("User ID - merkleId not refreshed"),{id:r})},eids:{merkleId:{atype:3,getSource:function(e){var t;return null!=e&&null!=(t=e.ext)&&t.ssp?"".concat(e.ext.ssp,".merkleinc.com"):"merkleinc.com"},getValue:function(e){return e.id},getUidExt:function(e){return e.keyID?{keyID:e.keyID}:e.ext?e.ext:void 0}}}};(0,s.submodule)("userId",m),(0,i.registerModule)("merkleIdSystem")},5369:function(e,t,r){"use strict";var n=r(2100),i=n(r(939)),o=n(r(7001)),a=n(r(7196)),s=n(r(139)),d=n(r(7586)),c=n(r(1770)),u=r(7045),l=r(4700),p=r(523),f=r(4607);function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var m=(0,r(9579).ortbConverter)({context:{netRevenue:!0,ttl:30},imp:function(e,t,r){var n=e(t,r);return n.tagid=t.adUnitCode,n.ext&&(n.ext.placementId=t.params.placementId),n}}),h=[f.BANNER,f.VIDEO,f.NATIVE],b=(0,u.getGlobal)(),y={},A={},I={},E=new Set,S=new Set,O=new Set,_={url:function(e){return"string"==typeof e},placementId:function(e){return"string"==typeof e||"number"==typeof e}};(0,p.registerBidder)({code:"nativo",gvlid:263,aliases:["ntv"],supportedMediaTypes:h,isBidRequestValid:function(e){return!e.params||!Object.keys(e.params).some(function(t){var r=e.params[t],n=_[t];return!!n&&!n(r)})},buildRequests:function(e,t){var r,n,o=JSON.stringify(m.toORTB({bidRequests:e,bidderRequest:t})),a=new T;a.addBidRequestDataSource(new C);var s=new Set,d=function(){var e={},t=[];function r(t,r){e.hasOwnProperty(t)||(e[t]=r)}return{addBidData:function(e,n){var i=t.length;if(t.push(e),Array.isArray(n))return void n.forEach(function(e){r(String(e),i)});r(String(n),i)},getBidData:function(r){var n=String(r);if(e.hasOwnProperty(n))return t[e[n]]}}}(),c={length:0},u={};e.forEach(function(e){n=function(e){var t=(0,l.deepAccess)(e,"params.url");if(void 0!=t){if(j(t))return t;t=function(e){if(j(e))return e;var t="https:";return 0!==e.indexOf("//")&&(t+="//"),"".concat(t).concat(e)}(t);try{return new URL(t).href}catch(e){}}}(e)||t.refererInfo.location,r=(0,l.deepAccess)(e,"params.placementId");var o=[e.adUnitCode];r&&!s.has(r)&&(s.add(r),o.push(r),c[r]=e.sizes,c.length++);var p={bidId:e.bidId,size:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;return e&&0!==e.length?1===e.length?e[0]:e.reduce(function(e,r){return t(r)>t(e)?r:e}):[]}(e.sizes)};d.addBidData(p,o);var f=function(e){if("function"==typeof e.getFloor){var t={},r=e.mediaTypes,n=new Set;Object.keys(r).forEach(function(i){var o=r[i],a={};(o.sizes||o.playerSize||[]).forEach(function(t){var r=e.getFloor({currency:"USD",mediaType:i,size:t});a[P(t)]=null==r?void 0:r.floor,n.add(t)}),t[i]=a;var s=function(e,t){return e.getFloor({currency:"USD",mediaType:t,size:"*"})}(e,i);(null==s?void 0:s.floor)>0&&(a["*"]=s.floor)});var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["*"],r={};return t.forEach(function(t){var n=e.mediaTypes;e.mediaTypes={PRICE_FLOOR_WILDCARD:n.sizes};var i=e.getFloor({currency:"USD",mediaType:"*",size:t});e.mediaTypes=n,r["*"!==t?P(t):"*"]=i.floor}),r}(e,["*"].concat((0,i.default)(Array.from(n))));return t["*"]=o,t}}(e);f&&(u[e.adUnitCode]=f),a.processBidRequestData(e,t)}),y[t.bidderRequestId]=d;var p=e.map(function(e){return A[e.adUnitCode]=void 0!==A[e.adUnitCode]?A[e.adUnitCode]+1:0,{adUnitCode:e.adUnitCode,mediaTypes:e.mediaTypes}}),f=[{key:"ntv_pbv",value:b.version},{key:"ntv_pb_rid",value:t.bidderRequestId},{key:"ntv_ppc",value:btoa(JSON.stringify(p))},{key:"ntv_dbr",value:btoa(JSON.stringify(A))},{key:"ntv_url",value:encodeURIComponent(n)}];if(Object.keys(u).length&&f.unshift({key:"ntv_ppf",value:btoa(JSON.stringify(u))}),E.size>0&&f.unshift({key:"ntv_atf",value:Array.from(E).join(",")}),S.size>0&&f.unshift({key:"ntv_avtf",value:Array.from(S).join(",")}),O.size>0&&f.unshift({key:"ntv_ctf",value:Array.from(O).join(",")}),c.length&&f.unshift({key:"ntv_pas",value:btoa(JSON.stringify(c))}),s.size>0){var g=[];s.forEach(function(e){return g.push(e)}),f.unshift({key:"ntv_ptd",value:g.join(",")})}return t.gdprConsent&&f.unshift({key:"ntv_gdpr_consent",value:t.gdprConsent.consentString}),t.gppConsent&&f.unshift({key:"ntv_gpp_consent",value:t.gppConsent.gppString}),t.uspConsent&&f.unshift({key:"us_privacy",value:t.uspConsent}),{method:"POST",url:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length||!Array.isArray(t))return e;var r=t.filter(function(e){return""!==e.trim()});if(0===r.length)return e;for(var n="".concat(e,"?").concat(r[0]),i=1;i<r.length;i++)n+="&".concat(r[i]);return n}("https://exchange.postrelease.com/prebid",[a.getRequestDataQueryString(),f.reduce(function(e,t){return D(e,t.key,t.value)},"")]),data:o,bidderRequest:t}},interpretResponse:function(e,t){var r=this;if(!e||!e.body||(0,l.isEmpty)(e.body))return[];try{var n,i,o="string"==typeof e.body?JSON.parse(e.body):e.body,a=[];return o.seatbid.forEach(function(e,s){e.bid.forEach(function(e){var d;n={requestId:(i=r.getAdUnitData(o.id,e)).bidId,cpm:e.price,currency:o.cur,width:e.w||i.size[0],height:e.h||i.size[1],creativeId:e.crid,dealId:e.id,netRevenue:!0,ttl:e.ttl||360,ad:e.adm,meta:{advertiserDomains:e.adomain},mediaType:(d=t.bidderRequest.bids[s],(0,l.deepAccess)(d,"mediaTypes.video")?f.VIDEO:(0,l.deepAccess)(d,"mediaTypes.native")?f.NATIVE:f.BANNER)},e.ext&&(I[e.id]=e.ext),n.mediaType===f.VIDEO&&(n.vastUrl=e.adm),n.mediaType===f.NATIVE&&(n.native={ortb:JSON.parse(n.ad)}),a.push(n)})}),delete y[o.id],a}catch(e){return[]}},getUserSyncs:function(e,t,r,n){var i,o="";r&&(o=D(o,"gdpr",+!!r.gdprApplies),o=D(o,"gdpr_consent",encodeURIComponent(r.consentString||""))),n&&(o=D(o,"us_privacy",encodeURIComponent(n.uspConsent)));var a={iframe:e.iframeEnabled,image:e.pixelEnabled},s=[];return t.forEach(function(e){if(!e||!e.body||(0,l.isEmpty)(e.body))return s;try{i="string"==typeof e.body?JSON.parse(e.body):e.body}catch(e){return}i&&i.seatbid&&0!==i.seatbid.length&&i.seatbid.forEach(function(e){e.syncUrls&&e.syncUrls.forEach(function(e){a[e.type]&&""!==e.url.trim()&&s.push({type:e.type,url:e.url.replace("{GDPR_params}",o)})})})}),s},onBidWon:function(e){var t=I[e.dealId];t&&(k(E,t.adsToFilter),k(S,t.advertisersToFilter),k(O,t.campaignsToFilter))},getAdUnitData:function(e,t){var r=y[e],n=t.impid,i=(0,l.deepAccess)(t,"ext.ad_unit_id");return r.getBidData(i)||r.getBidData(n)}});var T=(0,c.default)(function e(){(0,d.default)(this,e),this.bidRequestDataSources=[]},[{key:"addBidRequestDataSource",value:function(e){e instanceof w&&this.bidRequestDataSources.push(e)}},{key:"processBidRequestData",value:function(e,t){var r,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return v(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(this.bidRequestDataSources);try{for(n.s();!(r=n.n()).done;)r.value.processBidRequestData(e,t)}catch(e){n.e(e)}finally{n.f()}}},{key:"getRequestDataQueryString",value:function(){if(0!=this.bidRequestDataSources.length)return this.bidRequestDataSources.map(function(e){return e.getRequestQueryString()}).filter(function(e){return""!==e}).join("&")}}]),w=(0,c.default)(function e(){(0,d.default)(this,e),this.type="BidRequestDataSource"},[{key:"processBidRequestData",value:function(e,t){}},{key:"getRequestQueryString",value:function(){return""}}]),C=function(e){function t(){var e,r,n;return(0,d.default)(this,t),r=t,r=(0,a.default)(r),(e=(0,o.default)(this,g()?Reflect.construct(r,[],(0,a.default)(this).constructor):r.apply(this,n))).type="UserEIDs",e.qsParam=new x("ntv_pb_eid"),e.eids=[],e}return(0,s.default)(t,e),(0,c.default)(t,[{key:"processBidRequestData",value:function(e,t){void 0===e.userIdAsEids||this.eids.length>0||(this.eids=e.userIdAsEids)}},{key:"getRequestQueryString",value:function(){if(0===this.eids.length)return"";var e=function(e){try{return btoa(JSON.stringify(e))}catch(e){}}(this.eids);return this.qsParam.value=e,this.qsParam.toString()}}])}(w),x=(0,c.default)(function e(t,r){(0,d.default)(this,e),this.key=t,this.value=r});function P(e){return!Array.isArray(e)||e.length<2?"":"".concat(e[0],"x").concat(e[1])}function D(e,t,r){return e+"".concat(e.length?"&":"").concat(t,"=").concat(r)}x.prototype.toString=function(){return"".concat(this.key,"=").concat(this.value)};var R=function(e){return e[0]*e[1]};function k(e,t){t&&Array.isArray(t)&&t.length&&t.forEach(function(t){return e.add(t)})}function j(e){return/^http[s]?\:/.test(e)}(0,u.registerModule)("nativoBidAdapter")},5872:function(e,t,r){"use strict";var n=r(2100),i=r(8287),o=n(r(5794)),a=n(r(5881)),s=r(7045),d=r(9926),c=r(523),u=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(4700)),l=r(4607),p=r(9579);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m={code:"openx",gvlid:69,supportedMediaTypes:[l.BANNER,l.VIDEO,l.NATIVE],isBidRequestValid:function(e){var t=e.params.delDomain||e.params.platform;return u.deepAccess(e,"mediaTypes.banner")&&t?!!e.params.unit||u.deepAccess(e,"mediaTypes.banner.sizes.length")>0:!!(e.params.unit&&t)},buildRequests:function(e,t){var r=e.filter(function(e){return y(e)}),n=e.filter(function(e){var t,r;return r=!y(t=e)&&!A(t),u.deepAccess(t,"mediaTypes.banner")||r||A(e)}).map(function(e){return v(v({},e),{},{mediaTypes:v(v({},e.mediaTypes),{},{video:void 0})})}),i=n.length?[b(n,t,null)]:[];return r.forEach(function(e){i.push(b([e],t,l.VIDEO))}),i},interpretResponse:function(e,t){return e.body||(e.body={nbr:0}),h.fromORTB({request:t.data,response:e.body})},getUserSyncs:function(e,t,r,n){if(e.iframeEnabled||e.pixelEnabled){var i=e.iframeEnabled?"iframe":"image",o=[],a="https://u.openx.net/w/1.0/pd";if(r&&(o.push("gdpr="+ +!!r.gdprApplies),o.push("gdpr_consent="+encodeURIComponent(r.consentString||""))),n&&o.push("us_privacy="+encodeURIComponent(n)),t.length>0&&t[0].body&&t[0].body.ext){var s=t[0].body.ext;s.delDomain?a="https://".concat(s.delDomain,"/w/1.0/pd"):s.platform&&o.push("ph="+s.platform)}else o.push("ph=2d1251ae-7f3a-47cf-bd2a-2f288854a0ba");return[{type:i,url:"".concat(a).concat(o.length>0?"?"+o.join("&"):"")}]}}};(0,c.registerBidder)(m);var h=(0,p.ortbConverter)({context:{netRevenue:!0,ttl:300,nativeRequest:{eventtrackers:[{event:1,methods:[1,2]}]}},imp:function(e,t,r){var n=e(t,r);return(0,u.mergeDeep)(n,{tagid:t.params.unit,ext:{divid:t.adUnitCode}}),t.params.customParams&&u.deepSetValue(n,"ext.customParams",t.params.customParams),t.params.customFloor&&!n.bidfloor&&(n.bidfloor=t.params.customFloor),n},request:function(e,t,r,n){var i=e(t,r,n);(0,u.mergeDeep)(i,{at:1,ext:{bc:"".concat("hb_pb_ortb","_").concat("2.0"),pv:"9.40.0"}});var o=n.bidRequests[0];return o.params.coppa&&u.deepSetValue(i,"regs.coppa",1),o.params.doNotTrack&&u.deepSetValue(i,"device.dnt",1),o.params.platform&&u.deepSetValue(i,"ext.platform",o.params.platform),o.params.delDomain&&u.deepSetValue(i,"ext.delDomain",o.params.delDomain),o.params.response_template_name&&u.deepSetValue(i,"ext.response_template_name",o.params.response_template_name),o.params.test&&(i.test=1),i},bidResponse:function(e,t,r){var n=e(t,r);return t.ext&&(n.meta.networkId=t.ext.dsp_id,n.meta.advertiserId=t.ext.buyer_id,n.meta.brandId=t.ext.brand_id),n},response:function(e,t,r,n){var i=n.ortbRequest;i.ext&&(i.ext.delDomain&&u.deepSetValue(r,"ext.delDomain",i.ext.delDomain),i.ext.platform&&u.deepSetValue(r,"ext.platform",i.ext.platform));var o=e(t,r,n),s=u.deepAccess(r,"ext.fledge_auction_configs");return s?(s=Object.entries(s).map(function(e){var t,r=(0,a.default)(e,2),i=r[0],o=r[1];return{bidId:i,config:(0,u.mergeDeep)(Object.assign({},o),{auctionSignals:{ortb2Imp:null==(t=n.impContext[i])?void 0:t.imp}})}}),{bids:o.bids,paapi:s}):o},overrides:{imp:{bidfloor:function(e,t,r,n){var i={};e(i,r,v(v({},n),{},{currency:"USD"})),"USD"===i.bidfloorcur&&Object.assign(t,i)},video:function(e,t,r,n){var i=r.mediaTypes[l.VIDEO];i&&(i=Object.assign({},i,r.params.video),r=v(v({},r),{},{mediaTypes:(0,o.default)({},l.VIDEO,i)})),e(t,r,n)}}}});function b(e,t,r){return{method:"POST",url:d.config.getConfig("openxOrtbUrl")||"https://rtb.openx.net/openrtbb/prebidjs",data:h.toORTB({bidRequests:e,bidderRequest:t,context:{mediaType:r}})}}function y(e){return u.deepAccess(e,"mediaTypes.video")}function A(e){return u.deepAccess(e,"mediaTypes.native")}(0,s.registerModule)("openxBidAdapter")},2673:function(e,t,r){"use strict";var n=r(2100)(r(8287)),i=r(7045),o=r(4700),a=r(523),s=r(4607),d=r(9926),c=r(5439),u=r(8915),l=r(2339);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f="https://elb.the-ozone-project.com",g="/openrtb2/auction",v="/static/load-cookie.html",m="https://test.ozpr.net",h="3.0.0",b={gvlid:524,aliases:[{code:"venatus",gvlid:524}],version:h,code:"ozone",supportedMediaTypes:[s.VIDEO,s.BANNER],cookieSyncBag:{publisherId:null,siteId:null,userIdObject:{}},propertyBag:{pageId:null,buildRequestsStart:0,buildRequestsEnd:0,endpointOverride:null},whitelabel_defaults:{logId:"OZONE",bidder:"ozone",keyPrefix:"oz",auctionUrl:f+g,cookieSyncUrl:f+v,rendererUrl:"https://prebid.the-ozone-project.com/ozone-renderer.js",batchRequests:!1},loadWhitelabelData:function(e){if(!this.propertyBag.whitelabel){this.propertyBag.whitelabel=JSON.parse(JSON.stringify(this.whitelabel_defaults));var t=e.bidder||"ozone";this.propertyBag.whitelabel.logId=t.toUpperCase(),this.propertyBag.whitelabel.bidder=t;var r=d.config.getConfig(t)||{};(0,o.logInfo)("got bidderConfig: ",(0,o.deepClone)(r)),r.kvpPrefix&&(this.propertyBag.whitelabel.keyPrefix=r.kvpPrefix);var n=this.getGetParametersAsObject();if(r.endpointOverride&&(r.endpointOverride.origin&&(this.propertyBag.endpointOverride=r.endpointOverride.origin,this.propertyBag.whitelabel.auctionUrl=r.endpointOverride.origin+g,this.propertyBag.whitelabel.cookieSyncUrl=r.endpointOverride.origin+v),n.hasOwnProperty("renderer")?n.renderer.match("%3A%2F%2F")?this.propertyBag.whitelabel.rendererUrl=decodeURIComponent(n.renderer):this.propertyBag.whitelabel.rendererUrl=n.renderer:r.endpointOverride.rendererUrl&&(this.propertyBag.whitelabel.rendererUrl=r.endpointOverride.rendererUrl),r.endpointOverride.cookieSyncUrl&&(this.propertyBag.whitelabel.cookieSyncUrl=r.endpointOverride.cookieSyncUrl),r.endpointOverride.auctionUrl&&(this.propertyBag.endpointOverride=r.endpointOverride.auctionUrl,this.propertyBag.whitelabel.auctionUrl=r.endpointOverride.auctionUrl)),r.hasOwnProperty("batchRequests")&&(this.batchValueIsValid(r.batchRequests)?this.propertyBag.whitelabel.batchRequests=r.batchRequests:(0,o.logError)("invalid config: batchRequest")),r.hasOwnProperty("videoParams")&&(this.propertyBag.whitelabel.videoParams=r.videoParams),n.hasOwnProperty("batchRequests")){var i=parseInt(n.batchRequests);this.batchValueIsValid(i)?this.propertyBag.whitelabel.batchRequests=i:(0,o.logError)("invalid GET: batchRequests")}try{n.hasOwnProperty("auction")&&"dev"===n.auction&&((0,o.logInfo)("GET: auction=dev"),this.propertyBag.whitelabel.auctionUrl=m+g),n.hasOwnProperty("cookiesync")&&"dev"===n.cookiesync&&((0,o.logInfo)("GET: cookiesync=dev"),this.propertyBag.whitelabel.cookieSyncUrl=m+v)}catch(e){}(0,o.logInfo)("whitelabel: ",this.propertyBag.whitelabel)}},batchValueIsValid:function(e){return"boolean"==typeof e||"number"==typeof e&&e>0},getAuctionUrl:function(){return this.propertyBag.whitelabel.auctionUrl},getCookieSyncUrl:function(){return this.propertyBag.whitelabel.cookieSyncUrl},getRendererUrl:function(){return this.propertyBag.whitelabel.rendererUrl},getVideoPlacementValue:function(e){return 0>["instream","outstream"].indexOf(e)?null:(0,o.deepAccess)(this.propertyBag,"whitelabel.videoParams.".concat(e),null)},getBatchRequests:function(){return!0===this.propertyBag.whitelabel.batchRequests?10:"number"==typeof this.propertyBag.whitelabel.batchRequests&&this.propertyBag.whitelabel.batchRequests>0&&this.propertyBag.whitelabel.batchRequests},isBidRequestValid:function(e){var t,r,i="VALIDATION FAILED";this.loadWhitelabelData(e),(0,o.logInfo)("isBidRequestValid : ",d.config.getConfig(),e);var a=e.adUnitCode,c="".concat(i," : missing {param} : siteId, placementId and publisherId are REQUIRED");if(!(0,o.getBidIdParameter)("placementId",e.params))return(0,o.logError)(c.replace("{param}","placementId"),a),!1;if(!this.isValidPlacementId(e.params.placementId))return(0,o.logError)("".concat(i," : placementId must be exactly 10 numbers"),a),!1;if(!(0,o.getBidIdParameter)("publisherId",e.params))return(0,o.logError)(c.replace("{param}","publisherId"),a),!1;if(!e.params.publisherId.toString().match(/^[a-zA-Z0-9\-]{12}$/))return(0,o.logError)("".concat(i," : publisherId must be /^[a-zA-Z0-9\\-]{12}$/"),a),!1;if(!(0,o.getBidIdParameter)("siteId",e.params))return(0,o.logError)(c.replace("{param}","siteId"),a),!1;if(!e.params.siteId.toString().match(/^[0-9]{10}$/))return(0,o.logError)("".concat(i," : siteId must be /^[0-9]{10}$/"),a),!1;if(e.params.hasOwnProperty("customParams"))return(0,o.logError)("".concat(i," : customParams should be renamed: customData"),a),!1;if(e.params.hasOwnProperty("customData")){if(!(0,o.isArray)(e.params.customData))return(0,o.logError)("".concat(i," : customData is not an Array"),a),!1;if(e.params.customData.length<1)return(0,o.logError)("".concat(i," : empty customData"),a),!1;if(!e.params.customData[0].hasOwnProperty("targeting"))return(0,o.logError)("".concat(i," :no customData[0].targeting"),a),!1;if("object"!=(0,n.default)(e.params.customData[0].targeting))return(0,o.logError)("".concat(i," : customData[0].targeting is not an Object"),a),!1}if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(s.VIDEO)){if(!(null!=(t=e.mediaTypes)&&null!=(t=t[s.VIDEO])&&t.context))return(0,o.logError)("".concat(i," No video context key/value")),!1;if(0>["instream","outstream"].indexOf(null==(r=e.mediaTypes)||null==(r=r[s.VIDEO])?void 0:r.context))return(0,o.logError)("".concat(i," video.context is invalid.")),!1}return!0},isValidPlacementId:function(e){return e.toString().match(/^[0-9]{10}$/)},buildRequests:function(e,t){var r,i,a=this;this.loadWhitelabelData(e[0]),this.propertyBag.buildRequestsStart=new Date().getTime();var c=this.propertyBag.whitelabel.bidder,u=this.propertyBag.whitelabel.keyPrefix;if((0,o.logInfo)("buildRequests time: ".concat(this.propertyBag.buildRequestsStart," v ").concat(h," validBidRequests"),(0,o.deepClone)(e),"bidderRequest",(0,o.deepClone)(t)),this.blockTheRequest())return[];var p=!!t.fledgeEnabled,f={publisherId:"",siteId:""};e.length>0&&(Object.assign(this.cookieSyncBag.userIdObject,this.findAllUserIdsFromEids(e[0])),this.cookieSyncBag.siteId=(0,o.deepAccess)(e[0],"params.siteId"),this.cookieSyncBag.publisherId=(0,o.deepAccess)(e[0],"params.publisherId"),f=e[0].params),(0,o.logInfo)("cookie sync bag",this.cookieSyncBag);var g=this.getWhitelabelConfigItem("ozone.singleRequest");g=!1!==g;var v={},m=(0,o.deepAccess)(t,"ortb2",null);(0,o.logInfo)("got ortb2 fpd: ",m),m&&(0,o.deepAccess)(m,"user")&&((0,o.logInfo)("added FPD user object"),v.user=m.user);var b=this.getGetParametersAsObject(),y=u+"testmode",A=b[y]||null;v.device=(null==t||null==(r=t.ortb2)?void 0:r.device)||{};var I=this.getPlacementIdOverrideFromGetParam(),S=null,O=(0,o.deepAccess)(e,"0.ortb2.source.tid");"0"===O&&(O=null);var _=e.map(function(e){var t={},r=I||a.getPlacementId(e);t.id=e.bidId,t.tagid=r,t.secure=+("https"===(0,o.parseUrl)((0,l.getRefererInfo)().page).protocol);var i=[];if(e.hasOwnProperty("mediaTypes")){if(e.mediaTypes.hasOwnProperty(s.BANNER)&&(i=e.mediaTypes[s.BANNER].sizes,(0,o.logInfo)("setting banner size from mediaTypes.banner for bidId "+t.id+": ",i)),e.mediaTypes.hasOwnProperty(s.VIDEO)){if((0,o.logInfo)("openrtb 2.5 compliant video"),"object"==(0,n.default)(e.mediaTypes[s.VIDEO])){var d=(0,o.deepAccess)(e,"params.video",{});t.video=a.unpackVideoConfigIntoIABformat(e.mediaTypes[s.VIDEO],d),t.video=a.addVideoDefaults(t.video,e.mediaTypes[s.VIDEO],d)}var u=function(e){var t=E(e);return t?t[0]&&"object"===(0,n.default)(t[0])&&((0,o.logInfo)("getWidthAndHeightFromVideoObject found nested array inside playerSize.",t[0]),"number"!=typeof(t=t[0])[0]&&"string"!=typeof t[0])?((0,o.logError)("getWidthAndHeightFromVideoObject found non-number/string type inside the INNER array in playerSize. This is totally wrong - cannot continue.",t[0]),null):2!==t.length?((0,o.logError)("getWidthAndHeightFromVideoObject found playerSize with length of "+t.length+". This is totally wrong - cannot continue."),null):{w:t[0],h:t[1]}:null}(t.video);(0,o.logInfo)("setting video object ".concat(t.id," from mediaTypes.video: "),t.video,"wh=",u);var f="setting obj.video.format to be ";u&&"object"===(0,n.default)(u)?(t.video.w=u.w,t.video.h=u.h,function(e){var t=E(e);return!t||t.length<1?null:t[0]&&"object"===(0,n.default)(t[0])}(t.video)?((0,o.logInfo)("".concat(f," an array of objects")),t.video.ext.format=[u]):((0,o.logInfo)("".concat(f," an object")),t.video.ext.format=u)):(0,o.logWarn)("Failed ".concat(f," anything - bad config"))}e.mediaTypes.hasOwnProperty(s.NATIVE)&&(t.native=e.mediaTypes[s.NATIVE],(0,o.logInfo)("setting native object ".concat(t.id," from mediaTypes.native element:"),t.native)),e.hasOwnProperty("getFloor")?(t.floor=a.getFloorObjectForAuction(e),(0,o.logInfo)("obj.floor is : ",t.floor)):(0,o.logInfo)("no getFloor property")}else e.hasOwnProperty("sizes")?i=e.sizes:(0,o.logInfo)("no mediaTypes or sizes array. Cannot set sizes for banner type");if(i.length>0&&(t.banner={topframe:1,w:i[0][0]||0,h:i[0][1]||0,format:i.map(function(e){return{w:e[0],h:e[1]}})}),t.placementId=r,(0,o.deepSetValue)(t,"ext.prebid",{storedrequest:{id:r}}),t.ext[c]={},t.ext[c].adUnitCode=e.adUnitCode,e.params.hasOwnProperty("customData")&&(t.ext[c].customData=e.params.customData),e.params.hasOwnProperty("ozFloor")){var g=parseFloat(e.params.ozFloor);isNaN(g)?(0,o.logError)("Ignoring invalid ozFloor value for adunit code: ".concat(e.adUnitCode)):t.ext[c].ozFloor=g}if((0,o.logInfo)("obj.ext.".concat(c," is "),t.ext[c]),null!=A)if((0,o.logInfo)("setting isTestMode: ".concat(A)),t.ext[c].hasOwnProperty("customData"))for(var v=0;v<t.ext[c].customData.length;v++)t.ext[c].customData[v].targeting[y]=A;else t.ext[c].customData=[{settings:{},targeting:{}}],t.ext[c].customData[0].targeting[y]=A;m&&(0,o.deepAccess)(m,"site")&&((0,o.logInfo)("adding fpd.site"),(0,o.deepAccess)(t,"ext.".concat(c,".customData.0.targeting"),!1)?Object.assign(t.ext[c].customData[0].targeting,m.site):(0,o.deepSetValue)(t,"ext.".concat(c,".customData.0.targeting"),m.site)),!S&&(0,o.deepAccess)(e,"schain")&&(S=e.schain);var h=(0,o.deepAccess)(e,"ortb2Imp.ext.gpid");h&&(0,o.deepSetValue)(t,"ext.gpid",h);var b=(0,o.deepAccess)(e,"ortb2Imp.ext.tid");if(b&&(t.ext[c].transactionId=b),O&&(t.ext[c].auctionId=O),p){var _=(0,o.deepAccess)(e,"ortb2Imp.ext.ae");(0,o.isInteger)(_)?(0,o.deepSetValue)(t,"ext.ae",_):(0,o.logError)("ignoring ortb2Imp.ext.ae - not an integer for obj.id=".concat(t.id))}return t}),T={};if(T[c]={},T[c]["".concat(u,"_pb_v")]=h,T[c]["".concat(u,"_rw")]=+!!I,e.length>0){var w=this.cookieSyncBag.userIdObject;w.hasOwnProperty("pubcid.org")&&(T[c].pubcid=w["pubcid.org"])}T[c].pv=this.getPageId();var C=this.getWhitelabelConfigItem("ozone.oz_omp_floor");(0,o.logInfo)("".concat(u,"_omp_floor dollar value = "),C),"number"==typeof C?T[c]["".concat(u,"_omp_floor")]=C:void 0!==C&&(0,o.logError)("IF set, ".concat(u,"_omp_floor must be a number eg. 1.55. Found:")+(0,n.default)(C));var x=this.getWhitelabelConfigItem("ozone.oz_whitelist_adserver_keys"),P=(0,o.isArray)(x)&&x.length>0;T[c][u+"_kvp_rw"]=+!!P,"ozone"!==c&&((0,o.logInfo)("setting aliases object"),T.prebid={aliases:{ozone:c}}),null!=this.propertyBag.endpointOverride&&(T[c].origin=this.propertyBag.endpointOverride);var D=(0,o.deepAccess)(e,"0.userIdAsEids",[]);if(v.site={publisher:{id:f.publisherId},page:(0,l.getRefererInfo)().page,id:f.siteId},v.test=+!!d.config.getConfig("debug"),t&&t.gdprConsent){(0,o.logInfo)("ADDING GDPR");var R=(0,o.deepAccess)(t,"gdprConsent.apiVersion",1);v.regs={ext:{gdpr:+!!t.gdprConsent.gdprApplies,apiVersion:R}},(0,o.deepAccess)(v,"regs.ext.gdpr")?(0,o.deepSetValue)(v,"user.ext.consent",t.gdprConsent.consentString):(0,o.logWarn)("**** Strange CMP info: bidderRequest.gdprConsent exists BUT bidderRequest.gdprConsent.gdprApplies is false. See bidderRequest logged above. ****")}else(0,o.logInfo)("WILL NOT ADD GDPR info; no bidderRequest.gdprConsent object");t&&t.uspConsent?((0,o.logInfo)("ADDING USP consent info"),(0,o.deepSetValue)(v,"regs.ext.us_privacy",t.uspConsent)):(0,o.logInfo)("WILL NOT ADD USP consent info; no bidderRequest.uspConsent."),null!=t&&null!=(i=t.ortb2)&&null!=(i=i.regs)&&i.gpp&&((0,o.deepSetValue)(v,"regs.gpp",t.ortb2.regs.gpp),(0,o.deepSetValue)(v,"regs.gpp_sid",t.ortb2.regs.gpp_sid)),S&&((0,o.logInfo)("schain found"),(0,o.deepSetValue)(v,"source.ext.schain",S)),!0===d.config.getConfig("coppa")&&(0,o.deepSetValue)(v,"regs.coppa",1),T[c].cookieDeprecationLabel=(0,o.deepAccess)(t,"ortb2.device.ext.cdep","none"),(0,o.logInfo)("cookieDeprecationLabel ortb2.device.ext.cdep = ".concat(T[c].cookieDeprecationLabel));var k=this.getBatchRequests();if("number"==typeof k){(0,o.logInfo)("Batching = ".concat(k));for(var j=[],N=0;N<_.length;N+=k)v.id=(0,o.generateUUID)(),(0,o.deepSetValue)(v,"user.ext.eids",D),O&&(0,o.deepSetValue)(v,"source.tid",O),v.imp=_.slice(N,N+k),v.ext=T,v.imp.length>0&&j.push({method:"POST",url:this.getAuctionUrl(),data:JSON.stringify(v),bidderRequest:t});return(0,o.logInfo)("batch request going to return : ",j),j}if(g){(0,o.logInfo)("single request starting"),v.id=(0,o.generateUUID)(),v.imp=_,v.ext=T,(0,o.deepSetValue)(v,"user.ext.eids",D),O&&(0,o.deepSetValue)(v,"source.tid",O);var B={method:"POST",url:this.getAuctionUrl(),data:JSON.stringify(v),bidderRequest:t};return this.propertyBag.buildRequestsEnd=new Date().getTime(),(0,o.logInfo)("buildRequests going to return for single at time ".concat(this.propertyBag.buildRequestsEnd," (took ").concat(this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart,"ms): "),(0,o.deepClone)(B)),B}var U=_.map(function(e){(0,o.logInfo)("non-single response, working on imp : ",e);var r=Object.assign({},v);return r.id=(0,o.generateUUID)(),r.imp=[e],r.ext=T,(0,o.deepSetValue)(r,"user.ext.eids",D),O&&(0,o.deepSetValue)(r,"source.tid",O),{method:"POST",url:a.getAuctionUrl(),data:JSON.stringify(r),bidderRequest:t}});return this.propertyBag.buildRequestsEnd=new Date().getTime(),(0,o.logInfo)("buildRequests going to return for non-single at time ".concat(this.propertyBag.buildRequestsEnd," (took ").concat(this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart,"ms): "),U),U},getFloorObjectForAuction:function(e){var t={banner:(0,o.deepAccess)(e,"mediaTypes.banner.sizes",null),video:(0,o.deepAccess)(e,"mediaTypes.video.playerSize",null),native:(0,o.deepAccess)(e,"mediaTypes.native.image.sizes",null)};(0,o.logInfo)("getFloorObjectForAuction mediaTypesSizes : ",t);var r={};return t.banner&&(r.banner=e.getFloor({mediaType:"banner",currency:"USD",size:t.banner[0]})),t.video&&(r.video=e.getFloor({mediaType:"video",currency:"USD",size:t.video[0]})),t.native&&(r.native=e.getFloor({mediaType:"native",currency:"USD",size:t.native[0]})),(0,o.logInfo)("getFloorObjectForAuction returning : ",(0,o.deepClone)(r)),r},interpretResponse:function(e,t){var r,i=this;t&&t.bidderRequest&&t.bidderRequest.bids&&this.loadWhitelabelData(t.bidderRequest.bids[0]);var a=new Date().getTime(),d=this.propertyBag.whitelabel.bidder,c=this.propertyBag.whitelabel.keyPrefix;(0,o.logInfo)("interpretResponse time: ".concat(a," . Time between buildRequests done and interpretResponse start was ").concat(a-this.propertyBag.buildRequestsEnd,"ms")),(0,o.logInfo)("serverResponse, request",(0,o.deepClone)(e),(0,o.deepClone)(t));var l=(e=e.body||{}).id;if(!e.hasOwnProperty("seatbid")||"object"!==(0,n.default)(e.seatbid))return[];var p=[],f=this.getWhitelabelConfigItem("ozone.enhancedAdserverTargeting");(0,o.logInfo)("enhancedAdserverTargeting",f),void 0===f&&(f=!0),(0,o.logInfo)("enhancedAdserverTargeting",f),e.seatbid=function(e){(0,o.logInfo)("injectAdIdsIntoAllBidResponses",(0,o.deepClone)(e));for(var t=0;t<e.length;t++)for(var r=e[t],n=0;n<r.bid.length;n++)r.bid[n].adId="".concat(r.bid[n].impid,"-").concat(t,"-").concat(b.propertyBag.whitelabel.keyPrefix,"-").concat(n);return e}(e.seatbid),e.seatbid=this.removeSingleBidderMultipleBids(e.seatbid);for(var g=this.getWhitelabelConfigItem("ozone.oz_omp_floor"),v="number"==typeof g,m=this.getWhitelabelConfigItem("ozone.oz_whitelist_adserver_keys"),E=(0,o.isArray)(m)&&m.length>0,O=0;O<e.seatbid.length;O++)for(var _=e.seatbid[O],T=0;T<_.bid.length;T++)!function(){var n=i.getBidRequestForBidId(_.bid[T].impid,t.bidderRequest.bids);(0,o.logInfo)("seatbid:".concat(O,", bid:").concat(T," Going to set default w h for seatbid/bidRequest"),_.bid[T],n);var a=function(e){if(!e)return(0,o.logInfo)("defaultSize received empty bid obj! going to return fixed default size"),{defaultHeight:250,defaultWidth:300};var t=e.sizes,r={};return r.defaultWidth=y(t)[0],r.defaultHeight=y(t)[1],r}(n),w=a.defaultWidth,C=a.defaultHeight,x=I(_.bid[T],w,C);x.meta={advertiserDomains:x.adomain||[]};var P=null,D=!1,R=(0,o.deepAccess)(x,"ext.prebid.type");(0,o.logInfo)("this bid type is : ".concat(R));var k={};if(R===s.VIDEO)if(D=!0,i.setBidMediaTypeIfNotExist(x,s.VIDEO),"outstream"===(P=i.getVideoContextForBidId(x.bidId,t.bidderRequest.bids)))(0,o.logInfo)("setting thisBid.mediaType = VIDEO & attach a renderer to OUTSTREAM video"),x.renderer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=window.ozoneVideo;(0,o.logInfo)("newRenderer will set loaded to ".concat(r?"true":"false"));var n=u.Renderer.install({url:b.getRendererUrl(),config:t,loaded:r,adUnitCode:e});try{n.setRender(S)}catch(e){(0,o.logError)("Prebid Error calling renderer.setRender",n,e)}return(0,o.logInfo)("returning renderer object"),n}(x.bidId),x.vastUrl="https://".concat((0,o.deepAccess)(x,"ext.prebid.targeting.hb_cache_host","missing_host")).concat((0,o.deepAccess)(x,"ext.prebid.targeting.hb_cache_path","missing_path"),"?uuid=").concat((0,o.deepAccess)(x,"ext.prebid.targeting.hb_uuid","missing_uuid")),x.vastXml=x.adm;else if((0,o.logInfo)("not an outstream video (presumably instream), will set thisBid.mediaType = VIDEO and thisBid.vastUrl and not attach a renderer"),x.vastUrl="https://".concat((0,o.deepAccess)(x,"ext.prebid.targeting.hb_cache_host","missing_host")).concat((0,o.deepAccess)(x,"ext.prebid.targeting.hb_cache_path","missing_path"),"?uuid=").concat((0,o.deepAccess)(x,"ext.prebid.targeting.hb_uuid","missing_uuid")),x.hasOwnProperty("videoCacheKey"))(0,o.logInfo)("videoCacheKey already exists on the bid object, will not add it");else{var j=(0,o.deepAccess)(x,"ext.prebid.targeting.hb_uuid","no_hb_uuid");(0,o.logInfo)("Adding videoCacheKey: ".concat(j)),x.videoCacheKey=j}else i.setBidMediaTypeIfNotExist(x,s.BANNER);if(k=Object.assign(k,(0,o.deepAccess)(x,"ext.prebid.targeting",{})),f){var N=function(e,t,r,n){for(var i={},o=0;o<t.length;o++)for(var a=t[o].bid,s=t[o].seat,d=0;d<a.length;d++)a[d].impid===e&&(i.hasOwnProperty(s)?i[s].price<a[d].price&&(i[s]=I(a[d],r,n)):(i[s]=a[d],i[s]=I(a[d],r,n)));return i}(x.bidId,e.seatbid,w,C);(0,o.logInfo)("Going to iterate allBidsForThisBidId",(0,o.deepClone)(N)),Object.keys(N).forEach(function(e,t,n){(0,o.logInfo)("adding adserverTargeting for ".concat(e," for bidId ").concat(x.bidId)),k[c+"_"+e]=e,k[c+"_"+e+"_crid"]=String(N[e].crid),k[c+"_"+e+"_adv"]=String(N[e].adomain),k[c+"_"+e+"_adId"]=String(N[e].adId),k[c+"_"+e+"_pb_r"]=A(N[e].price,N[e].ext.prebid.type),k[c+"_"+e+"_size"]=String(N[e].width)+"x"+String(N[e].height),N[e].hasOwnProperty("dealid")&&(k[c+"_"+e+"_dealid"]=String(N[e].dealid)),v&&(k[c+"_"+e+"_omp"]=N[e].price>=g?"1":"0"),D&&(k[c+"_"+e+"_vid"]=P);var i=(0,o.deepAccess)(N[e],"ext.bidder.".concat(d,".floor"),null);null!=i&&(k[c+"_"+e+"_flr"]=i);var a=(0,o.deepAccess)(N[e],"ext.bidder.".concat(d,".ruleId"),null);null!=a&&(k[c+"_"+e+"_rid"]=a),e.match(/^ozappnexus/)&&(k[c+"_"+e+"_sid"]=String(N[e].cid)),(r=(0,o.deepAccess)(N[e],"ext.prebid.labels",null))&&(k[c+"_"+e+"_labels"]=r.join(","))})}else{var B="".concat(d,".enhancedAdserverTargeting is set to false. No per-bid keys will be sent to adserver.");E?(0,o.logWarn)("Your adserver keys whitelist will be ignored - ".concat(B)):(0,o.logInfo)(B)}var U=function(e,t){for(var r=null,n=null,i=0;i<t.length;i++)for(var o=t[i].bid,a=t[i].seat,s=0;s<o.length;s++)if(o[s].impid===e&&(null==r||r.price<o[s].price)){r=o[s],n=a;break}return{seat:n,bid:r}}(x.bidId,e.seatbid),M=U.seat,V=U.bid;V=I(V,w,C),k[c+"_auc_id"]=String(l),k[c+"_winner"]=String(M),k[c+"_bid"]="true",k[c+"_cache_id"]=(0,o.deepAccess)(x,"ext.prebid.targeting.hb_cache_id","no-id"),k[c+"_uuid"]=(0,o.deepAccess)(x,"ext.prebid.targeting.hb_uuid","no-id"),f&&((r=(0,o.deepAccess)(V,"ext.prebid.labels",null))&&(k[c+"_labels"]=r.join(",")),k[c+"_imp_id"]=String(V.impid),k[c+"_pb_v"]=h,k[c+"_pb"]=V.price,k[c+"_pb_r"]=A(V.price,R),k[c+"_adId"]=String(V.adId),k[c+"_size"]="".concat(V.width,"x").concat(V.height)),E&&((0,o.logInfo)("Filtering out adserver targeting keys not in the whitelist: ",m),Object.keys(k).forEach(function(e){-1===m.indexOf(e)&&delete k[e]})),x.adserverTargeting=k,p.push(x)}();var w=p,C=(0,o.deepAccess)(e,"ext.igi")||[];(0,o.isArray)(C)&&C.length>0&&(w={bids:p,fledgeAuctionConfigs:C=C.filter(function(e){return!!i.isValidAuctionConfig(e)||((0,o.logWarn)("Removing malformed fledge auction config:",e),!1)})});var x=new Date().getTime();return(0,o.logInfo)("interpretResponse going to return at time ".concat(x," (took ").concat(x-a,"ms) Time from buildRequests Start -> interpretRequests End = ").concat(x-this.propertyBag.buildRequestsStart,"ms")),(0,o.logInfo)("will return: ",(0,o.deepClone)(w)),w},isValidAuctionConfig:function(e){return"object"===(0,n.default)(e)&&null!==e},setBidMediaTypeIfNotExist:function(e,t){e.hasOwnProperty("mediaType")?(0,o.logInfo)("found value for thisBid.mediaType: ".concat(e.mediaType)):((0,o.logInfo)("setting thisBid.mediaType = ".concat(t)),e.mediaType=t)},getWhitelabelConfigItem:function(e){if("ozone"===this.propertyBag.whitelabel.bidder)return d.config.getConfig(e);var t=e.replace("ozone",this.propertyBag.whitelabel.bidder);return t=t.replace("oz_",this.propertyBag.whitelabel.keyPrefix+"_"),d.config.getConfig(t)},removeSingleBidderMultipleBids:function(e){for(var t=[],r=0;r<e.length;r++){for(var n=e[r],i={seat:n.seat,bid:[]},a=[],s=0;s<n.bid.length;s++){var d=n.bid[s];if(!(0,o.contains)(a,d.impid)){a.push(d.impid);for(var c=s+1;c<n.bid.length;c++)n.bid[c].impid===d.impid&&n.bid[c].price>d.price&&(d=n.bid[c]);i.bid.push(d)}}t.push(i)}return t},getUserSyncs:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if((0,o.logInfo)("getUserSyncs optionsType",e,"serverResponse",t,"gdprConsent",r,"usPrivacy",n,"cookieSyncBag",this.cookieSyncBag),!t||0===t.length)return[];var a=i.gppString,s=i.applicableSections,c=void 0===s?[]:s;if(e.iframeEnabled){var u=[];for(var l in d.config.getConfig("debug")&&u.push("pbjs_debug=true"),u.push("gdpr="+((0,o.deepAccess)(r,"gdprApplies",!1)?"1":"0")),u.push("gdpr_consent="+(0,o.deepAccess)(r,"consentString","")),u.push("usp_consent="+(n||"")),u.push("gpp="+(void 0===a?"":a)),(0,o.isArray)(c)&&u.push("gpp_sid=".concat(c.join())),this.cookieSyncBag.userIdObject)u.push(l+"="+this.cookieSyncBag.userIdObject[l]);u.push("publisherId="+this.cookieSyncBag.publisherId),u.push("siteId="+this.cookieSyncBag.siteId),u.push("cb="+Date.now()),u.push("bidder="+this.propertyBag.whitelabel.bidder);var p=u.join("&");return p.length>0&&(p="?"+p),(0,o.logInfo)("getUserSyncs going to return cookie sync url : "+this.getCookieSyncUrl()+p),[{type:"iframe",url:this.getCookieSyncUrl()+p}]}},getBidRequestForBidId:function(e,t){for(var r=0;r<t.length;r++)if(t[r].bidId===e)return t[r];return null},getVideoContextForBidId:function(e,t){var r=this.getBidRequestForBidId(e,t);return null!=r?(0,o.deepAccess)(r,"mediaTypes.video.context","unknown"):null},findAllUserIdsFromEids:function(e){var t={};if(!e.hasOwnProperty("userIdAsEids"))return(0,o.logInfo)("findAllUserIdsFromEids - no bidRequest.userIdAsEids object was found on the bid!"),this.tryGetPubCidFromOldLocation(t,e),t;var r,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return p(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(e.userIdAsEids);try{for(n.s();!(r=n.n()).done;){var i=r.value;t[i.source]=(0,o.deepAccess)(i,"uids.0.id")}}catch(e){n.e(e)}finally{n.f()}return this.tryGetPubCidFromOldLocation(t,e),t},tryGetPubCidFromOldLocation:function(e,t){if(!e.hasOwnProperty("pubcid")){var r=(0,o.deepAccess)(t,"crumbs.pubcid");r&&(e["pubcid.org"]=r)}},getPlacementId:function(e){return e.params.placementId.toString()},getPlacementIdOverrideFromGetParam:function(){var e=this.propertyBag.whitelabel.keyPrefix,t=this.getGetParametersAsObject();if(t.hasOwnProperty(e+"storedrequest"))if(this.isValidPlacementId(t[e+"storedrequest"]))return(0,o.logInfo)("using GET ".concat(e,"storedrequest=")+t[e+"storedrequest"]+" to replace placementId"),t[e+"storedrequest"];else(0,o.logError)("GET ".concat(e,"storedrequest FAILED VALIDATION - will not use it"));return null},getGetParametersAsObject:function(){var e=(0,o.parseUrl)((0,l.getRefererInfo)().location);return(0,o.logInfo)("getGetParametersAsObject found:",e.search),e.search},blockTheRequest:function(){return!1===this.getWhitelabelConfigItem("ozone.oz_request")&&((0,o.logWarn)("Will not allow the auction : ".concat(this.propertyBag.whitelabel.keyPrefix,"_request is set to false")),!0)},getPageId:function(){if(null==this.propertyBag.pageId){for(var e="",t=20;t>0;t--)e+="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];this.propertyBag.pageId=new Date().getTime()+"_"+e}return this.propertyBag.pageId},unpackVideoConfigIntoIABformat:function(e,t){var r={ext:{}};return r=this._unpackVideoConfigIntoIABformat(r,e),r=this._unpackVideoConfigIntoIABformat(r,t)},_unpackVideoConfigIntoIABformat:function(e,t){var r,i=["mimes","minduration","maxduration","protocols","w","h","startdelay","placement","plcmt","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype"],a=function(n){r=!1,i.forEach(function(i){i===n&&(e[n]=t[n],r=!0)}),r||(e.ext[n]=t[n])};for(var s in t)a(s);return t.hasOwnProperty("ext")&&"object"===(0,n.default)(t.ext)&&(e.hasOwnProperty("ext")?e.ext=(0,o.mergeDeep)(e.ext,t.ext):e.ext=t.ext),e},addVideoDefaults:function(e,t,r){return e=this._addVideoDefaults(e,t,!1),e=this._addVideoDefaults(e,r,!0)},_addVideoDefaults:function(e,t,r){var n=this.getVideoPlacementValue((0,o.deepAccess)(t,"context"));n&&(e.placement=n);var i=(0,o.deepAccess)(t,"skippable",null);return null==i?r&&!e.hasOwnProperty("skip")&&(e.skip=0):e.skip=+!!i,e},getLoggableBidObject:function(e){var t={ad:e.ad,adId:e.adId,adUnitCode:e.adUnitCode,adm:e.adm,adomain:e.adomain,adserverTargeting:e.adserverTargeting,auctionId:e.auctionId,bidId:e.bidId,bidder:e.bidder,bidderCode:e.bidderCode,cpm:e.cpm,creativeId:e.creativeId,crid:e.crid,currency:e.currency,h:e.h,w:e.w,impid:e.impid,mediaType:e.mediaType,params:e.params,price:e.price,transactionId:e.transactionId,ttl:e.ttl,ortb2:(0,o.deepAccess)(e,"ortb2"),ortb2Imp:(0,o.deepAccess)(e,"ortb2Imp")};return e.hasOwnProperty("floorData")&&(t.floorData=e.floorData),t}};function y(e){return(0,o.isArray)(e)&&(0,o.isArray)(e[0])?e[0]:e}function A(e,t){var r=d.config.getConfig("mediaTypePriceGranularity.".concat(t)),i=d.config.getConfig("customPriceBucket"),a=d.config.getConfig("priceGranularity"),s=function(e,t,r,i){return"object"===(0,n.default)(t)?t:"custom"===r?i:""}(t,r,a,i),u=function(e,t,r){return"string"==typeof t?t:"object"===(0,n.default)(t)?"custom":"string"==typeof r?r:"auto"}(t,r,a);(0,o.logInfo)("getRoundedBid. price:",e,"mediaType:",t,"configkey:",u,"configObject:",s,"mediaTypeGranularity:",r,"strBuckets:",a);var l=(0,c.getPriceBucketString)(e,s,d.config.getConfig("currency.granularityMultiplier"));(0,o.logInfo)("priceStringsObj",l);var p={medium:"med",custom:"custom",high:"high",low:"low",dense:"dense"};if(p.hasOwnProperty(u)){var f=p[u];return(0,o.logInfo)("getRoundedBid: looking for priceStringsKey:",f),l[f]}return l.auto}function I(e,t,r){return e.cpm=e.price,e.bidId=e.impid,e.requestId=e.impid,e.width=e.w||t,e.height=e.h||r,e.ad=e.adm,e.netRevenue=!0,e.creativeId=e.crid,e.currency="USD",e.ttl=300,e}function E(e){(0,o.logInfo)("getPlayerSizeFromObject received object",e);var t=(0,o.deepAccess)(e,"playerSize");return(t||(t=(0,o.deepAccess)(e,"ext.playerSize")),t)?"object"!==(0,n.default)(t)?((0,o.logError)("getPlayerSizeFromObject FAILED: playerSize is not an object/array",e),null):t:((0,o.logError)("getPlayerSizeFromObject FAILED: no playerSize in video object or ext",e),null)}function S(e){(0,o.logInfo)("outstreamRender got",(0,o.deepClone)(b.getLoggableBidObject(e))),e.renderer.push(function(){(0,o.logInfo)("outstreamRender: Going to execute window.ozoneVideo.outstreamRender"),window.ozoneVideo.outstreamRender(e)})}(0,a.registerBidder)(b),(0,o.logInfo)("*BidAdapter ".concat(h," was loaded")),(0,i.registerModule)("ozoneBidAdapter")},9564:function(e,t,r){"use strict";var n,i=r(2100),o=r(8287),a=i(r(1770)),s=i(r(7586)),d=i(r(8287)),c=i(r(5794)),u=i(r(5881)),l=r(7045),p=r(9926),f=r(2508),g=r(4700),v=r(9092),m=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1322)),h=r(3103),b=r(1659),y=r(2500),A=r(1845),I=r(523),E=r(6102),S=r(3479);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){(0,c.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var w="PAAPI",C=[],x=new WeakSet;(0,f.module)("paapi",function(e){C.push(e),e.init&&e.init({getPAAPIConfig:Q,expandFilters:K})});var P=(0,A.auctionStore)(),D=(0,A.auctionStore)(),R=(0,A.auctionStore)(),k=(0,A.auctionStore)(),j={},N={};p.config.getConfig("paapi",function(e){(function(e){e&&!0===e.enabled?(N.enabled||((0,f.getHook)("addPaapiConfig").before(W),(0,f.getHook)("makeBidRequests").before(et),(0,f.getHook)("makeBidRequests").after(en),(0,f.getHook)("processBidderRequests").before(es,9),(0,f.getHook)("processBidderRequests").before(ec,10),(0,f.getHook)("processBidderRequests").before(B),m.on(h.EVENTS.AUCTION_INIT,eu),m.on(h.EVENTS.AUCTION_END,V)),N=e,(0,g.logInfo)("".concat(w," enabled (browser ").concat(X()?"supports":"does NOT support"," runAdAuction)"),e)):(N.enabled&&((0,f.getHook)("addPaapiConfig").getHooks({hook:W}).remove(),(0,f.getHook)("makeBidRequests").getHooks({hook:et}).remove(),(0,f.getHook)("makeBidRequests").getHooks({hook:en}).remove(),(0,f.getHook)("processBidderRequests").getHooks({hook:es}).remove(),(0,f.getHook)("processBidderRequests").getHooks({hook:ec}).remove(),(0,f.getHook)("processBidderRequests").getHooks({hook:B}).remove(),m.off(h.EVENTS.AUCTION_INIT,eu),m.off(h.EVENTS.AUCTION_END,V)),N={},(0,g.logInfo)("".concat(w," disabled"),e))})(e.paapi)});function B(e,t,r,n,i){null!=(o=n.paapi)&&o.enabled&&(a=i,i=function(e,t,r,n){var i,o;return(n=null!=(i=n)?i:{}).adAuctionHeaders=null==(o=n.adAuctionHeaders)||o,a.call(this,e,t,r,n)});for(var o,a,s=arguments.length,d=Array(s>5?s-5:0),c=5;c<s;c++)d[c-5]=arguments[c];return e.call.apply(e,[this,t,r,n,i].concat(d))}function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=ee(e);return r&&(t.requestedSize=r),t}function M(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null!=(t=null==(r=N)?void 0:r.componentSeller)?t:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{compact:function(e){return(function(e){return e.reduce(function(e,t){if(H(t)){var r=e.find(function(e){return!e.hasOwnProperty(t.origin)||(0,g.deepEqual)(e[t.origin],t)});r||(r={},e.push(r)),r[t.origin]=t}return e},[]).map(function(e){return Object.values(e)})})(e.map(function(e){return e[1]})).map(function(e){return[{},e]})},expand:J};return i.auctionConfig?(0,o[i.separateAuctions?"expand":"compact"])(e).map(function(e){var t=(0,u.default)(e,2),r=t[0],o=t[1],a=(0,g.mergeDeep)(n(o),i.auctionConfig);return a.auctionSignals=L(a.auctionSignals||{},r),[r,a]}):((0,g.logWarn)(w,"Cannot use IG buyers: paapi.componentSeller.auctionConfig not set",e.map(function(e){return e[1]})),[])}function V(e){var t=e.auctionId,r=e.bidsReceived,n=e.bidderRequests,i=e.adUnitCodes,o=e.adUnits,a=Object.fromEntries((null==o?void 0:o.map(function(e){return[e.code,e]}))||[]),s=null==n?void 0:n.flatMap(function(e){return e.bids}),c=P(t);(i||[]).forEach(function(e){c.hasOwnProperty(e)||(c[e]=null),j.hasOwnProperty(e)||(j[e]=null)});var l=D(t),p=R(t);l&&p&&Object.entries(p).forEach(function(e){var t=(0,u.default)(e,2),r=t[0];M(t[1]).forEach(function(e){var t=(0,u.default)(e,2),n=t[0].bidder,i=t[1];return q(l,r,{id:G(n),config:i})})});var f=k(t),v=Object.fromEntries(Array.from(new Set(Object.keys(l).concat(Object.keys(f)))).map(function(e){j[e]=t;var n=function(t){return t.adUnitCode===e};return[e,T(T({},U(a[e])),function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(r.length>0){var i=r.reduce((0,y.maximum)((0,b.currencyCompare)(function(e){return[e.cpm,e.currency]})));e=i.cpm,t=i.currency}else{var o=n.map(function(e){return"function"==typeof e.getFloor&&e.getFloor()}).filter(function(e){return e}),a=o.length&&o.reduce((0,y.minimum)((0,b.currencyCompare)(function(e){return[e.floor,e.currency]})));e=null==a?void 0:a.floor,t=null==a?void 0:a.currency}var s={};return e&&((0,g.deepSetValue)(s,"auctionSignals.prebid.bidfloor",e),t&&(0,g.deepSetValue)(s,"auctionSignals.prebid.bidfloorcur",t)),s}(null==r?void 0:r.filter(n),null==s?void 0:s.filter(n)))]})),m={};function h(e,t){Object.entries(t).forEach(function(t){var r,n=(0,u.default)(t,2),i=n[0],o=n[1],a=o.resolve,s=o.default,c=e.hasOwnProperty(i)?e[i]:null;a(c=null==c&&null==s?void 0:"object"===(0,d.default)(s)&&"object"===(0,d.default)(c)?(0,g.mergeDeep)({},s,c):null!=(r=c)?r:s)})}Object.entries(l||{}).forEach(function(e){var t=(0,u.default)(e,2),r=t[0];t[1].forEach(function(e){var t=e.id,n=e.config;return q(m,t,{adUnitCode:r,config:(0,g.mergeDeep)({},v[r],n)})})}),Object.entries(f).forEach(function(e){var t=(0,u.default)(e,2),r=t[0],n=t[1],i=n.top,o=n.components;h(v[r],i),Object.entries(o).forEach(function(e){var t,n=(0,u.default)(e,2),i=n[0],o=n[1].deferrals,a=m.hasOwnProperty(i)?m[i]:[];a.length>1&&(0,g.logWarn)("Received multiple PAAPI configs for the same bidder and seller (".concat(i,"), active PAAPI auctions will only see the first")),h((null!=(t=a.shift())?t:{config:T({},v[r])}).config,o)})});var A=Object.values(m).flatMap(function(e){return e}),I=Object.keys(f).length>0;N.parallel&&I&&A.length>0&&(0,g.logError)("Received PAAPI configs after PAAPI auctions were already started in parallel with their contextual auction",A),A.forEach(function(e){var t=e.adUnitCode,r=e.config;null==c[t]&&(c[t]=T(T({},v[t]),{},{componentAuctions:[]})),c[t].componentAuctions.push((0,g.mergeDeep)({},v[t],r))}),N.parallel&&I||C.forEach(function(e){var r;return null==(r=e.onAuctionConfig)?void 0:r.call(e,t,c)})}function q(e,t,r){e.hasOwnProperty(t)||(e[t]=[]),e[t].push(r)}function L(e,t){var r,n,i=t.ortb2,o=t.ortb2Imp;return null!=i&&(0,g.deepSetValue)(e,"prebid.ortb2",(0,g.mergeDeep)({},i,null==(r=e.prebid)?void 0:r.ortb2)),null!=o&&(0,g.deepSetValue)(e,"prebid.ortb2Imp",(0,g.mergeDeep)({},o,null==(n=e.prebid)?void 0:n.ortb2Imp)),e}function F(e,t){return"".concat(e,"::").concat(t)}function G(e){return N.componentSeller.separateAuctions?"igb::".concat(e):"igb"}function W(e,t,r){if($(p.config.getCurrentBidder()).enabled){var n=t.adUnitCode,i=t.auctionId,o=t.bidder;function a(e,t){var r=e(i);null!=r?q(r,n,t):(0,g.logWarn)(w,"Received PAAPI config for auction that has closed (auction '".concat(i,"', adUnit '").concat(n,"')"),t)}var s=r.config,d=r.igb;if(s){s.auctionSignals=L(s.auctionSignals||{},t);var c,u=s.perBuyerSignals=null!=(c=s.perBuyerSignals)?c:{};(s.interestGroupBuyers||[]).forEach(function(e){var r;u[e]=L(null!=(r=u[e])?r:{},t)}),a(D,{id:F(o,s.seller),config:s})}d&&H(d)&&(d.pbs=L(d.pbs||{},t),a(R,[t,d]))}e(t,r)}var z={cur:"perBuyerCurrencies",pbs:"perBuyerSignals",ps:"perBuyerPrioritySignals",maxbid:"auctionSignals.prebid.perBuyerMaxbid"};function H(e){if(e.origin)return!0;(0,g.logWarn)("PAAPI buyer does not specify origin and will be ignored",e)}function Y(e){var t=new Set;return Object.assign(e.reduce(function(r,n){return H(n)&&(t.has(n.origin)?(0,g.logWarn)(w,"Duplicate buyer: ".concat(n.origin,". All but the first will be ignored"),e):(t.add(n.origin),Object.entries(z).forEach(function(e){var t=(0,u.default)(e,2),i=t[0],o=t[1];if(null!=n[i]){var a=(0,g.deepAccess)(r,o)||{};a[n.origin]=n[i],(0,g.deepSetValue)(r,o,a)}}))),r},{}),{interestGroupBuyers:Array.from(t.keys())})}function J(e){var t={},r={};return e.forEach(function(e){var n=(0,u.default)(e,2),i=n[0],o=n[1];t.hasOwnProperty(i.bidder)||(t[i.bidder]=i),q(r,i.bidder,o)}),Object.entries(r).map(function(e){var r=(0,u.default)(e,2),n=r[0],i=r[1];return[t[n],i]})}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.auctionId,r=e.adUnitCode,n=[];return null==r?n=Object.keys(j):j.hasOwnProperty(r)&&(n=[r]),Object.fromEntries(n.map(function(e){return[e,null!=t?t:j[e]]}))}function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={};return Object.entries(K(e)).forEach(function(e){var n=(0,u.default)(e,2),i=n[0],o=n[1],a=P(o);if(null!=a&&a.hasOwnProperty(i)){var s=a[i];s&&!x.has(s)?(r[i]=s,x.add(s)):t&&(r[i]=null)}else null==o&&t&&(r[i]=null)}),r}function X(){return"runAdAuction"in navigator&&"joinAdInterestGroup"in navigator}function $(e){var t,r,n=N.enabled&&(null==e||!(null!=(t=N.bidders)&&t.length)||(null==(r=N.bidders)?void 0:r.includes(e)));return{enabled:n,ae:n?N.defaultForSlots:void 0}}(0,l.getGlobal)().getPAAPIConfig=function(e){return Q(e)};var Z=(0,f.hook)("sync",function(e){var t,r;if(null!=(r=e=null==(t=e)?void 0:t.filter(function(e){var t=(0,u.default)(e,2),r=t[0];return!(r===t[1]&&r<=5)}))&&r.length)return e.reduce((0,y.maximum)((0,y.keyCompare)(function(e){var t=(0,u.default)(e,2);return t[0]*t[1]})))},"getPAAPISize");function ee(e){var t;return(null==(t=e.ortb2Imp)||null==(t=t.ext)||null==(t=t.paapi)?void 0:t.requestedSize)||function(t){var r=Z((0,g.sizesToSizeTuples)(null==(t=e.mediaTypes)||null==(t=t.banner)?void 0:t.sizes));if(r)return{width:r[0],height:r[1]}}()}function et(e,t){X()&&N.enabled&&t.forEach(function(e){var t,r,n,i=(null==(t=e.ortb2Imp)||null==(t=t.ext)?void 0:t.igs)!=null?e.ortb2Imp.ext.igs.ae||1:null,o=null==(r=e.ortb2Imp)||null==(r=r.ext)?void 0:r.ae;i!==o&&null!=i&&null!=o&&(0,g.logWarn)(w,"Ad unit defines conflicting ortb2Imp.ext.ae and ortb2Imp.ext.igs, using the latter",e);var a=null!=(n=null!=i?i:o)?n:N.defaultForSlots;if(a){(0,g.deepSetValue)(e,"ortb2Imp.ext.ae",a),e.ortb2Imp.ext.igs=Object.assign({ae:a,biddable:1},e.ortb2Imp.ext.igs);var s=ee(e);s&&(0,g.deepSetValue)(e,"ortb2Imp.ext.paapi.requestedSize",s),e.bids.forEach(function(e){$(e.bidder).enabled||((0,g.deepSetValue)(e,"ortb2Imp.ext.ae",0),e.ortb2Imp.ext.igs={ae:0,biddable:0})})}});for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];e.apply(void 0,[t].concat(n))}var er=["createAuctionNonce","getInterestGroupAdAuctionData"];function en(e,t){X()&&t.forEach(function(e){var t,r=$(e.bidderCode).enabled;Object.assign(e,{paapi:{enabled:r,componentSeller:!!(null!=(t=N.componentSeller)&&t.auctionConfig)}}),r&&er.forEach(function(t){e.paapi[t]=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return new ed(function(){var e;return(e=navigator)[t].apply(e,r)})}})}),e(t)}var ei=["auctionSignals","sellerSignals","perBuyerSignals","perBuyerTimeouts","directFromSellerSignals","perBuyerCurrencies","perBuyerCumulativeTimeouts","serverResponse"],eo=(n=[{props:["seller"],validate:function(e){return"string"==typeof e}},{props:["interestGroupBuyers"],validate:function(e){return Array.isArray(e)&&e.length>0}},{props:["decisionLogicURL","decisionLogicUrl"],validate:function(e){return"string"==typeof e}}],function(e){var t=n.find(function(t){var r=t.props,n=t.validate;return r.every(function(t){return!e.hasOwnProperty(t)||!e[t]||!n(e[t])})});return!t||((0,g.logError)('Partial PAAPI config has missing or invalid property "'.concat(t.props[0],'"'),e),!1)});function ea(e,t,r,n){var i,o=(0,I.adapterMetrics)(n),a=(0,I.guardTids)(n);return o.measureTime(t,function(){try{i=e[t](r.map(a.bidRequest),a.bidderRequest(n))}catch(e){(0,g.logError)('Error invoking "'.concat(t,'":'),e)}}),i}function es(e,t,r,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return[Object.fromEntries(ei.map(function(r){var n=(0,E.defer)({promiseFactory:function(e){return new Promise(e)}});return n.default=e.hasOwnProperty(r)?e[r]:null,t[r]=n.promise,[r,n]})),t]}var o=n.auctionId,a=n.paapi,s=void 0===a?{}:a,d=s.enabled,c=s.componentSeller,l=P(o);if(r.map(function(e){return e.adUnitCode}).forEach(function(e){j[e]=o,l.hasOwnProperty(e)||(l[e]=null)}),d&&t.buildPAAPIConfigs){var p=ea(t,"buildPAAPIConfigs",r,n),f=Object.fromEntries(r.map(function(e){return[e.bidId,e]}));(null!=p?p:[]).forEach(function(e){var r=e.bidId,n=e.config,a=e.igb,s=f.hasOwnProperty(r)&&f[r];if(s){var d=s.adUnitCode;j[d]=o;var p=k(o),v=function(){if(!p.hasOwnProperty(d)){var e=i(),t=(0,u.default)(e,2),r=t[0],n=t[1];l[d]=T(T(T({},U(S.auctionManager.index.getAdUnit(s))),n),{},{componentAuctions:[]}),p[d]={top:r,components:{},auctionConfig:l[d]}}return p[d]};if(n&&eo(n)){var m=F(s.bidder,n.seller),h=v();if(h.components.hasOwnProperty(m))(0,g.logWarn)("Received multiple PAAPI configs for the same bidder and seller; config will be ignored",{config:n,bidder:s.bidder});else{var b=i(n),y=(0,u.default)(b,2),A=y[0],I=y[1],E=T(T(T({},U(s)),n),I);h.auctionConfig.componentAuctions.push(E),h.components[m]={auctionConfig:E,deferrals:A}}}if(c&&a&&H(a)){var O=G(t.code),_=v(),w=M([[s,a]])[0][1];if(_.components.hasOwnProperty(O)){var C=_.components[O],x=C.auctionConfig,P=C.deferrals;if(x.interestGroupBuyers.includes(a.origin))(0,g.logWarn)("Received the same PAAPI buyer multiple times for the same PAAPI auction. Consider setting paapi.componentSeller.separateAuctions: true",a);else{var D={};Object.entries(w).forEach(function(e){var t=(0,u.default)(e,2),r=t[0],n=t[1];P.hasOwnProperty(r)?(0,g.mergeDeep)(P[r],{default:n}):D[r]=n}),(0,g.mergeDeep)(x,D)}}else{var R=i(w),N=(0,u.default)(R,2),B=N[0],V=N[1],q=T(T(T({},w),U(s)),V);_.components[O]={auctionConfig:q,deferrals:B},_.auctionConfig.componentAuctions.push(q)}}}else(0,g.logError)("Received partial PAAPI config for unknown bidId",{bidId:r,config:n})})}for(var v=arguments.length,m=Array(v>4?v-4:0),h=4;h<v;h++)m[h-4]=arguments[h];return e.call.apply(e,[this,t,r,n].concat(m))}var ed=(0,a.default)(function e(t){(0,s.default)(this,e),this.resolve=t});function ec(e,t,r,n){for(var i,o=this,a=arguments.length,s=Array(a>4?a-4:0),d=4;d<a;d++)s[d-4]=arguments[d];if(null!=(i=n.paapi)&&i.enabled&&t.paapiParameters){var c=ea(t,"paapiParameters",r,n);return E.PbPromise.all(Object.entries(null!=c?c:{}).map(function(e){var t=(0,u.default)(e,2),r=t[0],n=t[1];return n instanceof ed?n.resolve().then(function(e){return[r,e]}):Promise.resolve([r,n])})).then(function(e){n.paapi.params=Object.fromEntries(e)}).catch(function(e){(0,g.logError)("Could not resolve PAAPI parameters",e)}).then(function(){e.call.apply(e,[o,t,r,n].concat(s))})}e.call.apply(e,[this,t,r,n].concat(s))}function eu(e){var t=e.auctionId;N.parallel&&S.auctionManager.index.getAuction({auctionId:t}).requestsDone.then(function(){Object.keys(k(t)).length>0&&C.forEach(function(e){var r;return null==(r=e.onAuctionConfig)?void 0:r.call(e,t,P(t))})})}function el(e,t,r){e.forEach(function(e){var t,n=r.impContext[e.impid];null!=n&&null!=(t=n.imp)&&null!=(t=t.ext)&&t.ae?(n.paapiConfigs=n.paapiConfigs||[],n.paapiConfigs.push(e)):(0,g.logWarn)(w,"Received auction configuration for an impression that was not in the request or did not ask for it",e,null==n?void 0:n.imp)})}(0,v.registerOrtbProcessor)({type:v.IMP,name:"impExtAe",fn:function(e,t,r){var n,i,o;null!=(n=r.bidderRequest.paapi)&&n.enabled||(null==(i=e.ext)||delete i.ae,null==(o=e.ext)||delete o.igs)}}),(0,v.registerOrtbProcessor)({type:v.RESPONSE,name:"extPrebidFledge",fn:function(e,t,r){var n;el((null==(n=t.ext)||null==(n=n.prebid)||null==(n=n.fledge)?void 0:n.auctionconfigs)||[],e,r)},dialects:[v.PBS]}),(0,v.registerOrtbProcessor)({type:v.RESPONSE,name:"extIgiIgs",fn:function(e,t,r){var n;el(((null==(n=t.ext)?void 0:n.igi)||[]).flatMap(function(e){return((null==e?void 0:e.igs)||[]).map(function(t){var r;return t.impid!==e.impid&&null!=t.impid&&null!=e.impid&&(0,g.logWarn)(w,"ORTB response ext.igi.igs.impid conflicts with parent's impid",e),{config:t.config,impid:null!=(r=t.impid)?r:e.impid}}).concat(((null==e?void 0:e.igb)||[]).map(function(t){return{igb:t,impid:e.impid}}))}),e,r)}}),(0,v.registerOrtbProcessor)({type:v.RESPONSE,name:"paapiConfigs",priority:-1,fn:function(e,t,r){var n=Object.values(r.impContext).flatMap(function(e){return(e.paapiConfigs||[]).map(function(t){return T({bidId:e.bidRequest.bidId},t)})});n.length>0&&(e.paapi=n)}}),(0,l.registerModule)("paapi")},4934:function(e,t,r){"use strict";var n,i,o,a=r(2100)(r(5881)),s=r(7045),d=r(2508),c=r(4700),u=r(9926),l=r(2500),p=r(7419),f="paapiForGpt";u.config.getConfig("paapi",function(e){(0,c.deepAccess)(e,"paapi.gpt.configWithTargeting",!0)?((0,c.logInfo)(f,"enabling PAAPI configuration with setTargetingForGPTAsync"),p.targeting.setTargetingForGPT.before(m)):p.targeting.setTargetingForGPT.getHooks({hook:m}).remove()});var g=(n={},function(e,t,r){var i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(t.length>0){var o,s=null!=(o=n[e])?o:{},d=Object.fromEntries(r.map(function(e){return[e.seller,e]})),u=Object.keys(d);i?(d=Object.assign(s,d),s=Object.fromEntries(u.map(function(e){return[e,null]}))):u.forEach(function(e){s[e]=null}),Object.keys(s).length?n[e]=s:delete n[e];var l=Object.entries(d).map(function(e){var t=(0,a.default)(e,2);return{configKey:t[0],auctionConfig:t[1]}});l.length>0&&t.forEach(function(t){t.setConfig({componentAuction:l}),(0,c.logInfo)(f,"register component auction configs for: ".concat(e,": ").concat(t.getAdUnitPath()),r)})}else r.length>0&&(0,c.logWarn)(f,"unable to register component auction config for ".concat(e),r)}),v=(i=[[728,90],[336,280],[300,250],[300,50],[160,600],[1024,768],[970,250],[970,90],[768,1024],[480,320],[468,60],[320,480],[320,100],[320,50],[300,600],[300,100],[250,250],[234,60],[200,200],[180,150],[125,125],[120,600],[120,240],[120,60],[88,31],[980,120],[980,90],[950,90],[930,180],[750,300],[750,200],[750,100],[580,400],[250,360],[240,400]].sort((0,l.keyCompare)(function(e){var t=(0,a.default)(e,2);return-(t[0]*t[1])})).map(function(e){return[e,(0,c.sizeTupleToSizeString)(e)]}),function(e,t){if(null!=t&&t.length){var r=new Set(t.map(c.sizeTupleToSizeString)),n=i.find(function(e){var t=(0,a.default)(e,2),n=(t[0],t[1]);return r.has(n)});if(n)return void e.bail(n[0])}e(t)});(0,s.getGlobal)().setPAAPIConfigForGPT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return o(e,!0)},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.getGPTSlotsForAdUnits;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,o=!1,s=e(n)||{},d=r(Object.keys(s),i);Object.entries(s).forEach(function(e){var r=(0,a.default)(e,2),n=r[0],i=r[1];null!=i&&(o=!0),t(n,d[n],(null==i?void 0:i.componentAuctions)||[],!0)}),o||(0,c.logInfo)("".concat(f,": No component auctions available to set"))}}();var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.getGlobal)().setPAAPIConfigForGPT;return function(t,r,n){(Array.isArray(r)?r:[r]).map(function(e){return null==e?void 0:{adUnitCode:e}}).forEach(function(t){return e(t,n)}),t(r,n)}}();(0,d.submodule)("paapi",{name:"gpt",init:function(e){o=e.getPAAPIConfig,(0,d.getHook)("getPAAPISize").before(v)}}),(0,s.registerModule)("paapiForGpt")},5175:function(e,t,r){"use strict";var n=r(2100)(r(8287)),i=r(7045),o=r(2508),a=r(1122),s=r(4700),d=r(4840),c="pairId",u="pairId",l=(0,a.getStorageManager)({moduleType:d.MODULE_TYPE_UID,moduleName:c});function p(e){return l.localStorageIsEnabled()?l.getDataFromLocalStorage(e):null}function f(e){return l.cookiesAreEnabled()?l.getCookie(e):null}(0,o.submodule)("userId",{name:c,gvlid:755,decode:function(e){return e&&Array.isArray(e)?{pairId:e}:void 0},getId:function(e){var t=p(u)||f(u),r=[];if(t&&"string"==typeof t)try{r=r.concat(JSON.parse(atob(t)))}catch(e){(0,s.logInfo)(e)}var i=e&&e.params||{};if(i&&i.liveramp){var o=i.liveramp.storageKey||"_lr_pairId",a=p(o)||f(o);if(a)try{var d=atob(a);if(d){var c=JSON.parse(d);c&&"object"===(0,n.default)(c)&&c.envelope?r=r.concat(c.envelope):(0,s.logInfo)("Pairid: Parsed object is not valid or does not contain envelope")}else(0,s.logInfo)("Pairid: Decoded value is empty")}catch(e){(0,s.logInfo)("Pairid: Error parsing JSON: ",e)}else(0,s.logInfo)("Pairid: liverampValue for pairId from storage is empty or null")}return 0==r.length?void(0,s.logInfo)("PairId not found."):{id:r}},eids:{pairId:{source:"google.com",atype:571187}}}),(0,i.registerModule)("pairIdSystem")},394:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.consolidateEids=f,t.extractEids=p,t.getPBSBidderConfig=l,t.premergeFpd=function(e,t){return null==e||0===Object.keys(e.bidder||{}).length?e:u(u({},e=function(e,t){var r=e.global,n=e.bidder,i=f(p({global:r,bidder:n}));function o(e){var t,r;null==e||null==(t=e.user)||delete t.eids,null==e||null==(r=e.user)||null==(r=r.ext)||delete r.eids}return r=(0,s.deepClone)(r),n=(0,s.deepClone)(n),o(r),Object.values(n).forEach(o),i.global.length&&(0,s.deepSetValue)(r,"user.ext.eids",i.global),null!=t&&t.length&&i.permissions.forEach(function(e){return e.bidders=e.bidders.filter(function(e){return t.includes(e)})}),i.permissions.length&&(0,s.deepSetValue)(r,"ext.prebid.data.eidpermissions",i.permissions),Object.entries(i.bidder).forEach(function(e){var t=(0,a.default)(e,2),r=t[0],i=t[1];i.length&&(0,s.deepSetValue)(n[r],"user.ext.eids",i)}),{global:r,bidder:n}}(e,t)),{},{bidder:l(e)})};var i=n(r(5794)),o=n(r(8287)),a=n(r(5881)),s=r(4700),d=r(7199);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e){var t=e.global;return Object.fromEntries(Object.entries(e.bidder).map(function(e){var r=(0,a.default)(e,2),n=r[0],i=r[1];return[n,function e(t,r){return Object.fromEntries(Object.entries(t).map(function(t){var n=(0,a.default)(t,2),i=n[0],d=n[1],c=r[i];return Array.isArray(d)?!(0,s.deepEqual)(d,c)&&Array.isArray(c)&&(d=c):null!=d&&"object"===(0,o.default)(d)&&(d=e(d,c)),[i,d]}))}(i,(0,s.mergeDeep)({},t,i))]}))}function p(e){var t=e.global,r=e.bidder,n=[],i={},o=new Set;function c(e){var t=n.find(function(t){return(0,s.deepEqual)(t.eid,e)});return null==t&&(t={eid:e,bidders:new Set},n.push(t)),null==i[e.source]?i[e.source]=t.eid:t.eid===e&&o.add(e.source),t}return d.ORTB_EIDS_PATHS.forEach(function(e){((0,s.deepAccess)(t,e)||[]).forEach(function(e){c(e).bidders=!1})}),Object.entries(r).forEach(function(e){var t=(0,a.default)(e,2),r=t[0],n=t[1];d.ORTB_EIDS_PATHS.forEach(function(e){((0,s.deepAccess)(n,e)||[]).forEach(function(e){var t=c(e);!1!==t.bidders&&t.bidders.add(r)})})}),{eids:n.map(function(e){var t=e.eid,r=e.bidders;return{eid:t,bidders:r&&Array.from(r)}}),conflicts:o}}function f(e){var t=e.eids,r=e.conflicts,n=void 0===r?new Set:r,i=[],o=[],a={};return t.forEach(function(e){(!1===e.bidders?i:o).push(e)}),o.forEach(function(e){var t=e.eid,r=e.bidders;n.has(t.source)?r.forEach(function(e){(a[e]=a[e]||[]).push(t)}):i.push({eid:t,bidders:r})}),{global:i.map(function(e){return e.eid}),permissions:i.filter(function(e){return!1!==e.bidders}).map(function(e){var t=e.eid,r=e.bidders;return{source:t.source,bidders:r}}),bidder:a}}},6135:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.S2S_VENDORS=void 0,t.S2S_VENDORS={}},554:function(e,t,r){"use strict";var n,i=r(2100),o=r(8287);Object.defineProperty(t,"__esModule",{value:!0}),t.PrebidServer=k,t.processAttr=R,t.processPBSRequest=void 0,t.resetSyncedStatus=function(){w=0},t.s2sDefaultConfig=void 0,t.validateConfig=x;var a=i(r(5794)),s=r(7045),d=i(r(4050)),c=r(4700),u=r(3103),l=i(r(9577)),p=r(9926),f=r(523),g=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1322)),v=r(1617),m=r(6135),h=r(7316),b=r(2508),y=r(8700),A=r(1574),I=r(8538);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var _=p.config.getConfig,T=u.S2S.SRC,w=0,C=t.s2sDefaultConfig={bidders:Object.freeze([]),syncTimeout:1e3,maxBids:1,adapter:"prebidServer",allowUnknownBidderCodes:!1,adapterOptions:{},syncUrlModifier:{},ortbNative:{eventtrackers:[{event:1,methods:[1,2]}]},maxTimeout:1500};function x(e){if(e){e=Array.isArray(e)?e:[e];var t=new Set;return e.filter(function(e){if(["endpoint","syncEndpoint"].forEach(function(t){if((0,c.isStr)(e[t])){var r=e[t];e[t]={p1Consent:r,noP1Consent:r}}!(0,c.isPlainObject)(e[t])||e[t].p1Consent&&e[t].noP1Consent||["p1Consent","noP1Consent"].forEach(function(r){e[t][r]||(0,c.logWarn)("s2sConfig.".concat(t,".").concat(r," not defined.  PBS request will be skipped in some P1 scenarios."))})}),function(e){if(e.defaultVendor){var t=e.defaultVendor,r=Object.keys(e);if(!m.S2S_VENDORS[t])return(0,c.logError)("Incorrect or unavailable prebid server default vendor option: "+t),!1;Object.keys(m.S2S_VENDORS[t]).forEach(function(n){C[n]!==e[n]&&(0,v.includes)(r,n)||(e[n]=m.S2S_VENDORS[t][n])})}else null==e.adapter&&(e.adapter="prebidServer");return!0}(e)&&function(e){for(var t=0,r=["accountId","endpoint"];t<r.length;t++){var n=r[t];if(null==e[n])return(0,c.logError)(n+" missing in server to server config"),!1}return!0}(e)&&e.enabled)return Array.isArray(e.bidders)&&!e.ignoreDuplicateBidders&&(e.bidders=e.bidders.filter(function(e){return!t.has(e)&&(t.add(e),!0)})),!0;(0,c.logWarn)("prebidServer: s2s config is disabled",e)})}}function P(e,t){var r=(0,y.hasPurpose1Consent)(t),n=r?e.p1Consent:e.noP1Consent;return n||(0,c.logWarn)("Missing matching consent URL when gdpr="+r),n}function D(e){var t,r,n;return Array.isArray(e)&&e.length>0&&(t=e[0].gdprConsent,r=e[0].uspConsent,n=e[0].gppConsent),{gdprConsent:t,uspConsent:r,gppConsent:n}}function R(e,t,r){var n,i=(null==e||null==(n=e.seatbid)?void 0:n.flatMap(function(e){return e.bid.map(function(e){return{attr:e.attr}})}))||[];return null!=i&&i[r]&&null!=t&&t.bid&&(t.bid.meta=O(O({},t.bid.meta),{},{isInBannerVideo:!!(i[r].attr&&Array.isArray(i[r].attr)&&i[r].attr.includes(6))})),t}function k(){var e=new d.default("prebidServer");return e.callBids=function(e,t,r,i,o){var a=e.metrics=(0,I.useMetrics)(null==t||null==(y=t[0])?void 0:y.metrics).newMetrics().renameWith(function(t){return["adapter.s2s.".concat(t),"adapters.s2s.".concat(e.s2sConfig.defaultVendor,".").concat(t)]});i=a.startTiming("total").stopBefore(i),t.forEach(function(e){return(0,I.useMetrics)(e.metrics).join(a,{continuePropagation:!1})});var s=D(t),d=s.gdprConsent,v=s.uspConsent,m=s.gppConsent;if(Array.isArray(n)){var b=e.s2sConfig;if(null!=b&&b.syncEndpoint&&P(b.syncEndpoint,d)){var y,A,E,S,T=null!=(A=null==(E=b.extPrebid)?void 0:E.aliases)?A:{};!function(e,t,r,i,o){if(n.length!==w){w++;var a={},s=_("userSync.filterSettings");if(s){var d=s.all,u=s.iframe,l=s.image,p=u||d,f=l||d;p&&(a=Object.assign({iframe:p},a)),f&&(a=Object.assign({image:f},a))}var g={uuid:(0,c.generateUUID)(),bidders:e,account:o.accountId,filterSettings:a},v=o.userSyncLimit;(0,c.isNumber)(v)&&v>0&&(g.limit=v),t&&(g.gdpr=+!!t.gdprApplies,!1!==t.gdprApplies&&(g.gdpr_consent=t.consentString)),r&&(g.us_privacy=r),i&&(g.gpp_sid=i.applicableSections.join(),g.gpp=i.gppString),"boolean"==typeof o.coopSync&&(g.coopSync=o.coopSync);var m=JSON.stringify(g);(0,h.ajax)(P(o.syncEndpoint,t),function(e){try{e=JSON.parse(e),function e(t,r){if(0!==t.length){var n,i,o,a,s,d,u,l,p,f,g=t.shift();g.no_cookie?(n=g.usersync.type,i=g.usersync.url,o=g.bidder,a=e.bind(null,t,r),(s=r).syncUrlModifier&&"function"==typeof s.syncUrlModifier[o]&&(i=s.syncUrlModifier[o](n,i,o)),d=n,u=i,l=o,p=a,f=s.syncTimeout,u?"image"===d||"redirect"===d?((0,c.logMessage)('Invoking image pixel user sync for bidder: "'.concat(l,'"')),(0,c.triggerPixel)(u,p,f)):"iframe"===d?((0,c.logMessage)('Invoking iframe user sync for bidder: "'.concat(l,'"')),(0,c.insertUserSyncIframe)(u,p,f)):((0,c.logError)('User sync type "'.concat(d,'" not supported for bidder: "').concat(l,'"')),p()):((0,c.logError)('No sync url for bidder "'.concat(l,'": ').concat(u)),p())):e(t,r)}}(e.bidder_status,o)}catch(e){(0,c.logError)(e)}},m,{contentType:"text/plain",withCredentials:!0})}}((null!=(S=b.syncBidders)?S:b.bidders).map(function(e){return l.default.aliasRegistry[e]||T[e]||e}).filter(function(e,t,r){return r.indexOf(e)===t}),d,v,m,e.s2sConfig)}j(e,t,o,{onResponse:function(r,n,o){null!=o&&o.app&&t.forEach(function(e){return e.app=!0}),r&&t.forEach(function(e){return g.emit(u.EVENTS.BIDDER_DONE,e)});var s,c,f,h,b,y,A,I,E=(s=e.s2sConfig,{atagData:null==(f=c=o)||null==(h=f.ext)||null==(h=h.prebid)||null==(h=h.analytics)?void 0:h.tags,seatNonBidData:(b=s,y=c,null!=b&&null!=(A=b.extPrebid)&&A.returnallbidstatus?null==y||null==(I=y.ext)?void 0:I.seatnonbid:void 0)}),S=E.seatNonBidData,O=E.atagData;if(S&&g.emit(u.EVENTS.SEAT_NON_BID,{seatnonbid:o.ext.seatnonbid,auctionId:t[0].auctionId,requestedBidders:n,response:o,adapterMetrics:a}),S||O){var _={seatnonbid:S,atag:O,auctionId:t[0].auctionId,requestedBidders:n,response:o,adapterMetrics:a};g.emit(u.EVENTS.PBS_ANALYTICS,_)}i(!1),n.forEach(function(e){var t=l.default.getBidAdapter(e);t&&t.registerSyncs&&p.config.runWithBidder(e,t.registerSyncs.bind(t,[],d,v,m))})},onError:function(r,n){var o,a=(null==e||null==(o=e.s2sConfig)?void 0:o.endpoint)||{},s=a.p1Consent,d=void 0===s?"":s,l=a.noP1Consent,p=void 0===l?"":l;d===p?(0,c.logError)("Prebid server call failed: '".concat(r,"'. Endpoint: \"").concat(d,'"}'),n):(0,c.logError)("Prebid server call failed: '".concat(r,"'. Endpoints: p1Consent \"").concat(d,'", noP1Consent "').concat(p,'"}'),n),t.forEach(function(e){return g.emit(u.EVENTS.BIDDER_ERROR,{error:n,bidderRequest:e})}),i(n.timedOut)},onBid:function(t){var n=t.adUnit,i=t.bid,o=i.metrics=e.metrics.fork().renameWith();o.checkpoint("addBidResponse"),null!=i.requestId&&null!=i.requestBidder||e.s2sConfig.allowUnknownBidderCodes?(i.originalCurrency=i.currency,o.measureTime("addBidResponse.validate",function(){return(0,f.isValid)(n,i)})?r(n,i):r.reject(n,i,u.REJECTION_REASON.INVALID)):((0,c.logWarn)("PBS adapter received bid from unknown bidder (".concat(i.bidder,"), but 's2sConfig.allowUnknownBidderCodes' is not set. Ignoring bid.")),r.reject(n,i,u.REJECTION_REASON.BIDDER_DISALLOWED))},onFledge:function(e){p.config.runWithBidder(e.bidder,function(){(0,f.addPaapiConfig)(O({auctionId:t[0].auctionId},e),{config:e.config})})}})}},Object.assign(this,{callBids:e.callBids,setBidderCode:e.setBidderCode,type:T})}p.config.setDefaults({s2sConfig:C}),_("s2sConfig",function(e){var t;(t=x(t=e.s2sConfig))&&t.length&&(n=t)});var j=t.processPBSRequest=(0,b.hook)("async",function(e,t,r,n){var i,o,a=n.onResponse,s=n.onError,d=n.onBid,p=n.onFledge,f=D(t).gdprConsent,m=(0,c.deepClone)(e.ad_units),h={},b=m.map(function(e){return e.bids.map(function(e){var t=l.default.aliasRegistry[e.bidder];return t&&(h[e.bidder]=t),e.bidder}).filter(c.uniques)}).reduce(c.flatten,[]).filter(c.uniques),y=e.metrics.measureTime("buildRequests",function(){return(0,A.buildPBSRequest)(e,t,m,b,h)}),I={endpointUrl:P(e.s2sConfig.endpoint,f),requestJson:y&&JSON.stringify(y),customHeaders:null!=(i=null==e||null==(o=e.s2sConfig)?void 0:o.customHeaders)?i:{}};if(g.emit(u.EVENTS.BEFORE_PBS_HTTP,I),(0,c.logInfo)("BidRequest: "+I),y&&I.requestJson&&I.endpointUrl){var E=e.metrics.startTiming("net");r(I.endpointUrl,{success:function(t){E();try{var r=JSON.parse(t),n=e.metrics.measureTime("interpretResponse",function(){return(0,A.interpretPBSResponse)(r,y)}),i=n.bids,o=n.paapi;i.forEach(function(e,t){var n;(null==(n=e)||null==(n=n.bid)?void 0:n.bidderCode)==="pubm_ss"&&(e=R(r,e,t)),d(e)}),o&&o.forEach(p),null!=y&&y.app&&(r.app=!0)}catch(e){(0,c.logError)(e)}!r||r.status&&(0,v.includes)(r.status,"Error")?((0,c.logError)("error parsing response: ",r?r.status:"not valid JSON"),a(!1,b)):a(!0,b,r)},error:function(){E(),s.apply(this,arguments)}},I.requestJson,{contentType:"text/plain",withCredentials:!0,customHeaders:I.customHeaders})}else(0,c.logError)("PBS request not made.  Check endpoints.")},"processPBSRequest");l.default.registerBidAdapter(new k,"prebidServer"),(0,s.registerModule)("prebidServerBidAdapter")},1574:function(e,t,r){"use strict";var n,i=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.buildPBSRequest=function(e,t,r,n,i){var o,s,d=(0,u.timestamp)(),c=new Set,p=[],f=(0,y.s2sActivityParams)(e.s2sConfig),g=(o=(0,b.redactor)(f),s={},function(e){return null==e?o:(s.hasOwnProperty(e)||(s[e]=(0,b.redactor)((0,A.activityParams)(I.MODULE_TYPE_BIDDER,e))),s[e])});(r=r.map(function(e){return g().bidRequest(e)})).forEach(function(o){var a=new Map;r.bids=o.bids.map(function(e){return g(e.bidder).bidRequest(e)}),o.bids.forEach(function(r){null!=r.mediaTypes&&(0,u.logWarn)("Prebid Server adapter does not (yet) support bidder-specific mediaTypes for the same adUnit. Size mapping configuration will be ignored for adUnit: ".concat(o.code,", bidder: ").concat(r.bidder));var s=a.get(r.bidder),d=(0,u.getBidRequest)(r.bid_id,t);s?M(r,d,e,a,n,i):a.set(r.bidder,d)});for(var s=o.code,d=1;c.has(s);)d++,s="".concat(o.code,"-").concat(d);c.add(s),p.push(P(P({},o),{},{adUnitCode:o.code,pbsData:{impId:s,actualBidRequests:a,adUnit:o}}))});var v=P(P({},Object.fromEntries(Object.entries(t[0]).filter(function(e){var t=(0,a.default)(e,1)[0];return!k.has(t)}))),{},{paapi:{enabled:t.some(function(e){var t;return null==(t=e.paapi)?void 0:t.enabled})}}),m=(0,u.deepClone)(v),h=(0,u.deepAccess)(m,"ortb2.user.ext.eids",[]);h.length&&(0,u.deepSetValue)(e,"ortb2Fragments.global.user.ext.eids",h);var O=B.toORTB({bidderRequest:v,bidRequests:p,context:{currency:l.config.getConfig("currency.adServerCurrency")||"USD",ttl:e.s2sConfig.defaultTtl||60,requestTimestamp:d,s2sBidRequest:P(P({},e),{},{ortb2Fragments:(0,w.premergeFpd)(e.ortb2Fragments,n)}),requestedBidders:n,actualBidderRequests:t,nativeRequest:e.s2sConfig.ortbNative,getRedactor:g,transmitTids:(0,E.isActivityAllowed)(S.ACTIVITY_TRANSMIT_TID,f)}});return V(e,O,l.config.getConfig("appDataConfig")),O},t.convertDynamicAliasToOriginalBidder=U,t.createBidUsingDynamicAlias=M,t.interpretPBSResponse=function(e,t){return U(e),B.fromORTB({response:e,request:t})},t.setAppData=V,t.setConfigToApp=q;var o=i(r(5794)),a=i(r(5881)),s=i(r(8287)),d=i(r(4602)),c=r(9579),u=r(4700),l=r(9926),p=r(3103),f=r(2035),g=r(106),v=r(4458),m=r(1714),h=r(9092),b=r(7199),y=r(9577),A=r(2887),I=r(4840),E=r(3364),S=r(1851),O=r(1659),_=r(2500),T=r(554),w=r(394),C=r(4607);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function D(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return R(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k=new Set(["bidderCode","bidderRequestId","uniquePbsTid","bids","timeout"]),j={},N=(n=(0,_.minimum)((0,O.currencyCompare)(function(e){return[e.bidfloor,e.bidfloorcur]})),function(e){var t,r,i=D(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if((null==o?void 0:o.bidfloorcur)==null||(null==o?void 0:o.bidfloor)==null)return null;t=null==t?o:n(t,o)}}catch(e){i.e(e)}finally{i.f()}return t}),B=(0,c.ortbConverter)({processors:g.pbsExtensions,context:{netRevenue:!0},imp:function(e,t,r){Object.assign(r,t.pbsData);var n,i,o=e(t,r);if(o.tagid=t.adUnitCode,(t.bids||[]).forEach(function(e){e.ortb2Imp&&Object.keys(e.ortb2Imp).length>0&&(0,u.deepSetValue)(o,"ext.prebid.imp.".concat(e.bidder),e.ortb2Imp)}),Object.values(m.SUPPORTED_MEDIA_TYPES).some(function(e){return o[e]}))return o.secure=null!=(n=null==(i=t.ortb2Imp)?void 0:i.secure)?n:1,o},request:function(e,t,r,n){if(t.length){var i,o,a,s=n.s2sBidRequest,d=e(t,r,n);return d.tmax=null!=(o=(null==r||null==(i=r.adUnitsS2SCopy)?void 0:i.length)&&r.adUnitsS2SCopy[0].refresh&&s.s2sConfig.refreshTimeout||s.s2sConfig.timeout)?o:Math.min(.75*s.requestBidsTimeout,null!=(a=s.s2sConfig.maxTimeout)?a:T.s2sDefaultConfig.maxTimeout),d.ext.tmaxmax=d.ext.tmaxmax||s.requestBidsTimeout,[d.app,d.dooh,d.site].forEach(function(e){var t;e&&!(null!=(t=e.publisher)&&t.id)&&(0,u.deepSetValue)(e,"publisher.id",s.s2sConfig.accountId)}),n.transmitTids||(0,u.deepSetValue)(d,"ext.prebid.createtids",!1),d}(0,u.logError)("Request to Prebid Server rejected due to invalid media type(s) in adUnit.")},bidResponse:function(e,t,r){var n,i,o=r.actualBidRequests.get(r.seatbid.seat);null==o&&(o=r.actualBidRequests.get(null)),o&&Object.assign(r,{bidRequest:o,bidderRequest:r.actualBidderRequests.find(function(e){return e.bidderCode===o.bidder})});var a=e(t,r);return a.requestBidder=null==(n=o)?void 0:n.bidder,null!=(i=a.native)&&i.ortb&&(a.adm=a.native.ortb),a.requestTimestamp=r.requestTimestamp,{bid:Object.assign((0,f.createBid)(p.STATUS.GOOD,{src:p.S2S.SRC,bidId:o?o.bidId||o.bid_Id:null,transactionId:r.adUnit.transactionId,adUnitId:r.adUnit.adUnitId,auctionId:r.bidderRequest.auctionId}),a,{deferRendering:!!r.adUnit.deferBilling,deferBilling:!!r.adUnit.deferBilling}),adUnit:r.adUnit.code}},overrides:(0,o.default)((0,o.default)((0,o.default)({},h.IMP,{id:function(e,t,r,n){t.id=n.impId},params:function(e,t,r,n){var i,o=n.s2sBidRequest.s2sConfig.adapterOptions,a=D(n.actualBidRequests.values());try{for(a.s();!(i=a.n()).done;){var s=i.value;(0,v.setImpBidParams)(t,s,n,n),o&&o[s.bidder]&&Object.assign(t.ext.prebid.bidder[s.bidder],o[s.bidder])}}catch(e){a.e(e)}finally{a.f()}},bidfloor:function(e,t,r,n){var i=N(d.default.mark(function t(){var r,i,o;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=D(n.actualBidRequests.values()),t.prev=1,r.s();case 3:if((i=r.n()).done){t.next=11;break}return e(o={},i.value,n),t.next=9,o;case 9:t.next=3;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),r.e(t.t0);case 16:return t.prev=16,r.f(),t.finish(16);case 19:case"end":return t.stop()}},t,null,[[1,13,16,19]])})());null!=i&&Object.assign(t,i)},extBidfloor:function(e,t,r,n){function i(e,t){null!=t&&((0,u.deepSetValue)(e,"ext.bidfloor",t.bidfloor),(0,u.deepSetValue)(e,"ext.bidfloorcur",t.bidfloorcur))}var o,a=Array.from(n.actualBidRequests.values()).map(function(r){var i=(0,u.deepClone)(t);return e(i,r,n),i});Object.values(C.ALL_MEDIATYPES).forEach(function(e){i(t[e],N(a.map(function(t){var r;return null==(r=t[e])?void 0:r.ext})))}),((null==(o=t[C.BANNER])?void 0:o.format)||[]).forEach(function(e,t){i(e,N(a.map(function(e){var r;return null==(r=e[C.BANNER].format[t])?void 0:r.ext})))})}}),h.REQUEST,{fpd:function(e,t,r,n){n.transmitTids&&(0,u.deepSetValue)(t,"source.tid",r.auctionId),(0,u.mergeDeep)(t,null==(i=n.s2sBidRequest.ortb2Fragments)?void 0:i.global),n.s2sBidRequest.s2sConfig.extPrebid&&"object"===(0,s.default)(n.s2sBidRequest.s2sConfig.extPrebid)&&(0,u.deepSetValue)(t,"ext.prebid",(0,u.mergeDeep)((null==(d=t.ext)?void 0:d.prebid)||{},n.s2sBidRequest.s2sConfig.extPrebid)),n.getRedactor().ortb2(t);var i,o,d,c=Object.entries((null==(o=n.s2sBidRequest.ortb2Fragments)?void 0:o.bidder)||{}).filter(function(e){var t=(0,a.default)(e,1)[0],r=n.s2sBidRequest.s2sConfig.bidders,i=n.s2sBidRequest.s2sConfig.syncBidders;return n.s2sBidRequest.s2sConfig.allowUnknownBidderCodes||(null==r?void 0:r.includes(t))||(null==i?void 0:i.includes(t))}).map(function(e){var t=(0,a.default)(e,2),r=t[0],i=t[1];return{bidders:[r],config:{ortb2:n.getRedactor(r).ortb2(i)}}});c.length&&(0,u.deepSetValue)(t,"ext.prebid.bidderconfig",(0,u.deepClone)(c))},extPrebidAliases:function(e,t,r,n){n.actualBidderRequests.forEach(function(r){e(t,r,n)})},sourceExtSchain:function(e,t,r,n){var i,o=(null==t||null==(i=t.ext)||null==(i=i.prebid)?void 0:i.schains)||[],a=new Set(o.flatMap(function(e){return e.bidders}));(o=Object.values(o.concat(n.actualBidderRequests.filter(function(e){return!a.has(e.bidderCode)}).map(function(e){var t;return{bidders:[e.bidderCode],schain:null==e||null==(t=e.bids)||null==(t=t[0])?void 0:t.schain}})).filter(function(e){var t=e.bidders,r=e.schain;return(null==t?void 0:t.length)>0&&r}).reduce(function(e,t){var r=t.bidders,n=t.schain,i=JSON.stringify(n);return e.hasOwnProperty(i)||(e[i]={bidders:new Set,schain:n}),r.forEach(function(t){return e[i].bidders.add(t)}),e},{})).map(function(e){var t=e.bidders,r=e.schain;return{bidders:Array.from(t),schain:r}})).length&&(0,u.deepSetValue)(t,"ext.prebid.schains",o)}}),h.RESPONSE,{serverSideStats:function(e,t,r,n){n.actualBidderRequests.forEach(function(i){return e(t,r,P(P({},n),{},{bidderRequest:i,bidRequests:i.bids}))})},paapiConfigs:function(e,t,r,n){var i=Object.values(n.impContext).flatMap(function(e){return(e.paapiConfigs||[]).map(function(t){var r=e.actualBidderRequests.find(function(e){return e.bidderCode===t.bidder}),n=e.actualBidRequests.get(t.bidder);return{adUnitCode:e.adUnit.code,ortb2:null==r?void 0:r.ortb2,ortb2Imp:null==n?void 0:n.ortb2Imp,bidder:t.bidder,config:t.config}})});i.length>0&&(t.paapi=i)}})});function U(e){e.seatbid&&e.seatbid.map(function(e){var t=e.seat;for(var r in j)(j[r].bidders||[]).indexOf(t)>-1&&(e.seat=r);return e})}function M(e,t,r,n,i,o){var a=P({},e),s=j[a.bidder]=j[a.bidder]||{};s.bidders=s.bidders||[],s.next=s.next||{};var d=s.next[e.auctionId]||1;s.next[e.auctionId]=d+1;var c="".concat(a.bidder).concat(d);a.bidder=c,s.bidders.includes(c)||s.bidders.push(c),t.bidder=c,n.set(c,t);var u=r.s2sConfig,l=u.extPrebid=u.extPrebid||{},p=l.aliases=l.aliases||{},f=l.aliases[e.bidder]||o[e.bidder]||e.bidder;p[c]=f,i.push(c)}function V(e,t,r){var n,i,o,a,s=null==e||null==(n=e.s2sConfig)?void 0:n.appData,d=(null==r?void 0:r.bseat)||[],c=Object.keys((null==t?void 0:t.imp)&&t.imp.length&&(null==(i=t.imp[0].ext)||null==(i=i.prebid)?void 0:i.bidder)||{}).some(function(e){var t;return null==r||null==(t=r.bidders)?void 0:t.includes(e)});s&&t&&c&&(t.app=s,t.app.ext=null==t||null==(o=t.site)?void 0:o.ext,t.app.publisher=null==t||null==(a=t.site)?void 0:a.publisher,d.length&&(t.bseat=d),delete t.site,q(t),t.imp=t.imp.map(function(e){var t,n=null==(t=e.ext)||null==(t=t.prebid)?void 0:t.bidder;return n&&(e.ext.prebid.bidder=Object.keys(n).reduce(function(e,t){var i;return null!=r&&null!=(i=r.bidders)&&i.includes(t)&&(e[t]=P({},n[t])),e},{})),e}))}function q(e){var t;(null==e||null==(t=e.ext)||null==(t=t.prebid)||null==(t=t.bidderconfig)?void 0:t.length)>0&&e.ext.prebid.bidderconfig.forEach(function(t,r){t.config&&t.config.ortb2&&t.config.ortb2.site&&(e.ext.prebid.bidderconfig[r].config.ortb2.app=P({},t.config.ortb2.site),delete e.ext.prebid.bidderconfig[r].config.ortb2.site)})}},7472:function(e,t,r){"use strict";var n,i=r(2100),o=r(8287),a=i(r(8287)),s=i(r(4132)),d=i(r(5881)),c=i(r(5794)),u=r(7045),l=r(4700),p=r(9926),f=r(7316),g=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=x(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1322)),v=r(3103),m=r(2508),h=r(1617),b=r(2339),y=r(3951),A=r(3479),I=r(9092),E=r(8538),S=r(4908),O=r(1014),_=r(1659),T=r(2753),w=r(4607),C=["modelGroups"];function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(x=function(e){return e?r:t})(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){(0,c.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var R={NOT_FOUND:"not_found",RANDOM:"random",LAZY:"lazy",SESSION:"session"},k="Price Floors",j=(0,f.ajaxBuilder)(1e4),N=Symbol(),B=[N,"gptSlot","adUnitCode","size","domain","mediaType"],U=!1,M=!1,V={},q=(0,T.timeoutQueue)(),L={};function F(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.index,i=void 0===n?A.auctionManager.index:n;return(null==e?void 0:e.adUnitCode)||i.getAdUnit(t).code}var G=(0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)({},N,function(){return"*"}),"size",function(e,t){return(0,l.parseGPTSingleSizeArray)(t.size)||"*"}),"mediaType",function(e,t){return t.mediaType||"banner"}),"gptSlot",function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.index,n=(void 0===r?A.auctionManager.index:r).getAdUnit({adUnitId:e});return"gam"===(0,l.deepAccess)(n,"ortb2Imp.ext.data.adserver.name")&&n.ortb2Imp.ext.data.adserver.adslot}((e||t).adUnitId)||(0,O.getGptSlotInfoForAdUnitCode)(F(e,t)).gptSlot}),"domain",function(){return null==n&&(n=(0,l.parseUrl)((0,b.getRefererInfo)().topmostLocation,{noDecodeWholeURL:!0}).hostname),n}),"adUnitCode",function(e,t){return F(e,t)});function W(e,t){var r,n,i,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=(i=(0,l.deepAccess)(e,"schema.fields")||[],i.length?i.reduce(function(e,r){var n=G[r](t,a)||"*";return e.push("*"===n?["*"]:[n.toLowerCase(),"*"]),e},[]):[]);if(!s.length)return{matchingFloor:void 0};var d=s.map(function(e){return e[0]}).join("-"),c=(0,l.deepAccess)(e,"matchingInputs.".concat(d));if(c)return D({},c);var u=(r=s,n=(0,l.deepAccess)(e,"schema.delimiter")||"|",r.reduce(function(e,t){var r=[];return e.map(function(e){t.map(function(t){r.push(e+n+t)})}),r}).sort(function(e,t){return e.split("*").length-t.split("*").length})),p=(0,h.find)(u,function(t){return e.values.hasOwnProperty(t)}),f={floorMin:e.floorMin||0,floorRuleValue:e.values[p],matchingData:u[0],matchingRule:p===(null==(o=e.meta)?void 0:o.defaultRule)?void 0:p},g=(0,l.deepAccess)(t,"ortb2Imp.ext.prebid.floors.floorMin");return"number"==typeof g&&(f.floorMin=g),f.matchingFloor=Math.max(f.floorMin,f.floorRuleValue),(0,l.deepSetValue)(e,"matchingInputs.".concat(d),D({},f)),f}function z(e,t,r){return parseFloat((0,S.adjustCpm)(e,D(D({},t),{},{cpm:e}),r))}var H={banner:function(e){return(0,l.deepAccess)(e,"mediaTypes.banner.sizes")||[]},video:function(e){return(0,l.deepAccess)(e,"mediaTypes.video.playerSize")||[]},native:function(e){return(0,l.deepAccess)(e,"mediaTypes.native.image.sizes")?[(0,l.deepAccess)(e,"mediaTypes.native.image.sizes")]:[]}};function Y(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currency:"USD",mediaType:"*",size:"*"},i=L[this.auctionId];if(!i||i.skipped)return{};e=n,t=Object.keys(this.mediaTypes||{}),"*"===e.mediaType&&1===t.length&&(e.mediaType=t[0]),"*"===e.size&&-1!==t.indexOf(e.mediaType)&&H[e.mediaType]&&1===H[e.mediaType](this).length&&(e.size=H[e.mediaType](this)[0]),n=e;var o=W(i.data,D({},this),{mediaType:n.mediaType,size:n.size}),a=n.currency||i.data.currency;if(o.matchingFloor&&a!==i.data.currency)try{o.matchingFloor=(0,u.getGlobal)().convertCurrency(o.matchingFloor,i.data.currency,a)}catch(e){(0,l.logWarn)("".concat(k,": Unable to get currency conversion for getFloor for bidder ").concat(this.bidder,". You must have currency module enabled with defaultRates in your currency config")),a=i.data.currency}if(i.enforcement.bidAdjustment&&o.matchingFloor){var s=y.bidderSettings.get(this.bidder,"inverseBidAdjustment");if(s){var c=Object.fromEntries(Object.entries(n).filter(function(e){var t=(0,d.default)(e,2),r=t[0];return"*"!==t[1]&&["mediaType","size"].includes(r)}));o.matchingFloor=s(o.matchingFloor,this,c)}else{var p,f=z(o.matchingFloor,null,this);o.matchingFloor=f?(p=o.matchingFloor,1e10*p/(1e10*f)*(1e10*p)/1e10):o.matchingFloor}}return null===o.floorRuleValue?null:o.matchingFloor?{floor:(r=o.matchingFloor,Math.ceil((1e4*parseFloat(r)).toFixed(1))/1e4),currency:a}:{}}function J(e,t){var r,n,i,o,a,s=(0,l.deepClone)(e);return s.schema.delimiter=e.schema.delimiter||"|",r=s,n=t,i=r.schema.fields,o=r.schema.delimiter,a=n&&-1===i.indexOf("adUnitCode")&&i.unshift("adUnitCode"),s.values=Object.keys(r.values).reduce(function(e,t){return e[(a?"".concat(n).concat(o).concat(t):t).toLowerCase()]=r.values[t],e},{}),s.currency=s.currency||"USD",s}function K(e){if(!e.hasExited){e.reqBidsConfigObj.auctionId=e.reqBidsConfigObj.auctionId||(0,l.generateUUID)();var t=(e.reqBidsConfigObj.adUnits||(0,u.getGlobal)().adUnits).filter(function(t){var r;return!(null!=(r=e.reqBidsConfigObj.adUnitCodes)&&r.length)||e.reqBidsConfigObj.adUnitCodes.includes(t.code)});L[e.reqBidsConfigObj.auctionId]=function(e,t){var r,n,i,o,a,d,c,u,p=(0,l.deepClone)(V);if(2===(0,l.deepAccess)(p,"data.floorsSchemaVersion")){var f=p.data,g=f.modelGroups,v=(0,s.default)(f,C);p.data=Object.assign(v,function(e,t){for(var r=Math.floor(Math.random()*t+1),n=0;n<e.length;n++)if((r-=e[n].modelWeight)<=0)return e[n]}(g,v.modelWeightSum))}if(0===Object.keys((0,l.deepAccess)(p,"data.values")||{}).length?(b=(h=e).find(function(e){var t;return(null==(t=e.floors)?void 0:t.schema)!=null}),p.data=h.reduce(function(e,t){if((null==(r=t.floors)?void 0:r.schema)!=null&&!(0,l.deepEqual)(t.floors.schema,null==b||null==(n=b.floors)?void 0:n.schema))return(0,l.logError)("".concat(k,": adUnit '").concat(t.code,"' declares a different schema from one previously declared by adUnit '").concat(b.code,"'. Floor config for '").concat(t.code,"' will be ignored.")),e;var r,n,i=Object.assign({},null==b?void 0:b.floors,{values:void 0},t.floors);if($(i))if(e.values){var o=J(i,t.code).values;Object.assign(e.values,o)}else(e=J(i,t.code)).location="adUnit";else null!=t.floors&&(0,l.logWarn)("adUnit '".concat(t.code,"' provides an invalid `floor` definition, it will be ignored for floor calculations"),t);return e},{})):p.data=J(p.data),0===Object.keys((0,l.deepAccess)(p,"data.values")||{}).length)p.skipped=!0,p.skippedReason=R.NOT_FOUND;else{var m=100*Math.random()<parseFloat((0,l.getParameterByName)("pbjs_skipRate")||(null!=(y=(0,l.deepAccess)(p,"data.skipRate"))?y:p.skipRate));if(p.skipped=m,m){var h,b,y,A,I,E=null==(A=(0,l.deepAccess)(p,"data.floorProviderType"))?void 0:A.toUpperCase();p.skippedReason=null!=(I=R[E])?I:R.RANDOM}}return p.hasOwnProperty("floorMin")&&(p.data.floorMin=p.floorMin),r=e,n=p,i=t,u=(d=n.data,c=n.enforcement,(null==d||null==(o=d.noFloorSignalBidders)?void 0:o.length)>0?d.noFloorSignalBidders:(null==c||null==(a=c.noFloorSignalBidders)?void 0:a.length)>0?c.noFloorSignalBidders:[]),r.forEach(function(e){e.bids.forEach(function(e){var t,r=u.some(function(t){return t===e.bidder});n.skipped||r?(r&&(0,l.logInfo)("noFloorSignal to ".concat(e.bidder)),delete e.getFloor):e.getFloor=Y,e.auctionId=i,e.floorData={noFloorSignaled:r,skipped:n.skipped,skipRate:null!=(t=(0,l.deepAccess)(n,"data.skipRate"))?t:n.skipRate,skippedReason:n.skippedReason,floorMin:n.floorMin,modelVersion:(0,l.deepAccess)(n,"data.modelVersion"),modelWeight:(0,l.deepAccess)(n,"data.modelWeight"),modelTimestamp:(0,l.deepAccess)(n,"data.modelTimestamp"),location:(0,l.deepAccess)(n,"data.location","noData"),floorProvider:n.floorProvider,fetchStatus:V.fetchStatus}})}),p}(t,e.reqBidsConfigObj.auctionId),e.nextFn.apply(e.context,[e.reqBidsConfigObj]),e.hasExited=!0}}function Q(e){var t,r,n;return e=function(e){if((0,l.isNumber)(e.default)){var t,r,n="*",i=((null==(t=e.schema)?void 0:t.fields)||[]).length;i?n=Array(i).fill("*").join((null==(r=e.schema)?void 0:r.delimiter)||"|"):(0,l.deepSetValue)(e,"schema.fields",[N]),e.values=e.values||{},null==e.values[n]&&(e.values[n]=e.default,e.meta={defaultRule:n})}return e}(e),!!function(e){if(Array.isArray(e)&&e.length>0)if(e.every(function(e){return B.includes(e)}))return!0;else(0,l.logError)("".concat(k,": Fields received do not match allowed fields"));return!1}((0,l.deepAccess)(e,"schema.fields"))&&(t=e,r=e.schema.fields.length,n=e.schema.delimiter||"|","object"===(0,a.default)(t.values)&&(t.values=Object.keys(t.values).reduce(function(e,i){var o;return o=t.values[i],"string"==typeof i&&i.split(n).length===r&&("number"==typeof o||null===o)&&(e[i]=t.values[i]),e},{}),Object.keys(t.values).length>0))}var X={1:function(e){return Q(e)},2:function(e){return!!Array.isArray(e.modelGroups)&&0!==e.modelGroups.length&&(e.modelWeightSum=0,e.modelGroups.every(function(t){return!!("number"==typeof t.modelWeight&&Q(t))&&(e.modelWeightSum+=t.modelWeight,!0)}))}};function $(e){return"object"===(0,a.default)(e)&&((e.floorsSchemaVersion=e.floorsSchemaVersion||1,"function"!=typeof X[e.floorsSchemaVersion])?((0,l.logError)("".concat(k,": Unknown floorsSchemaVersion: "),e.floorsSchemaVersion),!1):X[e.floorsSchemaVersion](e))}function Z(e,t){if(e&&"object"===(0,a.default)(e)&&$(e))return(0,l.logInfo)("".concat(k,": A ").concat(t," set the auction floor data set to "),e),D(D({},e),{},{location:t});(0,l.logError)("".concat(k,": The floors data did not contain correct values"),e)}var ee=(0,E.timedAuctionHook)("priceFloors",function(e,t){var r={reqBidsConfigObj:t,context:this,nextFn:e,hasExited:!1,timer:null};V.auctionDelay>0&&U?q.submit(V.auctionDelay,function(){return K(r)},function(){(0,l.logWarn)("".concat(k,": Fetch attempt did not return in time for auction")),V.fetchStatus="timeout",K(r)}):K(r)});function et(e){U=!1,V.fetchStatus="success";try{t=JSON.parse(e)}catch(r){t=e}var t,r=Z(t,"fetch");r&&(V.data=r,V.skipRate=(0,l.isNumber)(r.skipRate)?r.skipRate:V.skipRate,V.floorProvider=r.floorProvider||V.floorProvider),q.resume()}function er(e){U=!1,V.fetchStatus="error",(0,l.logError)("".concat(k,": Fetch errored with: "),e),q.resume()}var en=(0,E.timedBidResponseHook)("priceFloors",function(e,t,r,n){var i,o,a,s,d,c,p=L[r.auctionId];if(!p||!r||p.skipped)return e.call(this,t,r,n);var f=A.auctionManager.index.getBidRequest(r),g=W(p.data,f,D(D({},r),{},{size:[r.width,r.height]}));if(!g.matchingFloor)return 0!==g.matchingFloor&&(0,l.logWarn)("".concat(k,": unable to determine a matching price floor for bidResponse"),r),e.call(this,t,r,n);var m=p.data.currency.toUpperCase(),h=r.currency||"USD";if(m===h.toUpperCase())d=r.cpm;else if(r.originalCurrency&&m===r.originalCurrency.toUpperCase())d=r.originalCpm;else try{d=(0,u.getGlobal)().convertCurrency(r.cpm,h.toUpperCase(),m)}catch(i){return(0,l.logError)("".concat(k,": Unable do get currency conversion for bidResponse to Floor Currency. Do you have Currency module enabled? ").concat(r)),e.call(this,t,r,n)}if(d=z(d,r,f),i=d,r.floorData={floorValue:g.matchingFloor,floorRule:g.matchingRule,floorRuleValue:g.floorRuleValue,floorCurrency:p.data.currency,cpmAfterAdjustments:i,enforcements:D({},p.enforcement),matchedFields:{}},p.data.schema.fields.forEach(function(e,t){var n=g.matchingData.split(p.data.schema.delimiter)[t];r.floorData.matchedFields[e]=n}),o=!1!==(0,l.deepAccess)(p,"enforcement.enforceJS"),a=!0===(0,l.deepAccess)(p,"enforcement.floorDeals")||!r.dealId,s=r.floorData.cpmAfterAdjustments<g.matchingFloor,o&&s&&a){n(v.REJECTION_REASON.FLOOR_NOT_MET),(0,l.logWarn)("".concat(k,": ").concat(r.bidderCode,"'s Bid Response for ").concat(t," was rejected due to floor not met (adjusted cpm: ").concat(null==r||null==(c=r.floorData)?void 0:c.cpmAfterAdjustments,", floor: ").concat(null==g?void 0:g.matchingFloor,")"),r);return}return e.call(this,t,r,n)});function ei(e,t,r){var n,i=t.currency,o=void 0===i?p.config.getConfig("currency.adServerCurrency")||"USD":i,a=t.mediaType,s=t.size;if("function"==typeof e.getFloor){try{n=e.getFloor({currency:o,mediaType:void 0===a?"*":a,size:void 0===s?"*":s})||{}}catch(t){(0,l.logWarn)("Cannot compute floor for bid",e);return}n.floor=parseFloat(n.floor),null!=n.currency&&n.floor&&!isNaN(n.floor)&&r(n.floor,n.currency)}}p.config.getConfig("floors",function(e){var t,r;return t=e.floors,void((V=(0,l.pick)(t,["floorMin","enabled",function(e){return!1!==e},"auctionDelay",function(e){return e||0},"floorProvider",function(e){return(0,l.deepAccess)(t,"data.floorProvider",e)},"endpoint",function(e){return e||{}},"skipRate",function(){return isNaN((0,l.deepAccess)(t,"data.skipRate"))?t.skipRate||0:t.data.skipRate},"enforcement",function(e){return(0,l.pick)(e||{},["enforceJS",function(e){return!1!==e},"enforcePBS",function(e){return!0===e},"floorDeals",function(e){return!0===e},"bidAdjustment",function(e){return!1!==e},"noFloorSignalBidders",function(e){return e||[]}])},"additionalSchemaFields",function(e){return"object"===(0,a.default)(e)&&Object.keys(e).length>0?void Object.keys(e).forEach(function(t){-1===B.indexOf(t)&&"function"==typeof e[t]&&(B.push(t),G[t]=e[t])}):void 0},"data",function(e){return e&&Z(e,"setConfig")||void 0}])).enabled?((r=V.endpoint).url&&!U?"GET"!==(r.method||"GET")?(0,l.logError)("".concat(k,": 'GET' is the only request method supported at this time!")):(j(r.url,{success:et,error:er},null,{method:"GET"}),U=!0):U&&(0,l.logWarn)("".concat(k,": A fetch is already occuring. Skipping.")),M||(g.on(v.EVENTS.AUCTION_END,function(e){setTimeout(function(){return delete L[e.auctionId]},3e3)}),(0,u.getGlobal)().requestBids.before(ee,50),(0,m.getHook)("addBidResponse").before(en,(0,l.debugTurnedOn)()?4:50),M=!0)):((0,l.logInfo)("".concat(k,": Turning off module")),V={},L={},(0,m.getHook)("addBidResponse").getHooks({hook:en}).remove(),(0,u.getGlobal)().requestBids.getHooks({hook:ee}).remove(),M=!1))}),(0,I.registerOrtbProcessor)({type:I.IMP,name:"bidfloor",fn:function(e,t,r){ei(t,{currency:r.currency,mediaType:r.mediaType||"*",size:"*"},function(t,r){Object.assign(e,{bidfloor:t,bidfloorcur:r})})}}),(0,I.registerOrtbProcessor)({type:I.IMP,name:"extBidfloor",fn:function(e,t,r){var n;function i(t,r){(t!==e.bidfloor||r!==e.bidfloorcur)&&((0,l.deepSetValue)(this,"ext.bidfloor",t),(0,l.deepSetValue)(this,"ext.bidfloorcur",r))}Object.values(w.ALL_MEDIATYPES).filter(function(t){return null!=e[t]}).forEach(function(n){ei(t,{currency:e.bidfloorcur||(null==r?void 0:r.currency),mediaType:n},i.bind(e[n]))}),((null==(n=e[w.BANNER])?void 0:n.format)||[]).filter(function(e){var t=e.w,r=e.h;return null!=t&&null!=r}).forEach(function(n){ei(t,{currency:e.bidfloorcur||(null==r?void 0:r.currency),mediaType:w.BANNER,size:[n.w,n.h]},i.bind(n))})},priority:-10}),(0,I.registerOrtbProcessor)({type:I.IMP,name:"extPrebidFloors",fn:function(e,t,r){if(null!=e.bidfloor){var n,i,o,a,s=r.reqContext.floorMin||{},d=s.floorMinCur,c=s.floorMin;null==d&&(d=e.bidfloorcur);var u=(null==(n=e.ext)||null==(n=n.prebid)||null==(n=n.floors)?void 0:n.floorMinCur)||(null==(i=e.ext)||null==(i=i.prebid)?void 0:i.floorMinCur)||d,p=(null==(o=e.ext)||null==(o=o.prebid)||null==(o=o.floors)?void 0:o.floorMin)||(null==(a=e.ext)||null==(a=a.prebid)?void 0:a.floorMin),f=(0,_.convertCurrency)(e.bidfloor,e.bidfloorcur,d),g=!!p&&!!u&&(0,_.convertCurrency)(p,u,d),v=g&&g<f?g:f;(0,l.deepSetValue)(e,"ext.prebid.floors.floorMin",v),(null==c||c>v)&&(c=v),r.reqContext.floorMin={floorMin:c,floorMinCur:d}}},dialects:[I.PBS],priority:-1}),(0,I.registerOrtbProcessor)({type:I.REQUEST,name:"extPrebidFloors",fn:function(e,t,r){if(M){var n;(0,l.deepSetValue)(e,"ext.prebid.floors.enabled",(null==(n=e.ext)||null==(n=n.prebid)||null==(n=n.floors)?void 0:n.enabled)||!1)}null!=r&&r.floorMin&&(0,l.mergeDeep)(e,{ext:{prebid:{floors:r.floorMin}}})},dialects:[I.PBS]}),(0,u.registerModule)("priceFloors")},5952:function(e,t,r){"use strict";var n,i=r(2100),o=i(r(5881)),a=i(r(8287)),s=i(r(5794)),d=i(r(939)),c=r(7045),u=r(4700),l=r(523),p=r(4607),f=r(9926),g=r(8915),v=r(3951),m=r(9579),h=r(3103);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var A="PubMatic: ",I=void 0,E="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),S=Object.values(h.PREBID_NATIVE_DATA_KEYS_TO_ORTB),O={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:""},_={1:"PMP",5:"PREF",6:"PMPG"},T={banner:360,video:1800,native:1800},w={},C=[],x=[],P=0,D=(0,m.ortbConverter)({context:{netRevenue:!0,ttl:360},imp:function(e,t,r){var n=t.params,i=n.kadfloor,o=n.currency,a=n.adSlot,s=void 0===a?"":a,d=n.deals,c=n.dctr,u=n.pmzoneid,l=n.hashedKey,p=t.adUnitCode,f=t.mediaTypes,g=t.rtd,v=e(t,r);return(d&&F(v,d),c&&L(v,c),null!=g&&g.jwplayer&&q(v,g.jwplayer),v.bidfloor=Z("kadfloor",i),v.bidfloorcur=o?Z("currency",o):"USD",N(v,t),v.hasOwnProperty("banner")&&B(v.banner,s),v.hasOwnProperty("video")&&V(v.video,null==f?void 0:f.video,p,v),v.hasOwnProperty("native")&&M(v,null==f?void 0:f.native),v.hasOwnProperty("banner")||v.hasOwnProperty("video")||v.hasOwnProperty("native"))?(u&&(v.ext.pmZoneId=u),U(v,s.trim(),l),j(v),["banner","video","native"].forEach(function(e){var t;null!=(t=v[e])&&t.battr&&!Array.isArray(v[e].battr)&&delete v[e].battr}),v):null},request:function(e,t,r,n){var i=e(t,r,n);if(C.length||i.bcat){var o=Q([].concat((0,d.default)(C||[]),(0,d.default)(i.bcat||[])));o.length&&(i.bcat=o)}if(x.length||i.acat){var a=K([].concat((0,d.default)(x||[]),(0,d.default)(i.acat||[])));a.length&&(i.acat=a)}return W(i),z(i,null==n?void 0:n.bidRequests),Y(i),(null!=r&&r.bidderCode?v.bidderSettings.get(r.bidderCode,"allowAlternateBidderCodes"):void 0)&&G(i,r),i},bidResponse:function(e,t,r){var n=e(t,r);n.meta&&(n.meta.mediaType=n.mediaType),H(n,t,r);var i=n.mediaType,o=n.playerWidth,a=n.playerHeight,s=null==r?void 0:r.bidRequest,d=s.params,c=s.adUnitCode,l=s.mediaTypes;if(i===p.VIDEO){n.width||(n.width=o),n.height||(n.height=a);var f=l[i],g=f.context,v=f.maxduration;"outstream"===g&&d.outstreamAU&&c&&(n.rendererCode=d.outstreamAU,n.renderer=$.newRenderer(n.rendererCode,c)),J(n,g,v)}if(i===p.NATIVE&&t.adm){try{var m=JSON.parse(t.adm.replace(/\\/g,""));n.native={ortb:y({},m.native)}}catch(e){(0,u.logWarn)("".concat(A,"Error: Cannot parse native response for ad response: ").concat(t.adm));return}n.width=t.w||0,n.height=t.h||0}return n},response:function(e,t,r,n){return e(t,r,n)},overrides:{imp:{bidfloor:!1,extBidfloor:!1},bidResponse:{native:!1}}}),R=function(e){var t={};if(e.aspect_ratios&&(0,u.isArray)(e.aspect_ratios)&&e.aspect_ratios.length){var r=e.aspect_ratios[0],n=r.min_width,i=r.min_height;(0,u.isInteger)(n)&&(0,u.isInteger)(i)&&(t.wmin=n,t.hmin=i),t.ext={aspectratios:e.aspect_ratios.filter(function(e){var t=e.ratio_width,r=e.ratio_height;return t&&r}).map(function(e){var t=e.ratio_width,r=e.ratio_height;return"".concat(t,":").concat(r)})}}return t.w=e.w||e.width,t.h=e.h||e.height,e.sizes&&2===e.sizes.length&&(0,u.isInteger)(e.sizes[0])&&(0,u.isInteger)(e.sizes[1])&&(t.w=e.sizes[0],t.h=e.sizes[1],delete t.wmin,delete t.hmin),e.ext&&(t.ext=e.ext),e.mimes&&(t.mimes=e.mimes),t},k=function(e){var t={ver:"1.2",assets:[]};for(var r in e)if(!h.NATIVE_KEYS_THAT_ARE_NOT_ASSETS.includes(r)){if(!h.NATIVE_KEYS.hasOwnProperty(r)&&!S.includes(r)){(0,u.logWarn)("".concat(A,": Unrecognized asset: ").concat(r,". Ignored."));continue}var n=e[r],i=n.required&&(0,u.isBoolean)(n.required)?1:0,o={id:t.assets.length,required:i};r in h.PREBID_NATIVE_DATA_KEYS_TO_ORTB?o.data=y(y({type:h.NATIVE_ASSET_TYPES[h.PREBID_NATIVE_DATA_KEYS_TO_ORTB[r]]},n.len&&{len:n.len}),n.ext&&{ext:n.ext}):"icon"===r||"image"===r?o.img=y({type:"icon"===r?h.NATIVE_IMAGE_TYPES.ICON:h.NATIVE_IMAGE_TYPES.MAIN},R(n)):"title"===r?o.title=y({len:n.len||140},n.ext&&{ext:n.ext}):"ext"===r&&(o.ext=n,delete o.required),t.assets.push(o)}return t},j=function(e){e.displaymanager||(e.displaymanager="Prebid.js"),e.displaymanagerver||(e.displaymanagerver="9.40.0");var t,r,n=null==(t=e.ext)||null==(t=t.data)||null==(t=t.adserver)?void 0:t.adslot;n&&(e.ext.dfp_ad_unit_code=n),null!=(r=e.ext)&&r.data&&0===Object.keys(e.ext.data).length&&delete e.ext.data},N=function(e,t){var r=-1,n=Object.keys(t.mediaTypes),i=n.length>1;"function"!=typeof t.getFloor||f.config.getConfig("pubmatic.disableFloors")||[p.BANNER,p.VIDEO,p.NATIVE].forEach(function(n){if(e.hasOwnProperty(n)){var o;(("banner"===n?null==(o=e[n])||null==(o=o.format)?void 0:o.map(function(e){return[e.w,e.h]}):["*"])||["*"]).forEach(function(o){var a=t.getFloor({currency:e.bidfloorcur,mediaType:n,size:o});if((0,u.logInfo)(A,"floor from floor module returned for mediatype:",n," and size:",o," is: currency",a.currency,"floor",a.floor),(0,u.isPlainObject)(a)&&(null==a?void 0:a.currency)===e.bidfloorcur&&!isNaN(parseInt(a.floor))){var s=parseFloat(a.floor);i&&n!==p.BANNER&&((0,u.logInfo)(A,"floor from floor module returned for mediatype:",n,"is : ",s,"with currency :",e.bidfloorcur),e[n].ext={bidfloor:s,bidfloorcur:e.bidfloorcur}),(0,u.logInfo)(A,"floor from floor module:",s,"previous floor value",r,"Min:",Math.min(s,r)),r=-1===r?s:Math.min(s,r),(0,u.logInfo)(A,"new floor value:",r)}}),i&&n===p.BANNER&&(e[n].ext={bidfloor:r,bidfloorcur:e.bidfloorcur})}}),e.bidfloor&&((0,u.logInfo)(A,"Comparing floors:","from floor module:",r,"impObj.bidfloor:",e.bidfloor,"Max:",Math.max(r,e.bidfloor)),r=Math.max(r,e.bidfloor)),e.bidfloor=r>0?r:I,(0,u.logInfo)(A,"Updated imp.bidfloor:",e.bidfloor),i&&n.forEach(function(t){var r;null!=(r=e[t])&&r.ext&&e[t].ext.bidfloor===e.bidfloor&&e[t].ext.bidfloorcur===e.bidfloorcur&&delete e[t].ext})},B=function(e,t){var r,n,i=null==(r=t.split(":")[0])?void 0:r.split("@");i=(null==(n=i)?void 0:n.length)==2?i[1].split("x"):3==i.length?i[2].split("x"):[];var o=e.format[0];2!==i.length||0==parseInt(i[0])&&0==parseInt(i[1])?(e.w=o.w,e.h=o.h):(e.w=parseInt(i[0]),e.h=parseInt(i[1])),e.format=e.format.filter(function(t){return t.w!==e.w||t.h!==e.h}),null!=e.pos||(e.pos=0)},U=function(e,t,r){var n=t.split(":")[0].split("@");e.tagid=r||n[0]},M=function(e,t){if(null!=t&&t.ortb||(e.native.request=JSON.stringify(k(t))),null!=t&&t.ortb){var r=JSON.parse(e.native.request),n=r.assets;null!=n&&n.some(function(e){return e.title||e.img||e.data||e.video})?e.native.request=JSON.stringify(y({ver:"1.2"},r)):((0,u.logWarn)("".concat(A,": Native assets object is empty or contains invalid objects")),delete e.native)}},V=function(e,t,r,n){(0,u.deepAccess)(t,"plcmt")||(0,u.logWarn)("Video.plcmt param missing for "+r),t&&(e.w||e.h)||(delete n.video,(0,u.logWarn)("".concat(A,"Error: Missing ").concat(!t?"video config params":"video size params (playersize or w&h)"," for adunit: ").concat(r," with mediaType set as video. Ignoring video impression in the adunit.")))},q=function(e,t){var r,n=null==t?void 0:t.targeting;if(n&&null!=(r=n.segments)&&r.length){var i="".concat("jw-","id=").concat(n.content.id),o=n.segments.map(function(e){return"".concat("jw-").concat(e,"=1")}).join("|"),a="".concat(i,"|").concat(o);e.ext=e.ext||{},e.ext.key_val=e.ext.key_val?"".concat(e.ext.key_val,"|").concat(a):a}},L=function(e,t){(0,u.isStr)(t)&&t.length>0?(t=t.split("|").filter(function(e){return e.trim().length>0}).map(function(e){return e.trim()}).join("|"),e.ext.key_val=t):(0,u.logWarn)(A+"Ignoring param : dctr with value : "+t+", expects string-value, found empty or non-string value")},F=function(e,t){if(!(0,u.isArray)(t))return void(0,u.logWarn)("".concat(A,"Error: bid.params.deals should be an array of strings."));t.forEach(function(t){"string"==typeof t&&t.length>3?(e.pmp||(e.pmp={private_auction:0,deals:[]}),e.pmp.deals.push({id:t})):(0,u.logWarn)("".concat(A,"Error: deal-id present in array bid.params.deals should be a string with more than 3 characters length, deal-id ignored: ").concat(t))})},G=function(e,t){var r=["all"],n=v.bidderSettings.get(t.bidderCode,"allowedAlternateBidderCodes"),i=(0,u.isArray)(n)?n.map(function(e){return e.trim().toLowerCase()}).filter(u.uniques):r;e.ext.marketplace={allowedbidders:i.includes("*")||i.includes("all")?r:(0,d.default)(new Set(["pubmatic"].concat((0,d.default)(i.filter(function(e){return e&&e.trim()})))))}},W=function(e){var t;(0,u.deepSetValue)(e,"at",1),(0,u.deepSetValue)(e,"cur",["USD"]),e.test=window.location.href.includes("pubmaticTest=true")?1:void 0,e.source&&!Object.keys(e.source).length&&delete e.source,null!=(t=e.app)&&t.publisher&&(e.app.publisher.id=P)},z=function(e,t){var r,n,i,o=w,a=o.gender,s=o.yob,d=o.pubId,c=o.refURL,l=o.kadpageurl,p=e.user;e.device&&Object.assign(e.device,{js:1,connectiontype:X()}),e.user=y(y({},e.user),{},{gender:(null==p?void 0:p.gender)||(null==a?void 0:a.trim())||I,yob:(null==p?void 0:p.yob)||Z("yob",s)});var f=(0,u.deepAccess)(t,"0.userIdAsEids");t.length&&null!=f&&f.length&&!(null!=(r=e.user.ext)&&r.eids)&&(e.user.ext=e.user.ext||{},e.user.ext.eids=f),null!=(n=e.site)&&n.publisher&&(e.site.ref=e.site.ref||c,e.site.publisher.id=null==d?void 0:d.trim()),null!=(i=e.site)&&i.page&&l&&(e.site.page=l.trim()),e.device.geo&&!e.user.geo?e.user.geo=e.device.geo:e.user.geo&&!e.device.geo&&(e.device.geo=e.user.geo)},H=function(e,t,r){var n,i,o,a,s,d,c,u=r.ortbRequest,l=r.seatbid;if(e.referrer=(null==(n=u.site)?void 0:n.ref)||"",e.sspID=e.partnerImpId=t.id||"",e.ad=t.adm,e.pm_dspid=null!=(i=t.ext)&&i.dspid?t.ext.dspid:null,e.pm_seat=l.seat,e.duration=t.dur||(null==(o=t.ext)||null==(o=o.video)?void 0:o.duration),e.creativeId||(e.creativeId=t.id),360==e.ttl&&(e.ttl=T[e.mediaType]),t.dealid&&(e.dealChannel=null!=(c=t.ext)&&c.deal_channel?_[t.ext.deal_channel]||null:"PMP"),null!=(a=l.ext)&&a.buyid&&(e.adserverTargeting={hb_buyid_pubmatic:l.ext.buyid}),null!=(s=t.ext)&&s.marketplace&&(e.bidderCode=t.ext.marketplace),t.ext){var f=t.ext,g=f.dspid,v=f.dchain,m=f.dsa,h=f.ibv;g&&(e.meta.networkId=e.meta.demandSource=g),v&&(e.meta.dchain=v),m&&Object.keys(m).length&&(e.meta.dsa=m),h&&(e.ext=e.ext||{},e.ext.ibv=h,e.meta.mediaType=p.VIDEO)}var b=l.seat||(null==(d=t.ext)?void 0:d.advid);b&&(e.meta.advertiserId=e.meta.agencyId=e.meta.buyerId=b),null!=t&&t.attr&&Array.isArray(t.attr)&&(e.meta.isInBannerVideo=t.attr.includes(6)),ee(t.adomain)&&(e.meta.clickUrl=e.meta.brandId=t.adomain[0])},Y=function(e){var t=w,r=t.profId,i=t.verId,o=t.wiid,a=t.transactionId;e.ext={epoch:new Date().getTime(),wrapper:{profile:r?parseInt(r):void 0,version:i?parseInt(i):void 0,wiid:o,wv:"prebid_prebid_9.40.0",transactionId:a,wp:"pbjs"},cpmAdjustment:n}},J=function(e,t,r){if(null!=e&&null!=(n=e.ext)&&n.prebiddealpriority&&t==p.ADPOD){var n,i,o=(null==e||null==(i=e.ext)||null==(i=i.video)?void 0:i.duration)||r;e.video={context:p.ADPOD,durationSeconds:o,dealTier:e.ext.prebiddealpriority}}},K=function(e){return(0,d.default)(new Set(e.filter(function(e){if("string"==typeof e)return!0;(0,u.logWarn)(A+"acat: Each category should be a string, ignoring category: "+e)}).map(function(e){return e.trim()})))},Q=function(e){var t=(e=e.map(function(e){return"string"==typeof e?e.trim():e})).filter(function(e){return"string"!=typeof e||e.length<3});return(0,u.logWarn)(A+"bcat: Each category must be a string with a length greater than 3, ignoring "+t),(0,d.default)(new Set(e.filter(function(e){return"string"==typeof e&&e.length>=3})))},X=function(){var e=window.navigator&&(window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection);return({ethernet:1,wifi:2,"slow-2g":4,"2g":4,"3g":5,"4g":6})[null==e?void 0:e.effectiveType]||0},$={bootstrapPlayer:function(e){var t={code:e.adUnitCode,vastXml:e.vastXml||null,vastUrl:e.vastUrl||null};if(!t.vastXml&&!t.vastUrl)return void(0,u.logWarn)("".concat(A,": No vastXml or vastUrl on bid, bailing..."));var r=$.getRendererId("pubmatic",e.rendererCode),n=document.getElementById(e.adUnitCode),i=window.bluebillywig.renderers.find(function(e){return e._id===r});i?i.bootstrap(t,n):(0,u.logWarn)("".concat(A,": Couldn't find a renderer with ").concat(r))},newRenderer:function(e,t){var r=E.replace("$RENDERER",e),n=g.Renderer.install({url:r,loaded:!1,adUnitCode:t});try{n.setRender($.outstreamRender)}catch(e){(0,u.logWarn)("".concat(A,": Error tying to setRender on renderer"),e)}return n},outstreamRender:function(e){e.renderer.push(function(){return $.bootstrapPlayer(e)})},getRendererId:function(e,t){return"".concat(e,"-").concat(t)}};function Z(e,t){if(!(0,u.isStr)(t))return t&&(0,u.logWarn)(A+"Ignoring param key: "+e+", expects string-value, found "+(0,a.default)(t)),I;var r,n={pmzoneid:function(){return t.split(",").slice(0,50).map(function(e){return e.trim()}).join()},kadfloor:function(){return parseFloat(t)},lat:function(){return parseFloat(t)},lon:function(){return parseFloat(t)},yob:function(){return parseInt(t)}};return(null==(r=n[e])?void 0:r.call(n))||t}function ee(e){return!0===(0,u.isArray)(e)&&!!(e.length>0)}var et=function(e){var t;return Array.isArray(e)&&e.length>0&&(null==(t=e.find(function(e){var t;return null==(t=e.params)||null==(t=t.publisherId)?void 0:t.trim()}))?void 0:t.params.publisherId)||null},er={code:"pubmatic",gvlid:76,supportedMediaTypes:[p.BANNER,p.VIDEO,p.NATIVE],isBidRequestValid:function(e){if(!(e&&e.params))return!1;var t=e.params.publisherId,r=e.mediaTypes||{},n=r[p.VIDEO]||{};if(!(0,u.isStr)(t))return(0,u.logWarn)(A+"Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(r.hasOwnProperty(p.VIDEO)){var i=(0,u.deepAccess)(e,"mediaTypes.video.mimes"),o=(0,u.deepAccess)(e,"params.video.mimes");if(!ee(i)&&!ee(o))return(0,u.logWarn)(A+"Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!n.context)return(0,u.logError)("".concat(A,": No context specified in bid. Rejecting bid: "),e),!1;if("outstream"===n.context&&!(0,u.isStr)(e.params.outstreamAU)&&!e.renderer&&!n.renderer)return r.hasOwnProperty(p.BANNER)||r.hasOwnProperty(p.NATIVE)?(delete r[p.VIDEO],(0,u.logWarn)("".concat(A,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: '),e),!0):((0,u.logError)("".concat(A,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: '),e),!1)}return!0},buildRequests:function(e,t){var r,n,i,o,s=(null==t?void 0:t.refererInfo)||{},d=s.page,c=s.ref,l=(null==t||null==(r=t.bids)||null==(r=r[0])?void 0:r.params)||{},p=l.publisherId,f=l.profId,g=l.verId;P=(null==p?void 0:p.trim())||(null==(n=et(null==t?void 0:t.bids))?void 0:n.trim());var v=(0,u.generateUUID)();C=[],x=[],w={pageURL:d||window.location.href,refURL:c||window.document.referrer,pubId:P,kadpageurl:d||window.location.href,profId:f,verId:g},e.forEach(function(e){e.params.wiid=e.params.wiid||t.auctionId||v,r=(o=(0,u.deepClone)(e)).params,n=w,Object.keys(O).forEach(function(e){var t=r[e];t&&((0,u.isStr)(t)?n[e]=t:(0,u.logWarn)("".concat(A,"Ignoring param: ").concat(e," with value: ").concat(O[e],", expects string value, found ").concat((0,a.default)(t))))}),w.transactionId=null==(i=o.ortb2Imp)||null==(i=i.ext)?void 0:i.tid;var r,n,i,s=o.params,d=s.bcat,c=s.acat;d&&(C=C.concat(d)),c&&(x=x.concat(c))});var m=D.toORTB({validBidRequests:e,bidderRequest:t});return null!=m&&null!=(i=m.imp)&&i.length?{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:m,bidderRequest:t}:null},interpretResponse:function(e,t){var r=D.fromORTB({response:e.body,request:t.data}).bids,n=(0,u.deepAccess)(e.body,"ext.fledge_auction_configs");return n?{bids:r,paapi:Object.entries(n).map(function(e){var t=(0,o.default)(e,2);return{bidId:t[0],config:y({auctionSignals:{}},t[1])}})}:r},getUserSyncs:function(e,t,r,n,i){var o,a=P;r&&(a+="&gdpr=".concat(+!!r.gdprApplies,"&gdpr_consent=").concat(encodeURIComponent(r.consentString||""))),n&&(a+="&us_privacy=".concat(encodeURIComponent(n))),null!=i&&i.gppString&&null!=i&&null!=(o=i.applicableSections)&&o.length&&(a+="&gpp=".concat(encodeURIComponent(i.gppString),"&gpp_sid=").concat(encodeURIComponent(i.applicableSections.join(",")))),!0===f.config.getConfig("coppa")&&(a+="&coppa=1");var s=e.iframeEnabled?"iframe":"image",d=("iframe"===s?"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p=":"https://image8.pubmatic.com/AdServer/ImgSync?p=")+a;return[{type:s,url:d}]},onBidWon:function(e){!function(e){if(e){var t,r=e.originalCurrency,i=e.currency,o=e.cpm,a=e.originalCpm,s=e.meta,d=r!==i&&(0,u.isFn)(e.getCpmInNewCurrency)?e.getCpmInNewCurrency(r):o,c=e.mediaType,l=null==s?void 0:s.mediaType;n=n||{currency:i,originalCurrency:r,adjustment:[]};var p={cpmAdjustment:Number(((a-d)/a).toFixed(2)),mediaType:c,metaMediaType:l,cpm:d,originalCpm:a},f=null==(t=n)||null==(t=t.adjustment)?void 0:t.findIndex(function(e){return(null==e?void 0:e.mediaType)===c&&(null==e?void 0:e.metaMediaType)===l});-1!==f?n.adjustment.splice(f,1,p):n.adjustment.push(p)}}(e)}};(0,l.registerBidder)(er),(0,c.registerModule)("pubmaticBidAdapter")},3797:function(e,t,r){"use strict";var n=r(2100),i=n(r(5881)),o=n(r(939)),a=n(r(5794)),s=r(7045),d=r(4700),c=r(6643),u=r(4607),l=r(523),p=r(1617),f=r(8172),g=r(9926),v=r(5191);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var b=["prebid-eu","prebid-us","prebid-asia"],y="https://fledge-ssp.creativecdn.com",A="https://fledge-ssp.creativecdn.com/component-seller-prebid.js",I=["USD"],E=[u.BANNER,u.NATIVE],S=[{name:"dsarequired",min:0,max:3},{name:"pubrender",min:0,max:2},{name:"datatopub",min:0,max:2}];function O(e,t){var r={type:t};if(e.aspect_ratios){var n=e.aspect_ratios[0],i=n.min_width||100;r.wmin=i,r.hmin=i/n.ratio_width*n.ratio_height}if(e.sizes){var o=Array.isArray(e.sizes[0])?e.sizes[0]:e.sizes;r.w=o[0],r.h=o[1]}return r}(0,l.registerBidder)({code:"rtbhouse",supportedMediaTypes:E,gvlid:16,isBidRequestValid:function(e){return!!((0,p.includes)(b,e.params.region)&&e.params.publisherId)},buildRequests:function(e,t){e=(0,f.convertOrtbRequestToProprietaryNative)(e);var r,n,i,o,s,u,l,m,b,_={id:t.bidderRequestId,imp:e.map(function(e){return function(e,t){var r,n,i,o,a={id:e.bidId,banner:function(e){if("banner"===e.mediaType||(0,d.deepAccess)(e,"mediaTypes.banner")||!e.mediaType&&!e.mediaTypes){var t=e.sizes||e.mediaTypes.banner.sizes;return{w:t[0][0],h:t[0][1],format:t.map(function(e){return{w:e[0],h:e[1]}})}}}(e),native:function(e){if("native"===e.mediaType||(0,d.deepAccess)(e,"mediaTypes.native")){var t,r,n;return{request:{assets:(r=(t=e).nativeParams||(0,d.deepAccess)(t,"mediaTypes.native"),n=[],r.title&&n.push({id:v.OPENRTB.NATIVE.ASSET_ID.TITLE,required:+!!r.title.required,title:{len:r.title.len||25}}),r.image&&n.push({id:v.OPENRTB.NATIVE.ASSET_ID.IMAGE,required:+!!r.image.required,img:O(r.image,v.OPENRTB.NATIVE.IMAGE_TYPE.MAIN)}),r.icon&&n.push({id:v.OPENRTB.NATIVE.ASSET_ID.ICON,required:+!!r.icon.required,img:O(r.icon,v.OPENRTB.NATIVE.IMAGE_TYPE.ICON)}),r.sponsoredBy&&n.push({id:v.OPENRTB.NATIVE.ASSET_ID.SPONSORED,required:+!!r.sponsoredBy.required,data:{type:v.OPENRTB.NATIVE.DATA_ASSET_TYPE.SPONSORED,len:r.sponsoredBy.len}}),r.body&&n.push({id:v.OPENRTB.NATIVE.ASSET_ID.BODY,required:+!!r.body.request,data:{type:v.OPENRTB.NATIVE.DATA_ASSET_TYPE.DESC,len:r.body.len}}),r.cta&&n.push({id:v.OPENRTB.NATIVE.ASSET_ID.CTA,required:+!!r.cta.required,data:{type:v.OPENRTB.NATIVE.DATA_ASSET_TYPE.CTA_TEXT,len:r.cta.len}}),n)},ver:"1.1"}}}(e),tagid:e.adUnitCode.toString()},s=(r=[],"function"==typeof e.getFloor&&Object.keys(e.mediaTypes).forEach(function(t){if((0,p.includes)(E,t)){var n;r.push(null==(n=e.getFloor({currency:I[0],mediaType:t,size:e.sizes||"*"}))?void 0:n.floor)}}),r.length>0?Math.max.apply(Math,r):parseFloat(e.params.bidfloor));s&&(a.bidfloor=s),null!=(n=t.paapi)&&n.enabled?(a.ext=a.ext||{},a.ext.ae=null==e||null==(i=e.ortb2Imp)||null==(i=i.ext)?void 0:i.ae):null!=(o=a.ext)&&o.ae&&delete a.ext.ae;var c=(0,d.deepAccess)(e,"ortb2Imp.ext.tid");return c&&(a.ext=a.ext||{},a.ext.tid=c),a}(e,t)}),site:(n=e,i=t,o="unknown",s=null,n&&n.length>0&&(o=n[0].params.publisherId,s=n[0].params.channel&&n[0].params.channel.toString().slice(0,50)),u={publisher:{id:o.toString()},page:i.refererInfo.page,name:(0,c.getOrigin)()},s&&(u.channel=s),u),cur:I,test:e[0].params.test||0,source:(l=e[0],{tid:(null==(m=t)?void 0:m.auctionId)||""})};if(t&&t.gdprConsent&&t.gdprConsent.gdprApplies){var T=t.gdprConsent.consentString?t.gdprConsent.consentString.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):"";_.regs={ext:{gdpr:+!!t.gdprConsent.gdprApplies}},_.user={ext:{consent:T}}}if(e[0].schain){var w,C=(w=e[0].schain)?!function(e){if(!e.nodes)return!1;var t=["asi","sid","hp"];return e.nodes.every(function(e){return t.every(function(t){return e[t]})})}(w)?((0,d.logError)("RTB House: required schain params missing"),null):w:null;C&&(_.ext={schain:C})}if(e[0].userIdAsEids){var x={eids:e[0].userIdAsEids};_.user&&_.user.ext?_.user.ext=h(h({},_.user.ext),x):_.user={ext:x}}var P=(null==t?void 0:t.ortb2)||{};["site","user","device","bcat","badv"].forEach(function(e){var t=P[e];t&&(0,d.mergeDeep)(_,(0,a.default)({},e,t))});var D=(0,d.deepAccess)(P,"regs.ext.dsa");r=D,!(0,d.isEmpty)(r)&&(0,d.isPlainObject)(r)&&S.reduce(function(e,t){var n=r[t.name];return e&&(!r.hasOwnProperty(t.name)||(0,d.isNumber)(n)&&n>=t.min&&n<=t.max)},!0)&&(!r.hasOwnProperty("transparency")||(0,d.isArray)(r.transparency)&&r.transparency.every(function(e){return(0,d.isPlainObject)(e)&&(0,d.isStr)(e.domain)&&e.domain&&(0,d.isArray)(e.dsaparams)&&e.dsaparams.every(function(e){return(0,d.isNumber)(e)})}))&&(0,d.mergeDeep)(_,{regs:{ext:{dsa:D}}});var R="creativecdn.com/bidder/prebid/bids";if(null!=(b=t.paapi)&&b.enabled){var k=h({seller:y,decisionLogicUrl:A},g.config.getConfig("paapiConfig")||g.config.getConfig("fledgeConfig")||{sellerTimeout:500});(0,d.mergeDeep)(_,{ext:{fledge_config:k}}),R="creativecdn.com/bidder/prebidfledge/bids"}return{method:"POST",url:"https://"+e[0].params.region+"."+R,data:JSON.stringify(_)}},interpretOrtbResponse:function(e,t){var r=e.body;if(!(0,d.isArray)(r))return[];var n=[];return r.forEach(function(e){var t,r;e.price&&(t=0===e.adm.indexOf("{")?(0,v.interpretNativeBid)(e):{requestId:(r=e).impid,mediaType:u.BANNER,cpm:r.price,creativeId:r.adid,ad:r.adm,width:r.w,height:r.h,ttl:55,meta:{advertiserDomains:r.adomain},netRevenue:!0,currency:"USD"},e.ext&&(t.ext=(0,d.deepClone)(e.ext),e.ext.dsa&&(t.meta=Object.assign({},t.meta,{dsa:e.ext.dsa}))),n.push(t))}),n},interpretResponse:function(e,t){var r=e.body,n=null;if(r.bidid&&(0,d.isArray)(null==r||null==(a=r.ext)?void 0:a.igbid)){var a,s,c=this.interpretOrtbResponse({body:null==(s=r.seatbid[0])?void 0:s.bid},t),u=g.config.getConfig("paapiConfig")||g.config.getConfig("fledgeConfig")||{},l=u.interestGroupBuyers||[],p=r.ext,f=p.decisionLogicUrl,v=void 0===f?u.decisionLogicUrl||u.decisionLogicURL||A:f,m=p.seller,b=void 0===m?u.seller||y:m,I=p.sellerTimeout,E={seller:b,decisionLogicUrl:v,decisionLogicURL:v,sellerTimeout:void 0===I?500:I};(0,d.mergeDeep)(E,u,E),r.ext.igbid.forEach(function(e){var t=h({},E.perBuyerSignals);e.igbuyer.forEach(function(e){t[e.igdomain]=e.buyersignal}),(n=n||{})[e.impid]=(0,d.mergeDeep)({},E,{interestGroupBuyers:(0,o.default)(new Set([].concat((0,o.default)(l),(0,o.default)(Object.keys(t))))),perBuyerSignals:t})})}else c=this.interpretOrtbResponse(e,t);return n?(n=Object.entries(n).map(function(e){var t=(0,i.default)(e,2);return{bidId:t[0],config:Object.assign({auctionSignals:{}},t[1])}}),(0,d.logInfo)("Response with FLEDGE:",{bids:c,fledgeAuctionConfigs:n}),{bids:c,paapi:n}):c}}),(0,s.registerModule)("rtbhouseBidAdapter")},6687:function(e,t,r){"use strict";var n,i,o,a,s=r(2100),d=r(8287),c=s(r(8287)),u=s(r(5881)),l=s(r(5794)),p=r(7045),f=r(9926),g=r(2508),v=r(4700),m=_(r(1322)),h=r(3103),b=_(r(9577)),y=r(1617),A=r(8538),I=r(5789),E=r(4840),S=r(894);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=d(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&({}).hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var T=(0,r(3645).activityParamsBuilder)(function(e){return b.default.resolveAlias(e)}),w=[],C=[],x=[],P=(i=!1,function(){i||(Object.entries((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)({},h.EVENTS.AUCTION_INIT,["onAuctionInitEvent"]),h.EVENTS.AUCTION_END,["onAuctionEndEvent",j]),h.EVENTS.BID_RESPONSE,["onBidResponseEvent"]),h.EVENTS.BID_REQUESTED,["onBidRequestEvent"]),h.EVENTS.BID_ACCEPTED,["onBidAcceptedEvent"])).forEach(function(e){var t=(0,u.default)(e,2),r=t[0],n=(0,u.default)(t[1],2),i=n[0],o=n[1];m.on(r,function(e){o&&o(e),C.forEach(function(t){try{t[i]&&t[i](e,t.config,a)}catch(e){(0,v.logError)("RTD provider '".concat(t.name,"': error in '").concat(i,"':"),e)}})})}),i=!0)});function D(){return{gdpr:b.gdprDataHandler.getConsentData(),usp:b.uspDataHandler.getConsentData(),gpp:b.gppDataHandler.getConsentData(),coppa:!!f.config.getConfig("coppa")}}function R(){a=D();var e=[];x.forEach(function(t){var r=(0,y.find)(w,function(e){return e.name===t.name});r&&r.init&&r.init(t,a)&&e.push(Object.assign(r,{config:t}))}),C=e,(0,v.logInfo)("Real time data module enabled, using submodules: ".concat(C.map(function(e){return e.name}).join(", ")))}var k=(0,A.timedAuctionHook)("rtd",function(e,t){a=D();var r,n=[],i=[];C.forEach(function(e){if("function"==typeof e.getBidRequestData){n.push(e);var t=e.config;t&&t.waitForIt&&i.push(e)}});var s=i.length&&o.auctionDelay&&o.auctionDelay>0,d=i.length,c=!1,u=[];if(!n.length)return f();var l=s?o.auctionDelay:0;function p(){c||(this.config&&this.config.waitForIt&&d--,0===d&&setTimeout(f,0))}function f(){c||(c=!0,clearTimeout(r),u.forEach(function(e){return e()}),e.call(this,t))}r=setTimeout(f,l),n.forEach(function(e){var r=(0,S.guardOrtb2Fragments)(t.ortb2Fragments||{},T(E.MODULE_TYPE_RTD,e.name));u.push(r.verify),t.ortb2Fragments=r.obj,e.getBidRequestData(t,p.bind(e),e.config,a,l)})});function j(e){var t=C.filter(function(e){return"function"==typeof e.getTargetingData});if(t.length){var r=e.adUnitCodes;if(r){for(var n=[],i=t.length-1;i>=0;i--){var o=t[i].getTargetingData(r,t[i].config,a,e);o&&"object"===(0,c.default)(o)?n.push(o):(0,v.logWarn)("invalid getTargetingData response for sub module",t[i].name)}var s=function(e){return Array.isArray(e)&&e.length?e.reduce(function(e,t){for(var r in t)if(t.hasOwnProperty(r))if(e.hasOwnProperty(r)){var n=t[r];for(var i in n)n.hasOwnProperty(i)&&(e[r][i]=n[i])}else e[r]=t[r];return e},{}):{}}(n);return e.adUnits.forEach(function(e){var t=e.code&&s[e.code];t&&((0,v.logInfo)("RTD set ad unit targeting of",t,"for",e),e[h.JSON_MAPPING.ADSERVER_TARGETING]=Object.assign(e[h.JSON_MAPPING.ADSERVER_TARGETING]||{},t))}),e.adUnits}}}function N(e){C.forEach(function(e){if("function"==typeof e.onDataDeletionRequest)try{e.onDataDeletionRequest(e.config)}catch(t){(0,v.logError)("Error executing ".concat(e.name,".onDataDeletionRequest"),t)}});for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];e.apply(this,r)}(0,g.module)("realTimeData",function(e){return w.push(e),I.GDPR_GVLIDS.register(E.MODULE_TYPE_RTD,e.name,e.gvlid),function(){var t=w.indexOf(e);t>=0&&(w.splice(t,1),R())}}),n=f.config.getConfig("realTimeData",function(e){var t=e.realTimeData;if(!t.dataProviders)return void(0,v.logError)("missing parameters for real time module");n(),o=t,x=t.dataProviders,P(),(0,g.getHook)("startAuction").before(k,20),b.default.callDataDeletionRequest.before(N),R()}),(0,p.registerModule)("rtdModule")},6523:function(e,t,r){"use strict";var n=r(2100),i=r(8287),o=n(r(939)),a=n(r(5794)),s=n(r(5881)),d=n(r(8287)),c=r(7045),u=r(9579),l=r(106),p=r(523),f=r(9926),g=r(4607),v=r(8915),m=r(4700),h=r(3635),b=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=I(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1322)),y=r(3103),A=r(8826);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(I=function(e){return e?r:t})(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var O=f.config.getConfig("rubicon")||{};f.config.getConfig("rubicon",function(e){(0,m.mergeDeep)(O,e.rubicon)});var _={},T={1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",261:"480x480",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",484:"720x1280",524:"1x2",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656",622:"192x160",632:"1200x450",634:"340x450",680:"970x570",682:"300x240",684:"970x550",686:"300x210",688:"300x220",690:"970x170",710:"600x250",712:"340x430"};(0,m._each)(T,function(e,t){return T[e]=t});var w=(0,u.ortbConverter)({request:function(e,t,r,n){var i,a,s,u,l,p,g,v=n.bidRequests,b=e(t,r,n);b.cur=["USD"],b.test=+!!f.config.getConfig("debug"),(0,m.deepSetValue)(b,"ext.prebid.cache",{vastxml:{returnCreative:!0===O.returnVast}}),(0,m.deepSetValue)(b,"ext.prebid.bidders",{rubicon:{integration:O.int_type||"pbjs"}}),(0,m.deepSetValue)(b,"ext.prebid.targeting.pricegranularity",function(e){return{ranges:({low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:e.getConfig("customPriceBucket")&&e.getConfig("customPriceBucket").buckets})[e.getConfig("priceGranularity")]}}(f.config));var y=(0,c.getGlobal)().installedModules;return y&&(!y.length||-1!==y.indexOf("rubiconAnalyticsAdapter"))&&(0,m.deepSetValue)(b,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),i=b,a=v,s=r.ortb2,l={},p=h.getAllOrtbKeywords.apply(void 0,[s].concat((0,o.default)(a.map(function(e){return e.params.keywords})))),a.forEach(function(e){var t,r={user:{ext:{data:S({},e.params.visitor)}},site:{ext:{data:S({},e.params.inventory)}}},n=i.imp.find(function(e){var t;return null==(t=e.ext)||null==(t=t.prebid)||null==(t=t.bidder)||null==(t=t.rubicon)||null==(t=t.video)?void 0:t.language});n&&(r.site.content={language:null==(t=n.ext)||null==(t=t.prebid)||null==(t=t.bidder)||null==(t=t.rubicon)||null==(t=t.video)?void 0:t.language}),l=(0,m.mergeDeep)(l,e.ortb2||{},r);var o=f.config.getConfig("user.id");l.user.id=l.user.id||o}),(0,m.mergeDeep)(i,l),p&&p.length&&(0,m.deepSetValue)(i,"site.keywords",p.join(",")),null==i||null==(u=i.ext)||null==(u=u.prebid)||delete u.storedrequest,null==b||null==(g=b.ext)||null==(g=g.prebid)||delete g.storedrequest,!0===O.disableFloors&&delete b.ext.prebid.floors,v.filter(function(e){return"object"===(0,d.default)(e.floorData)}).length>0&&(b.ext.prebid.floors={enabled:!1}),b},imp:function(e,t,r){var n,i=k(t);if(!i.includes(g.BANNER)||1!=i.length){var o=e(t,r);return o.id=t.adUnitCode,delete o.banner,"atf"===t.params.position&&o.video&&(o.video.pos=1),"btf"===t.params.position&&o.video&&(o.video.pos=3),null==(n=o.ext)||null==(n=n.prebid)||delete n.storedrequest,!0===t.params.bidonmultiformat&&i.length>1&&(0,m.deepSetValue)(o,"ext.prebid.bidder.rubicon.formats",i),function(e,t){if("USD"!=t.bidfloorcur&&(delete t.bidfloor,delete t.bidfloorcur),!t.bidfloor){var r=parseFloat((0,m.deepAccess)(e,"params.floor"));isNaN(r)||(t.bidfloor=r,t.bidfloorcur="USD")}}(t,o),o.id=_[o.id]?o.id+_[o.id]++:(_[o.id]=2,o.id),o}},bidResponse:function(e,t,r){var n,i=e(t,r);i.meta.mediaType=(0,m.deepAccess)(t,"ext.prebid.type");var o=r.bidRequest,a=(null==(n=o.mediaTypes.video)?void 0:n.context)==="outstream"?P(o,g.VIDEO):[void 0,void 0],d=(0,s.default)(a,2),c=d[0],u=d[1];return i.width=t.w||c||i.playerWidth||0,i.height=t.h||u||i.playerHeight||0,i.mediaType===g.VIDEO&&"outstream"===o.mediaTypes.video.context&&(i.renderer=function(e){var t=v.Renderer.install({id:e.adId,url:O.rendererUrl||"https://video-outstream.rubiconproject.com/apex-2.2.1.js",config:O.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{t.setRender(x)}catch(e){(0,m.logWarn)("Prebid Error calling setRender on renderer",e)}return t}(i)),(0,m.deepAccess)(t,"ext.bidder.rp.advid")&&(0,m.deepSetValue)(i,"meta.advertiserId",t.ext.bidder.rp.advid),i},context:{netRevenue:!1!==O.netRevenue,ttl:360},processors:l.pbsExtensions}),C={code:"rubicon",gvlid:52,supportedMediaTypes:[g.BANNER,g.VIDEO,g.NATIVE],isBidRequestValid:function(e){var t=!0;if("object"!==(0,d.default)(e.params))return!1;for(var r=0,n=["accountId","siteId","zoneId"];r<n.length;r++)if(e.params[n[r]]=parseInt(e.params[n[r]]),isNaN(e.params[n[r]]))return(0,m.logError)("Rubicon: wrong format of accountId or siteId or zoneId."),!1;var i=k(e,!0);if(!i.length)return!1;i.includes(g.VIDEO)&&(t=function(e){var t=!0,r=Object.prototype.toString.call([]),n={mimes:r,protocols:r,linearity:Object.prototype.toString.call(0)};return Object.keys(n).forEach(function(r){Object.prototype.toString.call((0,m.deepAccess)(e,"mediaTypes.video."+r))!==n[r]&&(t=!1,(0,m.logError)("Rubicon: mediaTypes.video."+r+" is required and must be of type: "+n[r]))}),t}(e));var o=[g.BANNER,g.NATIVE].filter(function(e){return i.includes(e)}).length>0;return o?t&&o:t},buildRequests:function(e,t){var r,n=[],i=[];if((r=e.filter(function(e){var t=k(e)||[],r=t.length,n=e.params||{},i=n.bidonmultiformat,o=n.video;return 1===r&&(t.includes(g.VIDEO)||t.includes(g.NATIVE))||2===r&&!t.includes(g.BANNER)||o&&t.includes(g.VIDEO)||i&&(t.includes(g.VIDEO)||t.includes(g.NATIVE))}))&&r.length){var o=w.toORTB({bidRequests:r,bidderRequest:t});j(),i.push({method:"POST",url:"https://".concat(O.videoHost||"prebid-server",".rubiconproject.com/openrtb2/auction"),data:o,bidRequest:r})}var a=e.filter(function(e){var t=k(e)||[],r=e.params||{},n=r.bidonmultiformat,i=r.video;return t.includes(g.BANNER)&&(1===t.length||n||!n&&!i||!n&&i&&!t.includes(g.VIDEO))});if(!0!==O.singleRequest)n=i.concat(a.map(function(e){var r=C.createSlotParams(e,t);return{method:"GET",url:"https://".concat(O.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:C.getOrderedParams(r).reduce(function(e,t){var n=r[t];return(0,m.isStr)(n)&&""!==n||(0,m.isNumber)(n)?"".concat(e).concat(B(t,n),"&"):e},"")+"slots=1&rand=".concat(Math.random()),bidRequest:e}}));else{var s=a.reduce(function(e,t){return(e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e},{});n=i.concat(Object.keys(s).reduce(function(e,r){var n,i;return(n=s[r],i=10,n.map(function(e,t){return t%10==0?n.slice(t,t+i):null}).filter(function(e){return e})).forEach(function(r){var n=C.combineSlotUrlParams(r.map(function(e){return C.createSlotParams(e,t)}));e.push({method:"GET",url:"https://".concat(O.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:C.getOrderedParams(n).reduce(function(e,t){var r=n[t];return(0,m.isStr)(r)&&""!==r||(0,m.isNumber)(r)?"".concat(e).concat(B(t,r),"&"):e},"")+"slots=".concat(r.length,"&rand=").concat(Math.random()),bidRequest:r})}),e},[]))}return n},getOrderedParams:function(e){var t=/^tg_v/,r=/^tg_i/,n=/^eid_|^tpid_/,i=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","gpp","gpp_sid","rp_schain"].concat(Object.keys(e).filter(function(e){return n.test(e)})).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter(function(e){return t.test(e)})).concat(Object.keys(e).filter(function(e){return r.test(e)})).concat(["tk_flint","x_source.tid","l_pb_bid_id","p_screen_res","o_ae","o_cdep","rp_floor","rp_secure","tk_user_key"]);return i.concat(Object.keys(e).filter(function(e){return -1===i.indexOf(e)}))},combineSlotUrlParams:function(e){if(1===e.length)return e[0];var t=e.reduce(function(t,r,n){return Object.keys(r).forEach(function(i){t.hasOwnProperty(i)||(t[i]=Array(e.length)),t[i].splice(n,1,r[i])}),t},{}),r=RegExp("^([^;]*)(;\\1)+$");return Object.keys(t).forEach(function(e){var n=t[e].join(";"),i=n.match(r);t[e]=i?i[1]:n}),t},createSlotParams:function(e,t){e.startTime=new Date().getTime();var r,n,i,o,a,c,u,l,p,v,h,b,y,A,I=e.params,E=P(e,"banner"),_=I.latLong||[],T=(0,s.default)(_,2),w=T[0],x=T[1],R={account_id:I.accountId,site_id:I.siteId,zone_id:I.zoneId,size_id:E[0],alt_size_ids:E.slice(1).join(",")||void 0,rp_floor:(I.floor=parseFloat(I.floor))>=.01?I.floor:void 0,rp_secure:"1",tk_flint:"".concat(O.int_type||"pbjs_lite","_v9.40.0"),"x_source.tid":null==(o=t.ortb2)||null==(o=o.source)?void 0:o.tid,"x_imp.ext.tid":null==(a=e.ortb2Imp)||null==(a=a.ext)?void 0:a.tid,l_pb_bid_id:e.bidId,o_cdep:null==(c=e.ortb2)||null==(c=c.device)||null==(c=c.ext)?void 0:c.cdep,ip:null==(u=e.ortb2)||null==(u=u.device)?void 0:u.ip,ipv6:null==(l=e.ortb2)||null==(l=l.device)?void 0:l.ipv6,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:I.userId,"p_geo.latitude":isNaN(parseFloat(w))?void 0:parseFloat(w).toFixed(4),"p_geo.longitude":isNaN(parseFloat(x))?void 0:parseFloat(x).toFixed(4),"tg_fl.eid":e.code,rf:(r=e,n=t,i=r.params.referrer?r.params.referrer:n.refererInfo.page,r.params.secure?i.replace(/^http:/i,"https:"):i)};if("function"==typeof e.getFloor&&!O.disableFloors){try{y=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){(0,m.logError)("Rubicon: getFloor threw an error: ",e)}R.rp_hard_floor=(0,m.isPlainObject)(y)&&"USD"===y.currency&&!isNaN(parseInt(y.floor))?y.floor:void 0}!0===I.bidonmultiformat&&(0,m.deepAccess)(e,"mediaTypes")&&Object.keys(e.mediaTypes).length>1&&(R.p_formats=Object.keys(e.mediaTypes).join(","));var k={1:"atf",3:"btf"}[(0,m.deepAccess)(e,"mediaTypes.banner.pos")]||"";R.p_pos="atf"===I.position||"btf"===I.position?I.position:k;var j=f.config.getConfig("user.id");return j&&(R.ppuid=j),null!=e&&null!=(p=e.ortb2Imp)&&null!=(p=p.ext)&&p.ae&&(R.o_ae=1),"number"==typeof(null==e||null==(v=e.ortb2)||null==(v=v.site)?void 0:v.mobile)&&(R["p_site.mobile"]=e.ortb2.site.mobile),function(e,t){if(!1!==O.readTopics){var r,n,i,o,a=[1,2,5,6,7,507].concat((null==(r=O.sendSiteSegtax)?void 0:r.map(function(e){return Number(e)}))||[]),s=[4,508].concat((null==(n=O.sendUserSegtax)?void 0:n.map(function(e){return Number(e)}))||[]),d=(null==(i=e.ortb2)||null==(i=i.user)?void 0:i.data)||[],c=(null==(o=e.ortb2)||null==(o=o.site)||null==(o=o.content)?void 0:o.data)||[];d.forEach(D(t,"v",s)),c.forEach(D(t,"i",a))}}(t,R),null!=e&&null!=(h=e.ortb2)&&null!=(h=h.user)&&null!=(h=h.ext)&&h.eids&&e.ortb2.user.ext.eids.forEach(function(e){var t=e.source,r=e.uids,n=void 0===r?[]:r,i=e.inserter,o=e.matcher,a=e.mm;e.ext;try{var s,d,c=n[0];if(!c)return;var u=[c.id,c.atype||"","",i||"",o||"",a||"",(null==c||null==(s=c.ext)?void 0:s.rtiPartner)||(null==c||null==(d=c.ext)?void 0:d.rtipartner)||""].join("^");if(R["eid_".concat(t)]=u,!R.ppuid){var l=n.find(function(e){var t;return(null==(t=e.ext)?void 0:t.stype)==="ppuid"});null!=l&&l.id&&(R.ppuid=l.id)}}catch(e){(0,m.logWarn)("Rubicon: error reading eid:",{source:t,uids:n},e)}}),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(R.gdpr=Number(t.gdprConsent.gdprApplies)),R.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(R.us_privacy=encodeURIComponent(t.uspConsent)),null!=(b=t.gppConsent)&&b.gppString&&(R.gpp=t.gppConsent.gppString,R.gpp_sid=null==(A=t.gppConsent)||null==(A=A.applicableSections)?void 0:A.toString()),R.rp_maxbids=t.bidLimit||1,function(e,t,r){var n={user:{ext:{data:S({},e.params.visitor)}},site:{ext:{data:S({},e.params.inventory)}}};e.params.keywords&&(n.site.keywords=(0,m.isArray)(e.params.keywords)?e.params.keywords.join(","):e.params.keywords);var i=(0,m.mergeDeep)({},e.ortb2||{},n),o=(0,m.deepAccess)(e.ortb2Imp,"ext")||{},a=(0,m.deepAccess)(e.ortb2Imp,"ext.data")||{},c=(0,m.deepAccess)(e,"ortb2Imp.ext.gpid"),u=(0,m.deepAccess)(i,"regs.ext.dsa"),l={user:[4],site:[1,2,5,6,7]},p={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"},f=function(e,t,r){if("data"===t&&Array.isArray(e))return e.filter(function(e){return e.segment&&(0,m.deepAccess)(e,"ext.segtax")&&l[r]&&-1!==l[r].indexOf((0,m.deepAccess)(e,"ext.segtax"))}).map(function(e){var t=e.segment.filter(function(e){return e.id}).reduce(function(e,t){return e.push(t.id),e},[]);if(t.length>0)return t.toString()}).toString();if(("object"!==(0,d.default)(e)||Array.isArray(e))&&void 0!==e)return Array.isArray(e)?e.filter(function(e){if("object"!==(0,d.default)(e)&&void 0!==e)return e.toString();(0,m.logWarn)("Rubicon: Filtered value: ",e,"for key",t,": Expected value to be string, integer, or an array of strings/ints")}).toString():e.toString()},v=function(e,t,n){var i=!(arguments.length>3)||void 0===arguments[3]||arguments[3],o=f(e,n,t),a=p[n]&&i?"".concat(p[n]):"data"===n?"".concat(p[t],"iab"):"".concat(p[t]).concat(n);r[a]=r[a]?r[a].concat(",",o):o};if(t===g.BANNER){["site","user"].forEach(function(e){Object.keys(i[e]).forEach(function(t){"site"===e&&"content"===t&&i[e][t].data?v(i[e][t].data,e,"data"):"ext"!==t?v(i[e][t],e,t):i[e][t].data&&Object.keys(i[e].ext.data).forEach(function(t){v(i[e].ext.data[t],e,t,!1)})})}),Object.keys(a).forEach(function(e){"adserver"!==e?v(a[e],"site",e):"gam"===a[e].name&&v(a[e].adslot,name,e)}),c&&(r.p_gpid=c),u&&Object.keys(u).length&&(0,m.pick)(u,["dsainfo",function(e){return r.dsainfo=e},"dsarequired",function(e){return r.dsarequired=e},"pubrender",function(e){return r.dsapubrender=e},"datatopub",function(e){return r.dsadatatopubs=e},"transparency",function(e){Array.isArray(e)&&e.length&&(r.dsatransparency=e.reduce(function(e,t){var r=t.domain||"";if(!r)return e;var n=t.dsaparams||t.params;return Array.isArray(n)&&0!==n.length?(e&&(e+="~~"),e+"".concat(r,"~").concat(n.join("_"))):e},""))}]),r["tg_i.pbadslot"]&&delete r["tg_i.dfp_ad_unit_code"];var h=(0,m.deepAccess)(i,"device.sua");h&&!1!==O.chEnabled&&(0,m.pick)(h,["architecture",function(e){return r.m_ch_arch=e},"bitness",function(e){return r.m_ch_bitness=e},"browsers",function(e){if(Array.isArray(e)){var t,n,i=e.reduce(function(e,t){var r,n,i;return e[0].push('"'.concat(null==t?void 0:t.brand,'"|v="').concat(null==t||null==(r=t.version)?void 0:r[0],'"')),t.version.length>1&&e[1].push('"'.concat(null==t?void 0:t.brand,'"|v="').concat(null==t||null==(n=t.version)||null==(i=n.join)?void 0:i.call(n,"."),'"')),e},[[],[]]),o=(0,s.default)(i,2),a=o[0],d=o[1];r.m_ch_ua=null==a||null==(t=a.join)?void 0:t.call(a,","),r.m_ch_full_ver=null==d||null==(n=d.join)?void 0:n.call(d,",")}},"mobile",function(e){return r.m_ch_mobile="?".concat(e)},"model",function(e){return r.m_ch_model=e},"platform",function(e){var t,n;r.m_ch_platform=null==e?void 0:e.brand,r.m_ch_platform_ver=null==e||null==(t=e.version)||null==(n=t.join)?void 0:n.call(t,".")}])}else Object.keys(o).length&&(0,m.mergeDeep)(r.imp[0].ext,o),c&&(r.imp[0].ext.gpid=c),(0,m.mergeDeep)(r,i)}(e,g.BANNER,R),!0===f.config.getConfig("coppa")&&(R.coppa=1),e.schain&&N(e.schain)&&(R.rp_schain=C.serializeSupplyChain(e.schain)),R},serializeSupplyChain:function(e){if(!N(e))return"";var t=e.ver,r=e.complete,n=e.nodes;return"".concat(t,",").concat(r,"!").concat(C.serializeSupplyChainNodes(n))},serializeSupplyChainNodes:function(e){var t=["asi","sid","hp","rid","name","domain"];return e.map(function(e){return t.map(function(t){return encodeURIComponent(e[t]||"")}).join(",")}).join("!")},interpretResponse:function(e,t){e=e.body;var r=t.data;if(!e||"object"!==(0,d.default)(e))return[];if(e.seatbid){var n=(0,m.deepAccess)(e,"ext.errors.rubicon");return Array.isArray(n)&&n.length>0&&(0,m.logWarn)("Rubicon: Error in video response"),w.fromORTB({request:r,response:e}).bids}var i=e.ads,o=0,a=t.bidRequest,c=t.url;if(null!=c&&c.includes("fastlane")){var u,l,p,f=(null==(p=e)?void 0:p.error_code)||(0,m.deepAccess)(i,"0.error_code"),v=null==a?void 0:a.adUnitCode;f&&v&&b.emit(y.EVENTS.RUBICON_BID_ERROR,{errorCode:f,adUnitCode:v})}if("object"===(0,d.default)(a)&&!Array.isArray(a)&&k(a).includes(g.VIDEO)&&"object"===(0,d.default)(i)&&(i=i[a.adUnitCode]),!Array.isArray(i)||i.length<1)return[];var h=i.reduce(function(t,r,n){if(r.impression_id&&l===r.impression_id?o++:l=r.impression_id,"ok"!==r.status)return t;var i=Array.isArray(a)?a[n-o]:a;if(i&&"object"===(0,d.default)(i)){var c={requestId:i.bidId,currency:"USD",creativeId:r.creative_id||"".concat(r.network||"","-").concat(r.advertiser||""),cpm:r.cpm||0,dealId:r.deal,ttl:360,netRevenue:!1!==O.netRevenue,rubicon:{advertiserId:r.advertiser,networkId:r.network},meta:{advertiserId:r.advertiser,networkId:r.network,mediaType:g.BANNER}};if(r.creative_type&&(c.mediaType=r.creative_type),r.dsa&&Object.keys(r.dsa).length&&(c.meta.dsa=r.dsa),r.adomain&&(c.meta.advertiserDomains=Array.isArray(r.adomain)?r.adomain:[r.adomain]),r.emulated_format&&(c.meta.mediaType=r.emulated_format),r.creative_type===g.VIDEO)c.width=i.params.video.playerWidth,c.height=i.params.video.playerHeight,c.vastUrl=r.creative_depot_url,c.impression_id=r.impression_id,c.videoCacheKey=r.impression_id;else{u=r.script,p=r.impression_id,c.ad="<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='".concat(p,"'>\n<script type='text/javascript'>").concat(u,"<\/script>\n</div>\n</body>\n</html>");var u,p,f=T[r.size_id].split("x").map(function(e){return Number(e)}),v=(0,s.default)(f,2);c.width=v[0],c.height=v[1]}c.rubiconTargeting=(Array.isArray(r.targeting)?r.targeting:[]).reduce(function(e,t){return e[t.key]=t.values[0],e},{rpfl_elemid:i.adUnitCode}),t.push(c)}else(0,m.logError)("Rubicon: bidRequest undefined at index position:".concat(n),a,e);return t},[]).sort(function(e,t){return(t.cpm||0)-(e.cpm||0)}),A=null==(u=e.component_auction_config)?void 0:u.map(function(e){return{config:e,bidId:e.bidId}});return A?{bids:h,paapi:A}:h},getUserSyncs:function(e,t,r,n,i){if(!U&&e.iframeEnabled){var o=(0,A.getUserSyncParams)(r,n,i);return o=Object.keys(o).length?"?".concat((0,m.formatQS)(o)):"",U=!0,{type:"iframe",url:"https://".concat(O.syncHost||"eus",".rubiconproject.com/usync.html")+o}}}};function x(e){var t,r,n,i=document.getElementById(e.adUnitCode);(t=i.querySelector("div[id^='google_ads']"))&&t.style.setProperty("display","none"),(n=(r=i.querySelector("script[id^='sas_script']"))&&r.nextSibling)&&"iframe"===n.localName&&n.style.setProperty("display","none");var o=S(S({},{align:"center",position:"append",closeButton:!1,label:void 0,collapse:!0}),e.renderer.getConfig());e.renderer.push(function(){window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:"#".concat(e.adUnitCode),align:o.align,position:o.position},closeButton:o.closeButton,label:o.label,collapse:o.collapse})})}function P(e,t){var r=e.params;if(t===g.VIDEO){var n=[];return r.video&&r.video.playerWidth&&r.video.playerHeight?n=[r.video.playerWidth,r.video.playerHeight]:Array.isArray((0,m.deepAccess)(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?n=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(n=e.sizes[0]),n}var i=[];return Array.isArray(r.sizes)?i=r.sizes:void 0!==(0,m.deepAccess)(e,"mediaTypes.banner.sizes")?i=R(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&e.sizes.length>0?i=R(e.sizes):(0,m.logWarn)("Rubicon: no sizes are setup or found"),function(e){var t=[15,2,9];return e.sort(function(e,r){var n=t.indexOf(e),i=t.indexOf(r);return n>-1||i>-1?-1===n?1:-1===i?-1:n-i:e-r})}(i)}function D(e,t,r){return function(n){var i,o,a=Number(null==(i=n.ext)?void 0:i.segtax);r.includes(a)&&(e["tg_".concat(t,".tax").concat(a)]=null==(o=n.segment)?void 0:o.map(function(e){return e.id}).join(","))}}function R(e){return(0,m.parseSizesInput)(e).reduce(function(e,t){var r=parseInt(T[t],10);return r&&e.push(r),e},[])}function k(e){var t,r,n,i,o,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=[];if(t=e,r=void 0!==(0,m.deepAccess)(t,"mediaTypes.".concat(g.VIDEO)),n=void 0!==(0,m.deepAccess)(t,"mediaTypes.".concat(g.BANNER)),i=void 0!==(0,m.deepAccess)(t,"params.bidonmultiformat"),o="object"!==(0,d.default)((0,m.deepAccess)(t,"params.video")),r&&i||(n&&o&&(r=!1),r&&o&&(0,m.deepSetValue)(t,"params.video",{}),r)){if(-1===["outstream","instream"].indexOf((0,m.deepAccess)(e,"mediaTypes.".concat(g.VIDEO,".context"))))return a&&(0,m.logError)("Rubicon: mediaTypes.video.context must be outstream or instream"),s;if(P(e,g.VIDEO).length<2)return a&&(0,m.logError)("Rubicon: could not determine the playerSize of the video"),s;a&&(0,m.logMessage)("Rubicon: making video request for adUnit",e.adUnitCode),s.push(g.VIDEO)}if(void 0!==(0,m.deepAccess)(e,"mediaTypes.".concat(g.NATIVE))&&s.push(g.NATIVE),void 0!==(0,m.deepAccess)(e,"mediaTypes.".concat(g.BANNER))){if(0===P(e,g.BANNER).length)return a&&(0,m.logError)("Rubicon: could not determine the sizes for banner request"),s;a&&(0,m.logMessage)("Rubicon: making banner request for adUnit",e.adUnitCode),s.push(g.BANNER)}return s}var j=function(){return _={}};function N(e){var t=!1,r=["asi","sid","hp"];return e.nodes&&((t=e.nodes.reduce(function(e,t){return e?r.every(function(e){return t.hasOwnProperty(e)}):e},!0))||(0,m.logError)("Rubicon: required schain params missing")),t}function B(e,t){return"rp_schain"===e?"rp_schain=".concat(t):"".concat(e,"=").concat(encodeURIComponent(t))}var U=!1;(0,p.registerBidder)(C),(0,c.registerModule)("rubiconBidAdapter")},9609:function(e,t,r){"use strict";var n=r(2100),i=r(7045),o=r(9926),a=n(r(9577)),s=r(4700),d=r(9092),c={STRICT:"strict",RELAXED:"relaxed",OFF:"off"},u=[];function l(e,t){var r=o.config.getConfig("schain"),n=o.config.getBidderConfig();t.forEach(function(e){var t=e.bidderCode,i=n[t]&&n[t].schain||r;e.bids.forEach(function(e){var t=function(e,t){var r,n=c.STRICT;if(void 0!==(r=e)&&((0,s.isPlainObject)(r)||((0,s.logError)("Invalid schain object found: the following schain config will not be used as schain is not an object.",r),0)))return((0,s.isStr)(e.validation)&&-1!=u.indexOf(e.validation)&&(n=e.validation),n===c.OFF)?e.config:(e.config,c.STRICT,e.config);return null}(i,0);t&&(e.schain=(0,s.deepClone)(t))})}),e(t)}(0,s._each)(c,function(e){return u.push(e)});a.default.makeBidRequests.after(l),(0,d.registerOrtbProcessor)({type:d.REQUEST,name:"sourceExtSchain",fn:function(e,t,r){if(!(0,s.deepAccess)(e,"source.ext.schain")){var n=(0,s.deepAccess)(r,"bidRequests.0.schain");n&&(0,s.deepSetValue)(e,"source.ext.schain",n)}}}),(0,i.registerModule)("schain")},6363:function(e,t,r){"use strict";var n=r(2100)(r(8287)),i=r(7045),o=r(4700),a=r(2508),s=r(1122),d=r(5789),c=r(4840),u=r(9570),l=(0,s.getStorageManager)({moduleType:c.MODULE_TYPE_UID,moduleName:"sharedId"}),p="cookie",f="html5",g="_pubcid_optout",v="PublisherCommonId";function m(e,t){if(t===p)return l.getCookie(e);if(t===f&&l.hasLocalStorage()){var r=l.getDataFromLocalStorage("".concat(e,"_exp"));if(!r||new Date(r).getTime()-Date.now()>0)return l.getDataFromLocalStorage(e)}}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;if(e){var n=(0,o.parseUrl)(e);n.search.id=encodeURIComponent("pubcid:"+t);var i=(0,o.buildUrl)(n);return function(){(0,o.triggerPixel)(i,r)}}}function b(){return!!(l.cookiesAreEnabled()&&m(g,p)||l.hasLocalStorage()&&m(g,f))}var y={name:"sharedId",aliasName:"pubCommonId",gvlid:d.VENDORLESS_GVLID,decode:function(e,t){return b()?void(0,o.logInfo)("PubCommonId decode: Has opted-out"):((0,o.logInfo)(" Decoded value PubCommonId "+e),{pubcid:e})},getId:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(b())return void(0,o.logInfo)("PubCommonId: Has opted-out");if(null!=r&&r.coppa)return void(0,o.logInfo)("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");var a=t.params,s=void 0===a?{}:a,d=s.create,c=s.pixelUrl,u=i;if(!u){try{"object"===(0,n.default)(window[v])&&(u=window[v].getId())}catch(e){}u||(u=(void 0===d||d)&&(0,o.hasDeviceAccess)()?(0,o.generateUUID)():void 0)}return{id:u,callback:(e=u,function(t,r){c?h(c,e,function(){t(r()||e)})():t(e)})}},extendId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;if(b())return(0,o.logInfo)("PubCommonId: Has opted-out"),{id:void 0};if(null!=t&&t.coppa)return void(0,o.logInfo)("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");var n=e.params,i=void 0===n?{}:n,a=i.extend,s=i.pixelUrl;if(void 0!==a&&a)if(s)return{callback:h(s,r)};else return{id:r}},domainOverride:(0,u.domainOverrideToRootDomain)(l,"sharedId"),eids:{pubcid:function(e,t){var r,n={source:"pubcid.org",uids:e.map(function(e){return{id:e,atype:1}})};return(null==t||null==(r=t.params)?void 0:r.inserter)!=null&&(n.inserter=t.params.inserter),n}}};(0,a.submodule)("userId",y),(0,i.registerModule)("sharedIdSystem")},7724:function(e,t,r){"use strict";var n=r(2100),i=n(r(5881)),o=n(r(5794)),a=r(7045),s=r(523),d=r(9926),c=r(4607),u=r(4700);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var f="https://btlr.sharethrough.com/universal/v1?supply_id=".concat("WYu2BXv1"),g=function(){return window.location.protocol},v={code:"sharethrough",supportedMediaTypes:[c.VIDEO,c.BANNER],gvlid:80,isBidRequestValid:function(e){return!!e.params.pkey},buildRequests:function(e,t){var r,n,o,a,s,c,l,v,m=t.timeout,h=t.ortb2||{},b=0>g().indexOf("http")||g().indexOf("https")>-1,y={id:(0,u.generateUUID)(),at:1,cur:["USD"],tmax:m,site:p({domain:(0,u.deepAccess)(t,"refererInfo.domain",window.location.hostname),page:(0,u.deepAccess)(t,"refererInfo.page",window.location.href),ref:(0,u.deepAccess)(t,"refererInfo.ref")},h.site),device:{ua:navigator.userAgent,language:navigator.language,js:1,dnt:+("1"===navigator.doNotTrack),h:window.screen.height,w:window.screen.width,ext:{}},regs:{coppa:+(!0===d.config.getConfig("coppa")),ext:{}},source:{tid:null==(o=t.ortb2)||null==(o=o.source)?void 0:o.tid,ext:{version:"9.40.0",str:"4.3.0",schain:e[0].schain}},bcat:(0,u.deepAccess)(t.ortb2,"bcat")||e[0].params.bcat||[],badv:(0,u.deepAccess)(t.ortb2,"badv")||e[0].params.badv||[],test:0};if(null!=(a=t.ortb2)&&null!=(a=a.device)&&null!=(a=a.ext)&&a.cdep&&(y.device.ext.cdep=t.ortb2.device.ext.cdep),null!=t&&null!=(s=t.ortb2)&&s.device&&(0,u.mergeDeep)(y.device,t.ortb2.device),r=h.user,n={},y.user=null==r?n:r,y.user.ext||(y.user.ext={}),y.user.ext.eids=e[0].userIdAsEids||[],t.gdprConsent){var A=!0===t.gdprConsent.gdprApplies;y.regs.ext.gdpr=+!!A,A&&(y.user.ext.consent=t.gdprConsent.consentString)}return t.uspConsent&&(y.regs.ext.us_privacy=t.uspConsent),null!=t&&null!=(c=t.gppConsent)&&c.gppString?(y.regs.gpp=t.gppConsent.gppString,y.regs.gpp_sid=t.gppConsent.applicableSections):null!=t&&null!=(l=t.ortb2)&&null!=(l=l.regs)&&l.gpp&&(y.regs.ext.gpp=t.ortb2.regs.gpp,y.regs.ext.gpp_sid=t.ortb2.regs.gpp_sid),null!=t&&null!=(v=t.ortb2)&&null!=(v=v.regs)&&null!=(v=v.ext)&&v.dsa&&(y.regs.ext.dsa=t.ortb2.regs.ext.dsa),e.map(function(e){var r,n={ext:{}},o=(0,u.deepAccess)(e,"ortb2Imp.ext.tid");o&&(n.ext.tid=o);var a=(0,u.deepAccess)(e,"ortb2Imp.ext.gpid")||(0,u.deepAccess)(e,"ortb2Imp.ext.data.pbadslot");a&&(n.ext.gpid=a);var s=(0,u.deepAccess)(e,"mediaTypes.video");if(null!=(r=t.paapi)&&r.enabled&&e.mediaTypes.banner&&(0,u.mergeDeep)(n,{ext:{ae:1}}),s){var d,c=640,l=360;if(s.playerSize&&s.playerSize[0]&&s.playerSize[0][0]&&s.playerSize[0][1]){var f=(0,i.default)(s.playerSize[0],2);c=f[0],l=f[1]}var g=function(e,t,r){if(["api","battr","mimes","playbackmethod","protocols"].includes(e)&&(!Array.isArray(t[e])||0===t[e].length)&&t[e])return void(0,u.logWarn)("".concat("Sharethrough:",' Invalid video request property: "').concat(e,'" must be an array with at least 1 entry.  Value supplied: "').concat(t[e],'".  This will not be added to the bid request.'));t[e]&&(r.video[e]=t[e])};n.video={pos:null==(d=s.pos)?0:d,topframe:+!(0,u.inIframe)(),w:c,h:l},["api","battr","companionad","companiontype","delivery","linearity","maxduration","mimes","minduration","placement","playbackmethod","plcmt","protocols","skip","skipafter","skipmin","startdelay"].forEach(function(e){g(e,s,n)})}else{n.banner={pos:(0,u.deepAccess)(e,"mediaTypes.banner.pos",0),topframe:+!(0,u.inIframe)(),format:e.sizes.map(function(e){return{w:+e[0],h:+e[1]}})};var v=(0,u.deepAccess)(e,"mediaTypes.banner.battr",null)||(0,u.deepAccess)(e,"ortb2Imp.banner.battr");v&&(n.banner.battr=v)}return p({id:e.bidId,tagid:String(e.params.pkey),secure:+!!b,bidfloor:function(e){var t=null;if("function"==typeof e.getFloor){var r=e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.video?"video":"banner",size:e.sizes.map(function(e){return{w:e[0],h:e[1]}})});(0,u.isPlainObject)(r)&&"USD"===r.currency&&!isNaN(parseFloat(r.floor))&&(t=parseFloat(r.floor))}return null!==t?t:e.params.floor}(e)},n)}).filter(function(e){return!!e}).map(function(e){return{method:"POST",url:f,data:p(p({},y),{},{imp:[e]})}})},interpretResponse:function(e,t){var r,n,i=e.body;if(!i||!i.seatbid||0===i.seatbid.length||!i.seatbid[0].bid||0===i.seatbid[0].bid.length)return[];var o=null==(r=i.ext)?void 0:r.auctionConfigs,a=i.seatbid[0].bid.map(function(e){var r,n,o,a,s,d,u,l,p,f,g,v,m,h={requestId:e.impid,width:+e.w,height:+e.h,cpm:+e.price,creativeId:e.crid,dealId:e.dealid||null,mediaType:t.data.imp[0].video?c.VIDEO:c.BANNER,currency:i.cur||"USD",netRevenue:!0,ttl:360,ad:e.adm,nurl:e.nurl,meta:{advertiserDomains:e.adomain||[],networkId:(null==(r=e.ext)?void 0:r.networkId)||null,networkName:(null==(n=e.ext)?void 0:n.networkName)||null,agencyId:(null==(o=e.ext)?void 0:o.agencyId)||null,agencyName:(null==(a=e.ext)?void 0:a.agencyName)||null,advertiserId:(null==(s=e.ext)?void 0:s.advertiserId)||null,advertiserName:(null==(d=e.ext)?void 0:d.advertiserName)||null,brandId:(null==(u=e.ext)?void 0:u.brandId)||null,brandName:(null==(l=e.ext)?void 0:l.brandName)||null,demandSource:(null==(p=e.ext)?void 0:p.demandSource)||null,dchain:(null==(f=e.ext)?void 0:f.dchain)||null,primaryCatId:(null==(g=e.ext)?void 0:g.primaryCatId)||null,secondaryCatIds:(null==(v=e.ext)?void 0:v.secondaryCatIds)||null,mediaType:(null==(m=e.ext)?void 0:m.mediaType)||null}};return h.mediaType===c.VIDEO&&(h.ttl=3600,h.vastXml=e.adm),h});return o?{bids:a,paapi:(null==(n=i.ext)?void 0:n.auctionConfigs)||{}}:a},getUserSyncs:function(e,t){return e.pixelEnabled&&void 0!==(0,u.deepAccess)(t,"0.body.cookieSyncUrls")?t[0].body.cookieSyncUrls.map(function(e){return{type:"image",url:e}}):[]},onTimeout:function(e){},onBidWon:function(e){},onSetTargeting:function(e){}};(0,s.registerBidder)(v),(0,a.registerModule)("sharethroughBidAdapter")},3183:function(e,t,r){"use strict";var n=r(2100),i=n(r(8287)),o=n(r(5881)),a=n(r(5794)),s=r(7045),d=r(9926),c=r(4700),u=r(1617),l=r(4607),p=r(9577),f=[];function g(e,t){return e.labelAll?{labelAll:!0,labels:e.labelAll,activeLabels:t}:{labelAll:!1,labels:e.labelAny,activeLabels:t}}p.setupAdUnitMediaTypes.before(function(e,t,r){return e(function(e,t){return e.reduce(function(e,r){var n=m(g(r,t),r.mediaTypes),i=n.active,o=n.mediaTypes,a=n.filterResults;return i?(a&&(0,c.logInfo)('Size mapping filtered adUnit "'.concat(r.code,'" sizes from '),a.before,"to ",a.after),r.mediaTypes=o,r.bids=r.bids.reduce(function(e,n){var i=m(g(n,t),r.mediaTypes),o=i.active,a=i.mediaTypes,s=i.filterResults;return o?(s&&((0,c.logInfo)('Size mapping filtered adUnit "'.concat(r.code,'" bidder "').concat(n.bidder,'" sizes from '),s.before,"to ",s.after),n.mediaTypes=a),e.push(n)):(0,c.logInfo)('Size mapping deactivated adUnit "'.concat(r.code,'" bidder "').concat(n.bidder,'"')),e},[]),e.push(r)):(0,c.logInfo)('Size mapping disabled adUnit "'.concat(r.code,'"')),e},[])}(t,r),r)}),d.config.getConfig("sizeConfig",function(e){f=e.sizeConfig});var v=(0,a.default)({},l.BANNER,"banner.sizes");function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labels,r=void 0===t?[]:t,n=e.labelAll,a=void 0!==n&&n,s=e.activeLabels,d=void 0===s?[]:s,l=arguments.length>1?arguments[1]:void 0,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f,g=function(e){return e.reduce(function(e,t){if("object"===(0,i.default)(t)&&"string"==typeof t.mediaQuery&&t.mediaQuery.length>0){var r=!1;try{r=(0,c.getWindowTop)().matchMedia(t.mediaQuery).matches}catch(e){(0,c.logWarn)("Unfriendly iFrame blocks sizeConfig from being correctly evaluated"),r=matchMedia(t.mediaQuery).matches}r&&(Array.isArray(t.sizesSupported)&&(e.shouldFilter=!0),["labels","sizesSupported"].forEach(function(r){return(t[r]||[]).forEach(function(t){return e[r][t]=!0})}))}else(0,c.logWarn)('sizeConfig rule missing required property "mediaQuery"');return e},{labels:{},sizesSupported:{},shouldFilter:!1})}(p),m=!1,h=!1,b={before:{},after:{}};g.shouldFilter?Object.entries(v).forEach(function(e){var t=(0,o.default)(e,2),r=t[0],n=t[1],i=(0,c.deepAccess)(l,n);if(i){m||(l=(0,c.deepClone)(l),m=!0);var a=i.filter(function(e){return g.sizesSupported[e]});(0,c.deepSetValue)(l,n,a),h=h||a.length>0,i.length!==a.length&&(b.before[r]=i,b.after[r]=a)}}):h=null!=Object.values(v).find(function(e){var t;return null==(t=(0,c.deepAccess)(l,e))?void 0:t.length});var y={active:!Object.keys(v).find(function(e){return l.hasOwnProperty(e)})||h&&(0===r.length||!a&&(r.some(function(e){return g.labels[e]})||r.some(function(e){return(0,u.includes)(d,e)}))||a&&r.reduce(function(e,t){return e?g.labels[t]||(0,u.includes)(d,t):e},!0)),mediaTypes:l};return Object.keys(b.before).length>0&&(y.filterResults=b),y}v[l.VIDEO]="video.playerSize",(0,s.registerModule)("sizeMapping")},5782:function(e,t,r){"use strict";var n=r(7045),i=r(523),o=r(9579),a=r(4607),s=r(4700),d=r(8826),c="stackadapt",u=(0,o.ortbConverter)({context:{netRevenue:!0,ttl:300,currency:"USD"},request:function(e,t,r,n){var i=e(t,r,n),o=n.bidRequests[0];return i.id=r.bidderRequestId,(0,s.deepSetValue)(i,"site.publisher.id",o.params.publisherId),(0,s.deepSetValue)(i,"test",o.params.testMode),i},imp:function(e,t,r){var n,i=e(t,r);t.params.placementId&&(0,s.deepSetValue)(i,"tagid",t.params.placementId),null!=(n=t.params.banner)&&n.expdir&&(0,s.deepSetValue)(i,"banner.expdir",t.params.banner.expdir);var o=function(e){if(e.params.bidfloor)return e.params.bidfloor;if((0,s.isFn)(e.getFloor)){var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});if((0,s.isPlainObject)(t)&&!isNaN(t.floor)&&"USD"===t.currency)return t.floor}return null}(t);return o&&(i.bidfloor=parseFloat(o),i.bidfloorcur="USD"),(0,s.isNumber)(i.secure)||(i.secure=1),i},bidResponse:function(e,t,r){var n,i=Object.keys(r.bidRequest.mediaTypes);return 1===i.length?r.mediaType=i[0]:(null==(n=t.adm)?void 0:n.search(/^(<\?xml|<vast)/i))!==-1?r.mediaType=a.VIDEO:r.mediaType=a.BANNER,t.adm=(0,s.replaceAuctionPrice)(t.adm,t.price),e(t,r)}}),l={code:c,gvlid:238,supportedMediaTypes:[a.BANNER,a.VIDEO],isBidRequestValid:function(e){if(!e||!e.params)return(0,s.logWarn)("StackAdapt bidder adapter - Missing bid.params"),!1;if(!e.params.publisherId)return(0,s.logWarn)(c+"StackAdapt bidder adapter -  Missing required bid.params.publisherId"),!1;if(e.params.bidfloor&&isNaN(parseFloat(e.params.bidfloor)))return(0,s.logWarn)("StackAdapt bidder adapter -  bid.params.bidfloor must be a float"),!1;var t,r,n=null==(t=e.mediaTypes)?void 0:t.banner,i=null==(r=e.mediaTypes)?void 0:r.video;if(!n&&!i)return(0,s.logWarn)("StackAdapt bidder adapter - bid must contain bid.mediaTypes.banner or bid.mediaTypes.video"),!1;if(n){var o=n.sizes;if(!o||0==(0,s.parseSizesInput)(o).length)return(0,s.logWarn)("StackAdapt bidder adapter - banner bid requires bid.mediaTypes.banner.sizes of valid format"),!1}if(i){if(!i.plcmt)return(0,s.logWarn)("StackAdapt bidder adapter - video bid requires bid.mediaTypes.video.plcmt"),!1;if(!i.maxduration||!(0,s.isInteger)(i.maxduration))return(0,s.logWarn)("StackAdapt bidder adapter - video bid requires bid.mediaTypes.video.maxduration in seconds"),!1;if(!i.api||0===i.api.length)return(0,s.logWarn)("StackAdapt bidder adapter - video bid requires bid.mediaTypes.video.api to be an array of supported api frameworks. See ORTB spec for valid values"),!1;if(!i.mimes||0===i.mimes.length)return(0,s.logWarn)("StackAdapt bidder adapter - video bid requires bid.mediaTypes.video.mimes to be an array of supported mime types"),!1;if(!i.protocols)return(0,s.logWarn)("StackAdapt bidder adapter - video bid bid.mediaTypes.video.protocols to be an array of supported protocols. See the ORTB spec for valid values"),!1}return!0},buildRequests:function(e,t){if(!Array.isArray(e))throw TypeError("Expected bidRequests to be an array");return{method:"POST",url:"https://pjs.srv.stackadapt.com/br",data:u.toORTB({bidRequests:e,bidderRequest:t}),options:{withCredentials:!0}}},interpretResponse:function(e,t){return e&&e.body&&t&&t.data?u.fromORTB({response:e.body,request:t.data}).bids:[]},getUserSyncs:function(e,t,r,n,i){var o=[];if(e.pixelEnabled){var a=(0,d.getUserSyncParams)(r,n,i);a=Object.keys(a).length?"&".concat((0,s.formatQS)(a)):"",o.push({type:"image",url:"https://sync.srv.stackadapt.com/sync?nid=pjs"+a})}return o}};(0,i.registerBidder)(l),(0,n.registerModule)("stackadaptBidAdapter")},4943:function(e,t,r){"use strict";var n=r(2100)(r(5794)),i=r(7045),o=r(4700),a=r(523),s=r(1122),d=r(4585),c=r(9762),u=r(5572);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,n.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var f="teads",g=(0,s.getStorageManager)({bidderCode:f});function v(e){var t,r,n,i,a,s,d,c,u,l,p={},f=e.params.placementId,g=e.params.pageId,v=null==e||null==(u=e.ortb2Imp)||null==(u=u.ext)?void 0:u.gpid,m=null==e||null==(l=e.mediaTypes)||null==(l=l.video)?void 0:l.plcmt;return t=e,p.sizes=(0,o.parseSizesInput)((s=null==(r=t)||null==(n=r.mediaTypes)||null==(n=n.video)?void 0:n.playerSize,d=null==r||null==(i=r.mediaTypes)||null==(i=i.video)?void 0:i.sizes,c=null==r||null==(a=r.mediaTypes)||null==(a=a.banner)?void 0:a.sizes,(0,o.isArray)(c)||(0,o.isArray)(s)||(0,o.isArray)(d)?[c,d,s].reduce(function(e,t){return(0,o.isArray)(t)&&((0,o.isArray)(t[0])?t.forEach(function(t){e.push(t)}):e.push(t)),e},[]):r.sizes)),p.bidId=(0,o.getBidIdParameter)("bidId",e),p.bidderRequestId=(0,o.getBidIdParameter)("bidderRequestId",e),p.placementId=parseInt(f,10),p.pageId=parseInt(g,10),p.adUnitCode=(0,o.getBidIdParameter)("adUnitCode",e),p.transactionId=(0,o.getBidIdParameter)("adUnitId",e),v&&(p.gpid=v),m&&(p.videoPlcmt=m),p}function m(e){return parseInt(e)>0}(0,a.registerBidder)({code:f,gvlid:132,supportedMediaTypes:["video","banner"],isBidRequestValid:function(e){var t=!1;if(void 0!==e.params){var r=m(e.params.placementId),n=m(e.params.pageId);t=r&&n}return t||(0,o.logError)("Teads placementId and pageId parameters are required. Bid aborted."),t},buildRequests:function(e,t){var r,n,i,a,s,d,l,f,m,h,b,y,A,I=e.map(v),E=window.top,S=p(p({referrer:(n="",(r=t)&&r.refererInfo&&r.refererInfo.page&&(n=r.refererInfo.page),n),pageReferrer:document.referrer,pageTitle:(function(){try{var e=window.top.document.querySelector('meta[property="og:title"]');return window.top.document.title||e&&e.content||""}catch(e){var t=document.querySelector('meta[property="og:title"]');return document.title||t&&t.content||""}})().slice(0,300),pageDescription:(function(){var e;try{e=window.top.document.querySelector('meta[name="description"]')||window.top.document.querySelector('meta[property="og:description"]')}catch(t){e=document.querySelector('meta[name="description"]')||document.querySelector('meta[property="og:description"]')}return e&&e.content||""})().slice(0,300),networkBandwidth:(i=window.navigator)&&i.connection&&i.connection.downlink>=0?i.connection.downlink.toString():"",networkQuality:null!=(s=null==(d=(a=window.navigator).connection||a.mozConnection||a.webkitConnection)?void 0:d.effectiveType)?s:"",timeToFirstByte:(0,u.getTimeToFirstByte)(window),data:I,domComplexity:null!=(f=null==(l=document)||null==(m=l.querySelectorAll("*"))?void 0:m.length)?f:-1,device:(null==t||null==(h=t.ortb2)?void 0:h.device)||{},deviceWidth:screen.width,deviceHeight:screen.height,devicePixelRatio:E.devicePixelRatio,screenOrientation:null==(b=screen.orientation)?void 0:b.type,historyLength:(0,c.getHLen)(),viewportHeight:(0,o.getWinDimensions)().visualViewport.height,viewportWidth:(0,o.getWinDimensions)().visualViewport.width,hardwareConcurrency:void 0,deviceMemory:void 0,hb_version:"9.40.0"},function(e){var t={unifiedId2:"uid2.id",liveRampId:"idl_env",lotamePanoramaId:"lotamePanoramaId",id5Id:"id5id.uid",criteoId:"criteoId",yahooConnectId:"connectId",quantcastId:"quantcastId",epsilonPublisherLinkId:"publinkId",publisherFirstPartyViewerId:"pubcid",merkleId:"merkleId.id",kinessoId:"kpuid"},r={};for(var n in t){var i=t[n],a=(0,o.deepAccess)(e,"0.userId.".concat(i));a&&(r[n]=a)}return r}(e)),{},{outbrainId:g.getDataFromLocalStorage("OB-USER-TOKEN")},function(e){var t,r=null==e||null==(t=e[0])||null==(t=t.userId)?void 0:t.teadsId;if(r)return{firstPartyCookieTeadsId:r};if(g.cookiesAreEnabled(null)){var n=g.getCookie("_tfpvi",null);if(n)return{firstPartyCookieTeadsId:n}}return{}}(e)),O=e[0];O.schain&&(S.schain=O.schain);var _=t.gppConsent;if(t&&_){var T="string"==typeof _.gppString,w=Array.isArray(_.applicableSections)&&_.applicableSections.every(function(e){return"number"==typeof e});S.gpp={consentString:T?_.gppString:"",applicableSectionIds:w?_.applicableSections:[]}}var C=t.gdprConsent;if(t&&C){var x,P,D,R="boolean"==typeof C.gdprApplies,k="string"==typeof C.consentString,j=R?(x=C.gdprApplies,P=C.vendorData,D=12,x?P&&!P.isServiceSpecific&&(D=11):D=0,D):22;S.gdpr_iab={consent:k?C.consentString:"",status:j,apiVersion:C.apiVersion}}t&&t.uspConsent&&(S.us_privacy=t.uspConsent);var N=null==O||null==(y=O.ortb2)||null==(y=y.device)?void 0:y.sua;N&&(S.userAgentClientHints=N);var B=null==t||null==(A=t.ortb2)||null==(A=A.regs)||null==(A=A.ext)?void 0:A.dsa;return B&&(S.dsa=B),{method:"POST",url:"https://a.teads.tv/hb/bid-request",data:JSON.stringify(S)}},interpretResponse:function(e,t){if(!(e=e.body).responses)return[];var r=(0,d.isAutoplayEnabled)();return e.responses.filter(function(e){return!e.needAutoplay||r}).map(function(e){var t,r={cpm:e.cpm,width:e.width,height:e.height,currency:e.currency,netRevenue:!0,ttl:e.ttl,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]},ad:e.ad,requestId:e.bidId,creativeId:e.creativeId,placementId:e.placementId};return e.dealId&&(r.dealId=e.dealId),null!=e&&null!=(t=e.ext)&&t.dsa&&(r.meta.dsa=e.ext.dsa),r})}}),(0,i.registerModule)("teadsBidAdapter")},8555:function(e,t,r){"use strict";var n=r(7045),i=r(4700),o=r(7316),a=r(2508),s=r(1122),d=r(4840),c="teadsId",u="_tfpvi",l=(0,s.getStorageManager)({moduleType:d.MODULE_TYPE_UID,moduleName:c});(0,a.submodule)("userId",{name:c,gvlid:132,decode:function(e){return{teadsId:e}},getId:function(e,t){return{callback:function(r){var n=function(e,t){var r,n=function(e){var t,r=null==e||null==(t=e.params)?void 0:t.pubId,n="PUB_";return(0,i.isNumber)(r)?n+r.toString():(0,i.isStr)(r)&&parseInt(r)?n+r:""}(e),o=(r=l.cookiesAreEnabled(null)?l.getCookie(u,null):null,(0,i.isStr)(r)?r:""),a=function(e){var t=null==e?void 0:e.gdprApplies;return!0===t?12:22*(!1!==t)}(null==t?void 0:t.gdpr),s=function(e){var t=null==e?void 0:e.consentString;return(0,i.isStr)(t)?t:""}(null==t?void 0:t.gdpr),d=function(e){return(0,i.isStr)(e)?e:""}(null==t?void 0:t.usp),c=function(e){switch(e){case 0:return 0;case 22:return 220;case 12:return 120;default:return -1}}(a),p={analytics_tag_id:n,tfpvi:o,gdpr_consent:s,gdpr_status:a,gdpr_reason:c,ccpa_consent:d,sv:"prebid-v1"},f=new URLSearchParams;for(var g in p)f.append(g,p[g]);return"https://at.teads.tv/fpc?"+f.toString()}(e,t);(0,o.ajax)(n,{success:function(e,t){if(t&&200===t.status)if((0,i.isStr)(e)&&!(0,i.isEmpty)(e)){var n,o=(n=31536e6,new Date((0,i.timestamp)()+n).toUTCString());l.setCookie(u,e,o),r(e)}else l.setCookie(u,"","Thu, 01 Jan 1970 00:00:01 GMT"),r();else(0,i.logInfo)("".concat(c,": Server error while fetching ID")),r()},error:function(e){(0,i.logError)("".concat(c,": ID fetch encountered an error"),e),r()}},void 0,{method:"GET"})}}},eids:{teadsId:{source:"teads.com",atype:1}}}),(0,n.registerModule)("teadsIdSystem")},1035:function(e,t,r){"use strict";var n=r(2100),i=n(r(5794)),o=n(r(939)),a=n(r(5881)),s=r(7045),d=r(4700),c=r(2339),u=r(2508),l=r(6102),p=r(9926),f=r(1122),g=r(1617),v=r(3364),m=r(1851),h=r(2887),b=r(4840),y=!1,A=[],I=(0,f.getCoreStorageManager)("topicsFpd"),E="prebid:topics",S="lastUpdated",O={1:600,2:601,3:602,4:603};function _(e,t){return t.reduce(function(t,r){var n=r[e];return t.hasOwnProperty(n)||(t[n]=[]),t[n].push(r),t},{})}function T(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O;return Object.entries(_("taxonomyVersion",t)).filter(function(e){var t=(0,a.default)(e,1)[0];return!!r.hasOwnProperty(t)||((0,d.logWarn)('Unrecognized taxonomyVersion from Topics API: "'.concat(t,'"; topic will be ignored')),!1)}).flatMap(function(t){var n=(0,a.default)(t,2),i=n[0];return Object.entries(_("modelVersion",n[1])).map(function(t){var n=(0,a.default)(t,2),o=n[0],s=n[1],d={ext:{segtax:r[i],segclass:o},segment:s.map(function(e){return{id:e.topic.toString()}})};return null!=e&&(d.name=e),d})})}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return"browsingTopics"in e&&e.featurePolicy.allowsFeature("browsing-topics")}var C=(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=null;try{w(e)&&(t=l.PbPromise.resolve(e.browsingTopics()))}catch(e){(0,d.logError)("Could not call topics API",e)}return null==t&&(t=l.PbPromise.resolve([])),t})().then(function(e){return T((0,c.getRefererInfo)().domain,e)});function x(e){if(e&&e.data)try{var t=(0,d.safeJSONParse)(e.data);if((0,g.includes)(A,e.origin)&&t&&t.segment&&!(0,d.isEmpty)(t.segment.topics)){var r=t.segment,n=r.domain,i=r.topics,o=r.bidder,a=T(n,i);a&&P(o,a)}}catch(e){}}function P(e,t){var r=new Map((0,d.safeJSONParse)(I.getDataFromLocalStorage(E))),n=(0,i.default)({},S,new Date().getTime());t.forEach(function(e){n[e.ext.segclass]=e}),r.set(e,n),I.setDataInLocalStorage(E,JSON.stringify((0,o.default)(r)))}function D(e,t){return Math.ceil((new Date().getTime()-e)/864e5)>t}(0,u.submodule)("firstPartyData",{name:"topics",queue:1,processFpd:function(e,t){var r=t.global,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.data;return y||(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(w(e)){var t=p.config.getConfig("userSync.topics");if(t){window.addEventListener("message",x,!1);var r,n,i=(r=t.bidders||[],n=t.maxTopicCaller||1,(0,o.default)(r).sort(function(){return .5-Math.random()}).slice(0,n));i&&i.forEach(function(t){var r=t.bidder,n=t.iframeURL,i=t.fetchUrl,o=t.fetchRate;if(r&&n){var a,s=e.createElement("iframe");s.name="ifrm_".concat(r),s.src="".concat(n,"?bidder=").concat(r),s.style.display="none",a=new URL(n).origin,A.push(a),n&&e.documentElement.appendChild(s)}if(r&&i){var c=new Map((0,d.safeJSONParse)(I.getDataFromLocalStorage(E))).get(r);(!c||c&&D(c[S],o||1))&&window.fetch("".concat(i,"?bidder=").concat(r),{browsingTopics:!0}).then(function(e){return e.json()}).then(function(e){if(e&&e.segment&&!(0,d.isEmpty)(e.segment.topics)){var t=e.segment,r=t.domain,n=t.topics,i=t.bidder,o=T(r,n);o&&P(i,o)}})}})}else(0,d.logWarn)("Topics config not defined under userSync Object")}}(),y=!0),(void 0===i?C:i).then(function(e){return(e=[].concat(e,function(){var e=[],t=p.config.getConfig("userSync.topics"),r=(null==t?void 0:t.bidders)||[],n=new Map((0,d.safeJSONParse)(I.getDataFromLocalStorage(E)));return n&&n.forEach(function(t,i){var a=r.find(function(e){return i===e.bidder});a&&(0,v.isActivityAllowed)(m.ACTIVITY_ENRICH_UFPD,(0,h.activityParams)(b.MODULE_TYPE_BIDDER,i))&&(D(t[S],(null==a?void 0:a.expiry)||21)?(n.delete(i),I.setDataInLocalStorage(E,JSON.stringify((0,o.default)(n)))):Object.keys(t).forEach(function(r){r!==S&&e.push(t[r])}))}),e}())).length&&(0,d.mergeDeep)(r,{user:{data:e}}),{global:r}})}}),(0,s.registerModule)("topicsFpdModule")},9325:function(e,t,r){"use strict";var n=r(2100),i=r(8287),o=n(r(5794)),a=r(7045),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(4700)),d=r(4607),c=r(523),u=r(9926),l=r(1122),p=r(426);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m="triplelift",h=null,b=null,y=(0,l.getStorageManager)({bidderCode:m}),A={gvlid:28,code:m,supportedMediaTypes:[d.BANNER,d.VIDEO],isBidRequestValid:function(e){return void 0!==e.params.inventoryCode},buildRequests:function(e,t){var r,n,i,o,a,d,c,l,f,g,m,A,S="https://tlx.3lift.com/header/auction?",T=(r=e,n=t,o={},a=r[0].schain,d=function(e){var t={},r={},n={},i=e.ortb2||{},o=function(){var e=y.getDataFromLocalStorage("opecloud_ctx");if(!e)return null;try{return JSON.parse(e)}catch(e){return(0,s.logError)("Triplelift: error parsing JSON: ",e),null}}(),a=Object.assign({},i.site),d=Object.assign({},i.user);if(o){d.data=d.data||[];try{d.data.push({name:"www.1plusx.com",ext:o})}catch(e){(0,s.logError)("Triplelift: error adding 1plusX segments: ",e)}}return O(r,a),O(n,d),(0,s.isEmpty)(r)||(t.context=r),(0,s.isEmpty)(n)||(t.user=n),t}(n),o.imp=r.map(function(e,t){var r,n,i,o={id:t,tagid:e.params.inventoryCode,floor:function(e){var t=null;if("function"==typeof e.getFloor)try{var r=e.getFloor({currency:"USD",mediaType:I(e)?"video":"banner",size:"*"});s.isPlainObject(r)&&"USD"===r.currency&&!isNaN(parseFloat(r.floor))&&(t=parseFloat(r.floor))}catch(e){(0,s.logError)("Triplelift: getFloor threw an error: ",e)}return null!==t?t:e.params.floor}(e)};return I(e)&&(o.video=function(e){var t=v(v({},e.params.video),e.mediaTypes.video);try{t.w||(t.w=t.playerSize[0][0]),t.h||(t.h=t.playerSize[0][1])}catch(e){(0,s.logWarn)("Video size not defined",e)}return t.playbackmethod&&Number.isInteger(t.playbackmethod)&&(t.playbackmethod=Array.from(String(t.playbackmethod),Number)),delete t.playerSize,t}(e)),e.mediaTypes.banner&&!E(e)&&(o.banner={format:e.sizes.filter(_).map(function(e){return{w:e[0],h:e[1]}})}),!(0,s.isEmpty)(e.ortb2Imp)&&(r=e.ortb2Imp,n={},O(i={},r.ext),(0,s.isEmpty)(i)||(n.context=i),o.fpd=n,(0,s.isEmpty)(e.ortb2Imp.ext)||(o.ext=v({},e.ortb2Imp.ext))),o}),c=[],r[0].userIdAsEids&&(o.user={ext:{eids:s.deepAccess(r[0],"userIdAsEids")}}),m=(l=a,f=d,g={},(0,s.isEmpty)(l)||(g.schain=v({},l)),(0,s.isEmpty)(f)||(g.fpd=v({},f)),g),(0,s.isEmpty)(m)||(o.ext=m),null!=n&&null!=(i=n.ortb2)&&null!=(i=i.regs)&&i.gpp&&(o.regs=Object.assign({},n.ortb2.regs)),null!=n&&n.ortb2&&(o.ext.ortb2=Object.assign({},n.ortb2)),o);if(S=(0,p.tryAppendQueryString)(S,"lib","prebid"),S=(0,p.tryAppendQueryString)(S,"v","9.40.0"),t&&t.refererInfo){var w=t.refererInfo.page;S=(0,p.tryAppendQueryString)(S,"referrer",w)}return t&&t.timeout&&(S=(0,p.tryAppendQueryString)(S,"tmax",t.timeout)),t&&t.gdprConsent&&(h=void 0===t.gdprConsent.gdprApplies||t.gdprConsent.gdprApplies,S=(0,p.tryAppendQueryString)(S,"gdpr",h.toString()),void 0!==t.gdprConsent.consentString&&(b=t.gdprConsent.consentString,S=(0,p.tryAppendQueryString)(S,"cmp_cs",b))),t&&t.uspConsent&&(S=(0,p.tryAppendQueryString)(S,"us_privacy",t.uspConsent)),null!=t&&null!=(A=t.paapi)&&A.enabled&&(S=(0,p.tryAppendQueryString)(S,"fledge",t.paapi.enabled)),!0===u.config.getConfig("coppa")&&(S=(0,p.tryAppendQueryString)(S,"coppa",!0)),S.lastIndexOf("&")===S.length-1&&(S=S.substring(0,S.length-1)),(0,s.logMessage)("tlCall request built: "+S),{method:"POST",url:S,data:T,bidderRequest:t}},interpretResponse:function(e,t){var r=t.bidderRequest,n=e.body.bids||[],i=e.body.paapi||[];if(n=n.map(function(e){var t,n,i,o,a,s,d,c;return t=r,i={},o=(n=e).width||1,a=n.height||1,s=n.deal_id||"",d=n.crid||"",c=t.bids[n.imp_id],0!=n.cpm&&n.ad&&(i={requestId:c.bidId,cpm:n.cpm,width:o,height:a,netRevenue:!0,ad:n.ad,creativeId:d,dealId:s,currency:"USD",ttl:300,tl_source:n.tl_source,meta:{}},I(c)&&"video"===n.media_type&&(i.vastXml=n.ad,i.mediaType="video",i.ttl=3600),n.advertiser_name&&(i.meta.advertiserName=n.advertiser_name),n.adomain&&n.adomain.length&&(i.meta.advertiserDomains=n.adomain),n.tl_source&&"hdx"==n.tl_source&&(I(c)&&"video"===n.media_type?i.meta.mediaType="video":i.meta.mediaType="banner"),n.tl_source&&"tlx"==n.tl_source&&(i.meta.mediaType="native"),d&&(i.meta.networkId=d.slice(0,d.indexOf("_")))),i}),!(i.length>0))return n;var o=i.map(function(e){return{bidId:r.bids[e.imp_id].bidId,config:e.auctionConfig}});return(0,s.logMessage)("Response with FLEDGE:",{bids:n,fledgeAuctionConfigs:o}),{bids:n,paapi:o}},getUserSyncs:function(e,t,r,n,i){var o=function(e){if(e){if(e.iframeEnabled)return"iframe";if(e.pixelEnabled)return"image"}}(e);if(o){var a="https://eb2.3lift.com/sync?";return"image"===o&&(a=(0,p.tryAppendQueryString)(a,"px",1),a=(0,p.tryAppendQueryString)(a,"src","prebid")),(null!==b||h)&&(a=(0,p.tryAppendQueryString)(a,"gdpr",h),a=(0,p.tryAppendQueryString)(a,"cmp_cs",b)),n&&(a=(0,p.tryAppendQueryString)(a,"us_privacy",n)),i&&(i.gppString&&(a=(0,p.tryAppendQueryString)(a,"gpp",i.gppString)),i.applicableSections&&0!==i.applicableSections.length&&(a=(0,p.tryAppendQueryString)(a,"gpp_sid",i.applicableSections.filter(function(e){return Number.isInteger(e)}).join(",")))),[{type:o,url:a}]}}};function I(e){var t;return S(e)&&(E(e)||S(t=e)&&"outstream"===t.mediaTypes.video.context.toLowerCase())}function E(e){return S(e)&&"instream"===e.mediaTypes.video.context.toLowerCase()}function S(e){return e.mediaTypes.video&&e.mediaTypes.video.context}function O(e,t){(0,s.isEmpty)(t)||Object.keys(t).forEach(function(r){null!=t[r]&&(e[r]=t[r])})}function _(e){return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}(0,c.registerBidder)(A),(0,a.registerModule)("tripleliftBidAdapter")},7948:function(e,t,r){"use strict";var n=r(2100),i=r(8287),o=n(r(5794)),a=r(7045),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(4700)),d=r(9926),c=r(523),u=r(4607),l=r(899);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(e){if(e.params.bidfloor)return e.params.bidfloor;if(!s.isFn(e.getFloor))return null;var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return s.isPlainObject(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null}var m={code:"ttd",gvlid:21,aliases:["thetradedesk"],supportedMediaTypes:[u.BANNER,u.VIDEO],isBidRequestValid:function(e){if(!e||!e.params)return s.logWarn("ttd: Missing bid parameters"),!1;if(!e.params.supplySourceId)return s.logWarn("ttd: Missing required parameter params.supplySourceId"),!1;if(!/^[\w+]+$/.test(e.params.supplySourceId))return s.logWarn("ttd: supplySourceId must only contain alphabetic characters"),!1;if(!e.params.publisherId)return s.logWarn("ttd: Missing required parameter params.publisherId"),!1;if(e.params.publisherId.length>32)return s.logWarn("ttd: params.publisherId must be 32 characters or less"),!1;if(e.params.bidfloor&&isNaN(parseFloat(e.params.bidfloor)))return!1;var t=s.deepAccess(e,"ortb2Imp.ext.gpid");if(!e.params.placementId&&!t)return s.logWarn("ttd: one of params.placementId or gpid (via the GPT module https://docs.prebid.org/dev-docs/modules/gpt-pre-auction.html) must be passed"),!1;var r=s.deepAccess(e,"mediaTypes.banner"),n=s.deepAccess(e,"mediaTypes.video");if(!r&&!n)return s.logWarn("ttd: one of mediaTypes.banner or mediaTypes.video must be passed"),!1;if(n){if(!n.maxduration||!s.isInteger(n.maxduration))return s.logWarn("ttd: mediaTypes.video.maxduration must be set to the maximum video ad duration in seconds"),!1;if(!n.api||0===n.api.length)return s.logWarn("ttd: mediaTypes.video.api should be an array of supported api frameworks. See the Open RTB v2.5 spec for valid values"),!1;if(!n.mimes||0===n.mimes.length)return s.logWarn("ttd: mediaTypes.video.mimes should be an array of supported mime types"),!1;if(!n.protocols)return s.logWarn("ttd: mediaTypes.video.protocols should be an array of supported protocols. See the Open RTB v2.5 spec for valid values"),!1}return!0},buildRequests:function(e,t){var r=t.ortb2||{},n=t.ortb2Imp||{},i={id:t.bidderRequestId,imp:e.map(function(e){var t,r,n,i,o,a,d,c,l,p,f,g,m,h,b,y,A,I,E,S,O,_,T,w,C,x,P,D,R,k,j,N,B,U;return t={id:e.bidId},(r=s.deepAccess(e,"ortb2Imp.ext.gpid")||e.params.placementId)&&(t.tagid=r),n=s.deepAccess(e,"mediaTypes.video"),i=s.deepAccess(e,"mediaTypes.banner"),o={},i&&(o[u.BANNER]=(p=(l=(c=e).mediaTypes.banner.sizes,s.parseSizesInput(l).filter(function(e){return e}).map(function(e){return e.split("x")}).map(function(e){return{width:parseInt(e[0]),height:parseInt(e[1])}})).map(function(e){return{w:e.width,h:e.height}}),f=parseInt(s.deepAccess(c,"mediaTypes.banner.pos")),g=s.deepAccess(c,"params.banner.expdir"),m={},f&&(m.pos=f),g&&Array.isArray(g)&&(m.expdir=g),h=Object.assign({w:p[0].w,h:p[0].h,format:p},m),(b=s.deepAccess(c,"ortb2Imp.banner.battr"))&&(h.battr=b),h)),n&&(o[u.VIDEO]=(y=e,A=s.deepAccess(y,"mediaTypes.video.minduration"),I=s.deepAccess(y,"mediaTypes.video.maxduration"),E=s.deepAccess(y,"mediaTypes.video.playerSize"),S=s.deepAccess(y,"mediaTypes.video.api"),O=s.deepAccess(y,"mediaTypes.video.mimes"),_=s.deepAccess(y,"mediaTypes.video.placement"),T=s.deepAccess(y,"mediaTypes.video.plcmt"),w=s.deepAccess(y,"mediaTypes.video.protocols"),C=s.deepAccess(y,"mediaTypes.video.playbackmethod"),x=s.deepAccess(y,"mediaTypes.video.pos"),P=s.deepAccess(y,"mediaTypes.video.startdelay"),D=s.deepAccess(y,"mediaTypes.video.skip"),R=s.deepAccess(y,"mediaTypes.video.skipmin"),k=s.deepAccess(y,"mediaTypes.video.skipafter"),j=s.deepAccess(y,"mediaTypes.video.minbitrate"),N=s.deepAccess(y,"mediaTypes.video.maxbitrate"),A&&s.isInteger(A)||(A=0),B={minduration:A,maxduration:I,api:S,mimes:O,placement:_,protocols:w},void 0!==E&&(s.isArray(E[0])?(B.w=parseInt(E[0][0]),B.h=parseInt(E[0][1])):s.isNumber(E[0])&&(B.w=parseInt(E[0]),B.h=parseInt(E[1]))),C&&(B.playbackmethod=C),T&&(B.plcmt=T),x&&(B.pos=x),P&&s.isInteger(P)&&(B.startdelay=P),D&&(0===D||1===D)&&(B.skip=D),R&&s.isInteger(R)&&(B.skipmin=R),k&&s.isInteger(k)&&(B.skipafter=k),j&&s.isInteger(j)&&(B.minbitrate=j),N&&s.isInteger(N)&&(B.maxbitrate=N),(U=s.deepAccess(y,"ortb2Imp.video.battr"))&&(B.battr=U),B)),Object.assign(t,o),(a=v(e))&&(t.bidfloor=parseFloat(a),t.bidfloorcur="USD"),d=s.deepAccess(e,"ortb2Imp.secure"),t.secure=(0,s.isNumber)(d)?d:1,s.mergeDeep(t,e.ortb2Imp),t}),site:(o=s.mergeDeep({page:s.deepAccess(t,"refererInfo.page"),ref:s.deepAccess(t,"refererInfo.ref"),publisher:{id:s.deepAccess(t,"bids.0.params.publisherId")}},r.site),(a=t.refererInfo.domain)&&s.deepSetValue(o,"publisher.domain",a),o),device:(c=navigator.language||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage,p={ua:navigator.userAgent,dnt:+!!s.getDNT(),language:c,connectiontype:(0,l.getConnectionType)()},s.mergeDeep(p,r.device),p),user:(f={},t.gdprConsent&&s.deepSetValue(f,"ext.consent",t.gdprConsent.consentString),s.isStr(s.deepAccess(t,"bids.0.userId.tdid"))&&(f.buyeruid=t.bids[0].userId.tdid),(m=s.deepAccess(t,"bids.0.userIdAsEids"))&&m.length&&s.deepSetValue(f,"ext.eids",m),s.mergeDeep(f,r.user),f),at:1,cur:["USD"],regs:(b={},t.gdprConsent&&"boolean"==typeof t.gdprConsent.gdprApplies&&s.deepSetValue(b,"ext.gdpr",+!!t.gdprConsent.gdprApplies),t.uspConsent&&s.deepSetValue(b,"ext.us_privacy",t.uspConsent),!0===d.config.getConfig("coppa")&&(b.coppa=1),null!=(h=t.ortb2)&&h.regs&&s.mergeDeep(b,t.ortb2.regs),b),source:(A={tid:null==t||null==(y=t.ortb2)||null==(y=y.source)?void 0:y.tid},e[0].schain&&s.deepSetValue(A,"ext.schain",e[0].schain),A),ext:{ttdprebid:{ver:"TTD-PREBID-2024.07.28",pbjs:"9.40.0",keywords:null!=(I=r.site)&&I.keywords?r.site.keywords.split(",").map(function(e){return e.trim()}):[]}}};if(r&&r.bcat&&(i.bcat=r.bcat),r&&r.badv&&(i.badv=r.badv),r&&r.app&&(i.app=r.app),r&&r.pmp&&r.pmp.deals&&r.pmp.deals.length){var o,a,c,p,f,m,h,b,y,A,I,E,S=null==t||null==(E=t.bids[0])?void 0:E.mediaTypes,O=r.pmp.deals.filter(function(e){return null!=S&&S.banner?!e.isVideo:e.isVideo}).map(function(e){return g({},e)});if(O.length){var _=v(e[0]),T=g(g({deals:O},r.pmp.ext&&{ext:r.pmp.ext}),r.pmp.private_auction&&{private_auction:r.pmp.private_auction});T.deals[0].bidfloor=Math.max(O[0].bidfloor,_),T.deals.forEach(function(e){delete e.isVideo}),i.imp.forEach(function(e){e.pmp=g(g({},T),null==n?void 0:n.pmp)})}}return{method:"POST",url:(t.bids[0].params.useHttp2?"https://d2.adsrvr.org/bid/bidder/":"https://direct.adsrvr.org/bid/bidder/")+t.bids[0].params.supplySourceId,data:i,options:{withCredentials:!0}}},interpretResponse:function(e,t){var r=s.deepAccess(e,"body.seatbid"),n=s.deepAccess(e,"body.cur");if(!r||0===r.length)return[];var i=[],o=s.deepAccess(t,"data.imp");return r.forEach(function(e){e.bid.forEach(function(e){var t=o.find(function(t){return t.id===e.impid}),r=e.price||0,a={requestId:e.impid,cpm:r,creativeId:e.crid,dealId:e.dealid||null,currency:n||"USD",netRevenue:!0,ttl:e.ttl||360,meta:{}};e.adomain&&e.adomain.length>0&&(a.meta.advertiserDomains=e.adomain),1===e.ext.mediatype?Object.assign(a,{width:e.w,height:e.h,ad:s.replaceAuctionPrice(e.adm,r),mediaType:u.BANNER}):2===e.ext.mediatype&&(Object.assign(a,{width:t.video.w,height:t.video.h,mediaType:u.VIDEO}),(e.dur||e.duration)&&(a.duration=e.dur||e.duration),e.nurl?a.vastUrl=s.replaceAuctionPrice(e.nurl,r):a.vastXml=s.replaceAuctionPrice(e.adm,r)),i.push(a)})}),i},getUserSyncs:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=[],o="&gdpr=".concat(+!!r.gdprApplies,"&gdpr_consent=").concat(encodeURIComponent(r.consentString)),a="".concat("https://match.adsrvr.org","/track/usersync?us_privacy=").concat(encodeURIComponent(n)).concat(o);return e.pixelEnabled?i.push({type:"image",url:a+"&ust=image"}):e.iframeEnabled&&i.push({type:"iframe",url:a+"&ust=iframe"}),i}};(0,c.registerBidder)(m),(0,a.registerModule)("ttdBidAdapter")},2392:function(e,t,r){"use strict";r(2100)(r(5794));var n=r(7045),i=r(4700),o=r(2508),a=r(1122),s=r(4840),d=r(8738),c=r(4051),u="uid2",l=d.Uid2CodeVersion,p="PrebidJS-".concat("9.40.0","-UID2Module-").concat(l),f="UID2: ";function g(e,t){return function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(void 0,[t+" "].concat(n))}}var v=g(i.logInfo,f),m=g(i.logWarn,f),h=(0,a.getStorageManager)({moduleType:s.MODULE_TYPE_UID,moduleName:u}),b={name:u,decode:function(e){var t,r="string"==typeof(t=e)?(v("Found server-only token. Refresh is unavailable for this token."),{uid2:{id:t}}):"optout"===t.latestToken?(v("Found optout token.  Refresh is unavailable for this token."),{uid2:{optout:!0}}):Date.now()<t.latestToken.identity_expires?{uid2:{id:t.latestToken.advertising_token}}:null;return v("UID2 decode returned",r),r},getId:function(e,t){if((null==t||null==(r=t.gdpr)?void 0:r.gdprApplies)===!0)return void m("UID2 is not intended for use where GDPR applies. The UID2 module will not run.");var r,n,i,o,a,s,u,l,f,g,b={apiBaseUrl:null!=(n=null==e||null==(i=e.params)?void 0:i.uid2ApiBase)?n:"https://prod.uidapi.com",paramToken:null==e||null==(o=e.params)?void 0:o.uid2Token,serverCookieName:null!=(a=null==e||null==(s=e.params)?void 0:s.uid2Cookie)?a:null==e||null==(u=e.params)?void 0:u.uid2ServerCookie,storage:null!=(l=null==e||null==(f=e.params)?void 0:f.storage)?l:"localStorage",clientId:p,internalStorage:"__uid2_advertising_token"};null!=e&&null!=(g=e.params)&&g.declareBridged&&(c.UID2_EIDS.uid2.bridged=!0),v("UID2 configuration loaded and mapped.",b);var y=(0,d.Uid2GetId)(b,h,v,m);return v("UID2 getId returned",y),y},eids:c.UID2_EIDS};(0,o.submodule)("userId",b),(0,n.registerModule)("uid2IdSystem")},8738:function(e,t,r){"use strict";var n,i=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.Uid2CodeVersion=t.Uid2ApiClient=void 0,t.Uid2GetId=function(e,t,r,i){var o,a,s,d,c,u=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.apply(void 0,[r].concat(t))},l=null,p="cookie"!==e.storage,g=new v(t,p,e.internalStorage,u);u("Module is using ".concat(p?"local storage":"cookies"," for internal storage."));var h=n&&n.isCSTGOptionsValid(e.cstg,i);h?(u("Module is using client-side token generation."),l=null):e.paramToken?u("Read token from params",l=e.paramToken):e.serverCookieName&&u("Read token from server-supplied cookie",l=g.readProvidedCookie(e.serverCookieName));var b=g.getStoredValueWithFallback();if(u("Loaded module-stored tokens:",b),b&&"string"==typeof b){if(!l&&!h)return u("Returning legacy cookie value."),{id:b};u("Discarding superseded legacy cookie."),b=null}l&&b&&(null==(d=b.originalToken)?void 0:d.advertising_token)!==l.advertising_token&&(u("Server supplied new token - ignoring stored value.",null==(c=b.originalToken)?void 0:c.advertising_token,l.advertising_token),b=null);var y=!(null!=(o=b)&&o.latestToken)||l&&l.identity_expires>b.latestToken.identity_expires,A=y?l:b.latestToken;if(u("UID2 module selected latest token",y,A),!A||Date.now()>A.refresh_expires)return u("Newest available token is expired and not refreshable."),{id:null};if(Date.now()>A.identity_expires){var I=m(e.apiBaseUrl,A,e.clientId,g,u,i);return u("Token is expired but can be refreshed, attempting refresh."),{callback:function(e){I.then(function(t){u("Refresh reponded, passing the updated token on.",t),e(t)})}}}Date.now()>A.refresh_from&&(u("Refreshing token in background with low priority."),m(e.apiBaseUrl,A,e.clientId,g,u,i));var E={originalToken:null!=(a=l)?a:null==(s=b)?void 0:s.originalToken,latestToken:A};return g.storeValue(E),{id:E}},t.Uid2StorageManager=void 0,t.extractIdentityFromParams=function(e){for(var t=0,r=["emailHash","phoneHash","email","phone"];t<r.length;t++){var n=r[t];if(e.hasOwnProperty(n))return(0,o.default)({},n,e[n])}return{}},i(r(4602));var o=i(r(5794));i(r(7583));var a=i(r(7586)),s=i(r(1770)),d=i(r(939)),c=i(r(8287)),u=r(7045),l=r(7316);function p(e){return"UID2 shared library - ".concat(e)}function f(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];e.apply(void 0,[p(r[0])].concat((0,d.default)(r.slice(1))))}r(4700),t.Uid2CodeVersion="1.1";var g=t.Uid2ApiClient=(0,s.default)(function e(t,r,n,i){(0,a.default)(this,e),this._baseUrl=t.baseUrl,this._clientVersion=r,this._logInfo=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return f.apply(void 0,[n].concat(t))},this._logWarn=i},[{key:"createArrayBuffer",value:function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}},{key:"hasStatusResponse",value:function(e){return"object"===(0,c.default)(e)&&e&&e.status}},{key:"isValidRefreshResponse",value:function(e){var t;return this.hasStatusResponse(e)&&("optout"===e.status||"expired_token"===e.status||"success"===e.status&&e.body&&(t=e.body,!!("object"===(0,c.default)(t)&&null!==t&&t.advertising_token&&t.identity_expires&&t.refresh_from&&t.refresh_token&&t.refresh_expires)))}},{key:"ResponseToRefreshResult",value:function(e){return this.isValidRefreshResponse(e)?"success"===e.status?{status:e.status,identity:e.body}:e:p("Response didn't contain a valid status")}},{key:"callRefreshApi",value:function(e){var t,r,n=this,i=this._baseUrl+"/v2/token/refresh",o=new Promise(function(e,n){t=e,r=n});return this._logInfo("Sending refresh request",e),(0,l.ajax)(i,{success:function(i){try{if(e.refresh_response_key){n._logInfo("Decrypting refresh API response");var o=n.createArrayBuffer(atob(i));window.crypto.subtle.importKey("raw",n.createArrayBuffer(atob(e.refresh_response_key)),{name:"AES-GCM"},!1,["decrypt"]).then(function(e){n._logInfo("Imported decryption key"),window.crypto.subtle.decrypt({name:"AES-GCM",iv:o.slice(0,12),tagLength:128},e,o.slice(12)).then(function(e){var i=String.fromCharCode.apply(String,(0,d.default)(new Uint8Array(e)));n._logInfo("Decrypted to:",i);var o=JSON.parse(i),a=n.ResponseToRefreshResult(o);"string"==typeof a?r(p(a)):t(a)},function(e){return n._logWarn(p("Call to UID2 API failed"),e)})},function(e){return n._logWarn(p("Call to UID2 API failed"),e)})}else{n._logInfo("No response decryption key available, assuming unencrypted JSON");var a=JSON.parse(i),s=n.ResponseToRefreshResult(a);"string"==typeof s?r(p(s)):t(s)}}catch(e){r(p(i))}},error:function(e,i){try{n._logInfo("Error status, assuming unencrypted JSON");var o=JSON.parse(i.responseText),a=n.ResponseToRefreshResult(o);"string"==typeof a?r(p(a)):t(a)}catch(t){r(p(e))}}},e.refresh_token,{method:"POST",customHeaders:{"X-UID2-Client-Version":this._clientVersion}}),o}}]),v=t.Uid2StorageManager=(0,s.default)(function e(t,r,n,i){(0,a.default)(this,e),this._storage=t,this._preferLocalStorage=r,this._storageName=n,this._logInfo=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return f.apply(void 0,[i].concat(t))}},[{key:"readCookie",value:function(e){return this._storage.cookiesAreEnabled()?this._storage.getCookie(e):null}},{key:"readLocalStorage",value:function(e){return this._storage.localStorageIsEnabled()?this._storage.getDataFromLocalStorage(e):null}},{key:"readModuleCookie",value:function(){return this.parseIfContainsBraces(this.readCookie(this._storageName))}},{key:"writeModuleCookie",value:function(e){this._storage.setCookie(this._storageName,JSON.stringify(e),Date.now()+864e5)}},{key:"readModuleStorage",value:function(){return this.parseIfContainsBraces(this.readLocalStorage(this._storageName))}},{key:"writeModuleStorage",value:function(e){this._storage.setDataInLocalStorage(this._storageName,JSON.stringify(e))}},{key:"readProvidedCookie",value:function(e){return JSON.parse(this.readCookie(e))}},{key:"parseIfContainsBraces",value:function(e){return null!=e&&e.includes("{")?JSON.parse(e):e}},{key:"storeValue",value:function(e){this._preferLocalStorage?this.writeModuleStorage(e):this.writeModuleCookie(e)}},{key:"getStoredValueWithFallback",value:function(){var e=this._preferLocalStorage?"local storage":"cookie",t=(this._preferLocalStorage?this.readModuleStorage:this.readModuleCookie).bind(this),r=(this._preferLocalStorage?this.writeModuleStorage:this.writeModuleCookie).bind(this),n=(this._preferLocalStorage?this.readModuleCookie:this.readModuleStorage).bind(this),i=t();if(i){if("string"==typeof i){var o=n();if(o&&"object"===(0,c.default)(o))return this._logInfo("".concat(e," contained a basic token, but found a refreshable token fallback. Copying the fallback value to ").concat(e,".")),r(o),o}}else{var a=n();if(a)return this._logInfo("".concat(e," was empty, but found a fallback value.")),"object"===(0,c.default)(a)&&(this._logInfo("Copying the fallback value to ".concat(e,".")),r(a)),a}return i}}]);function m(e,t,r,n,i,o){return i("UID2 base url provided: ",e),new g({baseUrl:e},r,i,o).callRefreshApi(t).then(function(e){i("Refresh endpoint responded with:",e);var r={originalToken:t,latestToken:e.identity},o=n.getStoredValueWithFallback();return null!=o&&o.originalIdentity&&(r.originalIdentity=o.originalIdentity),n.storeValue(r),r})}(0,u.registerModule)("uid2IdSystem_shared")},3249:function(e,t,r){"use strict";var n=r(7045),i=r(4700),o=r(523),a=r(4607);function s(e){if(!e)return null;var t=e.gdprApplies?"1":"0",r=e.consentString?e.consentString:"";return"gdpr=".concat(t,"&gdprstr=").concat(r)}var d={code:"undertone",gvlid:677,supportedMediaTypes:[a.BANNER,a.VIDEO],isBidRequestValid:function(e){if(e&&e.params&&e.params.publisherId)return e.params.publisherId=parseInt(e.params.publisherId),!0},buildRequests:function(e,t){var r=(0,i.getWinDimensions)(),n=Math.max(r.document.documentElement.clientWidth,r.innerWidth||0),o=Math.max(r.document.documentElement.clientHeight,r.innerHeight||0),d={adapterVersion:"9.40.0",uids:e[0].userId,pageSize:0==n||0==o?null:[n,o]};e[0].schain&&(d.schain=e[0].schain);var c={"x-ut-hb-params":[],commons:d},u=t.refererInfo.topmostLocation,l=t.refererInfo.canonicalUrl;u&&(d.referrer=u),l&&(d.canonicalUrl=l);var p=(0,i.parseUrl)(u).hostname,f=(0,i.extractDomainFromHost)(p),g=l||u,v=e[0].params.publisherId,m="".concat("https://hb.undertone.com/hb","?pid=").concat(v,"&domain=").concat(f),h=s(t.gdprConsent);if(h&&(m+="&".concat(h)),t.uspConsent&&(m+="&ccpa=".concat(t.uspConsent)),t.gppConsent){var b,y,A=null!=(b=t.gppConsent.gppString)?b:"",I=null!=(y=t.gppConsent.applicableSections)?y:"";m+="&gpp=".concat(A,"&gpp_sid=").concat(I)}return e.map(function(e){var t={bidRequestId:e.bidId,coordinates:function(e){var t=document.getElementById(e),r=-1,n=-1;if(!t)return null;r=t.offsetLeft,n=t.offsetTop;var i=t.offsetParent;return i&&(r+=i.offsetLeft,n+=i.offsetTop),[r,n]}(e.adUnitCode),hbadaptor:"prebid",url:g,domain:f,placementId:void 0!=e.params.placementId?e.params.placementId:null,publisherId:e.params.publisherId,gpid:(0,i.deepAccess)(e,"ortb2Imp.ext.gpid",(0,i.deepAccess)(e,"ortb2Imp.ext.data.pbadslot","")),sizes:e.params.size,params:e.params},r=(0,i.deepAccess)(e,"mediaTypes.video"),n=r?a.VIDEO:a.BANNER;t.mediaType=n,t.bidfloor=function(e,t){if("function"!=typeof e.getFloor)return 0;var r=e.getFloor({currency:"USD",mediaType:t,size:"*"});return r&&"USD"===r.currency&&r.floor||0}(e,n),r&&(t.video={playerSize:(0,i.deepAccess)(e,"mediaTypes.video.playerSize")||null,streamType:(0,i.deepAccess)(e,"mediaTypes.video.context")||null,playbackMethod:(0,i.deepAccess)(e,"params.video.playbackMethod")||null,maxDuration:(0,i.deepAccess)(e,"params.video.maxDuration")||null,skippable:(0,i.deepAccess)(e,"params.video.skippable")||null,placement:(0,i.deepAccess)(e,"mediaTypes.video.placement")||null,plcmt:(0,i.deepAccess)(e,"mediaTypes.video.plcmt")||null}),c["x-ut-hb-params"].push(t)}),{method:"POST",url:m,withCredentials:!0,data:JSON.stringify(c)}},interpretResponse:function(e,t){var r=[],n=e.body;return n&&Array.isArray(n)&&n.length>0&&n.forEach(function(e){if(e.ad&&e.cpm>0){var t={requestId:e.bidRequestId,cpm:e.cpm,width:e.width,height:e.height,creativeId:e.adId,currency:e.currency,netRevenue:e.netRevenue,ttl:e.ttl||360,meta:{advertiserDomains:e.adomain?e.adomain:[]}};e.mediaType&&"video"===e.mediaType?(t.vastXml=e.ad,t.mediaType=e.mediaType):t.ad=e.ad,r.push(t)}}),r},getUserSyncs:function(e,t,r,n){var i=[],o=s(r),a="",d="";return o&&(a+="?".concat(o),d+="&".concat(o)),n&&(""!=a?a+="&":a+="?",a+="ccpa=".concat(n),d+="&ccpa=".concat(n)),e.iframeEnabled?i.push({type:"iframe",url:"https://cdn.undertone.com/js/usersync.html"+a}):e.pixelEnabled&&i.push({type:"image",url:"https://usr.undertone.com/userPixel/syncOne?id=1&of=2"+d},{type:"image",url:"https://usr.undertone.com/userPixel/syncOne?id=2&of=2"+d}),i}};(0,o.registerBidder)(d),(0,n.registerModule)("undertoneBidAdapter")},7738:function(e,t,r){"use strict";var n=r(2100)(r(5794)),i=r(7045),o=r(4700),a=r(7316),s=r(2508),d=r(9316);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var u="unifiedId",l={name:u,gvlid:21,decode:function(e){return e&&"string"==typeof e.TDID?{tdid:e.TDID}:void 0},getId:function(e){var t=e&&e.params||{};if(!t||"string"!=typeof t.partner&&"string"!=typeof t.url)return void(0,o.logError)("User ID - unifiedId submodule requires either partner or url to be defined");var r=t.url||"https://match.adsrvr.org/track/rid?ttd_pid=".concat(t.partner,"&fmt=json");return{callback:function(e){(0,a.ajax)(r,{success:function(t){var r;if(t)try{r=JSON.parse(t)}catch(e){(0,o.logError)(e)}e(r)},error:function(t){(0,o.logError)("".concat(u,": ID fetch encountered an error"),t),e()}},void 0,{method:"GET",withCredentials:!0})}}},eids:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,n.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},d.UID1_EIDS)};(0,s.submodule)("userId",l),(0,i.registerModule)("unifiedIdSystem")},4572:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.EID_CONFIG=void 0,t.createEidsArray=c,t.getEids=function(e){var t=new Map,r={};return Object.entries(e).forEach(function(e){var n=(0,i.default)(e,2),o=n[0],a=(0,n[1])();if(a){r[o]=a.idObj[o];var s,d,c=null==(d=a.submodule.eids)?void 0:d[o];"function"==typeof c&&(s=c,c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return s.apply(void 0,t.concat([a.config]))}),t.set(o,c)}}),c(r,t)};var i=n(r(5881)),o=n(r(939)),a=r(4700),s=r(9926),d=t.EID_CONFIG=new Map;function c(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,n={};function c(e){var t,r,i=JSON.stringify([null==(t=e.source)?void 0:t.toLowerCase()].concat((0,o.default)(Object.keys(e).filter(function(e){return!["uids","source"].includes(e)}).sort().map(function(t){return e[t]}))));n.hasOwnProperty(i)?(r=n[i].uids).push.apply(r,(0,o.default)(e.uids)):n[i]=e}var u=null==(t=s.config.getConfig("userSync"))?void 0:t.uid1Adsrvr;return Object.entries(e).forEach(function(e){var t,n=(0,i.default)(e,2),o=n[0],s=n[1];s=Array.isArray(s)?s:[s];var d=r.get(o);if("pubProvidedId"===o)t=(0,a.deepClone)(s);else if("function"==typeof d)try{t=d(s),Array.isArray(t)||(t=[t]),t.forEach(function(e){return e.uids=e.uids.filter(function(e){var t=e.id;return(0,a.isStr)(t)})}),t=t.filter(function(e){var t=e.uids;return(null==t?void 0:t.length)>0})}catch(e){(0,a.logError)('Could not generate EID for "'.concat(o,'"'),e)}else t=s.map(function(e){return function(e,t,r){if(r&&e){var n={};n.source=(0,a.isFn)(r.getSource)?r.getSource(e):r.source;var i=(0,a.isFn)(r.getValue)?r.getValue(e):e;if((0,a.isStr)(i)){var o={id:i,atype:r.atype};if("uidapi.com"===r.source&&r.bridged&&(n.mm=5,n.inserter="cafemedia.com",n.matcher="cafemedia.com"),(0,a.isFn)(r.getUidExt)){var s=r.getUidExt(e);s&&(o.ext=s)}if(n.uids=[o],(0,a.isFn)(r.getEidExt)){var d=r.getEidExt(e);d&&(n.ext=d)}return n}}return null}(e,0,d)});if(Array.isArray(t)&&("tdid"===o&&"single"===u&&(t[0].source="adsrvr.org"),t.filter(function(e){return null!=e}).forEach(c)),"tdid"===o&&"both"===u){var l=(0,a.deepClone)(t);l[0].source="adsrvr.org",l.filter(function(e){return null!=e}).forEach(c)}}),Object.values(n)}},5949:function(e,t,r){"use strict";var n,i,o,a,s,d,c,u,l,p=r(2100),f=r(8287),g=p(r(939)),v=p(r(8287)),m=p(r(5881)),h=r(7045),b=r(1617),y=r(9926),A=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=f(e)&&"function"!=typeof e)return{default:e};var r=M(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&({}).hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(1322)),I=p(r(9577)),E=r(3103),S=r(2508),O=r(4572),_=r(1122),T=r(4700),w=r(4385),C=r(6102),x=r(8538),P=r(3153),D=r(5789),R=r(4840),k=r(3364),j=r(1851),N=r(2887),B=r(7317),U=r(9578);function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(M=function(e){return e?r:t})(e)}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var q="User ID",L=_.STORAGE_TYPE_COOKIES,F=_.STORAGE_TYPE_LOCALSTORAGE,G="_pbjs_id_optout",W=(0,_.getCoreStorageManager)("userId"),z={isAllowed:k.isActivityAllowed},H=[],Y=[],J={},K=[],Q=function(){return null==n&&(n=(0,x.newMetrics)()),n};function X(e){return Q().fork().renameWith(function(t){return["userId.mod.".concat(t),"userId.mods.".concat(e,".").concat(t)]})}function $(e,t){t=t||e.storageMgr;var r="function"==typeof e.submodule.domainOverride?e.submodule.domainOverride():null,n=e.config.storage.name;return function(e,i,o){t.setCookie(n+(e||""),i,o,"Lax",r)}}function Z(e,t){var r=e.config.storage;try{var n=new Date(Date.now()+864e5*r.expires).toUTCString(),i=(0,T.isPlainObject)(t)?JSON.stringify(t):t;e.enabledStorageTypes.forEach(function(t){var r,o,a,s;switch(t){case L:r=e.config.storage,(o=$(e))(null,i,n),o("_cst",ey(),n),"number"==typeof r.refreshInSeconds&&o("_last",new Date().toUTCString(),n);break;case F:a=e.config.storage,(s=e.storageMgr).setDataInLocalStorage("".concat(a.name,"_exp"),n),s.setDataInLocalStorage("".concat(a.name,"_cst"),ey()),s.setDataInLocalStorage(a.name,encodeURIComponent(i)),"number"==typeof a.refreshInSeconds&&s.setDataInLocalStorage("".concat(a.name,"_last"),new Date().toUTCString())}})}catch(e){(0,T.logError)(e)}}function ee(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=e.config.storage,i=r?"".concat(n.name,"_").concat(r):n.name;try{e.enabledStorageTypes.find(function(r){var n,o,a;switch(r){case L:t=e.storageMgr.getCookie(i);break;case F:n=e.storageMgr,o=e.config.storage,a=n.getDataFromLocalStorage("".concat(o.name,"_exp")),t=""===a?n.getDataFromLocalStorage(i):a&&new Date(a).getTime()-Date.now()>0?decodeURIComponent(n.getDataFromLocalStorage(i)):void 0}return!!t}),"string"==typeof t&&"{"===t.trim().charAt(0)&&(t=JSON.parse(t))}catch(e){(0,T.logError)(e)}return t}function et(e,t,r){t=Q().fork().startTiming("userId.callbacks.total").stopBefore(t);var n=(0,T.delayExecution)(function(){clearTimeout(o),t()},e.length);e.forEach(function(e){var t=X(e.submodule.name).startTiming("callback").stopBefore(n);try{e.callback(function(n){n?(e.config.storage&&Z(e,n),e.idObj=e.submodule.decode(n,e.config),r.refresh(),eA(r)):(0,T.logInfo)("".concat(q,": ").concat(e.submodule.name," - request id responded with an empty value")),t()},ee.bind(null,e))}catch(r){(0,T.logError)("Error in userID module '".concat(e.submodule.name,"':"),r),t()}e.callback=void 0})}function er(e){return Object.fromEntries(Object.entries(e).map(function(e){var t,r=(0,m.default)(e,2),n=r[0];return[n,null==(t=(0,r[1])())||null==(t=t.idObj)?void 0:t[n]]}).filter(function(e){var t=(0,m.default)(e,2);return null!=(t[0],t[1])}))}function en(e,t,r){var n={};return e.forEach(function(e){var i=r(e),o=function(e){if(e.primaryIds)return e.primaryIds;var t,r=Object.keys(null!=(t=e.eids)?t:{});if(r.length>1)throw Error("ID submodule ".concat(e.name," can provide multiple IDs, but does not specify 'primaryIds'"));return r}(i);t(e).forEach(function(t){var r,a,s,d=n[t]=null!=(r=n[t])?r:[],c=null!=(a=null==(s=J[t])?void 0:s.indexOf(i.name))?a:o.includes(t)?0:-1,u=d.findIndex(function(e){return(0,m.default)(e,1)[0]<c});d.splice(-1===u?d.length:u,0,[c,e])})}),Object.fromEntries(Object.entries(n).map(function(e){var t=(0,m.default)(e,2);return[t[0],t[1].map(function(e){var t=(0,m.default)(e,2);return t[0],t[1]})]}))}function ei(e){var t,r,n,o,a,s,d,c,u,l,p,f=e.adUnits,g=e.ortb2Fragments;if(o=(t=g=null!=(l=g)?l:{global:{},bidder:{}}).global,a=t.bidder,d=(s=i).global,c=s.bidder,(u=(0,O.getEids)(d)).length>0&&(0,T.deepSetValue)(o,"user.ext.eids",(null!=(r=null==(n=o.user)||null==(n=n.ext)?void 0:n.eids)?r:[]).concat(u)),Object.entries(c).forEach(function(e){var t,r,n=(0,m.default)(e,2),i=n[0],o=n[1],s=(0,O.getEids)(o);s.length>0&&(0,T.deepSetValue)(a,"".concat(i,".user.ext.eids"),(null!=(t=null==(r=a[i])||null==(r=r.user)||null==(r=r.ext)?void 0:r.eids)?t:[]).concat(s))}),![f].some(function(e){return!Array.isArray(e)||!e.length})){var v=er(i.global),h=(null==(p=g.global.user)||null==(p=p.ext)?void 0:p.eids)||[];f.forEach(function(e){e.bids&&(0,T.isArray)(e.bids)&&e.bids.forEach(function(e){var t,r,n=Object.assign({},v,er(null!=(t=i.bidder[e.bidder])?t:{})),o=h.concat((null==(r=g.bidder)||null==(r=r[e.bidder])||null==(r=r.user)||null==(r=r.ext)?void 0:r.eids)||[]);Object.keys(n).length>0&&(e.userId=n),o.length>0&&(e.userIdAsEids=o)})})}}var eo={};function ea(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:el()||[],r=d&&t.find(function(e){return e.source===d});if(r&&"string"==typeof(null==r||null==(e=r.uids)||null==(e=e[0])?void 0:e.id)){var n=r.uids[0].id.replace(/[\W_]/g,"");if(n.length>=32&&n.length<=150)return n;(0,T.logWarn)("User ID - Googletag Publisher Provided ID for ".concat(d," is not between 32 and 150 characters - ").concat(n))}}var es=(0,x.timedAuctionHook)("userId",function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.mkDelay,o=void 0===i?C.delay:i,a=n.getIds,d=void 0===a?eb:a;C.PbPromise.race([d().catch(function(){return null}),o(s)]).then(function(){ei(t),Q().join((0,x.useMetrics)(t.metrics),{propagate:!1,includeGroups:!0}),e.call(r,t)})}),ed=(0,x.timedAuctionHook)("userId",function(e,t){ei(t),e.call(this,t)});function ec(){return!!U.startAuction.getHooks({hook:es}).length}function eu(){return er(i.combined)}function el(){return(0,O.getEids)(i.combined)}function ep(e){return el().filter(function(t){return t.source===e})[0]}function ef(e,t,r){return em().then(function(){var n={};if((0,T.isFn)(r)){(0,T.logInfo)("".concat(q," - Getting encrypted signal from custom function : ").concat(r.name," & source : ").concat(e," "));var i=r(e);n[e]=i?eg(i):null}else{var o=ep(e);(0,T.logInfo)("".concat(q," - Getting encrypted signal for eids :").concat(JSON.stringify(o))),(0,T.isEmpty)(o)||(n[o.source]=!0===t?eg(o):o.uids[0].id)}return(0,T.logInfo)("".concat(q," - Fetching encrypted eids: ").concat(n[e])),n[e]})}function eg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r="";return 1===t&&(r="object"===(0,v.default)(e)?window.btoa(JSON.stringify(e)):window.btoa(e)),"".concat(t,"||").concat(r)}function ev(){if((0,T.isGptPubadsDefined)()){window.googletag.secureSignalProviders=window.googletag.secureSignalProviders||[];var e=y.config.getConfig("userSync.encryptedSignalSources");e?setTimeout(function(){e.sources&&e.sources.forEach(function(e){var t=e.source,r=e.encrypt,n=e.customFunc;t.forEach(function(e){window.googletag.secureSignalProviders.push({id:e,collectorFunction:function(){return ef(e,r,n)}})})})},e.registerDelay||0):(0,T.logWarn)("".concat(q," - ESP : encryptedSignalSources config not defined under userSync Object"))}}function em(e){return l(e).then(function(){return eu()},function(e){return e===eo?Promise.resolve().then(eb):((0,T.logError)("Error initializing userId",e),C.PbPromise.reject(e))})}function eh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.submoduleNames,r=arguments.length>1?arguments[1]:void 0;return em({refresh:!0,submoduleNames:t}).then(function(e){return r&&(0,T.isFn)(r)&&r(),e})}function eb(){return em()}function ey(){for(var e=Number(D.allConsent.hash),t=[];e>0;)t.push(String.fromCharCode(255&e)),e>>>=8;return btoa(t.join())}function eA(e){var t=(0,O.getEids)(e.combined);if(t.length&&d){var r=ea(t);r&&((0,T.isGptPubadsDefined)()?window.googletag.pubads().setPublisherProvidedId(r):(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){window.googletag.pubads().setPublisherProvidedId(r)})))}}function eI(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Q().fork().measureTime("userId.init.modules",function(){if(!t.length)return[];if(t.forEach(function(e){return eO(e)}),!(t=t.filter(function(e){return(!e.config.storage||!!e.enabledStorageTypes.length)&&z.isAllowed(j.ACTIVITY_ENRICH_EIDS,(0,N.activityParams)(R.MODULE_TYPE_UID,e.config.name))})).length)return(0,T.logWarn)("".concat(q," - no ID module configured")),[];var n=t.reduce(function(e,t){return X(t.submodule.name).measureTime("init",function(){try{!function(e,t){var r=D.allConsent.getConsentData();if(e.config.storage){var n,i,o=ee(e),a=!1;if("number"==typeof e.config.storage.refreshInSeconds){var s=new Date(ee(e,"last"));a=s&&Date.now()-s.getTime()>1e3*e.config.storage.refreshInSeconds}if(o&&!a&&!t&&(n=ee(e,"cst"))&&n===ey())"function"==typeof e.submodule.extendId&&(i=e.submodule.extendId(e.config,r,o));else{var d=Object.assign({enabledStorageTypes:e.enabledStorageTypes},e.config);i=e.submodule.getId(d,r,o)}(0,T.isPlainObject)(i)&&(i.id&&(Z(e,i.id),o=i.id),"function"==typeof i.callback&&(e.callback=i.callback)),o&&(e.idObj=e.submodule.decode(o,e.config))}else if(e.config.value)e.idObj=e.config.value;else{var c=e.submodule.getId(e.config,r);(0,T.isPlainObject)(c)&&("function"==typeof c.callback&&(e.callback=c.callback),c.id&&(e.idObj=e.submodule.decode(c.id,e.config)))}}(t,r),e.push(t)}catch(e){(0,T.logError)("Error in userID module '".concat(t.submodule.name,"':"),e)}return e})},[]);return e.refresh(n),eA(e),n})}function eE(e){var t;return(null==e||null==(t=e.storage)||null==(t=t.type)?void 0:t.trim().split(/\s*&\s*/))||[]}var eS=new Set([F,L]);function eO(e){if(!e.enabledStorageTypes){var t=eE(e.config);e.enabledStorageTypes=t.filter(function(t){switch(t){case F:return!!e.storageMgr.localStorageIsEnabled()&&(!W.getDataFromLocalStorage(G)||((0,T.logInfo)("".concat(q," - opt-out localStorage found, storage disabled")),!1));case L:return!!e.storageMgr.cookiesAreEnabled()&&(!W.getCookie(G)||((0,T.logInfo)("".concat(q," - opt-out cookie found, storage disabled")),!1))}return!1})}}function e_(e){O.EID_CONFIG.clear(),Object.entries(en(e,function(e){return Object.keys(e.eids||{})},function(e){return e})).forEach(function(e){var t=(0,m.default)(e,2),r=t[0],n=t[1];return O.EID_CONFIG.set(r,n[0].eids[r])})}function eT(){e_(K);var e=function(e){function t(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];T.logWarn.apply(void 0,["Invalid userSync.userId config: ".concat(e)].concat(r))}return Array.isArray(e)?e.filter(function(e){if(!(null!=e&&e.name))return t('must specify "name"',e);if(e.storage){if(!e.storage.name||!e.storage.type)return t('must specify "storage.name" and "storage.type"',e);if(!eE(e).every(function(e){return eS.has(e)}))return t('invalid "storage.type"',e);["expires","refreshInSeconds"].forEach(function(r){var n=e.storage[r];null!=n&&"number"!=typeof n&&(isNaN(n=Number(n))?(t("storage.".concat(r," must be a number and will be ignored"),e),delete e.storage[r]):e.storage[r]=n)})}return!0}):(null!=e&&t("must be an array",e),[])}(Y);if(e.length){var t=K.filter(function(e){return!(0,b.find)(H,function(t){return t.name===e.name})});H.splice(0,H.length),t.map(function(t){var r=(0,b.find)(e,function(e){return e.name&&(e.name.toLowerCase()===t.name.toLowerCase()||t.aliasName&&e.name.toLowerCase()===t.aliasName.toLowerCase())});return r&&t.name!==r.name&&(r.name=t.name),r?{submodule:t,config:r,callback:void 0,idObj:void 0,storageMgr:(0,_.getStorageManager)({moduleType:R.MODULE_TYPE_UID,moduleName:r.name})}:null}).filter(function(e){return null!==e}).forEach(function(e){return H.push(e)}),H.length&&(ec()||(U.startAuction.getHooks({hook:ed}).remove(),U.startAuction.before(es,100),I.default.callDataDeletionRequest.before(ew),w.getPPID.after(function(e){return e(ea())})),(0,T.logInfo)("".concat(q," - usersync config updated for ").concat(H.length," submodules: "),H.map(function(e){return e.submodule.name})))}}function ew(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(0,T.logInfo)("UserID: received data deletion request; deleting all stored IDs..."),H.forEach(function(e){var t,n;if("function"==typeof e.submodule.onDataDeletionRequest)try{(t=e.submodule).onDataDeletionRequest.apply(t,[e.config,e.idObj].concat(r))}catch(t){(0,T.logError)("Error calling onDataDeletionRequest for ID submodule ".concat(e.submodule.name),t)}eO(n=e),n.enabledStorageTypes.forEach(function(e){var t,r;switch(e){case L:t=$(n,W),r=new Date(Date.now()-864e5).toUTCString(),["","_last","_cst"].forEach(function(e){try{t(e,"",r)}catch(e){(0,T.logError)(e)}});break;case F:["","_last","_exp","_cst"].forEach(function(e){try{W.removeDataFromLocalStorage(n.config.storage.name+e)}catch(e){(0,T.logError)(e)}})}})}),e.apply(this,r)}function eC(e){return function(){return Promise.resolve(e.apply(this,arguments))}}(function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.mkDelay,o=void 0===n?C.delay:n;d=void 0,H=[],Y=[],i=t={submodules:[],global:{},bidder:{},combined:{},refresh:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=new Set(e.map(function(e){return e.submodule}));t.submodules=t.submodules.filter(function(e){return!r.has(e.submodule)}).concat(e),function(){var e=en(t.submodules,function(e){var t;return Object.keys(null!=(t=e.idObj)?t:{})},function(e){return e.submodule}),r={},n={};function i(e,t,r){return function(){var n,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return V(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(r);try{for(i.s();!(n=i.n()).done;){var o,a=n.value,s=a.allowed,d=a.bidders,c=a.module,u=null==(o=c.idObj)?void 0:o[e];if(null!=u){if(s)return c;else if(t){var l=function(e){return e.map(function(e){return e.module.submodule.name}).join(", ")};return(0,T.logWarn)("userID modules ".concat(l(r)," provide the same ID ('").concat(e,"'); ").concat(c.submodule.name," is the preferred source, but it's configured only for some bidders, unlike ").concat(l(r.filter(function(e){return null==e.bidders})),'. Other bidders will not see the "').concat(e,'" ID.')),null}else if(null==d)return null}}}catch(e){i.e(e)}finally{i.f()}return null}}Object.entries(e).forEach(function(e){var t=(0,m.default)(e,2),o=t[0],a=t[1],s=!0,d=new Set;a=a.map(function(e){var t=null;return Array.isArray(e.config.bidders)&&e.config.bidders.length>0?(t=e.config.bidders).forEach(function(e){return d.add(e)}):s=!1,{module:e,bidders:t}}),s||(r[o]=i(o,!0,a.map(function(e){var t=e.bidders;return{allowed:null==t,bidders:t,module:e.module}}))),d.forEach(function(e){var t;n[e]=null!=(t=n[e])?t:{},n[e][o]=i(o,!1,a.map(function(t){var r=t.bidders,n=t.module;return{allowed:null==r?void 0:r.includes(e),bidders:r,module:n}}))})}),c&&!(0,T.isEmpty)(r)&&(r=function(e,t){var r=e[t];if(!r)return e;var n={};return n[t]=r,Object.entries(e).forEach(function(e){var r=(0,m.default)(e,2),i=r[0],o=r[1];i!==t&&(n[i]=o)}),n}(r,c));var o=Object.values(n).concat([r]).reduce(function(e,t){return Object.assign(e,t)},{});Object.assign(t,{global:r,bidder:n,combined:o})}()}},l=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.mkDelay,o=void 0===n?C.delay:n,d=(0,C.defer)(),c=(0,C.defer)(),u=!1;function l(r){return t=Q().fork(),null!=e&&e.reject(eo),e=(0,C.defer)(),C.PbPromise.race([r,e.promise]).finally(t.startTiming("userId.total"))}var p=i,f=H;function g(e){return function(){if(p===i&&f===H)return e.apply(void 0,arguments)}}function v(){return D.allConsent.promise.finally(t.startTiming("userId.init.consent"))}var m=l(C.PbPromise.all([S.ready,d.promise]).then(v).then(g(function(){eI(p,f)})).then(function(){return c.promise.finally(t.startTiming("userId.callbacks.pending"))}).then(g(function(){var e=p.submodules.filter(function(e){return(0,T.isFn)(e.callback)});if(e.length)return new C.PbPromise(function(t){return et(e,t,p)})})));return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refresh,r=e.submoduleNames,n=void 0===r?null:r,i=e.ready;return void 0!==i&&i&&!u&&(u=!0,d.resolve(),s>0?c.resolve():A.on(E.EVENTS.AUCTION_END,function e(){A.off(E.EVENTS.AUCTION_END,e),o(a).then(c.resolve)})),void 0!==t&&t&&u&&(m=l(m.catch(function(){return null}).then(v).then(g(function(){var e=eI(p,f.filter(function(e){return null==n||n.includes(e.submodule.name)}),!0).filter(function(e){return null!=e.callback});if(e.length)return new C.PbPromise(function(t){return et(e,t,p)})})))),m}}({mkDelay:o}),null!=u&&u(),K=[],u=e.getConfig("userSync",function(e){var t=e.userSync;if(t&&(d=t.ppid,c=t.firstEid,t.userIds)){Y=t.userIds,a=(0,T.isNumber)(t.syncDelay)?t.syncDelay:B.USERSYNC_DEFAULT_CONFIG.syncDelay,s=(0,T.isNumber)(t.auctionDelay)?t.auctionDelay:B.USERSYNC_DEFAULT_CONFIG.auctionDelay,eT();var r=t.idPriority,n=K;if(r){var o={},u=new Map(n.map(function(e){return e.aliasName?[e.aliasName,e.name]:[]}));Object.keys(r).forEach(function(e){var t=(0,T.isArray)(r[e])?(0,g.default)(r[e]).reverse():[];o[e]=t.map(function(e){return u.has(e)?u.get(e):e})}),J=o}else J={};i.refresh(),e_(n),l({ready:!0})}}),(0,h.getGlobal)().getUserIds=eu,(0,h.getGlobal)().getUserIdsAsEids=el,(0,h.getGlobal)().getEncryptedEidsForSource=eC(ef),(0,h.getGlobal)().registerSignalSources=ev,(0,h.getGlobal)().refreshUserIds=eC(eh),(0,h.getGlobal)().getUserIdsAsync=eC(eb),(0,h.getGlobal)().getUserIdsAsEidBySource=ep,ec()||U.startAuction.before(ed,100)})(y.config),(0,S.module)("userId",function(e){e.findRootDomain=P.findRootDomain,(0,b.find)(K,function(t){return t.name===e.name})||(K.push(e),D.GDPR_GVLIDS.register(R.MODULE_TYPE_UID,e.name,e.gvlid),eT(),l({refresh:!0,submoduleNames:[e.name]}))},{postInstallAllowed:!0}),(0,h.registerModule)("userId")},3081:function(e,t,r){"use strict";var n=r(2100),i=n(r(5794)),o=n(r(5881)),a=r(7045),s=r(523),d=r(4607),c=r(4700),u=r(9926),l=r(8915),p=r(8700);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var g="9.40.0",v=["admixer.net","adserver.org","adsrvr.org","adtelligent.com","akamai.com","amxdt.net","audigent.com","britepool.com","criteo.com","crwdcntrl.net","deepintent.com","epsilon.com","hcn.health","id5-sync.com","idx.lat","intentiq.com","intimatemerger.com","liveintent.com","liveramp.com","mediawallahscript.com","merkleinc.com","netid.de","neustar.biz","nextroll.com","novatiq.com","pubcid.org","quantcast.com","tapad.com","uidapi.com","yahoo.com","zeotap.com"];function m(e,t){var r=e.bidder||e.bidderCode;return u.config.getConfig("".concat(r,".").concat(t))}function h(e){return{w:parseInt(e[0]),h:parseInt(e[1])}}function b(e){return(0,c.isArray)(e)&&2===e.length&&!(0,c.isArray)(e[0])?[h(e)]:e.map(h)}function y(e){var t;return(0,c.deepAccess)(e,"params.pubId")?t=!0:(0,c.deepAccess)(e,"params.dcn")&&(0,c.deepAccess)(e,"params.pos")&&(t=!1),t}function A(e){var t=m(e,"mode");return void 0===(t=t?t.toLowerCase():void 0)||t===d.BANNER?d.BANNER:t===d.VIDEO?d.VIDEO:"all"===t?"*":void 0}function I(e){var t=A(e),r={currency:(0,c.deepAccess)(e,"params.bidOverride.cur")||"USD",mediaType:t,size:"*"};return!!(0,c.isFn)(e.getFloor)&&e.getFloor(r)}function E(e,t,r,n){var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},n);for(var a in r)switch(e){case"string":-1!==t.indexOf(a)&&(0,c.isStr)(r[a])&&(o[a]=r[a]);break;case"number":-1!==t.indexOf(a)&&(0,c.isNumber)(r[a])&&(o[a]=r[a]);break;case"array":-1!==t.indexOf(a)&&(0,c.isArray)(r[a])&&(o[a]=r[a]);break;case"object":-1!==t.indexOf(a)&&(0,c.isPlainObject)(r[a])&&(o[a]=r[a]);break;case"objectAllKeys":(0,c.isPlainObject)(r)&&(o[a]=r[a])}return o}function S(e){return(0,c.isNumber)(e)&&e>0&&e<3600?e:300}function O(e){return(0,c.isStr)(e)&&e.length>0}function _(e,t){if(e){var r,n,i,o,a,s,d,u,l,p,f={id:(0,c.generateUUID)(),cur:[I(e).currency||(0,c.deepAccess)(t,"params.bidOverride.cur")||"USD"],imp:[],site:{page:(0,c.deepAccess)(e,"refererInfo.page")},device:{dnt:0,ua:navigator.userAgent,ip:(0,c.deepAccess)(t,"params.bidOverride.device.ip")||(0,c.deepAccess)(t,"params.ext.ip")||void 0,w:window.screen.width,h:window.screen.height},regs:{ext:{us_privacy:e.uspConsent?e.uspConsent:"",gdpr:e.gdprConsent&&e.gdprConsent.gdprApplies?1:0,gpp:e.gppConsent?e.gppConsent.gppString:"",gpp_sid:e.gppConsent?e.gppConsent.applicableSections:[]}},source:{ext:{hb:1,adapterver:"1.1.0",prebidver:g,integration:{name:"prebid.js",ver:g}},fd:1},user:{ext:{consent:e.gdprConsent&&e.gdprConsent.gdprApplies?e.gdprConsent.consentString:"",eids:(0,c.isArray)((0,c.deepAccess)(t,"userIdAsEids"))?t.userIdAsEids.filter(function(e){return -1!==v.indexOf(e.source)}):[]}}};!0===y(t)?(f.site.publisher={id:t.params.pubId},((0,c.deepAccess)(t,"params.bidOverride.site.id")||(0,c.deepAccess)(t,"params.siteId"))&&(f.site.id=(0,c.deepAccess)(t,"params.bidOverride.site.id")||t.params.siteId)):f.site.id=t.params.dcn,null!=(p=e.ortb2)&&null!=(p=p.regs)&&p.gpp&&(f.regs.ext.gpp=e.ortb2.regs.gpp,f.regs.ext.gpp_sid=e.ortb2.regs.gpp_sid),e.ortb2&&(r=f,n=t.ortb2,i=(0,c.deepAccess)(n,"site")||void 0,o=(0,c.deepAccess)(i,"content")||void 0,a=(0,c.deepAccess)(i,"publisher")||void 0,s=(0,c.deepAccess)(i,"content.data")||void 0,d=(0,c.deepAccess)(n,"app.content")||void 0,u=(0,c.deepAccess)(n,"app.content.data")||void 0,l=(0,c.deepAccess)(n,"user")||void 0,i&&(0,c.isPlainObject)(i)&&(r.site=E("string",["name","domain","page","ref","keywords","search"],i,r.site),r.site=E("array",["cat","sectioncat","pagecat"],i,r.site),r.site=E("object",["ext"],i,r.site)),a&&(0,c.isPlainObject)(a)&&(r.site.publisher=E("object",["ext"],a,r.site.publisher)),o&&(0,c.isPlainObject)(o)&&(r.site.content=E("string",["id","title","series","season","genre","contentrating","language"],o,r.site.content),r.site.content=E("number",["episode","prodq","context","livestream","len"],o,r.site.content),r.site.content=E("array",["cat"],o,r.site.content),r.site.content=E("object",["ext"],o,r.site.content),s&&(0,c.isArray)(s)&&s.every(function(e){var t={};t=E("string",["id","name"],e,t),t=E("array",["segment"],e,t),t=E("object",["ext"],e,t),r.site.content.data=[],r.site.content.data.push(t)})),d&&(0,c.isPlainObject)(d)&&u&&(0,c.isArray)(u)&&u.every(function(e){var t={};t=E("string",["id","name"],e,t),t=E("array",["segment"],e,t),t=E("object",["ext"],e,t),r.app={content:{data:[]}},r.app.content.data.push(t)}),l&&(0,c.isPlainObject)(l)&&(r.user=E("string",["id","buyeruid","gender","keywords","customdata"],l,r.user),r.user=E("number",["yob"],l,r.user),r.user=E("array",["data"],l,r.user),r.user.ext=E("object",["ext"],l,r.user.ext)),f=r);var m=(0,c.deepAccess)(t,"schain.nodes");return(0,c.isArray)(m)&&m.length>0&&(f.source.ext.schain=t.schain,f.source.ext.schain.nodes[0].rid=f.id),f}}function T(e,t){var r=A(e);if(t&&e){var n,i,o,a,s={id:e.bidId,secure:null!=(n=null!=(i=(0,c.deepAccess)(e,"params.bidOverride.imp.secure"))?i:null==(o=e.ortb2Imp)?void 0:o.secure)?n:1,bidfloor:(null==(a=I(e))?void 0:a.floor)||(0,c.deepAccess)(e,"params.bidOverride.imp.bidfloor")};if(e.mediaTypes.banner&&(void 0===r||r===d.BANNER||"*"===r)&&(s.banner={mimes:e.mediaTypes.banner.mimes||["text/html","text/javascript","application/javascript","image/jpg"],format:b(e.sizes)},e.mediaTypes.banner.pos&&(s.banner.pos=e.mediaTypes.banner.pos)),e.mediaTypes.video&&(r===d.VIDEO||"*"===r)){var u=b(e.mediaTypes.video.playerSize);s.video={mimes:(0,c.deepAccess)(e,"params.bidOverride.imp.video.mimes")||e.mediaTypes.video.mimes||["video/mp4","application/javascript"],w:(0,c.deepAccess)(e,"params.bidOverride.imp.video.w")||u[0].w,h:(0,c.deepAccess)(e,"params.bidOverride.imp.video.h")||u[0].h,maxbitrate:(0,c.deepAccess)(e,"params.bidOverride.imp.video.maxbitrate")||e.mediaTypes.video.maxbitrate||void 0,maxduration:(0,c.deepAccess)(e,"params.bidOverride.imp.video.maxduration")||e.mediaTypes.video.maxduration||void 0,minduration:(0,c.deepAccess)(e,"params.bidOverride.imp.video.minduration")||e.mediaTypes.video.minduration||void 0,api:(0,c.deepAccess)(e,"params.bidOverride.imp.video.api")||e.mediaTypes.video.api||[2],delivery:(0,c.deepAccess)(e,"params.bidOverride.imp.video.delivery")||e.mediaTypes.video.delivery||void 0,pos:(0,c.deepAccess)(e,"params.bidOverride.imp.video.pos")||e.mediaTypes.video.pos||void 0,playbackmethod:(0,c.deepAccess)(e,"params.bidOverride.imp.video.playbackmethod")||e.mediaTypes.video.playbackmethod||void 0,placement:(0,c.deepAccess)(e,"params.bidOverride.imp.video.placement")||e.mediaTypes.video.placement||void 0,plcmt:(0,c.deepAccess)(e,"params.bidOverride.imp.video.plcmt")||e.mediaTypes.video.plcmt||void 0,linearity:(0,c.deepAccess)(e,"params.bidOverride.imp.video.linearity")||e.mediaTypes.video.linearity||1,protocols:(0,c.deepAccess)(e,"params.bidOverride.imp.video.protocols")||e.mediaTypes.video.protocols||[2,5],startdelay:(0,c.deepAccess)(e,"params.bidOverride.imp.video.startdelay")||e.mediaTypes.video.startdelay||0,rewarded:(0,c.deepAccess)(e,"params.bidOverride.imp.video.rewarded")||void 0}}if(s.ext={dfp_ad_unit_code:e.adUnitCode},(0,c.deepAccess)(e,"params.kvp")&&(0,c.isPlainObject)(e.params.kvp)){for(var l in s.ext.kvs={},e.params.kvp)if((0,c.isStr)(e.params.kvp[l])||(0,c.isNumber)(e.params.kvp[l]))s.ext.kvs[l]=e.params.kvp[l];else if((0,c.isArray)(e.params.kvp[l])){var p=e.params.kvp[l];(p.every(function(e){return(0,c.isStr)(e)})||p.every(function(e){return(0,c.isNumber)(e)}))&&(s.ext.kvs[l]=e.params.kvp[l])}}(0,c.deepAccess)(e,"ortb2Imp.ext.data")&&(0,c.isPlainObject)(e.ortb2Imp.ext.data)&&(s.ext.data=e.ortb2Imp.ext.data),(0,c.deepAccess)(e,"ortb2Imp.instl")&&(0,c.isNumber)(e.ortb2Imp.instl)&&1===e.ortb2Imp.instl&&(s.instl=e.ortb2Imp.instl),!1===y(e)?(s.tagid=e.params.pos,s.ext.pos=e.params.pos):(0,c.deepAccess)(e,"params.placementId")&&(s.tagid=e.params.placementId),t.imp.push(s)}}function w(e){var t=e.payload,r=e.requestOptions,n=e.bidderRequest,i=y(n),o=m(n,"endpoint"),a=o||"https://c2shb.pubgw.yahoo.com/bidRequest";if(!0===i&&(a=o||"https://c2shb.pubgw.yahoo.com/admax/bid/partners/PBJS"),!0===(0,c.deepAccess)(n,"params.testing.e2etest"))if((0,c.logInfo)("Adapter e2etest mode is active"),r.withCredentials=!1,!0===i)t.site.id="1234567";else{var s=A(n);t.site.id="8a969516017a7a396ec539d97f540011",t.imp.forEach(function(e){if(e.ext.e2eTestMode=!0,s===d.BANNER)e.tagid="8a969978017a7aaabab4ab0bc01a0009";else if(s===d.VIDEO)e.tagid="8a96958a017a7a57ac375d50c0c700cc";else{var t=n.bidderCode;(0,c.logWarn)("e2etest mode does not support ".concat(t,'.mode="all". \n Please specify either "banner" or "video"')),(0,c.logWarn)("Adapter e2etest mode: Please make sure your adUnit matches the ".concat(t,".mode video or banner"))}})}return{url:a,method:"POST",data:t,options:r,bidderRequest:n}}var C={code:"yahooAds",gvlid:25,aliases:[{code:"yahoossp",gvlid:25},{code:"yahooAdvertising",gvlid:25}],supportedMediaTypes:[d.BANNER,d.VIDEO],isBidRequestValid:function(e){var t=e.params;return!0===(0,c.deepAccess)(t,"testing.e2etest")||!!((0,c.isPlainObject)(t)&&(O(t.pubId)||O(t.dcn)&&O(t.pos)))||((0,c.logWarn)("Bidder params missing or incorrect, please pass object with either: dcn & pos OR pubId"),!1)},buildRequests:function(e,t){if((0,c.isEmpty)(e)||(0,c.isEmpty)(t))return void(0,c.logWarn)('buildRequests called with either empty "validBidRequests" or "bidderRequest"');var r,n,i={contentType:"application/json",customHeaders:{"x-openrtb-version":"2.5"}};i.withCredentials=(0,p.hasPurpose1Consent)(t.gdprConsent);var o=(r=A(e[0]),n=[],r===d.BANNER?n=e.filter(function(e){return Object.keys(e.mediaTypes).some(function(e){return e===d.BANNER})}):r===d.VIDEO?n=e.filter(function(e){return Object.keys(e.mediaTypes).some(function(e){return e===d.VIDEO})}):"*"===r&&(n=e.filter(function(e){return Object.keys(e.mediaTypes).some(function(e){return e===d.BANNER||e===d.VIDEO})})),n);if(!0===m(t,"singleRequestMode")){var a=_(t,o[0]);return o.forEach(function(e){T(e,a)}),[w({payload:a,requestOptions:i,bidderRequest:t})]}return o.map(function(e){var r=_(t,e);return T(e,r),w({payload:r,requestOptions:i,bidderRequest:e})})},interpretResponse:function(e,t){var r=t.bidderRequest,n=[];return e.body&&Array.isArray(e.body.seatbid)&&e.body.seatbid.forEach(function(e){try{o=e.bid[0]}catch(e){return n}var t,i,o,a=o.ext&&o.ext.encp?o.ext.encp:o.price,s={adId:(0,c.deepAccess)(o,"adId")?o.adId:o.impid||o.crid,requestId:o.impid,cpm:a,width:o.w,height:o.h,creativeId:o.crid||0,currency:o.cur||"USD",dealId:o.dealid?o.dealid:null,netRevenue:!0,ttl:(t=m(r,"ttl"))?S(t):S((0,c.deepAccess)(r,"params.ttl")),meta:{advertiserDomains:o.adomain}},u=-1!==(i=o.adm).indexOf("o2playerSettings")||-1!==i.indexOf("YAHOO.VideoPlatform.VideoPlayer")||-1!==i.indexOf("AdPlacement")?d.BANNER:-1!==i.indexOf("VAST")?d.VIDEO:void 0;u===d.BANNER?(s.mediaType=d.BANNER,s.ad=o.adm,s.meta.mediaType=d.BANNER):u===d.VIDEO&&(s.mediaType=d.VIDEO,s.meta.mediaType=d.VIDEO,s.vastXml=o.adm),"outstream"!==(0,c.deepAccess)(r,"mediaTypes.video.context")||r.renderer||s.mediaType!==d.VIDEO||(s.renderer=function(e,t){var r=l.Renderer.install({url:"https://s.yimg.com/kp/prebid-outstream-renderer/renderer.js",loaded:!1,adUnitCode:e.adUnitCode});try{r.setRender(function(t){setTimeout(function(){o2PlayerRender(t)},(0,c.deepAccess)(e,"params.testing.renderer.setTimeout")||700)})}catch(e){(0,c.logWarn)("Renderer error: setRender() failed",e)}return r}(r,0)||void 0),n.push(s)}),n},getUserSyncs:function(e,t,r,n,i){var a=!(0,c.isEmpty)(t)&&t[0].body;if(a&&a.ext&&a.ext.pixels){var s=function(e,t){var r=/\w*(?=\s)/,n=/src=("|')(.*?)\1/,i=[];if(t){var o=t.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi);o&&o.forEach(function(t){var o=t.match(r)[0],a=t.match(n)[2];if(o&&a){var s="img"===o.toLowerCase()?"image":"iframe";if(!e.iframeEnabled&&"iframe"===s||!e.pixelEnabled&&"image"===s)return;i.push({type:s,url:a})}})}return i}(e,a.ext.pixels);return s.forEach(function(e){e.url=function(e,t){for(var r={gdpr_consent:t.gdpr?t.gdpr.consentString:"",gdpr:t.gdpr&&t.gdpr.gdprApplies?"1":"0",us_privacy:t.uspConsent?t.uspConsent:"",gpp:t.gpp?t.gpp.gppString:"",gpp_sid:t.gpp&&Array.isArray(t.gpp.applicableSections)?t.gpp.applicableSections.join(","):""},n=new URL(e),i=n.searchParams,a=0,s=Object.entries(r);a<s.length;a++){var d=(0,o.default)(s[a],2),c=d[0],u=d[1];i.set(c,u)}return n.search=i.toString(),n.toString()}(e.url,{gpp:i,gdpr:r,uspConsent:n})}),s}return[]}};(0,s.registerBidder)(C),(0,a.registerModule)("yahooAdsBidAdapter")},8915:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=c,t.executeRenderer=function(e,t,r){var n=null;e.config&&e.config.documentResolver&&(n=e.config.documentResolver(t,document,r)),n||(n=document),e.documentContext=n,e.render(t,e.documentContext)},t.isRendererRequired=function(e){return!!(e&&(e.url||e.renderNow))};var n=r(6296),i=r(4700),o=r(1617),a=r(7045),s=r(4840),d=(0,a.getGlobal)();function c(e){var t=this,r=e.url,a=e.config,c=e.id,u=e.callback,l=e.loaded,p=e.adUnitCode,f=e.renderNow;this.url=r,this.config=a,this.handlers={},this.id=c,this.renderNow=f,this.adUnitCode=p,this.loaded=l,this.cmd=[],this.push=function(e){if("function"!=typeof e)return void(0,i.logError)("Commands given to Renderer.push must be wrapped in a function");t.loaded?e.call():t.cmd.push(e)},this.callback=u||function(){t.loaded=!0,t.process()},this.render=(function(){var e=this,t=arguments,a=function(){e._render?e._render.apply(e,t):(0,i.logWarn)("No render function was provided, please use .setRender on the renderer")};!function(e){var t,r=d.adUnits,n=(0,o.find)(r,function(t){return t.code===e});if(!n)return!1;var i=null==n?void 0:n.renderer,a=!!(i&&i.url&&i.render),s=null==n||null==(t=n.mediaTypes)||null==(t=t.video)?void 0:t.renderer,c=!!(s&&s.url&&s.render);return!!(a&&!0!==i.backupOnly||c&&!0!==s.backupOnly)}(p)?f?a():(this.cmd.unshift(a),(0,n.loadExternalScript)(r,s.MODULE_TYPE_PREBID,"outstream",this.callback,this.documentContext)):((0,i.logWarn)("External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ".concat(p)),a())}).bind(this)}c.install=function(e){return new c({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded,adUnitCode:e.adUnitCode,renderNow:e.renderNow})},c.prototype.getConfig=function(){return this.config},c.prototype.setRender=function(e){this._render=e},c.prototype.setEventHandlers=function(e){this.handlers=e},c.prototype.handleVideoEvent=function(e){var t=e.id,r=e.eventName;"function"==typeof this.handlers[r]&&this.handlers[r](),(0,i.logMessage)("Prebid Renderer event for id ".concat(t," type ").concat(r))},c.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){(0,i.logError)("Error processing Renderer command on ad unit '".concat(this.adUnitCode,"':"),e)}}},1851:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOAD_EXTERNAL_SCRIPT=t.ACTIVITY_TRANSMIT_UFPD=t.ACTIVITY_TRANSMIT_TID=t.ACTIVITY_TRANSMIT_PRECISE_GEO=t.ACTIVITY_TRANSMIT_EIDS=t.ACTIVITY_SYNC_USER=t.ACTIVITY_REPORT_ANALYTICS=t.ACTIVITY_FETCH_BIDS=t.ACTIVITY_ENRICH_UFPD=t.ACTIVITY_ENRICH_EIDS=t.ACTIVITY_ACCESS_DEVICE=void 0,t.ACTIVITY_ACCESS_DEVICE="accessDevice",t.ACTIVITY_SYNC_USER="syncUser",t.ACTIVITY_ENRICH_UFPD="enrichUfpd",t.ACTIVITY_ENRICH_EIDS="enrichEids",t.ACTIVITY_FETCH_BIDS="fetchBids",t.ACTIVITY_REPORT_ANALYTICS="reportAnalytics",t.ACTIVITY_TRANSMIT_EIDS="transmitEids",t.ACTIVITY_TRANSMIT_UFPD="transmitUfpd",t.ACTIVITY_TRANSMIT_PRECISE_GEO="transmitPreciseGeo",t.ACTIVITY_TRANSMIT_TID="transmitTid",t.LOAD_EXTERNAL_SCRIPT="loadExternalScript"},2887:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.activityParams=void 0;var i=n(r(9577));t.activityParams=(0,r(3645).activityParamsBuilder)(function(e){return i.default.resolveAlias(e)})},4840:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_TYPE_UID=t.MODULE_TYPE_RTD=t.MODULE_TYPE_PREBID=t.MODULE_TYPE_BIDDER=t.MODULE_TYPE_ANALYTICS=void 0,t.MODULE_TYPE_PREBID="prebid",t.MODULE_TYPE_BIDDER="bidder",t.MODULE_TYPE_UID="userId",t.MODULE_TYPE_RTD="rtd",t.MODULE_TYPE_ANALYTICS="analytics"},3645:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.ACTIVITY_PARAM_SYNC_URL=t.ACTIVITY_PARAM_SYNC_TYPE=t.ACTIVITY_PARAM_STORAGE_TYPE=t.ACTIVITY_PARAM_S2S_NAME=t.ACTIVITY_PARAM_COMPONENT_TYPE=t.ACTIVITY_PARAM_COMPONENT_NAME=t.ACTIVITY_PARAM_COMPONENT=t.ACTIVITY_PARAM_ANL_CONFIG=t.ACTIVITY_PARAM_ADAPTER_CODE=void 0,t.activityParamsBuilder=function(e){return function(t,r,n){var a=(0,i.default)((0,i.default)((0,i.default)({},d,t),c,r),s,"".concat(t,".").concat(r));return t===o.MODULE_TYPE_BIDDER&&(a[u]=e(r)),l(Object.assign(a,n))}},t.buildActivityParams=void 0;var i=n(r(5794)),o=r(4840),a=r(2508),s=t.ACTIVITY_PARAM_COMPONENT="component",d=t.ACTIVITY_PARAM_COMPONENT_TYPE=s+"Type",c=t.ACTIVITY_PARAM_COMPONENT_NAME=s+"Name",u=t.ACTIVITY_PARAM_ADAPTER_CODE="adapterCode";t.ACTIVITY_PARAM_STORAGE_TYPE="storageType",t.ACTIVITY_PARAM_S2S_NAME="configName",t.ACTIVITY_PARAM_SYNC_TYPE="syncType",t.ACTIVITY_PARAM_SYNC_URL="syncUrl",t.ACTIVITY_PARAM_ANL_CONFIG="_config";var l=t.buildActivityParams=(0,a.hook)("sync",function(e){return e})},7199:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.ORTB_UFPD_PATHS=t.ORTB_IPV6_PATHS=t.ORTB_IPV4_PATHS=t.ORTB_GEO_PATHS=t.ORTB_EIDS_PATHS=void 0,t.appliesWhenActivityDenied=I,t.isData=A,t.objectTransformer=b,t.ortb2TransmitRules=E,t.redactRule=h,t.redactor=void 0,t.redactorFactory=S,t.sessionedApplies=y;var i=n(r(8287)),o=n(r(5881)),a=r(4700),s=r(9926),d=r(3364),c=r(1851),u=r(7592);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var p=t.ORTB_UFPD_PATHS=["data","ext.data","yob","gender","keywords","kwarray","id","buyeruid","customdata"].map(function(e){return"user.".concat(e)}).concat("device.ext.cdep"),f=t.ORTB_EIDS_PATHS=["user.eids","user.ext.eids"],g=t.ORTB_GEO_PATHS=["user.geo.lat","user.geo.lon","device.geo.lat","device.geo.lon"],v=t.ORTB_IPV4_PATHS=["device.ip"],m=t.ORTB_IPV6_PATHS=["device.ipv6"];function h(e){return Object.assign({get:function(){},run:function(e,t,r,n,i){var o=r&&r[n];if(A(o)&&i()){var a=this.get(o);void 0===a?delete r[n]:r[n]=a}}},e)}function b(e){return e.forEach(function(e){e.paths=e.paths.map(function(e){var t=e.split("."),r=t.pop();return[t.length>0?t.join("."):null,r]})}),function(t,r){for(var n=[],i=arguments.length,s=Array(i>2?i-2:0),d=2;d<i;d++)s[d-2]=arguments[d];var c=y.apply(void 0,[t].concat(s));return e.forEach(function(e){if(!1!==t[e.name]){var i,s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(e.paths);try{for(s.s();!(i=s.n()).done;){var d=(0,o.default)(i.value,2),u=d[0],p=d[1],f=null==u?r:(0,a.deepAccess)(r,u);if(n.push(e.run(r,u,f,p,c.bind(null,e))),!1===t[e.name])return}}catch(e){s.e(e)}finally{s.f()}}}),n.filter(function(e){return null!=e})}}function y(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(t){return e.hasOwnProperty(t.name)||(e[t.name]=!!t.applies.apply(t,r)),e[t.name]}}function A(e){return null!=e&&("object"!==(0,i.default)(e)||Object.keys(e).length>0)}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.isActivityAllowed;return function(r){return!t(e,r)}}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.isActivityAllowed;return[{name:c.ACTIVITY_TRANSMIT_UFPD,paths:p,applies:I(c.ACTIVITY_TRANSMIT_UFPD,e)},{name:c.ACTIVITY_TRANSMIT_EIDS,paths:f,applies:I(c.ACTIVITY_TRANSMIT_EIDS,e)},{name:c.ACTIVITY_TRANSMIT_PRECISE_GEO,paths:g,applies:I(c.ACTIVITY_TRANSMIT_PRECISE_GEO,e),get:function(e){return Math.round((e+Number.EPSILON)*100)/100}},{name:c.ACTIVITY_TRANSMIT_PRECISE_GEO,paths:v,applies:I(c.ACTIVITY_TRANSMIT_PRECISE_GEO,e),get:function(e){return(0,u.scrubIPv4)(e)}},{name:c.ACTIVITY_TRANSMIT_PRECISE_GEO,paths:m,applies:I(c.ACTIVITY_TRANSMIT_PRECISE_GEO,e),get:function(e){return(0,u.scrubIPv6)(e)}},{name:c.ACTIVITY_TRANSMIT_TID,paths:["source.tid"],applies:I(c.ACTIVITY_TRANSMIT_TID,e)}].map(h)}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.isActivityAllowed,t=b(E(e)),r=b(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.isActivityAllowed;return[{name:c.ACTIVITY_TRANSMIT_EIDS,paths:["userId","userIdAsEids"],applies:I(c.ACTIVITY_TRANSMIT_EIDS,e)},{name:c.ACTIVITY_TRANSMIT_TID,paths:["ortb2Imp.ext.tid"],applies:I(c.ACTIVITY_TRANSMIT_TID,e)}].map(h)}(e));return function(e){var n={};return{ortb2:function(r){return t(n,r,e),r},bidRequest:function(t){return r(n,t,e),t}}}}t.redactor=S(),(0,d.registerActivityControl)(c.ACTIVITY_TRANSMIT_TID,"enableTIDs config",function(){if(!s.config.getConfig("enableTIDs"))return{allow:!1,reason:"TIDs are disabled"}})},3364:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.registerActivityControl=t.isActivityAllowed=void 0,t.ruleRegistry=d;var i=n(r(5881)),o=r(4700),a=r(3645);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.prefixLog)("Activity control:"),t={};function r(e){return t[e]=t[e]||[]}var n={};function d(t){var r=t.activity,i=t.name,o=t.allow,a=t.reason,s=t.component,d="".concat(i," ").concat(o?"allowed":"denied"," '").concat(r,"' for '").concat(s,"'").concat(a?":":""),c=n.hasOwnProperty(d);if(c&&clearTimeout(n[d]),n[d]=setTimeout(function(){return delete n[d]},1e3),!c){var u=[d];a&&u.push(a),(o?e.logInfo:e.logWarn).apply(e,u)}}return[function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,a=r(e),s=a.findIndex(function(e){return o<(0,i.default)(e,1)[0]}),d=[o,t,n];return a.splice(s<0?a.length:s,0,d),function(){var e=a.indexOf(d);e>=0&&a.splice(e,1)}},function(t,n){var o,c,u,l=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,d=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){d=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(d)throw o}}}}(r(t));try{for(l.s();!(u=l.n()).done;){var p=(0,i.default)(u.value,3),f=p[0],g=p[1],v=p[2];if(o!==f&&c)break;o=f;var m=function(t,r,n,i){var o;try{o=n(i)}catch(n){e.logError("Exception in rule ".concat(r," for '").concat(t,"'"),n),o={allow:!1,reason:n}}return o&&Object.assign({activity:t,name:r,component:i[a.ACTIVITY_PARAM_COMPONENT]},o)}(t,g,v,n);if(m)if(!m.allow)return d(m),!1;else c=m}}catch(e){l.e(e)}finally{l.f()}return c&&d(c),!0}]}var c=d(),u=(0,i.default)(c,2);t.registerActivityControl=u[0],t.isActivityAllowed=u[1]},8082:function(e,t,r){"use strict";var n=r(2100),i=r(8287);Object.defineProperty(t,"__esModule",{value:!0}),t.deferRendering=L,t.doRender=void 0,t.emitAdRenderFail=P,t.emitAdRenderSucceeded=D,t.getRenderingData=t.getBidToRender=void 0,t.handleCreativeEvent=R,t.handleNativeMessage=k,t.handleRender=U,t.insertLocatorFrame=function e(){if(!window.frames[d.PB_LOCATOR])if(document.body){var t=(0,a.createInvisibleIframe)();t.name=d.PB_LOCATOR,document.body.appendChild(t)}else window.requestAnimationFrame(e)},t.markBidAsRendered=M,t.markWinner=F,t.markWinningBid=void 0,t.renderAdDirect=function(e,t,r){function n(e,r){P(Object.assign({id:t,bid:s},{reason:e,message:r}))}function i(t,r){var n,i=null==(n=e.defaultView)?void 0:n.frameElement;i&&(t&&(i.width=t,i.style.width&&(i.style.width="".concat(t,"px"))),r&&(i.height=r,i.style.height&&(i.style.height="".concat(r,"px"))))}var o,s,c=(o={resizeFn:i},function(e,t,r){j.hasOwnProperty(e)&&j[e](t,r,o)});function u(t){t.ad?(e.write(t.ad),e.close(),D({doc:e,bid:s,id:s.adId})):(0,f.getCreativeRenderer)(s).then(function(r){return r(t,{sendMessage:function(e,t){return c(e,t,s)},mkFrame:a.createIframe},e.defaultView)}).then(function(){return D({doc:e,bid:s,id:s.adId})},function(e){n((null==e?void 0:e.reason)||d.AD_RENDER_FAILED_REASON.EXCEPTION,null==e?void 0:e.message),(null==e?void 0:e.stack)&&(0,a.logError)(e)});var r=document.createComment("Creative ".concat(s.creativeId," served by ").concat(s.bidder," Prebid.js Header Bidding"));(0,a.insertElement)(r,e,"html")}try{t&&e?C(t).then(function(n){s=n,U({renderFn:u,resizeFn:i,adId:t,options:{clickUrl:null==r?void 0:r.clickThrough},bidResponse:n,doc:e})}):n(d.AD_RENDER_FAILED_REASON.MISSING_DOC_OR_ADID,"missing ".concat(t?"doc":"adId"))}catch(e){n(w,e.message)}},t.renderIfDeferred=G;var o=n(r(5794)),a=r(4700),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=I(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1322)),d=r(3103),c=r(9926),u=r(8915),l=r(4607),p=r(3479),f=r(5141),g=r(2508),v=r(8172),m=r(555),h=n(r(9577)),b=r(8538),y=r(491),A=r(9962);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(I=function(e){return e?r:t})(e)}var E=d.EVENTS.AD_RENDER_FAILED,S=d.EVENTS.AD_RENDER_SUCCEEDED,O=d.EVENTS.STALE_RENDER,_=d.EVENTS.BID_WON,T=d.EVENTS.EXPIRED_RENDER,w=d.AD_RENDER_FAILED_REASON.EXCEPTION,C=t.getBidToRender=(0,g.hook)("sync",function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.GreedyPromise.resolve();return t.then(function(t){return null!=t?t:p.auctionManager.findBidByAdId(e)}).catch(function(e){(0,a.logError)("Error getting bid to render:",e)})}),x=t.markWinningBid=(0,g.hook)("sync",function(e){var t;((null==(t=(0,y.parseEventTrackers)(e.eventtrackers)[y.EVENT_TYPE_WIN])?void 0:t[y.TRACKER_METHOD_IMG])||[]).forEach(function(e){return(0,a.triggerPixel)(e)}),s.emit(_,e),p.auctionManager.addWinningBid(e)});function P(e){var t=e.reason,r=e.message,n=e.bid,i=e.id,o={reason:t,message:r};n&&(o.bid=n,o.adId=n.adId),i&&(o.adId=i),(0,a.logError)("Error rendering ad (id: ".concat(i,"): ").concat(r)),s.emit(E,o)}function D(e){var t=e.doc,r=e.bid,n=e.id,i={doc:t};r&&(i.bid=r),n&&(i.adId=n),h.default.callAdRenderSucceededBidder(r.adapterCode||r.bidder,r),s.emit(S,i)}function R(e,t){switch(e.event){case d.EVENTS.AD_RENDER_FAILED:P({bid:t,id:t.adId,reason:e.info.reason,message:e.info.message});break;case d.EVENTS.AD_RENDER_SUCCEEDED:D({doc:null,bid:t,id:t.adId});break;default:(0,a.logError)("Received event request for unsupported event: '".concat(e.event,"' (adId: '").concat(t.adId,"')"))}}function k(e,t,r){var n=r.resizeFn,i=r.fireTrackers,o=void 0===i?v.fireNativeTrackers:i;"resizeNativeHeight"===e.action?n(e.width,e.height):o(e,t)}var j=(0,o.default)({},d.MESSAGES.EVENT,R);j[d.MESSAGES.NATIVE]=k;var N=t.getRenderingData=(0,g.hook)("sync",function(e,t){var r=e.ad,n=e.adUrl,i=e.cpm,o=e.originalCpm,s=e.width,d=e.height,c=e.instl,u={AUCTION_PRICE:o||i,CLICKTHROUGH:(null==t?void 0:t.clickUrl)||""};return{ad:(0,a.replaceMacros)(r,u),adUrl:(0,a.replaceMacros)(n,u),width:s,height:d,instl:c}}),B=t.doRender=(0,g.hook)("sync",function(e){var t=e.renderFn,r=e.resizeFn,n=e.bidResponse,i=e.options,o=e.doc,s=e.isMainDocument,c=void 0===s?o===document&&!(0,a.inIframe)():s,u=n.mediaType===l.VIDEO;if(c||u)return void P({reason:d.AD_RENDER_FAILED_REASON.PREVENT_WRITING_ON_MAIN_DOCUMENT,message:u?"Cannot render video ad without a renderer":"renderAd was prevented from writing to the main document.",bid:n,id:n.adId});var p=N(n,i);t(Object.assign({adId:n.adId},p));var f=p.width,g=p.height;(null!=f?f:g)!=null&&r(f,g)});function U(e){var t=e.renderFn,r=e.resizeFn,n=e.adId,i=e.options,o=e.bidResponse,u=e.doc;L(o,function(){var e,l;if(null==o)return void P({reason:d.AD_RENDER_FAILED_REASON.CANNOT_FIND_AD,message:"Cannot find ad '".concat(n,"'"),id:n});if(o.status!==d.BID_STATUS.RENDERED||((0,a.logWarn)("Ad id ".concat(n," has been rendered before")),s.emit(O,o),null==(e=c.config.getConfig("auctionOptions"))||!e.suppressStaleRender)){if(A.filters.isBidNotExpired(o)||((0,a.logWarn)("Ad id ".concat(n," has been expired")),s.emit(T,o),null==(l=c.config.getConfig("auctionOptions"))||!l.suppressExpiredRender))try{B({renderFn:t,resizeFn:r,bidResponse:o,options:i,doc:u})}catch(e){P({reason:d.AD_RENDER_FAILED_REASON.EXCEPTION,message:e.message,id:n,bid:o})}}})}function M(e){var t=(0,b.useMetrics)(e.metrics);t.checkpoint("bidRender"),t.timeBetween("bidWon","bidRender","render.deferred"),t.timeBetween("auctionEnd","bidRender","render.pending"),t.timeBetween("requestBids","bidRender","render.e2e"),e.status=d.BID_STATUS.RENDERED}B.before(function(e,t){var r=t.bidResponse,n=t.doc;(0,u.isRendererRequired)(r.renderer)?((0,u.executeRenderer)(r.renderer,r,n),D({doc:n,bid:r,id:r.adId}),e.bail()):e(t)},100);var V=new WeakMap,q=new WeakSet;function L(e,t){if(null==e)return void t();V.set(e,t),e.deferRendering||G(e),F(e)}function F(e){q.has(e)||(q.add(e),x(e))}function G(e){var t=V.get(e);t&&(t(),M(e),V.delete(e))}},2568:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerVideoSupport=function(e,t){o.adServers=o.adServers||{},o.adServers[e]=o.adServers[e]||{},Object.keys(t).forEach(function(r){if(o.adServers[e][r])return void(0,i.logWarn)("Attempting to add an already registered function property ".concat(r," for AdServer ").concat(e,"."));o.adServers[e][r]=t[r]})};var n=r(7045),i=r(4700),o=(0,n.getGlobal)()},3940:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAuctionsCounter=function(e){var t;return(null==(t=r)||null==(t=t[e])?void 0:t.auctionsCounter)||0},t.getBidderRequestsCounter=function(e,t){var n;return(null==(n=r)||null==(n=n[e])||null==(n=n.bidders)||null==(n=n[t])?void 0:n.requestsCounter)||0},t.getBidderWinsCounter=function(e,t){var n;return(null==(n=r)||null==(n=n[e])||null==(n=n.bidders)||null==(n=n[t])?void 0:n.winsCounter)||0},t.getRequestsCounter=function(e){var t;return(null==(t=r)||null==(t=t[e])?void 0:t.requestsCounter)||0},t.incrementAuctionsCounter=function(e){return n(e,"auctionsCounter")},t.incrementBidderRequestsCounter=function(e,t){return n(e,"requestsCounter",t)},t.incrementBidderWinsCounter=function(e,t){return n(e,"winsCounter",t)},t.incrementRequestsCounter=function(e){return n(e,"requestsCounter")},t.reset=function(){r={}};var r={};function n(e,t,n){var i,o=(i=r[e]=r[e]||{bidders:{}},n?i.bidders[n]=i.bidders[n]||{}:i);return o[t]=(o[t]||0)+1,o[t]}},4050:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e;return{callBids:function(){},setBidderCode:function(e){t=e},getBidderCode:function(){return t}}}},9577:function(e,t,r){"use strict";var n,i=r(2100),o=r(8287);Object.defineProperty(t,"__esModule",{value:!0}),t.PBS_ADAPTER_NAME=t.PARTITIONS=void 0,t._filterBidsForAdUnit=G,t._partitionBidders=Y,Object.defineProperty(t,"coppaDataHandler",{enumerable:!0,get:function(){return b.coppaDataHandler}}),t.filterBidsForAdUnit=t.dep=t.default=void 0,Object.defineProperty(t,"gdprDataHandler",{enumerable:!0,get:function(){return b.gdprDataHandler}}),t.getS2SBidderSet=H,Object.defineProperty(t,"gppDataHandler",{enumerable:!0,get:function(){return b.gppDataHandler}}),t.partitionBidders=void 0,t.s2sActivityParams=L,t.setupAdUnitMediaTypes=void 0,Object.defineProperty(t,"uspDataHandler",{enumerable:!0,get:function(){return b.uspDataHandler}});var a=i(r(939)),s=i(r(5881)),d=i(r(5794)),c=r(4700),u=r(8172),l=r(523),p=r(7316),f=r(9926),g=r(2508),v=r(1617),m=r(3940),h=r(2339),b=r(5789),y=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=x(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1322)),A=r(3103),I=r(8538),E=r(3479),S=r(4840),O=r(3364),_=r(1851),T=r(3645),w=r(7199),C=r(491);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(x=function(e){return e?r:t})(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){(0,d.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var R=t.PBS_ADAPTER_NAME="pbsBidAdapter",k=t.PARTITIONS={CLIENT:"client",SERVER:"server"},j=t.dep={isAllowed:O.isActivityAllowed,redact:w.redactor},N={},B=N.bidderRegistry={},U=N.aliasRegistry={},M=[];f.config.getConfig("s2sConfig",function(e){e&&e.s2sConfig&&(M=(0,c.isArray)(e.s2sConfig)?e.s2sConfig:[e.s2sConfig])});var V={},q=(0,T.activityParamsBuilder)(function(e){return N.resolveAlias(e)});function L(e){return q(S.MODULE_TYPE_PREBID,R,(0,d.default)({},T.ACTIVITY_PARAM_S2S_NAME,e.configName))}var F=(0,g.hook)("sync",function(e){var t=e.bidderCode,r=e.auctionId,n=e.bidderRequestId,i=e.adUnits,o=e.src,a=e.metrics;return i.reduce(function(e,i){var s=i.bids.filter(function(e){return e.bidder===t});return null==t&&0===s.length&&null!=i.s2sBid&&s.push({bidder:null}),e.push(s.reduce(function(e,s){var d,u,l=null==(s=Object.assign({},s,{ortb2Imp:(0,c.mergeDeep)({},i.ortb2Imp,s.ortb2Imp)},(0,c.getDefinedParams)(i,["nativeParams","nativeOrtbRequest","mediaType","renderer"]))).mediaTypes?i.mediaTypes:s.mediaTypes;return(0,c.isValidMediaTypes)(l)?s=Object.assign({},s,{mediaTypes:l}):(0,c.logError)("mediaTypes is not correctly configured for adunit ".concat(i.code)),"client"===o&&(0,m.incrementBidderRequestsCounter)(i.code,t),e.push(Object.assign({},s,{adUnitCode:i.code,transactionId:i.transactionId,adUnitId:i.adUnitId,sizes:(null==l||null==(d=l.banner)?void 0:d.sizes)||(null==l||null==(u=l.video)?void 0:u.playerSize)||[],bidId:s.bid_id||(0,c.getUniqueIdentifierStr)(),bidderRequestId:n,auctionId:r,src:o,metrics:a,auctionsCount:(0,m.getAuctionsCounter)(i.code),bidRequestsCount:(0,m.getRequestsCounter)(i.code),bidderRequestsCount:(0,m.getBidderRequestsCounter)(i.code,s.bidder),bidderWinsCount:(0,m.getBidderWinsCounter)(i.code,s.bidder),deferBilling:!!i.deferBilling,viewability:i.viewability||0})),e},[])),e},[]).reduce(c.flatten,[]).filter(function(e){return""!==e})},"getBids");function G(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.getS2SBidders,i=void 0===n?H:n;if(null==t)return e;var o=i(t);return e.filter(function(e){var t;return o.has(null!=(t=e.pbsHost)?t:e.bidder)})}var W=t.filterBidsForAdUnit=(0,g.hook)("sync",G,"filterBidsForAdUnit"),z=t.setupAdUnitMediaTypes=(0,g.hook)("sync",function(e,t){return e},"setupAdUnitMediaTypes");function H(e){(0,c.isArray)(e)||(e=[e]);var t=new Set([null]);return e.filter(function(e){return e&&e.enabled}).flatMap(function(e){return e.bidders}).forEach(function(e){return t.add(e)}),t}function Y(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.getS2SBidders,i=(void 0===n?H:n)(t);return(0,c.getBidderCodes)(e).reduce(function(e,t){var r=t.bidder,n=t.pbsHost;return e[i.has(n||r)?k.SERVER:k.CLIENT].push(r),e},(0,d.default)((0,d.default)({},k.CLIENT,[]),k.SERVER,[]))}var J=t.partitionBidders=(0,g.hook)("sync",Y,"partitionBidders");function K(e,t){var r=B[e],n=(null==r?void 0:r.getSpec)&&r.getSpec();if(n&&n[t]&&"function"==typeof n[t])return[n,n[t]]}function Q(e,t,r,n){try{(0,c.logInfo)("Invoking ".concat(e,".").concat(t));for(var i=arguments.length,o=Array(i>4?i-4:0),a=4;a<i;a++)o[a-4]=arguments[a];f.config.runWithBidder(e,n.bind.apply(n,[r].concat(o)))}catch(r){(0,c.logWarn)("Error calling ".concat(t," of ").concat(e))}}function X(e,t,r){if((null==r?void 0:r.source)!==A.S2S.SRC){var n=K(e,t);null!=n&&Q.apply(void 0,[e,t].concat((0,a.default)(n),[r]))}}N.makeBidRequests=(0,g.hook)("sync",function(e,t,r,n,i){var o,a,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},d=arguments.length>6?arguments[6]:void 0;d=(0,I.useMetrics)(d),y.emit(A.EVENTS.BEFORE_REQUEST_BIDS,e),(0,u.decorateAdUnitsWithNativeParams)(e),e.map(function(e){return e.code}).filter(c.uniques).forEach(m.incrementAuctionsCounter),e.forEach(function(e){(0,c.isPlainObject)(e.mediaTypes)||(e.mediaTypes={}),e.bids=e.bids.filter(function(e){return!e.bidder||j.isAllowed(_.ACTIVITY_FETCH_BIDS,q(S.MODULE_TYPE_BIDDER,e.bidder))}),(0,m.incrementRequestsCounter)(e.code)});var l=J(e=z(e,i),M),p=l[k.CLIENT],g=l[k.SERVER];f.config.getConfig("bidderSequence")===f.RANDOM&&(p=(0,c.shuffle)(p));var E=(0,h.getRefererInfo)(),O=[],T=s.global||{},w=s.bidder||{};function C(e,t){var n=j.redact(null!=t?t:q(S.MODULE_TYPE_BIDDER,e.bidderCode)),i=Object.freeze(n.ortb2((0,c.mergeDeep)({source:{tid:r}},T,w[e.bidderCode])));return e.ortb2=i,e.bids=e.bids.map(function(e){return e.ortb2=i,n.bidRequest(e)}),e}M.forEach(function(n){var i=L(n);if(n&&n.enabled&&j.isAllowed(_.ACTIVITY_FETCH_BIDS,i)){var o,a,s,u=(o=e,a=(0,c.deepClone)(o),s=!1,a.forEach(function(e){var t=e.bids.filter(function(e){var t;return e.module===R&&(null==(t=e.params)?void 0:t.configName)===n.configName});1===t.length?(e.s2sBid=t[0],s=!0,e.ortb2Imp=(0,c.mergeDeep)({},e.s2sBid.ortb2Imp,e.ortb2Imp)):t.length>1&&(0,c.logWarn)('Multiple "module" bids for the same s2s configuration; all will be ignored',t),e.bids=W(e.bids,n).map(function(e){return e.bid_id=(0,c.getUniqueIdentifierStr)(),e})}),{adUnits:a=a.filter(function(e){return 0!==e.bids.length||null!=e.s2sBid}),hasModuleBids:s}),l=u.adUnits,p=u.hasModuleBids,f=(0,c.generateUUID)();(0===g.length&&p?[null]:g).forEach(function(e){var o,a=(0,c.getUniqueIdentifierStr)(),s=d.fork(),u=F({bidderCode:e,auctionId:r,bidderRequestId:a,adUnits:(0,c.deepClone)(l),src:A.S2S.SRC,metrics:s}),p=C({bidderCode:e,pbsHost:null==u||null==(o=u.find(function(e){return e.pbsHost}))?void 0:o.pbsHost,auctionId:r,bidderRequestId:a,uniquePbsTid:f,bids:u,auctionStart:t,timeout:n.timeout,src:A.S2S.SRC,refererInfo:E,metrics:s},i);0!==p.bids.length&&O.push(p)}),l.forEach(function(e){var t=e.bids.filter(function(e){return(0,v.find)(O,function(t){return(0,v.find)(t.bids,function(t){return t.bidId===e.bid_id})})});e.bids=t}),O.forEach(function(e){var t,r;void 0===e.adUnitsS2SCopy&&(e.adUnitsS2SCopy=l.filter(function(e){return e.bids.length>0||null!=e.s2sBid})),null!=(t=e.adUnitsS2SCopy[0])&&t.bidPoolId&&(e.bidPoolId=e.adUnitsS2SCopy[0].bidPoolId),null!=(r=e.adUnitsS2SCopy[0])&&r.passiveBidPoolId&&(e.passiveBidPoolId=e.adUnitsS2SCopy[0].passiveBidPoolId)})}});var x=(o=e,(a=(0,c.deepClone)(o)).forEach(function(e){e.bids=W(e.bids,null)}),a=a.filter(function(e){return 0!==e.bids.length}));return p.forEach(function(e){var o,a,s=(0,c.getUniqueIdentifierStr)(),u=d.fork(),l=C({bidderCode:e,auctionId:r,bidderRequestId:s,bids:F({bidderCode:e,auctionId:r,bidderRequestId:s,adUnits:(0,c.deepClone)(x),labels:i,src:"client",metrics:u}),auctionStart:t,timeout:n,refererInfo:E,metrics:u}),p=B[e];p||(0,c.logError)("Trying to make a request for bidder that does not exist: ".concat(e)),p&&l.bids&&0!==l.bids.length&&(null!=(o=x[0])&&o.bidPoolId&&(l.bidPoolId=x[0].bidPoolId),null!=(a=x[0])&&a.passiveBidPoolId&&(l.passiveBidPoolId=x[0].passiveBidPoolId),O.push(l))}),O.forEach(function(e){b.gdprDataHandler.getConsentData()&&(e.gdprConsent=b.gdprDataHandler.getConsentData()),b.uspDataHandler.getConsentData()&&(e.uspConsent=b.uspDataHandler.getConsentData()),b.gppDataHandler.getConsentData()&&(e.gppConsent=b.gppDataHandler.getConsentData())}),O},"makeBidRequests"),N.callBids=function(e,t,r,n,i,o,a){var d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(!t.length)return void(0,c.logWarn)("callBids executed with no bidRequests.  Were they filtered by labels or sizing?");var u=t.reduce(function(e,t){return e[Number(void 0!==t.src&&t.src===A.S2S.SRC)].push(t),e},[[],[]]),l=(0,s.default)(u,2),g=l[0],v=l[1],m=[];v.forEach(function(e){for(var t=-1,r=0;r<m.length;++r)if(e.uniquePbsTid===m[r].uniquePbsTid){t=r;break}t<=-1&&m.push(e)});var h=0;M.forEach(function(e){var t=m[h];if(e&&t&&H(e).has(t.pbsHost||t.bidderCode)){var s=(0,p.ajaxBuilder)(o,i?{request:i.request.bind(null,"s2s"),done:i.done}:void 0),u=e.bidders,l=B[e.adapter],f=t.uniquePbsTid,g=t.adUnitsS2SCopy,b=v.filter(function(e){return e.uniquePbsTid===f});if(l){var I={ad_units:g,s2sConfig:e,ortb2Fragments:d,requestBidsTimeout:o};if(I.ad_units.length){var E=b.map(function(e){return e.start=(0,c.timestamp)(),function(t){t||a(e.bidderRequestId),n.apply(e,arguments)}}),S=(0,c.getBidderCodes)(I.ad_units).filter(function(e){var t=e.bidder,r=e.pbsHost;return u.includes(r)||u.includes(t)});(0,c.logMessage)("CALLING S2S HEADER BIDDERS ==== ".concat(S.length>0?S.join(", "):'No bidder specified, using "ortb2Imp" definition(s) only')),b.forEach(function(e){y.emit(A.EVENTS.BID_REQUESTED,D(D({},e),{},{tid:e.auctionId}))}),l.callBids(I,v,r,function(e){return E.forEach(function(t){return t(e)})},s)}}else(0,c.logError)("missing "+e.adapter);h++}}),g.forEach(function(e){e.start=(0,c.timestamp)();var t=B[e.bidderCode];f.config.runWithBidder(e.bidderCode,function(){(0,c.logMessage)("CALLING BIDDER"),y.emit(A.EVENTS.BID_REQUESTED,e)});var s=(0,p.ajaxBuilder)(o,i?{request:i.request.bind(null,e.bidderCode),done:i.done}:void 0),d=n.bind(e);try{f.config.runWithBidder(e.bidderCode,t.callBids.bind(t,e,r,d,s,function(){return a(e.bidderRequestId)},f.config.callbackWithBidder(e.bidderCode)))}catch(t){(0,c.logError)("".concat(e.bidderCode," Bid Adapter emitted an uncaught error when parsing their bidRequest"),{e:t,bidRequest:e}),d()}})},N.videoAdapters=[],N.registerBidAdapter=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.supportedMediaTypes,o=void 0===i?[]:i;e&&t?"function"==typeof e.callBids?(B[t]=e,b.GDPR_GVLIDS.register(S.MODULE_TYPE_BIDDER,t,null==(r=e.getSpec)?void 0:r.call(e).gvlid),(0,v.includes)(o,"video")&&N.videoAdapters.push(t),(0,v.includes)(o,"native")&&u.nativeAdapters.push(t)):(0,c.logError)("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):(0,c.logError)("bidAdapter or bidderCode not specified")},N.aliasBidAdapter=function(e,t,r){if(void 0===B[t]){var n=B[e];if(void 0===n){var i=[];M.forEach(function(r){if(r.bidders&&r.bidders.length){var n=r&&r.bidders;r&&(0,v.includes)(n,t)?U[t]=e:i.push(e)}}),i.forEach(function(e){(0,c.logError)('bidderCode "'+e+'" is not an existing bidder.',"adapterManager.aliasBidAdapter")})}else try{var o,a,s=(o=[],(0,v.includes)(N.videoAdapters,e)&&o.push("video"),(0,v.includes)(u.nativeAdapters,e)&&o.push("native"),o);if(n.constructor.prototype!=Object.prototype)(a=new n.constructor).setBidderCode(t);else{var d=(r||{}).useBaseGvlid,p=n.getSpec(),f=void 0!==d&&d?p.gvlid:null==r?void 0:r.gvlid;null==f&&null!=p.gvlid&&(0,c.logWarn)("Alias '".concat(t,"' will NOT re-use the GVL ID of the original adapter ('").concat(p.code,"', gvlid: ").concat(p.gvlid,"). Functionality that requires TCF consent may not work as expected."));var g=r&&r.skipPbsAliasing;a=(0,l.newBidder)(Object.assign({},p,{code:t,gvlid:f,skipPbsAliasing:g})),U[t]=e}N.registerBidAdapter(a,t,{supportedMediaTypes:s})}catch(t){(0,c.logError)(e+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else(0,c.logMessage)('alias name "'+t+'" has been already specified.')},N.resolveAlias=function(e){for(var t,r=e;U[r]&&(!t||!t.has(r));)r=U[r],(t=t||new Set).add(r);return r},N.registerAnalyticsAdapter=function(e){var t=e.adapter,r=e.code,n=e.gvlid;t&&r?"function"==typeof t.enableAnalytics?(t.code=r,V[r]={adapter:t,gvlid:n},b.GDPR_GVLIDS.register(S.MODULE_TYPE_ANALYTICS,r,n)):(0,c.logError)('Prebid Error: Analytics adaptor error for analytics "'.concat(r,'"\n        analytics adapter must implement an enableAnalytics() function')):(0,c.logError)("Prebid Error: analyticsAdapter or analyticsCode not specified")},N.enableAnalytics=function(e){(0,c.isArray)(e)||(e=[e]),e.forEach(function(e){var t=V[e.provider];t&&t.adapter?j.isAllowed(_.ACTIVITY_REPORT_ANALYTICS,q(S.MODULE_TYPE_ANALYTICS,e.provider,(0,d.default)({},T.ACTIVITY_PARAM_ANL_CONFIG,e)))&&t.adapter.enableAnalytics(e):(0,c.logError)("Prebid Error: no analytics adapter found in registry for '".concat(e.provider,"'."))})},N.getBidAdapter=function(e){return B[e]},N.getAnalyticsAdapter=function(e){return V[e]},N.callTimedOutBidders=function(e,t,r){t=t.map(function(t){return t.params=(0,c.getUserConfiguredParams)(e,t.adUnitCode,t.bidder),t.timeout=r,t}),Object.keys(t=(0,c.groupBy)(t,"bidder")).forEach(function(e){X(e,"onTimeout",t[e])})},N.callBidWonBidder=function(e,t,r){t.params=(0,c.getUserConfiguredParams)(r,t.adUnitCode,t.bidder),(0,m.incrementBidderWinsCounter)(t.adUnitCode,t.bidder),X(e,"onBidWon",t)},n=new WeakSet,N.triggerBilling=function(e){if(!n.has(e)){var t;n.add(e),((null==(t=(0,C.parseEventTrackers)(e.eventtrackers)[C.EVENT_TYPE_IMPRESSION])?void 0:t[C.TRACKER_METHOD_IMG])||[]).forEach(function(e){return c.internal.triggerPixel(e)}),X(e.bidder,"onBidBillable",e)}},N.callSetTargetingBidder=function(e,t){X(e,"onSetTargeting",t)},N.callBidViewableBidder=function(e,t){X(e,"onBidViewable",t)},N.callBidderError=function(e,t,r){X(e,"onBidderError",{error:t,bidderRequest:r})},N.callAdRenderSucceededBidder=function(e,t){X(e,"onAdRenderSucceeded",t)},N.callDataDeletionRequest=(0,g.hook)("sync",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n="onDataDeletionRequest";Object.keys(B).filter(function(e){return!U.hasOwnProperty(e)}).forEach(function(e){var r=K(e,n);if(null!=r){var i=E.auctionManager.getBidsRequested().filter(function(t){return function(e){for(var t=new Set;U.hasOwnProperty(e)&&!t.has(e);)t.add(e),e=U[e];return e}(t.bidderCode)===e});Q.apply(void 0,[e,n].concat((0,a.default)(r),[i],t))}}),Object.entries(V).forEach(function(e){var r,i=(0,s.default)(e,2),o=i[0],a=i[1],d=null==a||null==(r=a.adapter)?void 0:r[n];if("function"==typeof d)try{d.apply(a.adapter,t)}catch(e){(0,c.logError)("error calling ".concat(n," of ").concat(o),e)}})}),t.default=N},523:function(e,t,r){"use strict";var n=r(2100),i=r(8287);Object.defineProperty(t,"__esModule",{value:!0}),t.adapterMetrics=V,t.addPaapiConfig=void 0,t.duplicateRequest=k,t.guardTids=void 0,t.isValid=M,t.newBidder=D,t.prepareRequestWithOrtbData=R,t.processBidderRequests=void 0,t.registerBidder=function(e){var t=Array.isArray(e.supportedMediaTypes)?{supportedMediaTypes:e.supportedMediaTypes}:void 0;function r(e){var r=D(e);c.default.registerBidAdapter(r,e.code,t)}r(e),Array.isArray(e.aliases)&&e.aliases.forEach(function(t){var n,i,o=t;(0,b.isPlainObject)(t)&&(o=t.code,n=t.gvlid,i=t.skipPbsAliasing),c.default.aliasRegistry[o]=e.code,r(Object.assign({},e,{code:o,gvlid:n,skipPbsAliasing:i}))})},t.registerSyncInner=void 0;var o=n(r(8287)),a=n(r(939)),s=n(r(5881)),d=n(r(4050)),c=n(r(9577)),u=r(9926),l=r(2035),p=r(7317),f=r(8172),g=r(5236),v=r(3103),m=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1322)),h=r(1617),b=r(4700),y=r(2508),A=r(3479),I=r(3951),E=r(8538),S=r(3364),O=r(2887),_=r(4840),T=r(1851);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}var C=["cpm","ttl","creativeId","netRevenue","currency"],x=["auctionId","transactionId"],P=t.guardTids=(0,b.memoize)(function(e){var t=e.bidderCode;if((0,S.isActivityAllowed)(T.ACTIVITY_TRANSMIT_TID,(0,O.activityParams)(_.MODULE_TYPE_BIDDER,t)))return{bidRequest:function(e){return e},bidderRequest:function(e){return e}};function r(e,t,r){return x.includes(t)?null:Reflect.get(e,t,r)}function n(e,t){var r=new Proxy(e,t);return Object.entries(e).filter(function(e){var t=(0,s.default)(e,2);return"function"==typeof(t[0],t[1])}).forEach(function(t){var n=(0,s.default)(t,2),i=n[0],o=n[1];return r[i]=o.bind(e)}),r}var i=(0,b.memoize)(function(e){return n(e,{get:r})},function(e){return e.bidId});return{bidRequest:i,bidderRequest:function(e){return n(e,{get:function(t,n,o){return"bids"===n?e.bids.map(i):r(t,n,o)}})}}});function D(e){return Object.assign(new d.default(e.code),{getSpec:function(){return Object.freeze(Object.assign({},e))},registerSyncs:t,callBids:function(r,n,i,o,a,s){if(Array.isArray(r.bids)){var d=P(r),p={},f=[],g=V(r).measureTime("validate",function(){return r.bids.filter(function(t){var r;return r=d.bidRequest(t),!!e.isBidRequestValid(r)||((0,b.logWarn)("Invalid bid sent to bidder ".concat(e.code,": ").concat(JSON.stringify(r))),!1)})});if(0===g.length)return void y();var h={};g.forEach(function(e){h[e.bidId]=e,e.adUnitCode||(e.adUnitCode=e.placementCode)}),N(e,g,r,o,s,{onRequest:function(e){return m.emit(v.EVENTS.BEFORE_BIDDER_HTTP,r,e)},onResponse:function(t){a(e.code),f.push(t)},onPaapi:function(e){var t=h[e.bidId];t?U(t,e):(0,b.logWarn)("Received fledge auction configuration for an unknown bidId",e)},onError:function(t,n){n.timedOut||a(e.code),c.default.callBidderError(e.code,n,r),m.emit(v.EVENTS.BIDDER_ERROR,{error:n,bidderRequest:r}),(0,b.logError)("Server call for ".concat(e.code," failed: ").concat(t," ").concat(n.status,". Continuing without bids."),{bidRequests:g})},onBid:function(t){var r=h[t.requestId];if(r){if(t.adapterCode=r.bidder,s=t.bidderCode,d=r.bidder,c=I.bidderSettings.get(d,"allowAlternateBidderCodes")||!1,u=I.bidderSettings.get(d,"allowedAlternateBidderCodes"),s&&d&&d!==s&&(u=(0,b.isArray)(u)?u.map(function(e){return e.trim().toLowerCase()}).filter(function(e){return!!e}).filter(b.uniques):u,!c||(0,b.isArray)(u)&&"*"!==u[0]&&!u.includes(s))||0){(0,b.logWarn)("".concat(t.bidderCode," is not a registered partner or known bidder of ").concat(r.bidder,", hence continuing without bid. If you wish to support this bidder, please mark allowAlternateBidderCodes as true in bidderSettings.")),n.reject(r.adUnitCode,t,v.REJECTION_REASON.BIDDER_DISALLOWED);return}t.originalCpm=t.cpm,t.originalCurrency=t.currency,t.meta=t.meta||Object.assign({},t[r.bidder]),t.deferBilling=r.deferBilling,t.deferRendering=t.deferBilling&&(null!=(f=t.deferRendering)?f:"function"!=typeof e.onBidBillable);var i,o,a,s,d,c,u,f,g=Object.assign((0,l.createBid)(v.STATUS.GOOD,r),t,(0,b.pick)(r,x));i=r.adUnitCode,o=g,(a=(0,E.useMetrics)(o.metrics)).checkpoint("addBidResponse"),p[i]=!0,a.measureTime("addBidResponse.validate",function(){return M(i,o)})?n(i,o):n.reject(i,o,v.REJECTION_REASON.INVALID)}else(0,b.logWarn)("Bidder ".concat(e.code," made bid for unknown request ID: ").concat(t.requestId,". Ignoring.")),n.reject(null,t,v.REJECTION_REASON.INVALID_REQUEST_ID)},onCompletion:y})}function y(){i(),u.config.runWithBidder(e.code,function(){m.emit(v.EVENTS.BIDDER_DONE,r),t(f,r.gdprConsent,r.uspConsent,r.gppConsent)})}}});function t(t,r,n,i){B(e,t,r,n,i)}}function R(e,t){var r,n,i=(0,b.deepClone)(e);return i.ortb2.app=(null==t?void 0:t.appData)||{},i.ortb2.app.ext=null==e||null==(r=e.site)?void 0:r.ext,i.ortb2.app.publisher=null==e||null==(n=e.site)?void 0:n.publisher,null!=t&&t.bseat&&(i.ortb2.bseat=t.bseat),delete i.ortb2.site,i}function k(e){var t=[];return e&&!Array.isArray(e)?(delete e.data.site,t.push(e),t):e&&Array.isArray(e)?t=[].concat((0,a.default)(t),(0,a.default)(e)):[]}var j=["bids","paapi"],N=t.processBidderRequests=(0,y.hook)("async",function(e,t,r,n,i,s){var d,c=s.onRequest,l=s.onResponse,p=s.onPaapi,f=s.onError,g=s.onBid,v=s.onCompletion,m=V(r);v=m.startTiming("total").stopBefore(v);var h=P(r),y=m.measureTime("buildRequests",function(){return e.buildRequests(t.map(h.bidRequest),h.bidderRequest(r))}),A=r,I=u.config.getConfig("appDataConfig"),E=[];if(null!=I&&null!=(d=I.bidders)&&d.includes(r.bidderCode)&&I.appData){A=R(r,I);var S=m.measureTime("buildRequests",function(){return e.buildRequests(t,A)});S&&(E=k(S))}if(!y||0===y.length)return void v();Array.isArray(y)||(y=[y]),y=[].concat((0,a.default)(y),(0,a.default)(E));var O=(0,b.delayExecution)(v,y.length);y.forEach(function(t){var r,a=m.fork();function s(e){null!=e&&(e.metrics=a.fork().renameWith()),g(e)}var d=i(function(r,n){var i,o,d;v();try{r=JSON.parse(r)}catch(e){}l(r={body:r,headers:(d=0,{get:n.getResponseHeader.bind(n)})});try{r=a.measureTime("interpretResponse",function(){return e.interpretResponse(r,t)})}catch(t){(0,b.logError)("Bidder ".concat(e.code," failed to interpret the server's response. Continuing without bids"),null,t),O();return}r&&!Object.keys(r).some(function(e){return!j.includes(e)})?(i=r.bids,o=r.paapi):i=r,(0,b.isArray)(o)&&o.forEach(p),i&&((0,b.isArray)(i)?i.forEach(s):s(i)),O()}),u=i(function(e,t){v(),f(e,t),O()});c(t);var v=a.startTiming("net");switch(t.method){case"GET":n("".concat(t.url).concat((r=t.data)?"?".concat("object"===(0,o.default)(r)?(0,b.parseQueryStringParameters)(r):r):""),{success:d,error:u},void 0,Object.assign({method:"GET",withCredentials:!0},t.options));break;case"POST":n(t.url,{success:d,error:u},"string"==typeof t.data?t.data:JSON.stringify(t.data),Object.assign({method:"POST",contentType:"text/plain",withCredentials:!0},t.options));break;default:(0,b.logWarn)("Skipping invalid request from ".concat(e.code,". Request type ").concat(t.type," must be GET or POST")),O()}})},"processBidderRequests"),B=t.registerSyncInner=(0,y.hook)("async",function(e,t,r,n,i){var o=u.config.getConfig("userSync.aliasSyncEnabled");if(e.getUserSyncs&&(o||!c.default.aliasRegistry[e.code])){var a=e.getUserSyncs({iframeEnabled:p.userSync.canBidderRegisterSync("iframe",e.code),pixelEnabled:p.userSync.canBidderRegisterSync("image",e.code)},t,r,n,i);a&&(Array.isArray(a)||(a=[a]),a.forEach(function(t){p.userSync.registerSync(t.type,e.code,t.url)}),p.userSync.bidderDone(e.code))}},"registerSyncs"),U=t.addPaapiConfig=(0,y.hook)("sync",function(e,t){},"addPaapiConfig");function M(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.index,o=void 0===i?A.auctionManager.index:i;function a(e){return"Invalid bid from ".concat(t.bidderCode,". Ignoring bid: ").concat(e)}return e?t?(r=Object.keys(t),C.every(function(e){return(0,h.includes)(r,e)&&!(0,h.includes)([void 0,null],t[e])}))?"native"!==t.mediaType||(0,f.nativeBidIsValid)(t,{index:o})?"video"!==t.mediaType||(0,g.isValidVideoBid)(t,{index:o})?"banner"!==t.mediaType||!!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.index,i=void 0===n?A.auctionManager.index:n;if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),!0;if(null!=t.wratio&&null!=t.hratio)return t.wratio=parseInt(t.wratio,10),t.hratio=parseInt(t.hratio,10),!0;var o=i.getBidRequest(t),a=i.getMediaTypes(t),d=o&&o.sizes||a&&a.banner&&a.banner.sizes,c=(0,b.parseSizesInput)(d);if(1===c.length){var u=c[0].split("x"),l=(0,s.default)(u,2),p=l[0],f=l[1];return t.width=parseInt(p,10),t.height=parseInt(f,10),!0}return!1}(e,t,{index:o})||((0,b.logError)(a("Banner bids require a width and height")),!1):((0,b.logError)(a("Video bid does not have required vastUrl or renderer property")),!1):((0,b.logError)(a("Native bid missing some required properties.")),!1):((0,b.logError)(a("Bidder ".concat(t.bidderCode," is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params."))),!1):((0,b.logWarn)("Some adapter tried to add an undefined bid for ".concat(e,".")),!1):((0,b.logWarn)("No adUnitCode was supplied to addBidResponse."),!1)}function V(e){return(0,E.useMetrics)(e.metrics).renameWith(function(t){return["adapter.client.".concat(t),"adapters.client.".concat(e.bidderCode,".").concat(t)]})}},6296:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadExternalScript=function(e,t,r,u,l,p){if((0,o.isActivityAllowed)(n.LOAD_EXTERNAL_SCRIPT,(0,i.activityParams)(t,r))){if(!r||!e)return void(0,s.logError)("cannot load external script without url and moduleCode");if(!(0,a.includes)(c,r))return void(0,s.logError)("".concat(r," not whitelisted for loading external JavaScript"));l||(l=document);var f,g,v,m,h,b,y=E(l,e);if(y)return u&&"function"==typeof u&&(y.loaded?u():y.callbacks.push(u)),y.tag;var A=d.get(l)||{},I={loaded:!1,tag:null,callbacks:[]};return A[e]=I,d.set(l,A),u&&"function"==typeof u&&I.callbacks.push(u),(0,s.logWarn)("module ".concat(r," is loading external JavaScript")),f=e,g=function(){I.loaded=!0;try{for(var e=0;e<I.callbacks.length;e++)I.callbacks[e]()}catch(e){(0,s.logError)("Error executing callback","adloader.js:loadExternalScript",e)}},v=l,m=p,v||(v=document),(h=v.createElement("script")).type="text/javascript",h.async=!0,(b=E(v,e))&&(b.tag=h),h.readyState?h.onreadystatechange=function(){("loaded"===h.readyState||"complete"===h.readyState)&&(h.onreadystatechange=null,g())}:h.onload=function(){g()},h.src=f,m&&(0,s.setScriptAttributes)(h,m),(0,s.insertElement)(h,v),h}function E(e,t){var r=d.get(e);return r&&r[t]?r[t]:null}};var n=r(1851),i=r(2887),o=r(3364),a=r(1617),s=r(4700),d=new WeakMap,c=["debugging","outstream","aaxBlockmeter","adagio","adloox","akamaidap","arcspan","airgrid","browsi","brandmetrics","clean.io","humansecurity","confiant","contxtful","hadron","mediafilter","medianet","azerionedge","a1Media","geoedge","qortex","dynamicAdBoost","51Degrees","symitridap","wurfl","nodalsAi","anonymised","optable","justtag","tncId","ftrackId","id5"]},4385:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPPID=void 0,t.getPPID=(0,r(2508).hook)("sync",function(){})},7316:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.ajax=void 0,t.ajaxBuilder=c,t.fetch=t.dep=void 0,t.fetcherFactory=d,t.sendBeacon=function(e,t){return!!window.navigator&&!!window.navigator.sendBeacon&&window.navigator.sendBeacon(e,t)};var i=n(r(8287)),o=r(9926),a=r(4700),s=t.dep={fetch:window.fetch.bind(window),makeRequest:function(e,t){return new Request(e,t)},timeout:function(e,t){var r=new AbortController,n=setTimeout(function(){r.abort(),(0,a.logError)("Request timeout after ".concat(e,"ms"),t),n=null},e);return{signal:r.signal,done:function(){n&&clearTimeout(n)}}}};function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.request,i=r.done,a=function(e,r){null==t||(null==(n=r)?void 0:n.signal)!=null||o.config.getConfig("disableAjaxTimeout")||(r=Object.assign({signal:(a=s.timeout(t,e)).signal},r));var n,i,a,d=s.fetch(e,r);return(null==(i=a)?void 0:i.done)!=null&&(d=d.finally(a.done)),d};return(null!=n||null!=i)&&(e=a,a=function(t,r){var o=new URL((null==t?void 0:t.url)==null?t:t.url,document.location).origin,a=e(t,r);return n&&n(o),i&&(a=a.finally(function(){return i(o)})),a}),a}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.request,n=t.done;return function(t,s,d){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{var u,l=c.method||(d?"POST":"GET"),p=document.createElement("a");p.href=t;var f="object"===(0,i.default)(s)&&null!==s?s:{success:function(){(0,a.logMessage)("xhr success")},error:function(e){(0,a.logError)("xhr error",null,e)}};if("function"==typeof s&&(f.success=s),(u=new window.XMLHttpRequest).onreadystatechange=function(){if(4===u.readyState){"function"==typeof n&&n(p.origin);var e=u.status;e>=200&&e<300||304===e?f.success(u.responseText,u):f.error(u.statusText,u)}},o.config.getConfig("disableAjaxTimeout")||(u.ontimeout=function(){(0,a.logError)("  xhr timeout after ",u.timeout,"ms")}),"GET"===l&&d){var g=(0,a.parseUrl)(t,c);Object.assign(g.search,d),t=(0,a.buildUrl)(g)}u.open(l,t,!0),o.config.getConfig("disableAjaxTimeout")||(u.timeout=e),c.withCredentials&&(u.withCredentials=!0),(0,a._each)(c.customHeaders,function(e,t){u.setRequestHeader(t,e)}),c.preflight&&u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.setRequestHeader("Content-Type",c.contentType||"text/plain"),"function"==typeof r&&r(p.origin),"POST"===l&&d?u.send(d):u.send()}catch(e){(0,a.logError)("xhr construction",e),"object"===(0,i.default)(s)&&null!==s&&s.error(e)}}}t.fetch=d(),t.ajax=c()},646:function(e,t,r){"use strict";var n=r(2100),i=r(8287);Object.defineProperty(t,"__esModule",{value:!0}),t.addBidResponse=t.addAppDataToBidResponse=t.AUCTION_STARTED=t.AUCTION_IN_PROGRESS=t.AUCTION_COMPLETED=void 0,t.addBidToAuction=z,t.addBidderRequests=void 0,t.adjustBids=eo,t.auctionCallbacks=W,t.getDSP=t.getCreativeId=t.getAdvertiserDomain=t.callPrebidCache=t.bidsBackCallback=void 0,t.getKeyValueTargetingPairs=en,t.getMediaTypeGranularity=J,t.getPrimaryCatId=t.getPriceGranularity=t.getPriceByGranularity=void 0,t.getStandardBidderSettings=er,t.newAuction=function(e){var t,r,n,i,o=e.adUnits,a=e.adUnitCodes,d=e.callback,c=e.cbTimeout,u=e.labels,l=e.auctionId,f=e.ortb2Fragments,g=e.metrics;g=(0,O.useMetrics)(g);var v=l||(0,s.generateUUID)(),m=new Set,h=(0,S.defer)(),b=(0,S.defer)(),y=[],_=d,T=[],x=(0,w.ttlCollection)({startTime:function(e){return e.responseTimestamp},ttl:function(e){return null==(0,C.getMinBidCacheTTL)()?null:1e3*Math.max((0,C.getMinBidCacheTTL)(),e.ttl)}}),P=[],D=[],q=[];function L(){return{auctionId:v,timestamp:t,auctionEnd:r,auctionStatus:i,adUnits:o,adUnitCodes:a,labels:u,bidderRequests:T,noBids:P,bidsReceived:x.toArray(),bidsRejected:y,winningBids:D,timeout:c,metrics:g,seatNonBids:q}}function z(e){if(e?A.emit(E.EVENTS.AUCTION_TIMEOUT,L()):clearTimeout(n),void 0===r){var t=[];e&&((0,s.logMessage)("Auction ".concat(v," timedOut")),(t=T.filter(function(e){return!m.has(e.bidderRequestId)}).flatMap(function(e){return e.bids})).length&&A.emit(E.EVENTS.BID_TIMEOUT,t)),i=N,r=Date.now(),g.checkpoint("auctionEnd"),g.timeBetween("requestBids","auctionEnd","requestBids.total"),g.timeBetween("callBids","auctionEnd","requestBids.callBids"),h.resolve();var d=L();if(0===m.size&&t.length>0){var u=t[0].adUnitCode;d.adUnits.forEach(function(e){e.code===u&&(e.noBidReason="ato")})}A.emit(E.EVENTS.AUCTION_END,L()),G(o,function(){try{if(null!=_){var r=x.toArray().filter(function(e){return a.includes(e.adUnitCode)}).reduce(ea,{});_.apply(V,[r,e,v]),_=null}}catch(e){(0,s.logError)("Error executing bidsBackHandler",null,e)}finally{t.length&&I.default.callTimedOutBidders(o,t,c);var n=p.config.getConfig("userSync")||{};n.enableOverride||R(n.syncDelay)}})}}function H(){p.config.resetBidder(),(0,s.logInfo)("Bids Received for Auction with id: ".concat(v),x.toArray()),i=N,z(!1)}function Y(e){m.add(e)}function J(e){var t=this;e.forEach(function(e){T=T.concat(e)});var r={},a={bidRequests:e,run:function(){n=setTimeout(function(){return z(!0)},c),i=j,A.emit(E.EVENTS.AUCTION_INIT,L());var a=W(H,t);I.default.callBids(o,e,a.addBidResponse,a.adapterDone,{request:function(e,t){u(B,t),u(r,e),U[e]||(U[e]={SRA:!0,origin:t}),r[e]>1&&(U[e].SRA=!1)},done:function(e){B[e]--,M[0]&&d(M[0])&&M.shift()}},c,Y,f),b.resolve()}};function d(e){var t=!0,r=p.config.getConfig("maxRequestsPerOrigin")||4;return e.bidRequests.some(function(e){var n=1,i=void 0!==e.src&&e.src===E.S2S.SRC?"s2s":e.bidderCode;return U[i]&&(!1===U[i].SRA&&(n=Math.min(e.bids.length,r)),B[U[i].origin]+n>r&&(t=!1)),!t}),t&&e.run(),t}function u(e,t){void 0===e[t]?e[t]=1:e[t]++}d(a)||((0,s.logWarn)("queueing auction due to limited endpoint capacity"),M.push(a))}return(0,C.onMinBidCacheTTLChange)(function(){return x.refresh()}),A.on(E.EVENTS.SEAT_NON_BID,function(e){var t;e.auctionId===v&&(t=e.seatnonbid,q=q.concat(t))}),{addBidReceived:function(e){x.add(e)},addBidRejected:function(e){y=y.concat(e)},addNoBid:function(e){P=P.concat(e)},callBids:function(){i=k,t=Date.now();var e=g.measureTime("requestBids.makeRequests",function(){return I.default.makeBidRequests(o,t,v,c,u,f,g)});(0,s.logInfo)("Bids Requested for Auction with id: ".concat(v),e),g.checkpoint("callBids"),e.length<1?((0,s.logWarn)("No valid bid requests returned for auction"),H()):F.call({dispatch:J,context:this},e)},addWinningBid:function(e){D=D.concat(e),I.default.callBidWonBidder(e.adapterCode||e.bidder,e,o),e.deferBilling||I.default.triggerBilling(e)},removeUnusedExpiredBids:function(){return x.toArray().forEach(function(e){"rendered"!==e.status&&e.sharedBidInUse||x.clearItem(e)}),x.toArray()},removeBidReceived:function(e){x.clearItem(e)},setBidTargeting:function(e){I.default.callSetTargetingBidder(e.adapterCode||e.bidder,e)},getWinningBids:function(){return D},getAuctionStart:function(){return t},getAuctionEnd:function(){return r},getTimeout:function(){return c},getAuctionId:function(){return v},getAuctionStatus:function(){return i},getAdUnits:function(){return o},getAdUnitCodes:function(){return a},getBidRequests:function(){return T},getBidsReceived:function(){return x.toArray()},getNoBids:function(){return P},getNonBids:function(){return q},getFPD:function(){return f},getMetrics:function(){return g},end:h.promise,requestsDone:b.promise,getProperties:L}},t.resetAuctionState=function(){M.length=0,[B,U].forEach(function(e){return Object.keys(e).forEach(function(t){delete e[t]})})},t.responsesReady=void 0;var o=n(r(8287)),a=n(r(5794)),s=r(4700),d=r(5439),c=r(8172),u=r(5836),l=r(8915),p=r(9926),f=r(7317),g=r(2508),v=r(1617),m=r(5236),h=r(4607),b=r(3479),y=r(3951),A=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=x(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1322)),I=n(r(9577)),E=r(3103),S=r(6102),O=r(8538),_=r(4908),T=r(7045),w=r(1250),C=r(1e3);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(x=function(e){return e?r:t})(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var R=f.userSync.syncUsers,k=t.AUCTION_STARTED="started",j=t.AUCTION_IN_PROGRESS="inProgress",N=t.AUCTION_COMPLETED="completed";A.on(E.EVENTS.BID_ADJUSTMENT,function(e){eo(e)});var B={},U={},M=[],V=(0,T.getGlobal)(),q=t.addBidResponse=(0,g.ignoreCallbackArg)((0,g.hook)("async",function(e,t,r){var n,i;(n=t,!(!(i=p.config.getConfig("maxBid"))||!n.cpm||i>=Number(n.cpm)))?r(E.REJECTION_REASON.PRICE_TOO_HIGH):this.dispatch.call(null,e,t)},"addBidResponse")),L=t.responsesReady=(0,g.hook)("sync",function(e){return e},"responsesReady"),F=t.addBidderRequests=(0,g.hook)("sync",function(e){this.dispatch.call(this.context,e)},"addBidderRequests"),G=t.bidsBackCallback=(0,g.hook)("async",function(e,t){t&&t()},"bidsBackCallback");function W(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.index,i=void 0===n?b.auctionManager.index:n,a=0,f=!1,g=new Set,y={};function I(){a--,f&&0===a&&e()}function O(e,t,r){return y[t.requestId]=!0,function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.index,i=void 0===n?b.auctionManager.index:n,o=i.getBidderRequest(e);Y(o,e);var a=i.getAdUnit(e),d=o&&o.start||e.requestTimestamp;Object.assign(e,D(D({responseTimestamp:e.responseTimestamp||(0,s.timestamp)(),requestTimestamp:e.requestTimestamp||d,cpm:parseFloat(e.cpm)||0,bidder:e.bidder||e.bidderCode,adUnitCode:t},(null==o?void 0:o.bidPoolId)&&{bidPoolId:o.bidPoolId}),(null==o?void 0:o.passiveBidPoolId)&&{passiveBidPoolId:o.passiveBidPoolId})),(null==a?void 0:a.ttlBuffer)!=null&&(e.ttlBuffer=a.ttlBuffer),e.timeToRespond=e.responseTimestamp-e.requestTimestamp}(t,e),a++,r(I)}function _(e,r){O(e,r,function(e){var n=function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.index,a=void 0===i?b.auctionManager.index:i,s=a.getAdUnit(e);s.viewability&&(e.viewability=s.viewability),A.emit(E.EVENTS.BID_ADJUSTMENT,e),e.instl=(null==s||null==(t=s.ortb2Imp)?void 0:t.instl)===1;var c=(null==(r=a.getBidRequest(e))?void 0:r.renderer)||s.renderer,u=e.mediaType,f=a.getMediaTypes(e),g=f&&f[u],v=g&&g.renderer,m=null;v&&v.render&&!(!0===v.backupOnly&&e.renderer)?m=v:c&&c.render&&!(!0===c.backupOnly&&e.renderer)&&(m=c),m&&(e.renderer=l.Renderer.install({url:m.url,config:m.options,renderNow:null==m.url}),e.renderer.setRender(m.render));var h=J(e.mediaType,f,p.config.getConfig("mediaTypePriceGranularity")),y=(0,d.getPriceBucketString)(e.cpm,"object"===(0,o.default)(h)?h:p.config.getConfig("customPriceBucket"),p.config.getConfig("currency.granularityMultiplier"));return e.pbLg=y.low,e.pbMg=y.med,e.pbHg=y.high,e.pbAg=y.auto,e.pbDg=y.dense,e.pbCg=y.custom,e}(r);A.emit(E.EVENTS.BID_ACCEPTED,n),n.mediaType===h.VIDEO?function(e,t,r){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.index,a=void 0===o?b.auctionManager.index:o,d=!0,c=null==(n=a.getMediaTypes({requestId:t.originalRequestId||t.requestId,adUnitId:t.adUnitId}))?void 0:n.video,l=c&&(null==c?void 0:c.context),f=c&&(null==c?void 0:c.useCacheKey),g=p.config.getConfig("cache")||{},v=g.useLocal,h=g.url,y=g.ignoreBidderCacheKey;v?(0,u.storeLocally)(t):h&&(f||l!==m.OUTSTREAM)&&(!t.videoCacheKey||y?(d=!1,H(e,t,r,c)):t.vastUrl||((0,s.logError)("videoCacheKey specified but not required vastUrl for video bid"),d=!1)),d&&(z(e,t),r())}(t,n,e):((0,c.isNativeResponse)(n)&&(0,c.setNativeResponseProperties)(n,i.getAdUnit(n)),z(t,n),e())})}function T(e,r,n){return O(e,r,function(e){r.rejectionReason=n,(0,s.logWarn)("Bid from ".concat(r.bidder||"unknown bidder"," was rejected: ").concat(n),r),A.emit(E.EVENTS.BID_REJECTED,r),t.addBidRejected(r),e()})}function w(){var r=t.getBidRequests(),n=p.config.getConfig("auctionOptions");if(g.add(this),n&&!(0,s.isEmpty)(n)){var i=n.secondaryBidders;i&&!r.every(function(e){return(0,v.includes)(i,e.bidderCode)})&&(r=r.filter(function(e){return!(0,v.includes)(i,e.bidderCode)}))}f=r.every(function(e){return g.has(e)}),this.bids.forEach(function(e){y[e.bidId]||(t.addNoBid(e),A.emit(E.EVENTS.NO_BID,e))}),f&&0===a&&e()}return{addBidResponse:function(){function e(e,t){var r;q.call({dispatch:_},e,t,(r=!1,function(n){r||(T(e,t,n),r=!0)}))}return e.reject=T,e}(),adapterDone:function(){var e=this;L(S.PbPromise.resolve()).finally(function(){return w.call(e)})}}}function z(e,t){var r,n,i;r=t,i=!0===y.bidderSettings.get(r.bidderCode,"allowZeroCpmBids")?r.cpm>=0:r.cpm>0,r.bidderCode&&(i||r.dealId)&&(n=en(r.bidderCode,r)),r.adserverTargeting=Object.assign(r.adserverTargeting||{},n),(0,O.useMetrics)(t.metrics).timeSince("addBidResponse","addBidResponse.total"),e.addBidReceived(t),A.emit(E.EVENTS.BID_RESPONSE,t)}var H=t.callPrebidCache=(0,g.hook)("async",function(e,t,r,n){(0,u.batchAndStore)(e,t,r)},"callPrebidCache"),Y=t.addAppDataToBidResponse=function(e,t){null!=e&&e.app&&t&&(t.app=!0)};function J(e,t,r){if(e&&r){if(e===h.VIDEO){var n,i,o=null!=(n=null==t||null==(i=t[h.VIDEO])?void 0:i.context)?n:"instream";if(r["".concat(h.VIDEO,"-").concat(o)])return r["".concat(h.VIDEO,"-").concat(o)]}return r[e]}}var K=t.getPriceGranularity=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.index,n=void 0===r?b.auctionManager.index:r,i=J(e.mediaType,n.getMediaTypes(e),p.config.getConfig("mediaTypePriceGranularity"));return"string"==typeof e.mediaType&&i?"string"==typeof i?i:"custom":p.config.getConfig("priceGranularity")},Q=t.getPriceByGranularity=function(e){return function(t){var r=e||K(t);if(r===E.GRANULARITY_OPTIONS.AUTO)return t.pbAg;if(r===E.GRANULARITY_OPTIONS.DENSE)return t.pbDg;if(r===E.GRANULARITY_OPTIONS.LOW)return t.pbLg;if(r===E.GRANULARITY_OPTIONS.MEDIUM)return t.pbMg;if(r===E.GRANULARITY_OPTIONS.HIGH)return t.pbHg;else if(r===E.GRANULARITY_OPTIONS.CUSTOM)return t.pbCg}},X=t.getCreativeId=function(){return function(e){return e.creativeId?e.creativeId:""}},$=t.getAdvertiserDomain=function(){return function(e){return e.meta&&e.meta.advertiserDomains&&e.meta.advertiserDomains.length>0?[e.meta.advertiserDomains].flat()[0]:""}},Z=t.getDSP=function(){return function(e){var t,r;return e.meta&&(e.meta.networkId||e.meta.networkName)?(null==e||null==(t=e.meta)?void 0:t.networkName)||(null==e||null==(r=e.meta)?void 0:r.networkId):""}},ee=t.getPrimaryCatId=function(){return function(e){return e.meta&&e.meta.primaryCatId?e.meta.primaryCatId:""}};function et(e,t){return{key:e,val:"function"==typeof t?function(e,r){return t(e,r)}:function(e){return e[t]}}}function er(e,t){var r=Object.assign({},y.bidderSettings.settingsFor(null));if(r[E.JSON_MAPPING.ADSERVER_TARGETING]||(r[E.JSON_MAPPING.ADSERVER_TARGETING]=[et(E.TARGETING_KEYS.BIDDER,"bidderCode"),et(E.TARGETING_KEYS.AD_ID,"adId"),et(E.TARGETING_KEYS.PRICE_BUCKET,Q()),et(E.TARGETING_KEYS.SIZE,"size"),et(E.TARGETING_KEYS.DEAL,"dealId"),et(E.TARGETING_KEYS.SOURCE,"source"),et(E.TARGETING_KEYS.FORMAT,"mediaType"),et(E.TARGETING_KEYS.ADOMAIN,$()),et(E.TARGETING_KEYS.ACAT,ee()),et(E.TARGETING_KEYS.DSP,Z()),et(E.TARGETING_KEYS.CRID,X())]),"video"===e){var n=r[E.JSON_MAPPING.ADSERVER_TARGETING].slice();if(r[E.JSON_MAPPING.ADSERVER_TARGETING]=n,[E.TARGETING_KEYS.UUID,E.TARGETING_KEYS.CACHE_ID].forEach(function(e){void 0===(0,v.find)(n,function(t){return t.key===e})&&n.push(et(e,"videoCacheKey"))}),p.config.getConfig("cache.url")&&(!t||!1!==y.bidderSettings.get(t,"sendStandardTargeting"))){var i=(0,s.parseUrl)(p.config.getConfig("cache.url"));void 0===(0,v.find)(n,function(e){return e.key===E.TARGETING_KEYS.CACHE_HOST})&&n.push(et(E.TARGETING_KEYS.CACHE_HOST,function(e){var t;return(null==e||null==(t=e.adserverTargeting)?void 0:t[E.TARGETING_KEYS.CACHE_HOST])||i.hostname}))}}return r}function en(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.index,i=void 0===n?b.auctionManager.index:n;if(!t)return{};var o=i.getBidRequest(t),a={};return ei(a,er(t.mediaType,e),t,o),o&&o.ortb2Imp&&o.ortb2Imp.instl&&(a[E.TARGETING_KEYS.INTERSTITIAL]=o.ortb2Imp.instl),e&&y.bidderSettings.getOwn(e,E.JSON_MAPPING.ADSERVER_TARGETING)&&(ei(a,y.bidderSettings.ownSettingsFor(e),t,o),t.sendStandardTargeting=y.bidderSettings.get(e,"sendStandardTargeting")),t.native&&(a=Object.assign({},a,(0,c.getNativeTargeting)(t))),a}function ei(e,t,r,n){var i=t[E.JSON_MAPPING.ADSERVER_TARGETING];return r.size=r.getSize(),(i||[]).forEach(function(i){var o=i.key,a=i.val;if(e[o]&&(0,s.logWarn)("The key: "+o+" is being overwritten"),(0,s.isFn)(a))try{a=a(r,n)}catch(e){(0,s.logError)("bidmanager","ERROR",e)}(void 0!==t.suppressEmptyKeys&&!0===t.suppressEmptyKeys||o===E.TARGETING_KEYS.DEAL||o===E.TARGETING_KEYS.ACAT||o===E.TARGETING_KEYS.DSP||o===E.TARGETING_KEYS.CRID)&&((0,s.isEmptyStr)(a)||null==a)?(0,s.logInfo)("suppressing empty key '"+o+"' from adserver targeting"):e[o]=a}),e}function eo(e){e.responseCpm=e.cpm;var t=(0,_.adjustCpm)(e.cpm,e);t>=0&&(e.cpm=t)}function ea(e,t){return e[t.adUnitCode]||(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}},2767:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuctionIndex=function(e){Object.assign(this,{getAuction:function(t){var r=t.auctionId;if(null!=r)return e().find(function(e){return e.getAuctionId()===r})},getAdUnit:function(t){var r=t.adUnitId;if(null!=r)return e().flatMap(function(e){return e.getAdUnits()}).find(function(e){return e.adUnitId===r})},getMediaTypes:function(e){var t=e.adUnitId,r=e.requestId;if(null!=r){var n=this.getBidRequest({requestId:r});if(null!=n&&(null==t||n.adUnitId===t))return n.mediaTypes}else if(null!=t){var i=this.getAdUnit({adUnitId:t});if(null!=i)return i.mediaTypes}},getBidderRequest:function(t){var r=t.requestId,n=t.bidderRequestId;if(null!=r||null!=n){var i=e().flatMap(function(e){return e.getBidRequests()});return(null!=n&&(i=i.filter(function(e){return e.bidderRequestId===n})),null==r)?i[0]:i.find(function(e){return e.bids&&null!=e.bids.find(function(e){return e.bidId===r})})}},getBidRequest:function(t){var r=t.requestId;if(null!=r)return e().flatMap(function(e){return e.getBidRequests()}).flatMap(function(e){return e.bids}).find(function(e){return e&&e.bidId===r})},getOrtb2:function(e){var t,r;return(null==(t=this.getBidderRequest(e))?void 0:t.ortb2)||(null==(r=this.getAuction(e))||null==(r=r.getFPD())||null==(r=r.global)?void 0:r.ortb2)}})}},3479:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.auctionManager=void 0,t.newAuctionManager=v;var i=n(r(5881)),o=n(r(939)),a=r(4700),s=r(646),d=r(2767),c=r(3103),u=r(8538),l=r(1250),p=r(1e3),f=r(9962);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(){var e,t=(0,l.ttlCollection)({startTime:function(e){return e.end.then(function(){return e.getAuctionEnd()})},ttl:function(e){return null==(0,p.getMinBidCacheTTL)()?null:e.end.then(function(){return 1e3*Math.max.apply(Math,[(0,p.getMinBidCacheTTL)()].concat((0,o.default)(e.getBidsReceived().map(function(e){return e.ttl}))))})}});(0,p.onMinBidCacheTTLChange)(function(){return t.refresh()});var r={onExpiry:t.onExpiry};function n(e){var r,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return g(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(i.getAuctionId()===e)return i}}catch(e){n.e(e)}finally{n.f()}}function v(){return t.toArray().flatMap(function(e){return e.getBidsReceived()})}return r.addWinningBid=function(e){var t=(0,u.useMetrics)(e.metrics);t.checkpoint("bidWon"),t.timeBetween("auctionEnd","bidWon","adserver.pending"),t.timeBetween("requestBids","bidWon","adserver.e2e");var r=n(e.auctionId);r?r.addWinningBid(e):(0,a.logWarn)("Auction not found when adding winning bid")},Object.entries({getAllWinningBids:{name:"getWinningBids"},getBidsRequested:{name:"getBidRequests"},getNoBids:{},getAdUnits:{},getBidsReceived:{pre:function(e){return e.getAuctionStatus()===s.AUCTION_COMPLETED},post:function(t){return e?e(t):t}},getAdUnitCodes:{post:a.uniques}}).forEach(function(e){var n=(0,i.default)(e,2),o=n[0],a=n[1],s=a.name,d=void 0===s?o:s,c=a.pre,u=a.post,l=null==c?function(e){return e[d]()}:function(e){return c(e)?e[d]():[]},p=null==u?function(e){return e}:function(e){return e.filter(u)};r[o]=function(){return p(t.toArray().flatMap(l))}}),r.setBidsReceivedFilter=function(t){e=t},r.getAllBidsForAdUnitCode=function(e){return v().filter(function(t){return t&&t.adUnitCode===e})},r.createAuction=function(e){var r,n=(0,s.newAuction)(e);return r=n,t.add(r),n},r.findBidByAdId=function(e){return v().find(function(t){return t.adId===e})},r.getStandardBidderAdServerTargeting=function(){return(0,s.getStandardBidderSettings)()[c.JSON_MAPPING.ADSERVER_TARGETING]},r.setStatusForBids=function(e,t){var i=r.findBidByAdId(e);if(i&&(i.status=t),i&&t===c.BID_STATUS.BID_TARGETING_SET){var o=n(i.auctionId);o&&o.setBidTargeting(i)}},r.getLastAuctionId=function(){var e=t.toArray();return e.length&&e[e.length-1].getAuctionId()},r.clearAuctionBids=function(e){var r=t.toArray(),n=[];return r.forEach(function(t){t.getAuctionId()===e&&(n=[].concat((0,o.default)(n),(0,o.default)(t.removeUnusedExpiredBids())))}),n},r.clearAllAuctions=function(){t.clear()},r.trimBidPoolForAdUnit=function(e,t){var r=v().filter(function(t){return t.adUnitCode===e});r.length>t&&r.filter(function(e){if((0,f.isBidUsable)(e))return!0;var t=n(e.auctionId);return t&&t.removeBidReceived(e),!1}).sort(function(e,t){return t.cpm-e.cpm}).slice(t).forEach(function(e){var t=n(e.auctionId);t&&t.removeBidReceived(e)})},r.index=new d.AuctionIndex(function(){return t.toArray()}),r}t.auctionManager=v()},5523:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.ORTB_BANNER_PARAMS=void 0;var i=n(r(8287)),o=r(4700);t.ORTB_BANNER_PARAMS=new Map([["format",function(e){return Array.isArray(e)&&e.length>0&&e.every(function(e){return"object"===(0,i.default)(e)})}],["btype",o.isArrayOfNums],["battr",o.isArrayOfNums],["pos",o.isInteger],["mimes",function(e){return Array.isArray(e)&&e.length>0&&e.every(function(e){return"string"==typeof e})}],["topframe",function(e){return[1,0].includes(e)}],["expdir",o.isArrayOfNums],["api",o.isArrayOfNums],["id",o.isStr],["vcm",function(e){return[1,0].includes(e)}]])},1e3:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBufferedTTL=function(e){return e.ttl-(e.hasOwnProperty("ttlBuffer")?e.ttlBuffer:a)},t.getMinBidCacheTTL=function(){return s},t.onMinBidCacheTTLChange=function(e){d.push(e)};var n=r(9926),i=r(4700),o="minBidCacheTTL",a=1,s=null,d=[];n.config.getConfig("ttlBuffer",function(e){"number"==typeof e.ttlBuffer?a=e.ttlBuffer:(0,i.logError)("Invalid value for ttlBuffer",e.ttlBuffer)}),n.config.getConfig(o,function(e){s!==(s="number"==typeof(s=null==e?void 0:e[o])?s:null)&&d.forEach(function(e){return e(s)})})},3951:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.bidderSettings=t.ScopedSettings=void 0;var i=n(r(7586)),o=n(r(1770)),a=r(4700),s=r(7045),d=r(3103);function c(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")}var u=new WeakSet,l=t.ScopedSettings=(0,o.default)(function e(t,r){(0,i.default)(this,e),function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,u),u.add(this),this.getSettings=t,this.defaultScope=r},[{key:"get",value:function(e,t){var r=this.getOwn(e,t);return void 0===r&&(r=this.getOwn(null,t)),r}},{key:"getOwn",value:function(e,t){return e=c(u,this,p).call(this,e),(0,a.deepAccess)(this.getSettings(),"".concat(e,".").concat(t))}},{key:"getScopes",value:function(){var e=this;return Object.keys(this.getSettings()).filter(function(t){return t!==e.defaultScope})}},{key:"settingsFor",value:function(e){return(0,a.mergeDeep)({},this.ownSettingsFor(null),this.ownSettingsFor(e))}},{key:"ownSettingsFor",value:function(e){return e=c(u,this,p).call(this,e),this.getSettings()[e]||{}}}]);function p(e){return null==e?this.defaultScope:e}t.bidderSettings=new l(function(){return(0,s.getGlobal)().bidderSettings||{}},d.JSON_MAPPING.BD_SETTING_STANDARD)},2035:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBid=function(e,t){return new i(e,t)};var n=r(4700);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.src,i=t.bidder,o=t.bidId,a=t.transactionId,s=t.adUnitId,d=t.auctionId,c=e||0;Object.assign(this,{bidderCode:void 0===i?"":i,width:0,height:0,statusMessage:function(){switch(c){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}(),adId:(0,n.getUniqueIdentifierStr)(),requestId:o,transactionId:a,adUnitId:s,auctionId:d,mediaType:"banner",source:void 0===r?"client":r}),this.getStatusCode=function(){return c},this.getSize=function(){return this.width+"x"+this.height},this.getIdentifiers=function(){return{src:this.source,bidder:this.bidderCode,bidId:this.requestId,transactionId:this.transactionId,adUnitId:this.adUnitId,auctionId:this.auctionId}}}},9926:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.RANDOM=void 0,t.newConfig=b;var i=n(r(5794)),o=n(r(8287)),a=n(r(5881)),s=r(5439),d=r(1617),c=r(4700),u=r(3103);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var p="TRUE"===(0,c.getParameterByName)(u.DEBUG_MODE).toUpperCase(),f={},g=t.RANDOM="random",v={};v[g]=!0,v.fixed=!0;var m={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"};function h(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=t?{priceGranularity:m.MEDIUM,customPriceBucket:{},mediaTypePriceGranularity:{},bidderSequence:g,auctionOptions:{}}:{};function n(e){return r[e]}function i(t,n){r.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0}),r[t]=n}return Object.defineProperties(e,Object.fromEntries(Object.entries({publisherDomain:{set:function(e){null!=e&&(0,c.logWarn)("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),i("publisherDomain",e)}},priceGranularity:{set:function(e){u(e)&&("string"==typeof e?i("priceGranularity",o(e)?e:m.MEDIUM):(0,c.isPlainObject)(e)&&(i("customPriceBucket",e),i("priceGranularity",m.CUSTOM),(0,c.logMessage)("Using custom price granularity")))}},customPriceBucket:{},mediaTypePriceGranularity:{set:function(e){null!=e&&i("mediaTypePriceGranularity",Object.keys(e).reduce(function(t,n){return u(e[n])?"string"==typeof e?t[n]=o(e[n])?e[n]:r.priceGranularity:(0,c.isPlainObject)(e)&&(t[n]=e[n],(0,c.logMessage)("Using custom price granularity for ".concat(n))):(0,c.logWarn)("Invalid price granularity for media type: ".concat(n)),t},{}))}},bidderSequence:{set:function(e){v[e]?i("bidderSequence",e):(0,c.logWarn)("Invalid order: ".concat(e,". Bidder Sequence was not set."))}},auctionOptions:{set:function(e){(function(e){if(!(0,c.isPlainObject)(e))return(0,c.logWarn)("Auction Options must be an object"),!1;for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];if("secondaryBidders"!==n&&"suppressStaleRender"!==n&&"suppressExpiredRender"!==n)return(0,c.logWarn)("Auction Options given an incorrect param: ".concat(n)),!1;if("secondaryBidders"===n){if(!(0,c.isArray)(e[n]))return(0,c.logWarn)("Auction Options ".concat(n," must be of type Array")),!1;else if(!e[n].every(c.isStr))return(0,c.logWarn)("Auction Options ".concat(n," must be only string")),!1}else if(("suppressStaleRender"===n||"suppressExpiredRender"===n)&&!(0,c.isBoolean)(e[n]))return(0,c.logWarn)("Auction Options ".concat(n," must be of type boolean")),!1}return!0})(e)&&i("auctionOptions",e)}}}).map(function(e){var t=(0,a.default)(e,2),o=t[0],s=t[1];return[o,Object.assign({get:n.bind(null,o),set:i.bind(null,o),enumerable:r.hasOwnProperty(o),configurable:!r.hasOwnProperty(o)},s)]}))),e;function o(e){return(0,d.find)(Object.keys(m),function(t){return e===m[t]})}function u(e){if(!e)return(0,c.logError)("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)o(e)||(0,c.logWarn)("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if((0,c.isPlainObject)(e)&&!(0,s.isValidPriceConfig)(e))return(0,c.logError)("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}}function b(){var e,t,r,n=[],s=null;function u(){e={};var n=h({debug:p,bidderTimeout:3e3,enableSendAllBids:!0,useBidCache:!1,deviceAccess:!0,disableAjaxTimeout:!1,maxNestedIframes:10,maxBid:5e3,userSync:{topics:f}});t&&T(Object.keys(t).reduce(function(e,r){return t[r]!==n[r]&&(e[r]=n[r]||{}),e},{})),t=n,r={}}function g(){if(s&&r&&(0,c.isPlainObject)(r[s])){var e=r[s],n=new Set(Object.keys(t).concat(Object.keys(e)));return(0,d.arrayFrom)(n).reduce(function(r,n){return void 0===e[n]?r[n]=t[n]:void 0===t[n]?r[n]=e[n]:(0,c.isPlainObject)(e[n])?r[n]=(0,c.mergeDeep)({},t[n],e[n]):r[n]=e[n],r},{})}return Object.assign({},t)}var v=[g,function(){var e=g();return Object.defineProperty(e,"ortb2",{get:function(){throw Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map(function(e){return function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){var t=arguments.length<=0?void 0:arguments[0];return t?(0,c.deepAccess)(e(),t):g()}return _.apply(void 0,arguments)}}),m=(0,a.default)(v,2),b=m[0],y=m[1],A=[y,b].map(function(e){return function(){var t=e.apply(void 0,arguments);return t&&"object"===(0,o.default)(t)&&(t=(0,c.deepClone)(t)),t}}),I=(0,a.default)(A,2),E=I[0],S=I[1];function O(r){if(!(0,c.isPlainObject)(r))return void(0,c.logError)("setConfig options must be an object");var n=Object.keys(r),i={};n.forEach(function(n){var o=r[n];(0,c.isPlainObject)(e[n])&&(0,c.isPlainObject)(o)&&(o=Object.assign({},e[n],o));try{i[n]=t[n]=o}catch(e){(0,c.logWarn)("Cannot set config for property ".concat(n," : "),e)}}),T(i)}function _(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t;if("string"!=typeof e&&(o=e,e="*",r=t||{}),"function"!=typeof o)return void(0,c.logError)("listener must be a function");var a={topic:e,callback:o};return n.push(a),r.init&&o("*"===e?y():(0,i.default)({},e,y(e))),function(){n.splice(n.indexOf(a),1)}}function T(e){var t=Object.keys(e);n.filter(function(e){return(0,d.includes)(t,e.topic)}).forEach(function(t){t.callback((0,i.default)({},t.topic,e[t.topic]))}),n.filter(function(e){return"*"===e.topic}).forEach(function(t){return t.callback(e)})}function w(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{(function(e){if(!(0,c.isPlainObject)(e))throw"setBidderConfig bidder options must be an object";if(!(Array.isArray(e.bidders)&&e.bidders.length))throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!(0,c.isPlainObject)(e.config))throw"setBidderConfig bidder options must contain a config object"})(e),e.bidders.forEach(function(n){r[n]||(r[n]=h({},!1)),Object.keys(e.config).forEach(function(i){var o=e.config[i],a=r[n][i];if((0,c.isPlainObject)(o)&&(null==a||(0,c.isPlainObject)(a))){var s=t?c.mergeDeep:Object.assign;r[n][i]=s({},a||{},o)}else r[n][i]=o})})}catch(e){(0,c.logError)(e)}}function C(e,t){s=e;try{return t()}finally{x()}}function x(){s=null}return u(),{getCurrentBidder:function(){return s},resetBidder:x,getConfig:y,getAnyConfig:b,readConfig:E,readAnyConfig:S,setConfig:O,mergeConfig:function(e){if(!(0,c.isPlainObject)(e))return void(0,c.logError)("mergeConfig input must be an object");var t=(0,c.mergeDeep)(g(),e);return O(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t)),t},setDefaults:function(r){if(!(0,c.isPlainObject)(e))return void(0,c.logError)("defaults must be an object");Object.assign(e,r),Object.assign(t,r)},resetConfig:u,runWithBidder:C,callbackWithBidder:function(e){return function(t){return function(){if("function"==typeof t){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return C(e,t.bind.apply(t,[this].concat(n)))}(0,c.logWarn)("config.callbackWithBidder callback is not a function")}}},setBidderConfig:w,getBidderConfig:function(){return r},mergeBidderConfig:function(e){return w(e,!0)}}}t.config=b()},5789:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.gppDataHandler=t.gdprDataHandler=t.coppaDataHandler=t.allConsent=t.VENDORLESS_GVLID=t.GDPR_GVLIDS=t.ConsentHandler=void 0,t.gvlidRegistry=k,t.multiHandler=V,t.uspDataHandler=void 0;var i=n(r(5881)),o=n(r(7001)),a=n(r(7196)),s=n(r(139)),d=n(r(7586)),c=n(r(1770)),u=n(r(5794)),l=r(4700),p=r(6102),f=r(9926);function g(e,t,r){return t=(0,a.default)(t),(0,o.default)(e,v()?Reflect.construct(t,r||[],(0,a.default)(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(v=function(){return!!e})()}function m(e,t,r){h(e,t),t.set(e,r)}function h(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function b(e,t){return e.get(A(e,t))}function y(e,t,r){return e.set(A(e,t),r),r}function A(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")}t.VENDORLESS_GVLID=Object.freeze({});var I=new WeakMap,E=new WeakMap,S=new WeakMap,O=new WeakMap,_=new WeakMap,T=new WeakMap,w=new WeakSet,C=t.ConsentHandler=(0,c.default)(function e(){(0,d.default)(this,e),h(this,w),w.add(this),m(this,I,void 0),m(this,E,void 0),m(this,S,void 0),m(this,O,void 0),m(this,_,!0),m(this,T,void 0),(0,u.default)(this,"generatedTime",void 0),(0,u.default)(this,"hashFields",void 0),this.reset()},[{key:"reset",value:function(){y(S,this,(0,p.defer)()),y(I,this,!1),y(E,this,null),y(O,this,!1),this.generatedTime=null}},{key:"enable",value:function(){y(I,this,!0)}},{key:"enabled",get:function(){return b(I,this)}},{key:"ready",get:function(){return b(O,this)}},{key:"promise",get:function(){return b(O,this)?p.PbPromise.resolve(b(E,this)):(b(I,this)||A(w,this,x).call(this,null),b(S,this).promise)}},{key:"setConsentData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,l.timestamp)();this.generatedTime=t,y(_,this,!0),A(w,this,x).call(this,e)}},{key:"getConsentData",value:function(){return b(E,this)}},{key:"hash",get:function(){var e=this;return b(_,this)&&(y(T,this,(0,l.cyrb53Hash)(JSON.stringify(b(E,this)&&this.hashFields?this.hashFields.map(function(t){return b(E,e)[t]}):b(E,this)))),y(_,this,!1)),b(T,this)}}]);function x(e){y(O,this,!0),y(E,this,e),b(S,this).resolve(e)}var P=function(e){function t(){return(0,d.default)(this,t),g(this,t,arguments)}return(0,s.default)(t,e),(0,c.default)(t,[{key:"getConsentMeta",value:function(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}}])}(C),D=function(e){function t(){var e;(0,d.default)(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=g(this,t,[].concat(n)),(0,u.default)(e,"hashFields",["gdprApplies","consentString"]),e}return(0,s.default)(t,e),(0,c.default)(t,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&e.vendorData&&this.generatedTime)return{gdprApplies:e.gdprApplies,consentStringSize:(0,l.isStr)(e.vendorData.tcString)?e.vendorData.tcString.length:0,generatedAt:this.generatedTime,apiVersion:e.apiVersion}}}])}(C),R=function(e){function t(){var e;(0,d.default)(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=g(this,t,[].concat(n)),(0,u.default)(e,"hashFields",["applicableSections","gppString"]),e}return(0,s.default)(t,e),(0,c.default)(t,[{key:"getConsentMeta",value:function(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}}])}(C);function k(){var e={},t={},r={};return{register:function(n,i,o){o&&((e[i]=e[i]||{})[n]=o,t.hasOwnProperty(i)?t[i]!==o&&(t[i]=r):t[i]=o)},get:function(n){var i={modules:e[n]||{}};return t.hasOwnProperty(n)&&t[n]!==r&&(i.gvlid=t[n]),i}}}var j=t.gdprDataHandler=new D,N=t.uspDataHandler=new P,B=t.gppDataHandler=new R,U=t.coppaDataHandler=function(){function e(){return!!f.config.getConfig("coppa")}return{getCoppa:e,getConsentData:e,getConsentMeta:e,reset:function(){},get promise(){return p.PbPromise.resolve(e())},get hash(){return e()?"1":"0"}}}();t.GDPR_GVLIDS=k();var M={gdpr:j,usp:N,gpp:B,coppa:U};function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return e=Object.entries(e),Object.assign({get promise(){return p.PbPromise.all(e.map(function(e){var t=(0,i.default)(e,2),r=t[0];return t[1].promise.then(function(e){return[r,e]})})).then(function(e){return Object.fromEntries(e)})},get hash(){return(0,l.cyrb53Hash)(e.map(function(e){var t=(0,i.default)(e,2);return(t[0],t[1]).hash}).join(":"))}},Object.fromEntries(["getConsentData","getConsentMeta","reset"].map(function(t){return[t,function(){return Object.fromEntries(e.map(function(e){var r=(0,i.default)(e,2);return[r[0],r[1][t]()]}))}]})))}t.allConsent=V()},3103:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TARGETING_KEYS=t.STATUS=t.S2S=t.REJECTION_REASON=t.PREBID_NATIVE_DATA_KEYS_TO_ORTB=t.PB_LOCATOR=t.NATIVE_KEYS_THAT_ARE_NOT_ASSETS=t.NATIVE_KEYS=t.NATIVE_IMAGE_TYPES=t.NATIVE_ASSET_TYPES=t.MESSAGES=t.JSON_MAPPING=t.GRANULARITY_OPTIONS=t.EVENT_ID_PATHS=t.EVENTS=t.DEFAULT_TARGETING_KEYS=t.DEBUG_MODE=t.BID_STATUS=t.AD_RENDER_FAILED_REASON=void 0,t.JSON_MAPPING={PL_CODE:"code",PL_SIZE:"sizes",PL_BIDS:"bids",BD_BIDDER:"bidder",BD_ID:"paramsd",BD_PL_ID:"placementId",ADSERVER_TARGETING:"adserverTargeting",BD_SETTING_STANDARD:"standard"},t.DEBUG_MODE="pbjs_debug",t.STATUS={GOOD:1},t.EVENTS={AUCTION_INIT:"auctionInit",AUCTION_TIMEOUT:"auctionTimeout",AUCTION_END:"auctionEnd",BID_ADJUSTMENT:"bidAdjustment",BID_TIMEOUT:"bidTimeout",BID_REQUESTED:"bidRequested",BID_RESPONSE:"bidResponse",BID_REJECTED:"bidRejected",NO_BID:"noBid",SEAT_NON_BID:"seatNonBid",BID_WON:"bidWon",BIDDER_DONE:"bidderDone",BIDDER_ERROR:"bidderError",SET_TARGETING:"setTargeting",BEFORE_REQUEST_BIDS:"beforeRequestBids",BEFORE_BIDDER_HTTP:"beforeBidderHttp",REQUEST_BIDS:"requestBids",ADD_AD_UNITS:"addAdUnits",AD_RENDER_FAILED:"adRenderFailed",AD_RENDER_SUCCEEDED:"adRenderSucceeded",TCF2_ENFORCEMENT:"tcf2Enforcement",AUCTION_DEBUG:"auctionDebug",BID_VIEWABLE:"bidViewable",STALE_RENDER:"staleRender",EXPIRED_RENDER:"expiredRender",BILLABLE_EVENT:"billableEvent",VAST_EXCEEDED_LIMIT:"vastExceededLimit",BID_ACCEPTED:"bidAccepted",RUN_PAAPI_AUCTION:"paapiRunAuction",PBS_ANALYTICS:"pbsAnalytics",PAAPI_BID:"paapiBid",PAAPI_NO_BID:"paapiNoBid",PAAPI_ERROR:"paapiError",RUBICON_BID_ERROR:"rubiconBidError",LIVEINTENT_RESOLVED:"liveIntentResolved",ID5_RESOLVED:"id5Resolved",BEFORE_PBS_HTTP:"beforePBSHttp",BROWSI_INIT:"browsiInit",BROWSI_DATA:"browsiData"},t.AD_RENDER_FAILED_REASON={PREVENT_WRITING_ON_MAIN_DOCUMENT:"preventWritingOnMainDocument",NO_AD:"noAd",EXCEPTION:"exception",CANNOT_FIND_AD:"cannotFindAd",MISSING_DOC_OR_ADID:"missingDocOrAdid"},t.EVENT_ID_PATHS={bidWon:"adUnitCode"},t.GRANULARITY_OPTIONS={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},t.TARGETING_KEYS={BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",SOURCE:"hb_source",FORMAT:"hb_format",UUID:"hb_uuid",CACHE_ID:"hb_cache_id",CACHE_HOST:"hb_cache_host",ADOMAIN:"hb_adomain",ACAT:"hb_acat",CRID:"hb_crid",DSP:"hb_dsp",INTERSTITIAL:"hb_instl",ATTR:"hb_attr"},t.DEFAULT_TARGETING_KEYS={BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",FORMAT:"hb_format",UUID:"hb_uuid",CACHE_HOST:"hb_cache_host"},t.NATIVE_KEYS={title:"hb_native_title",body:"hb_native_body",body2:"hb_native_body2",privacyLink:"hb_native_privacy",privacyIcon:"hb_native_privicon",sponsoredBy:"hb_native_brand",image:"hb_native_image",icon:"hb_native_icon",clickUrl:"hb_native_linkurl",displayUrl:"hb_native_displayurl",cta:"hb_native_cta",rating:"hb_native_rating",address:"hb_native_address",downloads:"hb_native_downloads",likes:"hb_native_likes",phone:"hb_native_phone",price:"hb_native_price",salePrice:"hb_native_saleprice",rendererUrl:"hb_renderer_url",adTemplate:"hb_adTemplate"},t.S2S={SRC:"s2s",DEFAULT_ENDPOINT:"https://prebid.adnxs.com/pbs/v1/openrtb2/auction",SYNCED_BIDDERS_KEY:"pbjsSyncs"},t.BID_STATUS={BID_TARGETING_SET:"targetingSet",RENDERED:"rendered",BID_REJECTED:"bidRejected"},t.REJECTION_REASON={INVALID:"Bid has missing or invalid properties",INVALID_REQUEST_ID:"Invalid request ID",BIDDER_DISALLOWED:"Bidder code is not allowed by allowedAlternateBidderCodes / allowUnknownBidderCodes",FLOOR_NOT_MET:"Bid does not meet price floor",CANNOT_CONVERT_CURRENCY:"Unable to convert currency",DSA_REQUIRED:"Bid does not provide required DSA transparency info",DSA_MISMATCH:"Bid indicates inappropriate DSA rendering method",PRICE_TOO_HIGH:"Bid price exceeds maximum value"},t.PREBID_NATIVE_DATA_KEYS_TO_ORTB={body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl"},t.NATIVE_ASSET_TYPES={sponsored:1,desc:2,rating:3,likes:4,downloads:5,price:6,saleprice:7,phone:8,address:9,desc2:10,displayurl:11,ctatext:12},t.NATIVE_IMAGE_TYPES={ICON:1,MAIN:3},t.NATIVE_KEYS_THAT_ARE_NOT_ASSETS=["privacyIcon","clickUrl","sendTargetingKeys","adTemplate","rendererUrl","type"],t.MESSAGES={REQUEST:"Prebid Request",RESPONSE:"Prebid Response",NATIVE:"Prebid Native",EVENT:"Prebid Event"},t.PB_LOCATOR="__pb_locator__"},5439:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPriceBucketString=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=parseFloat(e);return isNaN(n)&&(n=""),{low:""===n?"":l(e,a,r),med:""===n?"":l(e,s,r),high:""===n?"":l(e,d,r),auto:""===n?"":l(e,u,r),dense:""===n?"":l(e,c,r),custom:""===n?"":l(e,t,r)}},t.isValidPriceConfig=p;var n=r(1617),i=r(4700),o=r(9926),a={buckets:[{max:5,increment:.5}]},s={buckets:[{max:20,increment:.1}]},d={buckets:[{max:20,increment:.01}]},c={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},u={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function l(e,t,r){var a="";if(!p(t))return a;var s=t.buckets.reduce(function(e,t){return e.max>t.max?e:t},{max:0}),d=0,c=(0,n.find)(t.buckets,function(t){if(e>s.max*r){var n=t.precision;void 0===n&&(n=2),a=(t.max*r).toFixed(n)}else{if(e<=t.max*r&&e>=d*r)return t.min=d,t;d=t.max}});return c&&(a=function(e,t,r){var n,a,s=void 0!==t.precision?t.precision:2,d=t.increment*r,c=t.min*r,u=Math.floor,l=o.config.getConfig("cpmRoundingFunction");"function"==typeof l&&(u=l);var p=Math.pow(10,s+2),f=(e*p-c*p)/(d*p);try{n=u(f)*d+c}catch(e){a=!0}return(a||"number"!=typeof n)&&((0,i.logWarn)("Invalid rounding function passed in config"),n=Math.floor(f)*d+c),(n=Number(n.toFixed(10))).toFixed(s)}(e,c,r)),a}function p(e){if((0,i.isEmpty)(e)||!e.buckets||!Array.isArray(e.buckets))return!1;var t=!0;return e.buckets.forEach(function(e){e.max&&e.increment||(t=!1)}),t}},5141:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCreativeRendererSource=t.getCreativeRenderer=t.PUC_MIN_VERSION=void 0;var n,i=r(6102),o=r(4700),a=r(6437),s=r(2508);t.PUC_MIN_VERSION=3;var d=t.getCreativeRendererSource=(0,s.hook)("sync",function(e){return a.RENDERER});n={},t.getCreativeRenderer=function(e){var t=d(e);return n.hasOwnProperty(t)||(n[t]=new i.PbPromise(function(e){var r=(0,o.createInvisibleIframe)();r.srcdoc="<script>".concat(t,"<\/script>"),r.onload=function(){return e(r.contentWindow.render)},document.body.appendChild(r)})),n[t]}},2501:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEBUG_KEY=void 0,t.debuggingControls=v,t.debuggingModuleLoader=g,t.loadSession=function(){var e=null;try{e=window.sessionStorage}catch(e){}if(null!==e){var t=null;try{t=e.getItem(l)}catch(e){}null!==t&&m.enable()}},t.reset=void 0;var n=r(9926),i=r(2508),o=r(7045),a=r(4700),s=r(2035),d=r(6296),c=r(6102),u=r(4840),l=t.DEBUG_KEY="__pbjs_debugging__";function p(){return(0,o.getGlobal)().installedModules.includes("debugging")}function f(e){return new c.PbPromise(function(t){(0,d.loadExternalScript)(e,u.MODULE_TYPE_PREBID,"debugging",t)})}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alreadyInstalled,r=void 0===t?p:t,d=e.script,u=void 0===d?f:d,g=null;return function(){return null==g&&(g=new c.PbPromise(function(e,t){setTimeout(function(){if(r())e();else{var d="https://cdn.jsdelivr.net/npm/prebid.js@9.40.0/dist/debugging-standalone.js";(0,a.logMessage)('Debugging module not installed, loading it from "'.concat(d,'"...')),(0,o.getGlobal)()._installDebugging=!0,u(d).then(function(){(0,o.getGlobal)()._installDebugging({DEBUG_KEY:l,hook:i.hook,config:n.config,createBid:s.createBid,logger:(0,a.prefixLog)("DEBUG:")})}).then(e,t)}})})),g}}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.load,r=void 0===t?g():t,n=e.hook,o=void 0===n?(0,i.getHook)("requestBids"):n,a=null,s=!1;function d(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return(a||c.PbPromise.resolve()).then(function(){return e.apply(t,n)})}function u(){o.getHooks({hook:d}).remove(),s=!1}return{enable:function(){s||(a=r(),o.before(d,99),s=!0)},disable:u,reset:function(){a=null,u()}}}var m=v();t.reset=m.reset,n.config.getConfig("debugging",function(e){var t=e.debugging;null!=t&&t.enabled?m.enable():m.disable()})},491:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRACKER_METHOD_JS=t.TRACKER_METHOD_IMG=t.EVENT_TYPE_WIN=t.EVENT_TYPE_IMPRESSION=void 0,t.parseEventTrackers=function(e){return(null!=e?e:[]).reduce(function(e,t){var r,n,i=t.event,o=t.method,a=t.url,s=e[i]=null!=(r=e[i])?r:{};return(s[o]=null!=(n=s[o])?n:[]).push(a),e},{})},t.TRACKER_METHOD_IMG=1,t.TRACKER_METHOD_JS=2,t.EVENT_TYPE_IMPRESSION=1,t.EVENT_TYPE_WIN=500},1322:function(e,t,r){"use strict";var n=r(8287);Object.defineProperty(t,"__esModule",{value:!0}),t.addEvents=void 0,t.clearEvents=function(){l.clear()},t.on=t.off=t.has=t.getEvents=t.get=t.emit=void 0;var i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}(r(4700)),o=r(3103),a=r(1250),s=r(9926);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}var c="eventHistoryTTL",u=null,l=(0,a.ttlCollection)({monotonic:!0,ttl:function(){return u}});s.config.getConfig(c,function(e){var t;u!==(u="number"==typeof(e=null==(t=e)?void 0:t[c])?1e3*e:null)&&l.refresh()});var p=Array.prototype.slice,f=Array.prototype.push,g=Object.values(o.EVENTS),v=o.EVENT_ID_PATHS,m=function(){var e={},t={};function r(e){return g.includes(e)}return t.has=r,t.on=function(t,n,o){if(r(t)){var a=e[t]||{que:[]};o?(a[o]=a[o]||{que:[]},a[o].que.push(n)):a.que.push(n),e[t]=a}else i.logError("Wrong event name : "+t+" Valid event names :"+g)},t.emit=function(t){var r,n,o,a,s,d=p.call(arguments,1);i.logMessage("Emitting event for: "+t),n=(r=d[0]||{})[v[t]],a=Object.keys(o=e[t]||{que:[]}),s=[],l.add({eventType:t,args:r,id:n,elapsedTime:i.getPerformanceNow()}),n&&a.includes(n)&&f.apply(s,o[n].que),f.apply(s,o.que),(s||[]).forEach(function(e){if(e)try{e.apply(null,d)}catch(e){i.logError("Error executing handler:","events.js",e,t)}})},t.off=function(t,r,n){var o=e[t];!(i.isEmpty(o)||i.isEmpty(o.que)&&i.isEmpty(o[n]))&&(n&&(i.isEmpty(o[n])||i.isEmpty(o[n].que))||(n?(o[n].que||[]).forEach(function(e){var t=o[n].que;e===r&&t.splice(t.indexOf(e),1)}):(o.que||[]).forEach(function(e){var t=o.que;e===r&&t.splice(t.indexOf(e),1)}),e[t]=o))},t.get=function(){return e},t.addEvents=function(e){g=g.concat(e)},t.getEvents=function(){return l.toArray().map(function(e){return Object.assign({},e)})},t}();i._setEventEmitter(m.emit.bind(m)),t.on=m.on,t.off=m.off,t.get=m.get,t.getEvents=m.getEvents,t.emit=m.emit,t.addEvents=m.addEvents,t.has=m.has},2994:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.enrichFPD=t.dep=void 0;var i=n(r(5881)),o=r(2508),a=r(2339),s=r(3153),d=r(4700),c=r(9926),u=r(8726),l=r(6102),p=r(4112),f=r(3364),g=r(2887),v=r(1851),m=r(4840),h=r(2882);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var y=t.dep={getRefererInfo:a.getRefererInfo,findRootDomain:s.findRootDomain,getWindowTop:d.getWindowTop,getWindowSelf:d.getWindowSelf,getHighEntropySUA:u.getHighEntropySUA,getLowEntropySUA:u.getLowEntropySUA,getDocument:d.getDocument},A=(0,p.clientSectionChecker)("FPD");function I(e){try{return e(y.getWindowTop())}catch(t){return e(y.getWindowSelf())}}function E(e){return(0,d.getDefinedParams)(e,Object.keys(e))}t.enrichFPD=(0,o.hook)("sync",function(e){var t,r=[e,(Array.isArray(t=c.config.getConfig("firstPartyData.uaHints"))&&0!==t.length?y.getHighEntropySUA(t):l.PbPromise.resolve(y.getLowEntropySUA())).catch(function(){return null}),l.PbPromise.resolve("cookieDeprecationLabel"in navigator&&(0,f.isActivityAllowed)(v.ACTIVITY_ACCESS_DEVICE,(0,g.activityParams)(m.MODULE_TYPE_PREBID,"cdep"))&&navigator.cookieDeprecationLabel.getValue()).catch(function(){return null})];return l.PbPromise.all(r).then(function(e){var t=(0,i.default)(e,3),r=t[0],n=t[1],o=t[2],s=y.getRefererInfo();Object.entries(S).forEach(function(e){var t=(0,i.default)(e,2),n=t[0],o=(0,t[1])(r,s);o&&Object.keys(o).length>0&&(r[n]=(0,d.mergeDeep)({},o,r[n]))}),n&&(0,d.deepSetValue)(r,"device.sua",Object.assign({},n,r.device.sua)),o&&(0,d.deepSetValue)(r,"device.ext",Object.assign({},{cdep:o},r.device.ext));var c=y.getDocument().documentElement.lang;c&&(0,d.deepSetValue)(r,"site.ext.data.documentLang",c),r=A(r);var u,l=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return b(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(p.CLIENT_SECTIONS);try{for(l.s();!(u=l.n()).done;){var f=u.value;if((0,p.hasSection)(r,f)){r[f]=(0,d.mergeDeep)({},function(e,t){var r,n,i=(0,a.parseDomain)(t.page,{noLeadingWww:!0});return E({domain:i,keywords:null==(r=I(function(e){return e.document.querySelector("meta[name='keywords']")}))||null==(r=r.content)||null==(n=r.replace)?void 0:n.call(r,/\s/g,""),publisher:E({domain:y.findRootDomain(i)})})}(0,s),r[f]);break}}}catch(e){l.e(e)}finally{l.f()}return r})});var S={site:function(e,t){if(!p.CLIENT_SECTIONS.filter(function(e){return"site"!==e}).some(p.hasSection.bind(null,e)))return E({page:t.page,ref:t.ref})},device:function(){return I(function(e){var t,r=(0,d.getWinDimensions)().screen.width,n=(0,d.getWinDimensions)().screen.height,i=(0,h.getViewportSize)(),o=i.width,a=i.height,s={w:r,h:n,dnt:+!!(0,d.getDNT)(),ua:e.navigator.userAgent,language:e.navigator.language.split("-").shift(),ext:{vpw:o,vph:a}};return null!=(t=e.navigator)&&t.webdriver&&(0,d.deepSetValue)(s,"ext.webdriver",!0),s})},regs:function(){var e={};I(function(e){return e.navigator.globalPrivacyControl})&&(0,d.deepSetValue)(e,"ext.gpc","1");var t=c.config.getConfig("coppa");return"boolean"==typeof t&&(e.coppa=+!!t),e}}},4112:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLIENT_SECTIONS=void 0,t.clientSectionChecker=function(e){return function(t){return i.reduce(function(r,i){return o(t,i)&&(null!=r?((0,n.logWarn)("".concat(e," specifies both '").concat(r,"' and '").concat(i,"'; dropping the latter.")),delete t[i]):r=i),r},null),t}},t.hasSection=o;var n=r(4700),i=t.CLIENT_SECTIONS=["dooh","app","site"];function o(e,t){return null!=e[t]&&Object.keys(e[t]).length>0}},3153:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findRootDomain=t.coreStorage=void 0;var n=r(4700),i=t.coreStorage=(0,r(1122).getCoreStorageManager)("fpdEnrichment");t.findRootDomain=(0,n.memoize)(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;if(!i.cookiesAreEnabled())return r;var o=r.split(".");if(2===o.length)return r;var a=-2,s="_rdc".concat(Date.now()),d="writeable";do{e=o.slice(a).join(".");var c=new Date((0,n.timestamp)()+1e4).toUTCString();i.setCookie(s,d,c,"Lax",e,void 0),i.getCookie(s,void 0)===d?(t=!1,i.setCookie(s,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,e,void 0)):(a+=-1,t=Math.abs(a)<=o.length)}while(t);return e})},8726:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLowEntropySUA=t.getHighEntropySUA=t.SUA_SOURCE_UNKNOWN=t.SUA_SOURCE_UA_HEADER=t.SUA_SOURCE_LOW_ENTROPY=t.SUA_SOURCE_HIGH_ENTROPY=t.LOW_ENTROPY_HINTS=t.HIGH_ENTROPY_HINTS=void 0,t.highEntropySUAAccessor=u,t.lowEntropySUAAccessor=c,t.uaDataToSUA=l;var n=r(4700),i=r(6102);t.SUA_SOURCE_UNKNOWN=0;var o=t.SUA_SOURCE_LOW_ENTROPY=1,a=t.SUA_SOURCE_HIGH_ENTROPY=2;t.SUA_SOURCE_UA_HEADER=3;var s=t.HIGH_ENTROPY_HINTS=["architecture","bitness","model","platformVersion","fullVersionList"],d=t.LOW_ENTROPY_HINTS=["brands","mobile","platform"];function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null==(e=window.navigator)?void 0:e.userAgentData,r=t&&d.some(function(e){return void 0!==t[e]})?Object.freeze(l(o,t)):null;return function(){return r}}function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null==(e=window.navigator)?void 0:e.userAgentData,r={},o=new WeakMap;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;if(!o.has(e)){var d=Array.from(e);d.sort(),o.set(e,d.join("|"))}var c=o.get(e);if(!r.hasOwnProperty(c))try{r[c]=t.getHighEntropyValues(e).then(function(e){return(0,n.isEmpty)(e)?null:Object.freeze(l(a,e))}).catch(function(){return null})}catch(e){r[c]=i.PbPromise.resolve(null)}return r[c]}}function l(e,t){function r(e,t){var r={brand:e};return(0,n.isStr)(t)&&!(0,n.isEmptyStr)(t)&&(r.version=t.split(".")),r}var i={source:e};return t.platform&&(i.platform=r(t.platform,t.platformVersion)),(t.fullVersionList||t.brands)&&(i.browsers=(t.fullVersionList||t.brands).map(function(e){return r(e.brand,e.version)})),void 0!==t.mobile&&(i.mobile=+!!t.mobile),["model","bitness","architecture"].forEach(function(e){var r=t[e];(0,n.isStr)(r)&&(i[e]=r)}),i}t.getLowEntropySUA=c(),t.getHighEntropySUA=u()},2508:function(e,t,r){"use strict";var n,i=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.hook=t.getHook=void 0,t.ignoreCallbackArg=function(e){return p(e,function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.push(function(){}),e.apply(this,r)})},t.module=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.postInstallAllowed,i=void 0!==n&&n;d("async",function(r){r.forEach(function(e){return t.apply(void 0,(0,o.default)(e))}),i&&(l[e]=t)},e)([])},t.ready=void 0,t.setupBeforeHookFnOnce=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;0===e.getHooks({hook:t}).length&&e.before(t,r)},t.submodule=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=l[e];if(i)return i.apply(void 0,r);u(e).before(function(e,t){t.push(r),e(t)})},t.wrapHook=p;var o=i(r(939)),a=i(r(4359)),s=r(6102),d=t.hook=(0,a.default)({ready:a.default.SYNC|a.default.ASYNC|a.default.QUEUE}),c=(0,s.defer)();n=d.ready,d.ready=function(){try{return n.apply(d,arguments)}finally{c.resolve()}},t.ready=c.promise;var u=t.getHook=d.get,l={};function p(e,t){return Object.defineProperties(t,Object.fromEntries(["before","after","getHooks","removeAll"].map(function(t){return[t,{get:function(){return e[t]}}]}))),t}},4607:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VIDEO=t.NATIVE=t.BANNER=t.ALL_MEDIATYPES=t.ADPOD=void 0;var r=t.NATIVE="native",n=t.VIDEO="video",i=t.BANNER="banner";t.ADPOD="adpod",t.ALL_MEDIATYPES=[r,n,i]},8172:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.NATIVE_TARGETING_KEYS=t.IMAGE=void 0,t.convertOrtbRequestToProprietaryNative=function(e){if(!e||!(0,d.isArray)(e)||!e.some(function(e){var t;return null==(t=((null==e?void 0:e.mediaTypes)||{})[p.NATIVE])?void 0:t.ortb}))return e;var t,r=(0,d.deepClone)(e),n=m(r);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.mediaTypes&&i.mediaTypes[p.NATIVE]&&i.mediaTypes[p.NATIVE].ortb&&(i.mediaTypes[p.NATIVE]=Object.assign((0,d.pick)(i.mediaTypes[p.NATIVE],l.NATIVE_KEYS_THAT_ARE_NOT_ASSETS),N(i.mediaTypes[p.NATIVE].ortb)),i.nativeParams=O(i.mediaTypes[p.NATIVE]))}}catch(e){n.e(e)}finally{n.f()}return r},t.decorateAdUnitsWithNativeParams=function(e){e.forEach(function(e){var t,r=e.nativeParams||(null==e||null==(t=e.mediaTypes)?void 0:t.native);r&&(e.nativeParams=O(r)),e.nativeParams&&(e.nativeOrtbRequest=e.nativeParams.ortb||j(e.nativeParams))})},t.fireClickTrackers=x,t.fireImpressionTrackers=C,t.fireNativeTrackers=function(e,t){var r=t.native.ortb||B(t.native);return"click"===e.action?x(r,null==e?void 0:e.assetId):C(r),e.action},t.fromOrtbNativeRequest=N,t.getAllAssetsMessage=function(e,t){return D(e,t,null)},t.getAssetMessage=function(e,t){var r=e.assets.map(function(e){return R[e]});return D(e,t,r)},t.getNativeRenderingData=P,t.getNativeTargeting=function(e){var t,r,n,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.index,d=void 0===s?u.auctionManager.index:s,c={},p=d.getAdUnit(e),f=(null==p||null==(i=p.nativeParams)?void 0:i.ortb)==null&&(null==p||null==(o=p.nativeParams)?void 0:o.sendTargetingKeys)!==!1,g=(n={},null!=(t=p)&&null!=(r=t.nativeParams)&&r.ext&&Object.keys(t.nativeParams.ext).forEach(function(e){n[e]="hb_native_".concat(e)}),y(y({},l.NATIVE_KEYS),n)),v=y(y({},e.native),e.native.ext);return delete v.ext,Object.keys(v).forEach(function(t){var r,n,i,o,a,s=g[t],d=k(e.native[t])||k(null==e||null==(r=e.native)||null==(r=r.ext)?void 0:r[t]);if("adTemplate"!==t&&s&&d){var u=null==p||null==(n=p.nativeParams)||null==(n=n[t])?void 0:n.sendId;"boolean"!=typeof u&&(u=null==p||null==(o=p.nativeParams)||null==(o=o.ext)||null==(o=o[t])?void 0:o.sendId),u&&(d="".concat(s,":").concat(e.adId));var l=null==p||null==(i=p.nativeParams)||null==(i=i[t])?void 0:i.sendTargetingKeys;"boolean"!=typeof l&&(l=null==p||null==(a=p.nativeParams)||null==(a=a.ext)||null==(a=a[t])?void 0:a.sendTargetingKeys),("boolean"==typeof l?l:f)&&(c[s]=d)}}),c},t.hasNonNativeBidder=void 0,t.isNativeOpenRTBBidValid=w,t.isNativeResponse=function(e){return e.native&&"object"===(0,s.default)(e.native)},t.isOpenRTBBidRequestValid=_,t.legacyPropertiesToOrtbNative=B,t.nativeAdapters=t.nativeAdUnit=void 0,t.nativeBidIsValid=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.index,i=(void 0===n?u.auctionManager.index:n).getAdUnit(e);if(!i)return!1;var o=i.nativeOrtbRequest;return w((null==(t=e.native)?void 0:t.ortb)||U(e.native,o),o)},t.nativeBidder=void 0,t.processNativeAdUnitParams=O,t.setNativeResponseProperties=function(e,t){var r,n=null==t?void 0:t.nativeOrtbRequest,i=null==(r=e.native)?void 0:r.ortb;if(n&&i){var o=M(i,n);Object.assign(e.native,o)}["rendererUrl","adTemplate"].forEach(function(r){var n,i=null==t||null==(n=t.nativeParams)?void 0:n[r];i&&(e.native[r]=k(i))})},t.toLegacyResponse=M,t.toOrtbNativeRequest=j,t.toOrtbNativeResponse=U;var i=n(r(939)),o=n(r(5881)),a=n(r(5794)),s=n(r(8287)),d=r(4700),c=r(1617),u=r(3479),l=r(3103),p=r(4607),f=r(8082),g=r(5141),v=r(491);function m(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return h(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var A=t.nativeAdapters=[];t.NATIVE_TARGETING_KEYS=Object.keys(l.NATIVE_KEYS).map(function(e){return l.NATIVE_KEYS[e]});var I={image:t.IMAGE={ortb:{ver:"1.2",assets:[{required:1,id:1,img:{type:3,wmin:100,hmin:100}},{required:1,id:2,title:{len:140}},{required:1,id:3,data:{type:1}},{required:0,id:4,data:{type:2}},{required:0,id:5,img:{type:1,wmin:20,hmin:20}}]},image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}}},E=V(l.PREBID_NATIVE_DATA_KEYS_TO_ORTB),S=V(l.NATIVE_ASSET_TYPES);function O(e){var t;if(e&&e.type&&((t=e.type)&&(0,c.includes)(Object.keys(I),t)||((0,d.logError)("".concat(t," nativeParam is not supported")),0))&&(e=I[e.type]),!e||!e.ortb||_(e.ortb))return e}function _(e){var t=e.assets;if(!Array.isArray(t)||0===t.length)return(0,d.logError)("assets in mediaTypes.native.ortb is not an array, or it's empty. Assets: ",t),!1;var r=t.map(function(e){return e.id});return t.length!==new Set(r).size||r.some(function(e){return e!==parseInt(e,10)})?((0,d.logError)("each asset object must have 'id' property, it must be unique and it must be an integer"),!1):e.hasOwnProperty("eventtrackers")&&!Array.isArray(e.eventtrackers)?((0,d.logError)("ortb.eventtrackers is not an array. Eventtrackers: ",e.eventtrackers),!1):t.every(function(e){var t=e;if(!(0,d.isPlainObject)(t))return(0,d.logError)("asset must be an object. Provided asset: ",t),!1;if(t.img){if(!(0,d.isNumber)(t.img.w)&&!(0,d.isNumber)(t.img.wmin))return(0,d.logError)("for img asset there must be 'w' or 'wmin' property"),!1;if(!(0,d.isNumber)(t.img.h)&&!(0,d.isNumber)(t.img.hmin))return(0,d.logError)("for img asset there must be 'h' or 'hmin' property"),!1}else if(t.title){if(!(0,d.isNumber)(t.title.len))return(0,d.logError)("for title asset there must be 'len' property defined"),!1}else if(t.data){if(!(0,d.isNumber)(t.data.type))return(0,d.logError)("for data asset 'type' property must be a number"),!1}else if(t.video&&(!Array.isArray(t.video.mimes)||!Array.isArray(t.video.protocols)||!(0,d.isNumber)(t.video.minduration)||!(0,d.isNumber)(t.video.maxduration)))return(0,d.logError)("video asset is not properly configured"),!1;return!0})}t.nativeAdUnit=function(e){var t,r="native"===e.mediaType,n=null==e||null==(t=e.mediaTypes)?void 0:t.native;return r||n};var T=t.nativeBidder=function(e){return(0,c.includes)(A,e.bidder)};function w(e,t){if(!(null!=e&&null!=(r=e.link)&&r.url))return(0,d.logError)("native response doesn't have 'link' property. Ortb response: ",e),!1;var r,n=t.assets.filter(function(e){return 1===e.required}).map(function(e){return e.id}),i=e.assets.map(function(e){return e.id}),o=n.every(function(e){return(0,c.includes)(i,e)});return o||(0,d.logError)("didn't receive a bid with all required assets. Required ids: ".concat(n,", but received ids in response: ").concat(i)),o}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.runMarkup,n=void 0===r?function(e){return(0,d.insertHtmlIntoIframe)(e)}:r,i=t.fetchURL,o=void 0===i?d.triggerPixel:i,a=(0,v.parseEventTrackers)(e.eventtrackers||[])[v.EVENT_TYPE_IMPRESSION]||{},s=a[v.TRACKER_METHOD_IMG],c=void 0===s?[]:s,u=a[v.TRACKER_METHOD_JS],l=void 0===u?[]:u;e.imptrackers&&(c=c.concat(e.imptrackers)),c.forEach(function(e){return o(e)}),l=l.map(function(e){return'<script async src="'.concat(e,'"><\/script>')}),e.jstracker&&(l=l.concat([e.jstracker])),l.length&&n(l.join("\n"))}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.fetchURL,i=void 0===n?d.triggerPixel:n;if(t){var o,a,s=(e.assets||[]).filter(function(e){return e.link}).reduce(function(e,t){return e[t.id]=t.link,e},{}),c=(null==(a=e.link)?void 0:a.clicktrackers)||[],u=s[t],l=c;u&&(l=u.clicktrackers||[]),l.forEach(function(e){return i(e)})}else((null==(o=e.link)?void 0:o.clicktrackers)||[]).forEach(function(e){return i(e)})}function P(e,t,r){var n,a=y(y({},(0,d.getDefinedParams)(e.native,["rendererUrl","adTemplate"])),{},{assets:function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=[];return Object.entries(t).filter(function(e){var t=(0,o.default)(e,2),i=t[0];return t[1]&&(!1===n&&"ext"===i||null==r||r.includes(i))}).forEach(function(t){var s=(0,o.default)(t,2),d=s[0],c=s[1];!1===n&&"ext"===d?a.push.apply(a,(0,i.default)(e(c,r,!0))):(n||l.NATIVE_KEYS.hasOwnProperty(d))&&a.push({key:d,value:k(c)})}),a}(e.native,r),nativeKeys:l.NATIVE_KEYS});return e.native.ortb?a.ortb=e.native.ortb:null!=(n=t.mediaTypes)&&null!=(n=n.native)&&n.ortb&&(a.ortb=U(e.native,t.nativeOrtbRequest)),a}function D(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.index,o=void 0===i?u.auctionManager.index:i,a={message:"assetResponse",adId:e.adId},s=(0,f.getRenderingData)(t).native;return s?(a.native=Object.assign({},s),a.renderer=(0,g.getCreativeRendererSource)(t),a.rendererVersion=g.PUC_MIN_VERSION,null!=r&&(s.assets=s.assets.filter(function(e){var t=e.key;return r.includes(t)}))):s=P(t,o.getAdUnit(t),r),Object.assign(a,s)}t.hasNonNativeBidder=function(e){return e.bids.filter(function(e){return!T(e)}).length};var R=Object.fromEntries(Object.entries(l.NATIVE_KEYS).map(function(e){var t=(0,o.default)(e,2),r=t[0];return[t[1],r]}));function k(e){return(null==e?void 0:e.url)||e}function j(e){if(!e&&!(0,d.isPlainObject)(e))return void(0,d.logError)("Native assets object is empty or not an object: ",e);var t={ver:"1.2",assets:[]};for(var r in e)if(!l.NATIVE_KEYS_THAT_ARE_NOT_ASSETS.includes(r)){if(!l.NATIVE_KEYS.hasOwnProperty(r)){(0,d.logError)("Unrecognized native asset code: ".concat(r,". Asset will be ignored."));continue}if("privacyLink"===r){t.privacy=1;continue}var n=e[r],i=0;n.required&&(0,d.isBoolean)(n.required)&&(i=Number(n.required));var o={id:t.assets.length,required:i};if(r in l.PREBID_NATIVE_DATA_KEYS_TO_ORTB)o.data={type:l.NATIVE_ASSET_TYPES[l.PREBID_NATIVE_DATA_KEYS_TO_ORTB[r]]},n.len&&(o.data.len=n.len);else if("icon"===r||"image"===r){if(o.img={type:"icon"===r?l.NATIVE_IMAGE_TYPES.ICON:l.NATIVE_IMAGE_TYPES.MAIN},n.aspect_ratios)if((0,d.isArray)(n.aspect_ratios))if(n.aspect_ratios.length){var a=n.aspect_ratios[0],s=a.min_width,c=a.min_height;(0,d.isInteger)(s)&&(0,d.isInteger)(c)?(o.img.wmin=s,o.img.hmin=c):(0,d.logError)("image.aspect_ratios min_width or min_height are invalid: ",s,c);var u=n.aspect_ratios.filter(function(e){return e.ratio_width&&e.ratio_height}).map(function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)});u.length>0&&(o.img.ext={aspectratios:u})}else(0,d.logError)("image.aspect_ratios was passed, but it's empty:",n.aspect_ratios);else(0,d.logError)("image.aspect_ratios was passed, but it's not a an array:",n.aspect_ratios);n.sizes&&(2===n.sizes.length&&(0,d.isInteger)(n.sizes[0])&&(0,d.isInteger)(n.sizes[1])?(o.img.w=n.sizes[0],o.img.h=n.sizes[1],delete o.img.hmin,delete o.img.wmin):(0,d.logError)("image.sizes was passed, but its value is not an array of integers:",n.sizes))}else"title"===r?o.title={len:n.len||140}:"ext"===r&&(o.ext=n,delete o.required);t.assets.push(o)}return t}function N(e){if(_(e)){var t,r={},n=m(e.assets);try{for(n.s();!(t=n.n()).done;)!function(){var n=t.value;if(n.title)r.title={required:!!n.required&&!!n.required,len:n.title.len};else if(n.img){var i={required:!!n.required&&!!n.required};if(n.img.w&&n.img.h)i.sizes=[n.img.w,n.img.h];else if(n.img.wmin&&n.img.hmin){var o=function(e,t){for(;e&&t&&e!==t;)e>t?e-=t:t-=e;return e||t}(n.img.wmin,n.img.hmin);i.aspect_ratios=[{min_width:n.img.wmin,min_height:n.img.hmin,ratio_width:n.img.wmin/o,ratio_height:n.img.hmin/o}]}n.img.type===l.NATIVE_IMAGE_TYPES.MAIN?r.image=i:r.icon=i}else if(n.data){var a=Object.keys(l.NATIVE_ASSET_TYPES).find(function(e){return l.NATIVE_ASSET_TYPES[e]===n.data.type}),s=Object.keys(l.PREBID_NATIVE_DATA_KEYS_TO_ORTB).find(function(e){return l.PREBID_NATIVE_DATA_KEYS_TO_ORTB[e]===a});r[s]={required:!!n.required&&!!n.required},n.data.len&&(r[s].len=n.data.len)}e.privacy&&(r.privacyLink={required:!1})}()}catch(e){n.e(e)}finally{n.f()}return r}}function B(e){var t={link:{},eventtrackers:[]};return Object.entries(e).forEach(function(e){var r=(0,o.default)(e,2),n=r[0],i=r[1];switch(n){case"clickUrl":t.link.url=i;break;case"clickTrackers":t.link.clicktrackers=Array.isArray(i)?i:[i];break;case"impressionTrackers":(Array.isArray(i)?i:[i]).forEach(function(e){t.eventtrackers.push({event:v.EVENT_TYPE_IMPRESSION,method:v.TRACKER_METHOD_IMG,url:e})});break;case"javascriptTrackers":t.jstracker=Array.isArray(i)?i.join(""):i;break;case"privacyLink":t.privacy=i}}),t}function U(e,t){var r=y(y({},B(e)),{},{assets:[]});function n(e,n){var i=t.assets.find(e);null!=i&&(n(i=(0,d.deepClone)(i)),r.assets.push(i))}return Object.keys(e).filter(function(t){return!!e[t]}).forEach(function(t){var r=k(e[t]);switch(t){case"title":n(function(e){return null!=e.title},function(e){e.title={text:r}});break;case"image":case"icon":var i="image"===t?l.NATIVE_IMAGE_TYPES.MAIN:l.NATIVE_IMAGE_TYPES.ICON;n(function(e){return null!=e.img&&e.img.type===i},function(e){e.img={url:r}});break;default:t in l.PREBID_NATIVE_DATA_KEYS_TO_ORTB&&n(function(e){return null!=e.data&&e.data.type===l.NATIVE_ASSET_TYPES[l.PREBID_NATIVE_DATA_KEYS_TO_ORTB[t]]},function(e){e.data={value:r}})}}),r}function M(e,t){var r={},n=(null==t?void 0:t.assets)||[];r.clickUrl=null==(o=e.link)?void 0:o.url,r.privacyLink=e.privacy;var o,a,s=m((null==e?void 0:e.assets)||[]);try{for(s.s();!(a=s.n()).done;)!function(){var e,t,i=a.value,o=n.find(function(e){return i.id===e.id});i.title?r.title=i.title.text:i.img?r[(null==o||null==(e=o.img)?void 0:e.type)===l.NATIVE_IMAGE_TYPES.MAIN?"image":"icon"]={url:i.img.url,width:i.img.w,height:i.img.h}:i.data&&(r[E[S[null==o||null==(t=o.data)?void 0:t.type]]]=i.data.value)}()}catch(e){s.e(e)}finally{s.f()}r.impressionTrackers=[];var d=[];e.imptrackers&&(c=r.impressionTrackers).push.apply(c,(0,i.default)(e.imptrackers));var c,u,p=m((null==e?void 0:e.eventtrackers)||[]);try{for(p.s();!(u=p.n()).done;){var f=u.value;f.event===v.EVENT_TYPE_IMPRESSION&&f.method===v.TRACKER_METHOD_IMG&&r.impressionTrackers.push(f.url),f.event===v.EVENT_TYPE_IMPRESSION&&f.method===v.TRACKER_METHOD_JS&&d.push(f.url)}}catch(e){p.e(e)}finally{p.f()}return d=d.map(function(e){return'<script async src="'.concat(e,'"><\/script>')}),null!=e&&e.jstracker&&d.push(e.jstracker),d.length&&(r.javascriptTrackers=d.join("\n")),r}function V(e){var t={};for(var r in e)t[e[r]]=r;return t}},9092:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProcessors=t.RESPONSE=t.REQUEST=t.PROCESSOR_TYPES=t.PROCESSOR_DIALECTS=t.PBS=t.IMP=t.DEFAULT=t.BID_RESPONSE=void 0,t.processorRegistry=a,t.registerOrtbProcessor=void 0;var r=t.PROCESSOR_TYPES=["request","imp","bidResponse","response"],n=t.PROCESSOR_DIALECTS=["default","pbs"];t.REQUEST=r[0],t.IMP=r[1],t.BID_RESPONSE=r[2],t.RESPONSE=r[3];var i=t.DEFAULT=n[0];t.PBS=n[1];var o=new Set(r);function a(){var e={};return{registerOrtbProcessor:function(t){var n=t.type,a=t.name,s=t.fn,d=t.priority,c=void 0===d?0:d,u=t.dialects;if(!o.has(n))throw Error("ORTB processor type must be one of: ".concat(r.join(", ")));(void 0===u?[i]:u).forEach(function(t){e.hasOwnProperty(t)||(e[t]={}),e[t].hasOwnProperty(n)||(e[t][n]={}),e[t][n][a]={priority:c,fn:s}})},getProcessors:function(t){return e[t]||{}}}}var s=a();t.registerOrtbProcessor=s.registerOrtbProcessor,t.getProcessors=s.getProcessors},1617:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayFrom=function(){return Array.from.apply(Array,arguments)},t.find=function(e,t,r){return e&&e.find(t,r)},t.findIndex=function(e,t,r){return e&&e.findIndex(t,r)},t.includes=function(e,t,r){return e&&e.includes(t,r)||!1}},9578:function(e,t,r){"use strict";var n,i,o=r(2100),a=r(8287);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.checkAdUnitSetup=t.adUnitSetupChecks=void 0,t.executeCallbacks=eo,t.startAuction=void 0,t.syncOrtb2=K;var s=o(r(4602)),d=o(r(7583)),c=o(r(5881)),u=o(r(939)),l=o(r(5794)),p=r(7045),f=r(4700),g=r(969),v=r(7317),m=r(9926),h=r(3479),b=r(7419),y=r(2508),A=r(2501),I=r(1617),E=r(2035),S=r(1122),O=q(r(9577)),_=r(3103),T=q(r(1322)),w=r(8538),C=r(6102),x=r(2994),P=r(5789),D=r(8082),R=r(2500),k=r(5236),j=r(5523),N=r(4607),B=r(2875),U=r(523),M=r(9962);function V(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(V=function(e){return e?r:t})(e)}function q(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=V(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&({}).hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var L=(0,p.getGlobal)(),F=v.userSync.triggerUserSyncs,G=[],W=_.EVENTS.ADD_AD_UNITS,z=_.EVENTS.REQUEST_BIDS,H=_.EVENTS.SET_TARGETING,Y={bidWon:function(e){return!!h.auctionManager.getBidsRequested().map(function(e){return e.bids.map(function(e){return e.adUnitCode})}).reduce(f.flatten).filter(f.uniques).includes(e)||void(0,f.logError)('The "'+e+'" placement is not defined.')}};function J(e,t){var r=[];return(0,f.isArray)(e)&&(t?e.length===t:e.length>0)&&(e.every(function(e){return(0,f.isArrayOfNums)(e,2)})?r=e:(0,f.isArrayOfNums)(e,2)&&r.push(e)),r}function K(e,t){var r=(0,f.deepAccess)(e,"ortb2Imp.".concat(t)),n=(0,f.deepAccess)(e,"mediaTypes.".concat(t));if(r||n){var i=(0,l.default)((0,l.default)({},N.VIDEO,k.ORTB_VIDEO_PARAMS),N.BANNER,j.ORTB_BANNER_PARAMS)[t];i&&(0,u.default)(i).forEach(function(r){var n=(0,c.default)(r,2),i=n[0];n[1];var o=(0,f.deepAccess)(e,"mediaTypes.".concat(t,".").concat(i)),a=(0,f.deepAccess)(e,"ortb2Imp.".concat(t,".").concat(i));void 0==o&&void 0==a||(void 0==o?(0,f.deepSetValue)(e,"mediaTypes.".concat(t,".").concat(i),a):void 0==a?(0,f.deepSetValue)(e,"ortb2Imp.".concat(t,".").concat(i),o):((0,f.logWarn)("adUnit ".concat(e.code,": specifies conflicting ortb2Imp.").concat(t,".").concat(i," and mediaTypes.").concat(t,".").concat(i,", the latter will be ignored"),e),(0,f.deepSetValue)(e,"mediaTypes.".concat(t,".").concat(i),a)))})}}function Q(e){var t,r,n,i,o,a,s,d=(0,f.deepClone)(e),c=d.mediaTypes.banner,u=null==c.sizes?null:J(c.sizes),l=null!=(t=null==(r=e.ortb2Imp)||null==(r=r.banner)?void 0:r.format)?t:null==c?void 0:c.format;if(null!=l){(0,f.deepSetValue)(d,"ortb2Imp.banner.format",l),c.format=l;try{s=l.filter(function(t){var r=t.w,n=t.h,i=t.wratio,o=t.hratio;return(null!=r?r:n)!=null&&(null!=i?i:o)!=null?((0,f.logWarn)("Ad unit banner.format specifies both w/h and wratio/hratio",e),!1):null!=r&&null!=n||null!=i&&null!=o}).map(function(e){var t=e.w,r=e.h,n=e.wratio,i=e.hratio;return[null!=t?t:n,null!=r?r:i]})}catch(t){(0,f.logError)("Invalid format definition on ad unit ".concat(e.code),l)}null==s||null==u||(0,f.deepEqual)(u,s)||(0,f.logWarn)("Ad unit ".concat(e.code," has conflicting sizes and format definitions"),e)}var p=null!=(n=null!=(i=s)?i:u)?n:[],g=null!=(o=null==(a=e.ortb2Imp)||null==(a=a.banner)?void 0:a.expdir)?o:c.expdir;return null!=g&&(c.expdir=g,(0,f.deepSetValue)(d,"ortb2Imp.banner.expdir",g)),p.length>0?(c.sizes=p,d.sizes=p):((0,f.logError)("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete d.mediaTypes.banner),K(d,"banner"),d}function X(e){var t=(0,f.deepClone)(e),r=t.mediaTypes.video;if(r.playerSize){var n="number"==typeof r.playerSize[0]?2:1,i=J(r.playerSize,n);i.length>0?(2===n&&(0,f.logInfo)("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),r.playerSize=i,t.sizes=i):((0,f.logError)("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return(0,k.validateOrtbVideoFields)(t),K(t,"video"),t}function $(e){function t(t){return(0,f.logError)('Error in adUnit "'.concat(e.code,'": ').concat(t,". Removing native request from ad unit"),e),delete n.mediaTypes.native,n}function r(e){for(var t=0,r=["sendTargetingKeys","types"];t<r.length;t++){var n=r[t];if(i.hasOwnProperty(n)){var o=e(n);if(o)return o}}}var n=(0,f.deepClone)(e),i=n.mediaTypes.native;if(i.ortb){if(null!=(o=i.ortb.assets)&&o.some(function(e){return!(0,f.isNumber)(e.id)||e.id<0||e.id%1!=0}))return t("native asset ID must be a nonnegative integer");if(r(function(e){return t('ORTB native requests cannot specify "'.concat(e,'"'))}))return n;var o,a=Object.keys(_.NATIVE_KEYS).filter(function(e){return _.NATIVE_KEYS[e].includes("hb_native_")}),s=Object.keys(i).filter(function(e){return a.includes(e)});s.length>0&&((0,f.logError)("when using native OpenRTB format, you cannot use legacy native properties. Deleting ".concat(s," keys from request.")),s.forEach(function(e){return delete n.mediaTypes.native[e]}))}else r(function(e){return"mediaTypes.native.".concat(e," is deprecated, consider using native ORTB instead")},e);return i.image&&i.image.sizes&&!Array.isArray(i.image.sizes)&&((0,f.logError)("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete n.mediaTypes.native.image.sizes),i.image&&i.image.aspect_ratios&&!Array.isArray(i.image.aspect_ratios)&&((0,f.logError)("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete n.mediaTypes.native.image.aspect_ratios),i.icon&&i.icon.sizes&&!Array.isArray(i.icon.sizes)&&((0,f.logError)("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete n.mediaTypes.native.icon.sizes),n}function Z(e,t){var r,n=null==e||null==(r=e.mediaTypes)||null==(r=r[t])?void 0:r.pos;if(!(0,f.isNumber)(n)||isNaN(n)||!isFinite(n)){var i="Value of property 'pos' on ad unit ".concat(e.code," should be of type: Number");(0,f.logWarn)(i),delete e.mediaTypes[t].pos}return e}function ee(e){var t=function(t){return"adUnit.code '".concat(e.code,"' ").concat(t)},r=e.mediaTypes,n=e.bids;return null==n||(0,f.isArray)(n)?null==n&&null==e.ortb2Imp?((0,f.logError)(t("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):r&&0!==Object.keys(r).length?(null!=e.ortb2Imp&&(null==n||0===n.length)&&(e.bids=[{bidder:null}],(0,f.logMessage)(t("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):((0,f.logError)(t("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):((0,f.logError)(t("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}(0,A.loadSession)(),L.bidderSettings=L.bidderSettings||{},L.libLoaded=!0,L.version="v9.40.0",(0,f.logInfo)("Prebid.js v9.40.0 loaded"),L.installedModules=L.installedModules||[],L.adUnits=L.adUnits||[],L.triggerUserSyncs=F;var et=t.adUnitSetupChecks={validateAdUnit:ee,validateBannerMediaType:Q,validateSizes:J};Object.assign(et,{validateNativeMediaType:$}),Object.assign(et,{validateVideoMediaType:X});var er=t.checkAdUnitSetup=(0,y.hook)("sync",function(e){var t=[];return e.forEach(function(e){if(null!=(e=ee(e))){var r,n,i,o=e.mediaTypes;o.banner&&(r=Q(e),o.banner.hasOwnProperty("pos")&&(r=Z(r,"banner"))),o.video&&(n=r?X(r):X(e),o.video.hasOwnProperty("pos")&&(n=Z(n,"video"))),o.native&&(i=n?$(n):r?$(r):$(e));var a=Object.assign({},r,n,i);t.push(a)}}),t},"checkAdUnitSetup");function en(e){var t=h.auctionManager[e]().filter(function(e){return h.auctionManager.getAdUnitCodes().includes(e.adUnitCode)}),r=h.auctionManager.getLastAuctionId();return t.map(function(e){return e.adUnitCode}).filter(f.uniques).map(function(e){return t.filter(function(t){return t.auctionId===r&&t.adUnitCode===e})}).filter(function(e){return e&&e[0]&&e[0].adUnitCode}).map(function(e){return(0,l.default)({},e[0].adUnitCode,{bids:e})}).reduce(function(e,t){return Object.assign(e,t)},{})}L.getAdserverTargetingForAdUnitCodeStr=function(e){if((0,f.logInfo)("Invoking pbjs.getAdserverTargetingForAdUnitCodeStr",arguments),e){var t=L.getAdserverTargetingForAdUnitCode(e);return(0,f.transformAdServerTargetingObj)(t)}(0,f.logMessage)("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},L.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e){var t=h.auctionManager.getAllBidsForAdUnitCode(e).filter(M.isBidUsable);return t.length?t.reduce(R.getHighestCpm):{}}(0,f.logMessage)("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},L.trimBidPoolForAdUnit=function(e,t){e&&t&&h.auctionManager.trimBidPoolForAdUnit(e,t)},L.getAdserverTargetingForAdUnitCode=function(e,t){return L.getAdserverTargeting(e,t)[e]},L.getAdserverTargeting=function(e,t){return(0,f.logInfo)("Invoking pbjs.getAdserverTargeting",arguments),b.targeting.getAllTargeting(e,t)},L.getConsentMetadata=function(){return(0,f.logInfo)("Invoking pbjs.getConsentMetadata"),P.allConsent.getConsentMeta()},L.getNoBids=function(){return(0,f.logInfo)("Invoking pbjs.getNoBids",arguments),en("getNoBids")},L.getNoBidsForAdUnitCode=function(e){return{bids:h.auctionManager.getNoBids().filter(function(t){return t.adUnitCode===e})}},L.getBidResponses=function(){return(0,f.logInfo)("Invoking pbjs.getBidResponses",arguments),en("getBidsReceived")},L.getBidResponsesForAdUnitCode=function(e){var t,r=((null==L?void 0:L.adUnits)||[]).filter(function(t){return t.code===e}),n=r.length&&r[0].bidPoolId,i=(null==(t=m.config.getConfig("bidPooling"))?void 0:t.excludedBidders)||[];return{bids:h.auctionManager.getBidsReceived().filter(function(t){var r=t.adUnitCode===e,o=!i.includes(t.bidderCode),a=n&&o&&(t.bidPoolId===n||t.passiveBidPoolId===n),s=!t.sharedBidInUse||t.sharedBidInUse===e;return(r||a)&&s})}},L.getBidResponsesForBidPoolId=function(e){var t,r=(null==(t=m.config.getConfig("bidPooling"))?void 0:t.excludedBidders)||[];return{bids:h.auctionManager.getBidsReceived().filter(function(t){var n=t.bidPoolId===e||t.passiveBidPoolId===e,i=!r.includes(t.bidderCode);return n&&i})}},L.clearAllAuctions=function(){(0,f.logInfo)("Invoking pbjs.clearBidResponsesFromBidPool",arguments),h.auctionManager.clearAllAuctions()},L.setTargetingForGPTAsync=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:R.getHighestCpm,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:f.sortByHighestCpm;if((0,f.logInfo)("Invoking pbjs.setTargetingForGPTAsync",arguments),!(0,f.isGptPubadsDefined)())return void(0,f.logError)("window.googletag is not defined on the page");b.targeting.setTargetingForGPT(e,t,r,n,i,o)},L.setTargetingForAst=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if((0,f.logInfo)("Invoking pbjs.setTargetingForAn",arguments),!b.targeting.isApntagDefined())return void(0,f.logError)("window.apntag is not defined on the page");b.targeting.setTargetingForAst(e,t),T.emit(H,b.targeting.getAllTargeting())},L.clearTargetingForSharedBidPool=function(e){(0,f.logInfo)("Invoking pbjs.clearTargetingForSharedBidPool",arguments),b.targeting.clearTargetingForSharedBidPool(e)},L.renderAd=(0,y.hook)("async",function(e,t,r){(0,f.logInfo)("Invoking pbjs.renderAd",arguments),(0,f.logMessage)("Calling renderAd with adId :"+t),(0,D.renderAdDirect)(e,t,r)}),L.removeAdUnit=function(e){if((0,f.logInfo)("Invoking pbjs.removeAdUnit",arguments),!e){L.adUnits=[];return}((0,f.isArray)(e)?e:[e]).forEach(function(e){for(var t=L.adUnits.length-1;t>=0;t--)L.adUnits[t].code===e&&L.adUnits.splice(t,1)})},n=(0,y.hook)("async",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,r=e.timeout,n=e.adUnits,i=e.adUnitCodes,o=e.labels,a=e.auctionId,s=e.ttlBuffer,d=e.ortb2,u=e.metrics,l=e.defer,p=e.resolve;T.emit(z);var g=r||m.config.getConfig("bidderTimeout");(0,f.logInfo)("Invoking pbjs.requestBids",arguments),null==i||Array.isArray(i)||(i=[i]),i&&i.length?n=n.filter(function(e){return(0,I.includes)(i,e.code)}):i=n&&n.map(function(e){return e.code}),i=i.filter(f.uniques);var v={global:(0,f.mergeDeep)({},m.config.getAnyConfig("ortb2")||{},d||{}),bidder:Object.fromEntries(Object.entries(m.config.getBidderConfig()).map(function(e){var t=(0,c.default)(e,2),r=t[0],n=t[1];return[r,(0,f.deepClone)(n.ortb2)]}).filter(function(e){var t=(0,c.default)(e,2);return null!=(t[0],t[1])}))};return(0,x.enrichFPD)(C.PbPromise.resolve(v.global)).then(function(e){return v.global=e,ei({bidsBackHandler:t,timeout:g,adUnits:n,adUnitCodes:i,labels:o,auctionId:a,ttlBuffer:s,ortb2Fragments:v,metrics:u,defer:l,resolve:p})})},"requestBids"),i=(0,d.default)(s.default.mark(function e(t,r){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.queue){e.next=3;break}return e.next=3,t.queue;case 3:n.call(r,t);case 4:case"end":return e.stop()}},e)})),L.requestBids=(0,y.wrapHook)(n,(0,B.delayIfPrerendering)(function(){return!m.config.getConfig("allowPrerendering")},function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=m.config.getConfig("requestQueue")||{},a=o.enabled,s=o.timeout,d=new Promise(function(e){t=e});a&&(r=a&&G.length&&Promise.race([(e=s||50,new Promise(function(t){return setTimeout(t,e)})),G.shift()]),G.push(d));var c=n.adUnits||L.adUnits;return n.adUnits=(0,f.isArray)(c)?c.slice():[c],n.metrics=(0,w.newMetrics)(),n.metrics.checkpoint("requestBids"),n.defer=(0,C.defer)({promiseFactory:function(e){return new Promise(e)}}),n.resolver=t,n.queue=r,function(e,t){i.apply(this,arguments)}(n,this),n.defer.promise}));var ei=t.startAuction=(0,y.hook)("async",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,r=e.timeout,n=e.adUnits,i=e.ttlBuffer,o=e.adUnitCodes,a=e.labels,s=e.auctionId,d=e.ortb2Fragments,c=e.metrics,u=e.defer,l=e.resolve,p=(0,O.getS2SBidderSet)(m.config.getConfig("s2sConfig")||[]);function g(e,r,n){if("function"==typeof t)try{t(e,r,n)}catch(e){(0,f.logError)("Error executing bidsBackHandler",null,e)}u.resolve({bids:e,timedOut:r,auctionId:n})}n.forEach(function(e){return(0,k.fillVideoDefaults)(e)});var v={};if((n=(0,w.useMetrics)(c).measureTime("requestBids.validate",function(){return er(n)})).forEach(function(e){var t,r=Object.keys(e.mediaTypes||{banner:"banner"}),n=e.bids.map(function(e){return e.pbsHost||e.bidder}),o=O.default.bidderRegistry,a=n.filter(function(e){return!p.has(e)});e.adUnitId=(0,f.generateUUID)();var s=null==(t=e.ortb2Imp)||null==(t=t.ext)?void 0:t.tid;s&&(v.hasOwnProperty(e.code)?(0,f.logWarn)("Multiple distinct ortb2Imp.ext.tid were provided for twin ad units '".concat(e.code,"'")):v[e.code]=s),null==i||e.hasOwnProperty("ttlBuffer")||(e.ttlBuffer=i),a.forEach(function(t){var n=o[t],i=n&&n.getSpec&&n.getSpec(),a=i&&i.supportedMediaTypes||["banner"];r.some(function(e){return(0,I.includes)(a,e)})||((0,f.logWarn)((0,f.unsupportedBidderMessage)(e,t)),e.bids=e.bids.filter(function(e){return e.bidder!==t}))})}),n&&0!==n.length){n.forEach(function(e){var t,r=(null==(t=e.ortb2Imp)||null==(t=t.ext)?void 0:t.tid)||v[e.code]||(0,f.generateUUID)();v.hasOwnProperty(e.code)||(v[e.code]=r),e.transactionId=r,(0,f.deepSetValue)(e,"ortb2Imp.ext.tid",r)});var y=h.auctionManager.createAuction({adUnits:n,adUnitCodes:o,callback:g,cbTimeout:r,labels:a,auctionId:s,ortb2Fragments:d,metrics:c}),A=n.length;A>15&&(0,f.logInfo)("Current auction ".concat(y.getAuctionId()," contains ").concat(A," adUnits."),n),o.forEach(function(e){return b.targeting.setLatestAuctionForAdUnit(e,y.getAuctionId())}),y.callBids(),l&&l()}else(0,f.logMessage)("No adUnits configured. No bids requested."),g()},"startAuction");function eo(e,t){function r(e){for(var t;t=e.shift();)t()}r(S.storageCallbacks),r(ea),e.call(this,t)}L.requestBids.before(eo,49),L.addAdUnits=function(e){(0,f.logInfo)("Invoking pbjs.addAdUnits",arguments),L.adUnits.push.apply(L.adUnits,(0,f.isArray)(e)?e:[e]),T.emit(W)},L.onEvent=function(e,t,r){return((0,f.logInfo)("Invoking pbjs.onEvent",arguments),(0,f.isFn)(t))?r&&!Y[e].call(null,r)?void(0,f.logError)('The id provided is not valid for event "'+e+'" and no handler was set.'):void T.on(e,t,r):void(0,f.logError)('The event handler provided is not a function and was not set on event "'+e+'".')},L.offEvent=function(e,t,r){(0,f.logInfo)("Invoking pbjs.offEvent",arguments),(!r||Y[e].call(null,r))&&T.off(e,t,r)},L.getEvents=function(){return(0,f.logInfo)("Invoking pbjs.getEvents"),T.getEvents()},L.registerBidAdapter=function(e,t,r){(0,f.logInfo)("Invoking pbjs.registerBidAdapter",arguments);try{var n=r?(0,U.newBidder)(r):e();O.default.registerBidAdapter(n,t)}catch(e){(0,f.logError)("Error registering bidder adapter : "+e.message)}},L.registerAnalyticsAdapter=function(e){(0,f.logInfo)("Invoking pbjs.registerAnalyticsAdapter",arguments);try{O.default.registerAnalyticsAdapter(e)}catch(e){(0,f.logError)("Error registering analytics adapter : "+e.message)}},L.createBid=function(e){return(0,f.logInfo)("Invoking pbjs.createBid",arguments),(0,E.createBid)(e)};var ea=[],es=(0,y.hook)("async",function(e){e&&!(0,f.isEmpty)(e)?((0,f.logInfo)("Invoking pbjs.enableAnalytics for: ",e),O.default.enableAnalytics(e)):(0,f.logError)("pbjs.enableAnalytics should be called with option {}")},"enableAnalyticsCb");function ed(e){if("function"==typeof e)try{e.call()}catch(e){(0,f.logError)("Error processing command :",e.message,e.stack)}else(0,f.logError)("Commands written into pbjs.cmd.push must be wrapped in a function")}function ec(e){e.forEach(function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){(0,f.logError)("Error processing command :","prebid.js",e)}})}L.enableAnalytics=function(e){ea.push(es.bind(this,e))},L.aliasBidder=function(e,t,r){(0,f.logInfo)("Invoking pbjs.aliasBidder",arguments),e&&t?O.default.aliasBidAdapter(e,t,r):(0,f.logError)("bidderCode and alias must be passed as arguments","pbjs.aliasBidder")},L.aliasRegistry=O.default.aliasRegistry,m.config.getConfig("aliasRegistry",function(e){"private"===e.aliasRegistry&&delete L.aliasRegistry}),L.clearAuctionBids=function(e){return(0,f.logInfo)("Invoking pbjs.clearAuctionBids",arguments),h.auctionManager.clearAuctionBids(e)},L.setBidsReceivedFilter=function(e){return h.auctionManager.setBidsReceivedFilter(e)},L.getAllWinningBids=function(){return h.auctionManager.getAllWinningBids()},L.getAllPrebidWinningBids=function(){return h.auctionManager.getBidsReceived().filter(function(e){return e.status===_.BID_STATUS.BID_TARGETING_SET})},L.getHighestCpmBids=function(e){return b.targeting.getWinningBids(e)},L.clearSlotTargeting=function(e){b.targeting.clearTargeting(e)},L.clearAllAuctions=function(){h.auctionManager.clearAllAuctions()},L.getHighestCpmBidsForPoolId=function(e){return b.targeting.getWinningPoolIdBids(e)},L.markWinningBidAsUsed=function(e){var t,r=e.adId,n=e.adUnitCode,i=e.analytics,o=e.bidPoolId,a=e.passiveBidPoolId,s=e.events;n&&null==r?t=b.targeting.getWinningBids(n):(o||a)&&r?t=h.auctionManager.getBidsReceived().filter(function(e){return e.adId===r&&(e.bidPoolId===o||e.passiveBidPoolId===a)}):r?t=h.auctionManager.getBidsReceived().filter(function(e){return e.adId===r}):o||a?t=b.targeting.getWinningPoolIdBids(o||a):(0,f.logWarn)("Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function."),t.length>0&&(void 0!==i&&i||void 0!==s&&s?(0,D.markWinningBid)(t[0]):h.auctionManager.addWinningBid(t[0]),(0,D.markBidAsRendered)(t[0]))},L.getConfig=m.config.getAnyConfig,L.readConfig=m.config.readAnyConfig,L.mergeConfig=m.config.mergeConfig,L.mergeBidderConfig=m.config.mergeBidderConfig,L.setConfig=m.config.setConfig,L.setBidderConfig=m.config.setBidderConfig,L.que.push(function(){return(0,g.listenMessagesFromCreative)()}),L.processQueue=(0,B.delayIfPrerendering)(function(){return(0,p.getGlobal)().delayPrerendering},function(){L.que.push=L.cmd.push=ed,(0,D.insertLocatorFrame)(),y.hook.ready(),ec(L.que),ec(L.cmd)}),L.triggerBilling=function(e){var t=e.adId,r=e.adUnitCode;h.auctionManager.getAllWinningBids().filter(function(e){return e.adId===t||null==t&&e.adUnitCode===r}).forEach(function(e){O.default.triggerBilling(e),(0,D.renderIfDeferred)(e)})},t.default=L},6507:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=n(r(9578))},7045:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobal=function(){return n},t.registerModule=function(e){n.installedModules.push(e)};var r=window,n=r.pbjs=r.pbjs||{};n.cmd=n.cmd||[],n.que=n.que||[],r===window&&(r._pbjsGlobals=r._pbjsGlobals||[],r._pbjsGlobals.push("pbjs"))},2339:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cacheWithLocation=c,t.detectReferer=d,t.ensureProtocol=o,t.getRefererInfo=void 0,t.parseDomain=a;var n=r(9926),i=r(4700);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e||/\w+:\/\//.exec(e))return e;var r=t.location.protocol;try{r=t.top.location.protocol}catch(e){}return/^\/\//.exec(e)?r+e:"".concat(r,"//").concat(e)}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.noLeadingWww,n=t.noPort;try{e=new URL(o(e))}catch(e){return}return e=void 0!==n&&n?e.hostname:e.host,void 0!==r&&r&&e.startsWith("www.")&&(e=e.substring(4)),e}function s(e){try{var t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}function d(e){return function(){var t,r,d,c,u=[],l=function(e){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}(e),p=n.config.getConfig("maxNestedIframes"),f=!1,g=0,v=!1,m=!1,h=!1;do{var b=t,y=m,A=void 0,I=!1,E=null;m=!1,t=t?t.parent:e;try{A=t.location.href||null}catch(e){I=!0}if(I)if(y){var S=b.context;try{r=E=S.sourceUrl,h=!0,v=!0,t===e.top&&(f=!0),S.canonicalUrl&&(d=S.canonicalUrl)}catch(e){}}else{(0,i.logWarn)("Trying to access cross domain iframe. Continuing without referrer and location");try{var O=b.document.referrer;O&&(E=O,t===e.top&&(f=!0))}catch(e){}!E&&l&&l[g-1]&&(E=l[g-1],t===e.top&&(h=!0)),E&&!v&&(r=E)}else{if(A&&(r=E=A,v=!1,t===e.top)){f=!0;var _=s(t.document);_&&(d=_)}t.context&&t.context.sourceUrl&&(m=!0)}u.push(E),g++}while(t!==e.top&&g<p);u.reverse();try{c=e.top.document.referrer}catch(e){}var T=f||h?r:null,w=n.config.getConfig("pageUrl")||d||null,C=n.config.getConfig("pageUrl")||T||o(w,e);return T&&T.indexOf("?")>-1&&-1===C.indexOf("?")&&(C="".concat(C).concat(T.substring(T.indexOf("?")))),{reachedTop:f,isAmp:v,numIframes:g-1,stack:u,topmostLocation:r||null,location:T,canonicalUrl:w,page:C,domain:a(C)||null,ref:c||null,legacy:{reachedTop:f,isAmp:v,numIframes:g-1,stack:u,referer:r||null,canonicalUrl:w}}}}function c(e){var t,r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return i.top!==i?e:function(){var o=s(i.document),a=i.location.href;return(t!==o||a!==r)&&(t=o,r=a,n=e()),n}}t.getRefererInfo=c(d(window))},969:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.getReplier=b,t.listenMessagesFromCreative=function(){window.addEventListener("message",function(e){y(e)},!1)},t.receiveMessage=y,t.resizeRemoteCreative=I;var i=n(r(5794)),o=r(8172),a=r(3103),s=r(4700),d=r(1617),c=r(8082),u=r(5141);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var f=a.MESSAGES.REQUEST,g=a.MESSAGES.RESPONSE,v=a.MESSAGES.NATIVE,m=a.MESSAGES.EVENT,h=(0,i.default)((0,i.default)({},f,function(e,t,r){(0,c.handleRender)({renderFn:function(t){e(Object.assign({message:g,renderer:(0,u.getCreativeRendererSource)(r),rendererVersion:u.PUC_MIN_VERSION},t))},resizeFn:A(t.adId,r),options:t.options,adId:t.adId,bidResponse:r})}),m,function(e,t,r){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3],null==r)return void(0,s.logError)("Cannot find ad '".concat(t.adId,"' for x-origin event request"));if(r.status!==a.BID_STATUS.RENDERED){(0,c.emitAdRenderFail)({bid:r,id:t.adId,reason:a.AD_RENDER_FAILED_REASON.EXCEPTION,message:t.info&&t.info.message}),(0,s.logWarn)("Received x-origin event request without corresponding render request for ad '".concat(r.adId,"'"));return}return(0,c.handleCreativeEvent)(t,r)});function b(e){return null==e.origin&&0===e.ports.length?function(){var e="Cannot post message to a frame with null origin. Please update creatives to use MessageChannel, see https://github.com/prebid/Prebid.js/issues/7870";throw(0,s.logError)(e),Error(e)}:e.ports.length>0?function(t){e.ports[0].postMessage(JSON.stringify(t))}:function(t){e.source.postMessage(JSON.stringify(t),e.origin)}}function y(e){var t="request_ad"===e.data.message,r=e.message?"message":"data",n={};try{n=t?{adId:e.data.adId||e.data.id,message:"Prebid Request"}:JSON.parse(e[r])}catch(e){return}if(n&&n.adId&&n.message&&h.hasOwnProperty(n.message))return(0,c.getBidToRender)(n.adId,n.message===a.MESSAGES.REQUEST).then(function(t){var r,i;h[n.message]((r=n.adId,i=b(e),function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i.apply(void 0,[Object.assign({},e,{adId:r})].concat(n))}),n,t)})}function A(e,t){return function(r,n){I(p(p({},t),{},{width:r,height:n,adId:e}))}}function I(e){var t=e.instl,r=e.adId,n=e.adUnitCode,i=e.width,o=e.height,a=e.sharedBidInUse||n;function c(e){return e?e+"px":"100%"}t||["div","iframe"].forEach(function(e){var t,u,l,p,f,g,v,m,h,b,y=(t=e+':not([style*="display: none"])',h=(u=r,l=a,(0,s.isGptPubadsDefined)()?(p=u,f=l,(g=(0,d.find)(window.googletag.pubads().getSlots(),function(e){return f&&e.getSlotElementId()===f||(0,d.find)(e.getTargetingKeys(),function(t){return(0,d.includes)(e.getTargeting(t),p)})}))?g.getSlotElementId():null):(0,s.isApnGetTagDefined)()?(v=n,(m=window.apntag.getTag(v))&&m.targetId):l),(b=document.getElementById(h))&&b.querySelector(t));if(y){var A=function(e){if(window.googletag)return(0,d.find)(window.googletag.pubads().getSlots(),function(t){return(0,d.includes)(t.getTargeting("hb_instl"),"1")&&(0,d.includes)(t.getTargeting("hb_adid"),e)})}(r),I=y.style;I.width=A?"100vw":c(i),I.height=A?"100vh":c(o)}else(0,s.logError)("Unable to locate matching page element for adUnitCode ".concat(a,".  Can't resize it to ad's dimensions.  Please review setup."))})}Object.assign(h,(0,i.default)({},v,function(e,t,r){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3],null==r)return void(0,s.logError)("Cannot find ad for x-origin event request: '".concat(t.adId,"'"));switch(t.action){case"assetRequest":(0,c.deferRendering)(r,function(){return e((0,o.getAssetMessage)(t,r))});break;case"allAssetRequest":(0,c.deferRendering)(r,function(){return e((0,o.getAllAssetsMessage)(t,r))});break;default:(0,c.handleNativeMessage)(t,r,{resizeFn:A(t.adId,r)}),(0,c.markWinner)(r)}}))},1122:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.STORAGE_TYPE_LOCALSTORAGE=t.STORAGE_TYPE_COOKIES=void 0,t.deviceAccessRule=A,t.getCoreStorageManager=function(e){return y({moduleName:e,moduleType:s.MODULE_TYPE_PREBID})},t.getStorageManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleType,r=e.moduleName,n=e.bidderCode;function i(){throw Error("Invalid invocation for getStorageManager: must set either bidderCode, or moduleType + moduleName")}return n?((t&&t!==s.MODULE_TYPE_BIDDER||r)&&i(),t=s.MODULE_TYPE_BIDDER,r=n):r&&t||i(),y({moduleType:t,moduleName:r})},t.newStorageManager=y,t.resetData=function(){t.storageCallbacks=b=[]},t.storageAllowedRule=I,t.storageCallbacks=void 0;var i=n(r(5794)),o=r(4700),a=r(3951),s=r(4840),d=r(3364),c=r(3645),u=r(1851),l=r(9926),p=n(r(9577)),f=r(2887);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m=t.STORAGE_TYPE_LOCALSTORAGE="html5",h=t.STORAGE_TYPE_COOKIES="cookie",b=t.storageCallbacks=[];function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleName,r=e.moduleType,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.isAllowed,g=void 0===a?d.isActivityAllowed:a;function y(e,n){var o=t,a=l.config.getCurrentBidder();return a&&r===s.MODULE_TYPE_BIDDER&&p.default.aliasRegistry[a]===t&&(o=a),e({valid:g(u.ACTIVITY_ACCESS_DEVICE,(0,f.activityParams)(r,o,(0,i.default)({},c.ACTIVITY_PARAM_STORAGE_TYPE,n)))})}function A(e,t,r){if(!r||"function"!=typeof r)return y(e,t);b.push(function(){r(y(e,t))})}function I(e){var t=e.charAt(0).toUpperCase()+e.substring(1),r=function(){return window[e]},n=function(t){return A(function(t){if(t&&t.valid)try{return!!r()}catch(t){(0,o.logError)("".concat(e," api disabled"))}return!1},m,t)};return(0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)({},"has".concat(t),n),"".concat(e,"IsEnabled"),function(e){return A(function(e){if(e&&e.valid)try{return r().setItem("prebid.cookieTest","1"),"1"===r().getItem("prebid.cookieTest")}catch(e){}finally{try{r().removeItem("prebid.cookieTest")}catch(e){}}return!1},m,e)}),"setDataIn".concat(t),function(e,t,i){return A(function(i){i&&i.valid&&n()&&r().setItem(e,t)},m,i)}),"getDataFrom".concat(t),function(e,t){return A(function(t){return t&&t.valid&&n()?r().getItem(e):null},m,t)}),"removeDataFrom".concat(t),function(e,t){return A(function(t){t&&t.valid&&n()&&r().removeItem(e)},m,t)})}return v(v(v({setCookie:function(e,t,r,n,i,o){return A(function(o){if(o&&o.valid){var a=i&&""!==i?" ;domain=".concat(encodeURIComponent(i)):"",s=null!=n&&"none"==n.toLowerCase();document.cookie="".concat(e,"=").concat(encodeURIComponent(t)).concat(r&&""!==r?" ;expires=".concat(r):"","; path=/").concat(a).concat(n?"; SameSite=".concat(n):"").concat(s?"; Secure":"")}},h,o)},getCookie:function(e,t){return A(function(t){if(t&&t.valid){var r=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return r?decodeURIComponent(r[2]):null}return null},h,t)},cookiesAreEnabled:function(e){return A(function(e){return!!e&&!!e.valid&&(0,o.checkCookieSupport)()},h,e)}},I("localStorage")),I("sessionStorage")),{},{findSimilarCookies:function(e,t){return A(function(t){if(t&&t.valid){var r=[];if((0,o.hasDeviceAccess)())for(var n=document.cookie.split(";");n.length;){var i=n.pop(),a=i.indexOf("=");a=a<0?i.length:a,decodeURIComponent(i.slice(0,a).replace(/^\s+/,"")).indexOf(e)>=0&&r.push(decodeURIComponent(i.slice(a+1)))}return r}},h,t)}})}function A(){if(!(0,o.hasDeviceAccess)())return{allow:!1}}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.bidderSettings;if(e[c.ACTIVITY_PARAM_COMPONENT_TYPE]===s.MODULE_TYPE_BIDDER){var r=t.get(e[c.ACTIVITY_PARAM_ADAPTER_CODE],"storageAllowed");if(r&&!0!==r){var n=e[c.ACTIVITY_PARAM_STORAGE_TYPE];r=Array.isArray(r)?r.some(function(e){return e===n}):r===n}else r=!!r;if(!r)return{allow:r}}}(0,d.registerActivityControl)(u.ACTIVITY_ACCESS_DEVICE,"deviceAccess config",A),(0,d.registerActivityControl)(u.ACTIVITY_ACCESS_DEVICE,"bidderSettings.*.storageAllowed",I)},7419:function(e,t,r){"use strict";var n=r(2100),i=r(8287);Object.defineProperty(t,"__esModule",{value:!0}),t.TARGETING_KEYS_ARR=void 0,t.getGPTSlotsForAdUnits=D,t.getHighestCpmBidsFromBidPool=void 0,t.newTargeting=R,t.sortByDealAndPriceBucketOrCpm=P,t.targeting=void 0;var o=n(r(5881)),a=n(r(5794)),s=n(r(939)),d=r(3479),c=r(3951),u=r(9926),l=r(3103),p=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=I(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1322)),f=r(2508),g=r(4607),v=r(8172),m=r(1617),h=r(4700),b=r(2500),y=r(7045),A=r(9962);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(I=function(e){return e?r:t})(e)}var E=[],S=(0,y.getGlobal)(),O="targetingControls.allowTargetingKeys",_="targetingControls.addTargetingKeys",T='Only one of "'.concat(O,'" or "').concat(_,'" can be set'),w=t.TARGETING_KEYS_ARR=Object.keys(l.TARGETING_KEYS).map(function(e){return l.TARGETING_KEYS[e]}),C=function(e){d.auctionManager.getBidsReceived().filter(function(t){return t.status!==l.BID_STATUS.RENDERED&&t.sharedBidInUse===e}).forEach(function(e){delete e.sharedBidInUse})};p.on(l.EVENTS.BEFORE_REQUEST_BIDS,function(e){e.forEach(function(e){var t=e.code;S.adUnits.filter(function(e){return e.code===t}).length&&C(t)})}),p.on(l.EVENTS.BID_WON,function(e){var t=e.sharedBidInUse;setTimeout(function(){C(t)},1e3)});var x=t.getHighestCpmBidsFromBidPool=(0,f.hook)("sync",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:h.sortByHighestCpm;if(!i){var a=[],d=u.config.getConfig("sendBidsControl.dealPrioritization"),c=Object.keys(n),l=(0,h.groupBy)(e,"adUnitCode");return c.length&&(l=Object.keys(l).reduce(function(e,t){var r=!1;return c.forEach(function(i){if((0,m.includes)(n[i].codes,t)){var o=n[i].adUnit;e[o]||(e[o]=[]),e[o]=e[o].concat(l[t]),r=!0}}),r||(e[t]=l[t]),e},{})),Object.keys(l).forEach(function(e){var n=[],i=(0,h.groupBy)(l[e],"bidderCode");Object.keys(i).forEach(function(e){return n.push(i[e].reduce(t))}),r?(n=d?n.sort(P(!0,o)):n.sort(o),a.push.apply(a,(0,s.default)(n.slice(0,r)))):(n=n.sort(o),a.push.apply(a,(0,s.default)(n)))}),a}return e});function P(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.sortByHighestCpm;return function(r,n){return void 0!==r.adserverTargeting.hb_deal&&void 0===n.adserverTargeting.hb_deal?-1:void 0===r.adserverTargeting.hb_deal&&void 0!==n.adserverTargeting.hb_deal?1:e?t(r,n):n.adserverTargeting.hb_pb-r.adserverTargeting.hb_pb}}function D(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return window.googletag.pubads().getSlots()};return r().reduce(function(e,r){var n=(0,h.isFn)(t)&&t(r);return Object.keys(e).filter((0,h.isFn)(n)?n:(0,h.isAdUnitCodeMatchingSlot)(r)).forEach(function(t){return e[t].push(r)}),e},Object.fromEntries(e.map(function(e){return[e,[]]})))}function R(e){var t={},r={};function n(t){return"string"==typeof t?[t]:(0,h.isArray)(t)?t:e.getAdUnitCodes()||[]}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.getOldestHighestCpmBid,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return x(e.getBidsReceived().reduce(function(e,t){var n=u.config.getConfig("useBidCache"),i=u.config.getConfig("bidCacheFilterFunction"),o=r[t.adUnitCode]===t.auctionId,a=!n||!!o||"function"!=typeof i||!!i(t);return(n||o)&&a&&(0,h.deepAccess)(t,"video.context")!==g.ADPOD&&(0,A.isBidUsable)(t)&&(t.latestTargetedAuctionId=r[t.adUnitCode],e.push(t)),e},[]),t,void 0,void 0,void 0,n)}function d(e){return e&&"string"==typeof e?[e]:(0,h.isArray)(e)?e:[]}function y(){return e.getStandardBidderAdServerTargeting().map(function(e){return e.key}).concat(w).filter(h.uniques)}return t.setLatestAuctionForAdUnit=function(e,t){r[e]=t},t.resetPresetTargeting=function(e,r){(0,h.isGptPubadsDefined)()&&Object.values(D(n(e),r)).forEach(function(e){e.forEach(function(e){t.clearTargeting(e)})})},t.resetPresetTargetingAST=function(e){n(e).forEach(function(e){var t=window.apntag.getTag(e);if(t&&t.keywords){var r=Object.keys(t.keywords),n={};r.forEach(function(e){(0,m.includes)(E,e.toLowerCase())||(n[e]=t.keywords[e])}),window.apntag.modifyTag(e,{keywords:n})}})},t.getAllTargeting=function(t,r,o){var p,f,g,A,I,C,D,R,k,j,N,B,U,M=arguments.length>3&&void 0!==arguments[3]&&arguments[3],V=arguments.length>4?arguments[4]:void 0,q=arguments.length>5&&void 0!==arguments[5]?arguments[5]:b.getHighestCpm,L=arguments.length>6&&void 0!==arguments[6]?arguments[6]:h.sortByHighestCpm;V||(V=i(q,L));var F=n(t),G=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n={};return(e||[]).forEach(function(e){if(null!=e&&e.passiveBidPoolId&&(0,m.includes)(r,null==e?void 0:e.passiveBidPoolId)){var i;n[null==e?void 0:e.passiveBidPoolId]=n[null==e?void 0:e.passiveBidPoolId]||{codes:[],adUnit:[]},n[null==e?void 0:e.passiveBidPoolId].codes.push(e.code),(0,m.includes)(t,e.code)&&!(0,m.includes)(null==(i=n[null==e?void 0:e.passiveBidPoolId])?void 0:i.adUnit,e.code)&&n[null==e?void 0:e.passiveBidPoolId].adUnit.push(e.code)}null!=e&&e.bidPoolId&&(0,m.includes)(r,e.bidPoolId)&&(n[e.bidPoolId]=n[e.bidPoolId]||{codes:[],adUnit:[]},n[e.bidPoolId].codes.push(e.code),(0,m.includes)(t,e.code)&&!(0,m.includes)(n[e.bidPoolId].adUnit,e.code)&&n[e.bidPoolId].adUnit.push(e.code))}),n=Object.keys(n).reduce(function(e,t){return 1===n[t].adUnit.length&&(e[t]={codes:n[t].codes,adUnit:n[t].adUnit[0]}),e},{})}(S.adUnits,F,d(r)),W=Object.keys(G),z=u.config.getConfig("enableSendAllBids"),H=u.config.getConfig("sendBidsControl.bidLimit"),Y=(f=V,A=[],I={},C=u.config.getConfig("targetingControls.alwaysIncludeDeals"),D=(null==(g=u.config.getConfig("bidPooling"))?void 0:g.excludedBidders)||[],f.forEach(function(e){var t,r=!D.includes(e.bidderCode),n=!!W.length&&W.some(function(t){return t===e.bidPoolId||t===e.passiveBidPoolId})&&r||(0,m.includes)(F,e.adUnitCode),i=!0===c.bidderSettings.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0,o=C&&e.dealId;n&&(o||i)&&(A.push(e),Object.keys(e.adserverTargeting).filter((t=(t=y()).concat(v.NATIVE_TARGETING_KEYS),function(e){return -1===t.indexOf(e)})).forEach(function(t){var r=t.substring(0,20),n=I[e.adUnitCode]||{},i=[e.adserverTargeting[t]];n[r]?n[r]=n[r].concat(i).filter(h.uniques):n[r]=i,I[e.adUnitCode]=n}))}),{filteredBids:A,customKeysByUnit:I}),J=Y.customKeysByUnit,K=function(t,r,n,i,o){var d,c,p,f,g,b=!1!==u.config.getConfig("targetingControls.allBidsCustomTargeting"),A=(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[],i=e.reduce(function(e,t){return(0,m.includes)(n,t.adUnitCode)||(e.push(t),n.push(t.adUnitCode)),e},[]),o=y();return i.map(function(e){if(r){var n=e.bidPoolId||e.passiveBidPoolId;e.sharedBidInUse=t[n]?t[n].adUnit:e.adUnitCode}return(0,a.default)({},e.adUnitCode,Object.keys(e.adserverTargeting).filter(function(t){return void 0===e.sendStandardTargeting||e.sendStandardTargeting||-1===o.indexOf(t)}).reduce(function(t,r){var n=[e.adserverTargeting[r]],i=(0,a.default)({},r.substring(0,20),n);if(r===l.TARGETING_KEYS.DEAL){var o="".concat(r,"_").concat(e.bidderCode).substring(0,20),d=(0,a.default)({},o,n);return[].concat((0,s.default)(t),[i,d])}return[].concat((0,s.default)(t),[i])},[]))})})(t,o,i).concat((p=u.config.getConfig("targetingControls.alwaysIncludeDeals"),function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=w.concat(v.NATIVE_TARGETING_KEYS),i=u.config.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),o=i?i.map(function(e){return l.TARGETING_KEYS[e]}):n;return e.reduce(function(e,i){if(t||r&&i.dealId){var s,d=(s=i,n.filter(function(e){return void 0!==i.adserverTargeting[e]&&(r||-1!==o.indexOf(e))}).reduce(function(e,t){return s.adserverTargeting[t]&&e.push((0,a.default)({},"".concat(t,"_").concat(s.bidderCode).substring(0,20),[s.adserverTargeting[t]])),e},[]));d&&e.push((0,a.default)({},i.adUnitCode,d))}return e},[])}(t,u.config.getConfig("enableSendAllBids"),p))).concat(function(t){function r(e){return null==e?void 0:e[l.JSON_MAPPING.ADSERVER_TARGETING]}return e.getAdUnits().filter(function(e){return t.includes(e.code)&&r(e)}).reduce(function(e,t){var n,i=Object.keys(n=r(t)).map(function(e){return(0,h.isStr)(n[e])&&(n[e]=n[e].split(",").map(function(e){return e.trim()})),(0,h.isArray)(n[e])||(n[e]=[n[e]]),(0,a.default)({},e,n[e])});return i&&e.push((0,a.default)({},t.code,i)),e},[])}(n));return b&&A.push.apply(A,(0,s.default)((d=t,c=r,d.reduce(function(e,t){var r=Object.assign({},t),n=c[r.adUnitCode],i=[];return n&&Object.keys(n).forEach(function(e){e&&n[e]&&i.push((0,a.default)({},e,n[e]))}),e.push((0,a.default)({},r.adUnitCode,i)),e},[])))),A.forEach(function(e){Object.keys(e).forEach(function(t){e[t].forEach(function(e){var t=Object.keys(e);-1===E.indexOf(t[0])&&(E=t.concat(E))})})}),f=[],g=Object.keys(o),A.reduce(function(e,t){var r=Object.keys(t)[0],n=g.reduce(function(e,t){if((0,m.includes)(o[t].codes,r))return o[t]},{});if(r&&g.length){var i=(0,a.default)({},n.adUnit,t[r]);f.push(i)}else e.push(t);return e},[]).concat(f)}(x(Y.filteredBids,q,z&&(o||H)||0,G,void 0,L),J,F,M,G),Q=Object.keys(Object.assign({},l.DEFAULT_TARGETING_KEYS,l.NATIVE_KEYS)),X=u.config.getConfig(O),$=u.config.getConfig(_);if(null!=$&&null!=X)throw Error(T);Array.isArray(X=null!=$?Q.concat($):X||Q)&&X.length>0&&(R=K,k=X,N=Object.keys(j=Object.assign({},l.TARGETING_KEYS,l.NATIVE_KEYS)),B={},(0,h.logInfo)("allowTargetingKeys - allowed keys [ ".concat(k.map(function(e){return j[e]}).join(", ")," ]")),R.map(function(e){var t=Object.keys(e)[0],r=e[t].filter(function(e){var t=Object.keys(e)[0],r=0===N.filter(function(e){return 0===t.indexOf(j[e])}).length||(0,m.find)(k,function(e){var r=j[e];return 0===t.indexOf(r)});return B[t]=!r,r});e[t]=r}),U=Object.keys(B).filter(function(e){return B[e]}),(0,h.logInfo)("allowTargetingKeys - removed keys [ ".concat(U.join(", ")," ]")),K=R.filter(function(e){var t=Object.keys(e)[0];return e[t].length>0})),K=(p=K.map(function(e){return(0,a.default)({},Object.keys(e)[0],e[Object.keys(e)[0]].map(function(e){return(0,a.default)({},Object.keys(e)[0],e[Object.keys(e)[0]].join(","))}).reduce(function(e,t){return Object.assign(t,e)},{}))})).reduce(function(e,t){var r=Object.keys(t)[0];return e[r]=Object.assign({},e[r],t[r]),e},{});var Z=u.config.getConfig("targetingControls.auctionKeyMaxChars");return Z&&((0,h.logInfo)("Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ".concat(Z," characters.  Running checks on auction keys...")),K=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.sortByHighestCpm,n=(0,h.deepClone)(e);return Object.keys(n).map(function(e){return{adUnitCode:e,adserverTargeting:n[e]}}).sort(P(void 0,r)).reduce(function(e,r,i,o){var a,s=Object.keys(a=r.adserverTargeting).reduce(function(e,t){return e+"".concat(t,"%3d").concat(encodeURIComponent(a[t]),"%26")},"");i+1===o.length&&(s=s.slice(0,-3));var d=r.adUnitCode,c=s.length;return c<=t?(t-=c,(0,h.logInfo)("AdUnit '".concat(d,"' auction keys comprised of ").concat(c," characters.  Deducted from running threshold; new limit is ").concat(t),n[d]),e[d]=n[d]):(0,h.logWarn)("The following keys for adUnitCode '".concat(d,"' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was ").concat(c,", the current allotted amount was ").concat(t,".\n"),n[d]),i+1===o.length&&0===Object.keys(e).length&&(0,h.logError)("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e},{})}(K,Z,L)),F.forEach(function(e){K[e]||(K[e]={})}),K},u.config.getConfig("targetingControls",function(e){null!=(0,h.deepAccess)(e,O)&&null!=(0,h.deepAccess)(e,_)&&(0,h.logError)(T)}),t.setTargetingForGPT=(0,f.hook)("sync",function(r,n,i,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:b.getHighestCpm,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:h.sortByHighestCpm,c=t.getAllTargeting(r,i,a,!0,void 0,s,d),u=Object.fromEntries(E.map(function(e){return[e,null]}));Object.entries(D(Object.keys(c),n)).forEach(function(e){var t=(0,o.default)(e,2),r=t[0];t[1].forEach(function(e){Object.keys(c[r]).forEach(function(e){var t=c[r][e];"string"==typeof t&&-1!==t.indexOf(",")&&(t=t.split(",")),c[r][e]=t}),(0,h.logMessage)("Attempting to set targeting-map for slot: ".concat(e.getSlotElementId()," with targeting-map:"),c[r]),e.updateTargetingFromMap(Object.assign({},u,c[r]))})}),Object.keys(c).forEach(function(t){Object.keys(c[t]).forEach(function(r){"hb_adid"===r&&e.setStatusForBids(c[t][r],l.BID_STATUS.BID_TARGETING_SET)})}),t.targetingDone(c),p.emit(l.EVENTS.SET_TARGETING,c)},"setTargetingForGPT"),t.targetingDone=(0,f.hook)("sync",function(e){return e},"targetingDone"),t.clearTargeting=function(e){E.forEach(function(t){e.getTargeting(t)&&e.clearTargeting(t)})},t.getWinningBids=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.getHighestCpm,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.sortByHighestCpm,a=[],s=t||i(r,o),d=n(e);return s.reduce(function(e,t){var r=t.adUnitCode,n=!0===c.bidderSettings.get(r,"allowZeroCpmBids")?t.cpm>=0:t.cpm>0,i=u.config.getConfig("targetingControls.alwaysIncludeDeals")&&t.dealId;return(0,m.includes)(d,r)&&!(0,m.includes)(a,r)&&(i||n)&&(e.push(t),a.push(r)),e},[])},t.getWinningPoolIdBids=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.getHighestCpm,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.sortByHighestCpm,o=t||i(r,n),a=d(e),s=a.length>0;return o.filter(function(e){return(0,m.includes)(a,e.bidPoolId)||(0,m.includes)(a,e.passiveBidPoolId)}).filter(function(e){return!0===c.bidderSettings.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0}).map(function(e){return s?e.bidPoolId||e.passiveBidPoolId:e.adUnitCode}).filter(h.uniques).map(function(e){return o.filter(function(t){return s?t.bidPoolId===e||t.passiveBidPoolId===e?t:null:t.adUnitCode===e?t:null}).reduce(r)})},t.setTargetingForAst=function(e,r){var n=t.getAllTargeting(e,r);try{t.resetPresetTargetingAST(e)}catch(e){(0,h.logError)("unable to reset targeting for AST"+e)}Object.keys(n).forEach(function(e){return Object.keys(n[e]).forEach(function(t){if((0,h.logMessage)("Attempting to set targeting for targetId: ".concat(e," key: ").concat(t," value: ").concat(n[e][t])),(0,h.isStr)(n[e][t])||(0,h.isArray)(n[e][t])){var r={};0>t.search(/pt[0-9]/)?r[t.toUpperCase()]=n[e][t]:r[t]=n[e][t],window.apntag.setKeywords(e,r,{overrideKeyValue:!0})}})})},t.clearTargetingForSharedBidPool=function(e){C(e)},t.isApntagDefined=function(){if(window.apntag&&(0,h.isFn)(window.apntag.setKeywords))return!0},t}t.targeting=R(d.auctionManager)},7317:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.USERSYNC_DEFAULT_CONFIG=void 0,t.newUserSync=h,t.userSync=void 0;var i=n(r(5794)),o=n(r(5881)),a=r(4700),s=r(9926),d=r(1617),c=r(1122),u=r(3364),l=r(1851),p=r(3645),f=r(4840),g=r(2887),v=t.USERSYNC_DEFAULT_CONFIG={syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:500};s.config.setDefaults({userSync:(0,a.deepClone)(v)});var m=(0,c.getCoreStorageManager)("usersync");function h(e){var t={},r=m(),n=new Set,c={},u={image:!0,iframe:!1},v=e.config;function m(){return{image:[],iframe:[]}}function h(){if(v.syncEnabled&&e.browserSupportsCookies){try{u.iframe&&b(r.iframe,function(e){var t,n,i=(0,o.default)(e,2),s=i[0],d=i[1];(0,a.logMessage)("Invoking iframe user sync for bidder: ".concat(s)),(0,a.insertUserSyncIframe)(d),t=r,n=s,t.image=t.image.filter(function(e){return e[0]!==n})}),u.image&&b(r.image,function(e){var t=(0,o.default)(e,2),r=t[0],n=t[1];(0,a.logMessage)("Invoking image pixel user sync for bidder: ".concat(r)),(0,a.triggerPixel)(n)})}catch(e){return(0,a.logError)("Error firing user syncs",e)}r=m()}}function b(e,t){(0,a.shuffle)(e).forEach(t)}return s.config.getConfig("userSync",function(e){if(e.userSync){var t=e.userSync.filterSettings;!(0,a.isPlainObject)(t)||t.image||t.all||(e.userSync.filterSettings.image={bidders:"*",filter:"include"})}v=Object.assign(v,e.userSync)}),e.regRule(l.ACTIVITY_SYNC_USER,"userSync config",function(e){if(!v.syncEnabled)return{allow:!1,reason:"syncs are disabled"};if(e[p.ACTIVITY_PARAM_COMPONENT_TYPE]===f.MODULE_TYPE_BIDDER){var r=e[p.ACTIVITY_PARAM_SYNC_TYPE],n=e[p.ACTIVITY_PARAM_COMPONENT_NAME];if(!t.canBidderRegisterSync(r,n))return{allow:!1,reason:"".concat(r," syncs are not enabled for ").concat(n)}}}),t.registerSync=function(t,o,s){if(n.has(o))return(0,a.logMessage)('already fired syncs for "'.concat(o,'", ignoring registerSync call'));if(!v.syncEnabled||!(0,a.isArray)(r[t]))return(0,a.logWarn)('User sync type "'.concat(t,'" not supported'));if(!o)return(0,a.logWarn)("Bidder is required for registering sync");if(0!==v.syncsPerBidder&&Number(c[o])>=v.syncsPerBidder)return(0,a.logWarn)('Number of user syncs exceeded for "'.concat(o,'"'));if(e.isAllowed(l.ACTIVITY_SYNC_USER,(0,g.activityParams)(f.MODULE_TYPE_BIDDER,o,(0,i.default)((0,i.default)({},p.ACTIVITY_PARAM_SYNC_TYPE,t),p.ACTIVITY_PARAM_SYNC_URL,s)))){var d;r[t].push([o,s]),(d=c)[o]?d[o]+=1:d[o]=1,c=d}},t.bidderDone=n.add.bind(n),t.syncUsers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e)return setTimeout(h,Number(e));h()},t.triggerUserSyncs=function(){v.enableOverride&&t.syncUsers()},t.canBidderRegisterSync=function(e,t){return!(v.filterSettings&&function(e,t){var r=v.filterSettings;if(function(e,t){if(e.all&&e[t])return(0,a.logWarn)('Detected presence of the "filterSettings.all" and "filterSettings.'.concat(t,'" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.')),!1;var r=e.all?e.all:e[t],n=e.all?"all":t;if(!r)return!1;var i=r.filter,o=r.bidders;return i&&"include"!==i&&"exclude"!==i?((0,a.logWarn)('UserSync "filterSettings.'.concat(n,".filter\" setting '").concat(i,"' is not a valid option; use either 'include' or 'exclude'.")),!1):"*"===o||!!(Array.isArray(o)&&o.length>0&&o.every(function(e){return(0,a.isStr)(e)&&"*"!==e}))||((0,a.logWarn)('Detected an invalid setup in userSync "filterSettings.'.concat(n,".bidders\"; use either '*' (to represent all bidders) or an array of bidders.")),!1)}(r,e)){u[e]=!0;var n=r.all?r.all:r[e],i="*"===n.bidders?[t]:n.bidders;return({include:function(e,t){return!(0,d.includes)(e,t)},exclude:function(e,t){return(0,d.includes)(e,t)}})[n.filter||"include"](i,t)}return!u[e]}(e,t))},t}t.userSync=h(Object.defineProperties({config:s.config.getConfig("userSync"),isAllowed:u.isActivityAllowed,regRule:u.registerActivityControl},{browserSupportsCookies:{get:function(){return!(0,a.isSafariBrowser)()&&m.cookiesAreEnabled()}}}))},4700:function(e,t,r){"use strict";var n,i,o,a,s,d=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t._each=function(e,t){var r=this;if(X(null==e?void 0:e.forEach))return e.forEach(t,this);Object.entries(e||{}).forEach(function(e){var n=(0,p.default)(e,2),i=n[0],o=n[1];return t.call(r,o,i)})},t._map=function(e,t){return X(null==e?void 0:e.map)?e.map(t):Object.entries(e||{}).map(function(r){var n=(0,p.default)(r,2),i=n[0];return t(n[1],i,e)})},t._setEventEmitter=function(e){a=e},t.binarySearch=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},n=0,i=e.length&&e.length-1,o=r(t);i-n>1;){var a=n+Math.round((i-n)/2);o>r(e[a])?n=a:i=a}for(;e.length>n&&o>r(e[n]);)n++;return n},t.buildUrl=function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(P.formatQS(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")},t.canAccessWindowTop=L,t.checkCookieSupport=ec,t.cleanObj=function(e){return Object.fromEntries(Object.entries(e).filter(function(e){var t=(0,p.default)(e,2);return void 0!==(t[0],t[1])}))},t.compareCodeAndSlot=void 0,t.contains=function(e,t){return X(null==e?void 0:e.includes)&&e.includes(t)},t.convertObjectToArray=function(e){return Object.keys(e).map(function(t){return(0,l.default)({},t,e[t])})},t.createIframe=void 0,t.createInvisibleIframe=K,t.createTrackPixelHtml=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:encodeURI;if(!e)return"";var r=t(e),n='<div style="position:absolute;left:0px;top:0px;visibility:hidden;">';return n+('<img src="'+r+'"></div>')},t.createTrackPixelIframeHtml=eo,t.cyrb53Hash=function(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=function(e,t){if(X(Math.imul))return Math.imul(e,t);var r=(4194303&e)*(t|=0);return 0xffc00000&e&&(r+=(0xffc00000&e)*t|0),0|r},i=0xdeadbeef^r,o=0x41c6ce57^r,a=0;a<e.length;a++)i=n(i^(t=e.charCodeAt(a)),0x9e3779b1),o=n(o^t,0x5f356495);return i=n(i^i>>>16,0x85ebca6b)^n(o^o>>>13,0xc2b2ae35),(0x100000000*(2097151&(o=n(o^o>>>16,0x85ebca6b)^n(i^i>>>13,0xc2b2ae35)))+(i>>>0)).toString()},t.debugTurnedOn=Y,Object.defineProperty(t,"deepAccess",{enumerable:!0,get:function(){return y.default}}),t.deepClone=function(e){return(0,g.klona)(e)||{}},t.deepEqual=eg,Object.defineProperty(t,"deepSetValue",{enumerable:!0,get:function(){return A.dset}}),t.delayExecution=function(e,t){if(t<1)throw Error("numRequiredCalls must be a positive number. Got ".concat(t));var r=0;return function(){++r===t&&e.apply(this,arguments)}},t.encodeMacroURI=function(e){return Array.from(e.matchAll(/\$({[^}]+})/g)).map(function(e){return e[1]}).reduce(function(e,t){return e.replace("$"+encodeURIComponent(t),"$"+t)},encodeURI(e))},t.extractDomainFromHost=function(e){var t=null;try{var r=/[-\w]+\.([-\w]+|[-\w]{3,}|[-\w]{1,3}\.[-\w]{2})$/i.exec(e);if(null!=r&&r.length>0){t=r[0];for(var n=1;n<r.length;n++)r[n].length>t.length&&(t=r[n])}}catch(e){t=null}return t},t.flatten=function(e,t){return e.concat(t)},t.formatQS=ef,t.generateUUID=function e(t){return t?(t^(window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random())>>t/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e)},t.getBidIdParameter=function(e,t){return(null==t?void 0:t[e])||""},t.getBidRequest=function(e,t){if(e)return t.flatMap(function(e){return e.bids}).find(function(t){return["bidId","adId","bid_id"].some(function(r){return t[r]===e})})},t.getBidderCodes=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w.adUnits,t=new Set;return e.reduce(function(e,r){return r.bids.forEach(function(r){var n=r.bidder,i=r.pbsHost;if(void 0!==n){var o="".concat(n,"-").concat(i||"");t.has(o)||(t.add(o),e.push({bidder:n,pbsHost:i}))}}),e},[])},t.getDNT=function(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack},t.getDefinedParams=function(e,t){return t.filter(function(t){return e[t]}).reduce(function(t,r){return Object.assign(t,(0,l.default)({},r,e[r]))},{})},t.getDocument=function(){return document},t.getDomLoadingDuration=function(e){var t,r=-1,n=(e=e||V()).performance;if(null!=(t=e.performance)&&t.timing&&e.performance.timing.navigationStart>0){var i=n.timing.domLoading-n.timing.navigationStart;i>0&&(r=i)}return r},t.getOldestHighestCpmBid=t.getLatestHighestCpmBid=t.getHighestCpm=void 0,t.getParameterByName=function(e){return ep(q().search)[e]||""},t.getPerformanceNow=function(){return window.performance&&window.performance.now&&window.performance.now()||0},t.getPrebidInternal=function(){return D},t.getSafeframeGeometry=function(){try{var e=V();return"function"==typeof e.$sf.ext.geom?e.$sf.ext.geom():void 0}catch(e){z("Error getting SafeFrame geometry",e);return}},t.getUniqueIdentifierStr=k,t.getUnixTimestampFromNow=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"d";if(0>["m","d"].indexOf(t))return Date.now();var r=e/("m"===t?1440:1);return Date.now()+(e&&e>0?864e5*r:0)},t.getUserConfiguredParams=function(e,t,r){return e.filter(function(e){return e.code===t}).flatMap(function(e){return e.bids}).filter(function(e){return e.bidder===r}).map(function(e){return e.params||{}})},t.getValue=function(e,t){return e[t]},t.getWinDimensions=void 0,t.getWindowLocation=q,t.getWindowSelf=V,t.getWindowTop=M,t.groupBy=function(e,t){return e.reduce(function(e,r){return(e[r[t]]=e[r[t]]||[]).push(r),e},{})},t.hasConsoleLogger=function(){return S},t.hasDeviceAccess=function(){return!1!==f.config.getConfig("deviceAccess")},t.hasNonSerializableProperty=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(var n in t){var i=t[n],o=(0,u.default)(i);if(void 0===i||"function"===o||"symbol"===o||i instanceof RegExp||i instanceof Map||i instanceof Set||i instanceof Date||null!==i&&"object"===o&&i.hasOwnProperty("toJSON"))return!0;if(null!==i&&"object"===o&&i.constructor===Object&&(r.has(i)||(r.add(i),e(i,r))))return!0}return!1},t.inIframe=es,t.insertElement=et,t.insertHtmlIntoIframe=function(e){if(e){var t,r=K();P.insertElement(r,document,"body"),(t=r.contentWindow.document).open(),t.write(e),t.close()}},t.insertUserSyncIframe=ei,t.internal=void 0,t.isA=Q,t.isAdUnitCodeMatchingSlot=function(e){return function(t){return eu(e,t)}},t.isApnGetTagDefined=function(){if(window.apntag&&X(window.apntag.getTag))return!0},t.isArray=void 0,t.isArrayOfNums=function(e,t){return Z(e)&&(!t||e.length===t)&&e.every(function(e){return el(e)})},t.isBoolean=function(e){return Q(e,"Boolean")},t.isEmpty=function(e){return!e||(Z(e)||$(e)?!(e.length>0):Object.keys(e).length<=0)},t.isEmptyStr=function(e){return $(e)&&(!e||0===e.length)},t.isFn=X,t.isGptPubadsDefined=function(){if(window.googletag&&X(window.googletag.pubads)&&X(window.googletag.pubads().getSlots))return!0},t.isInteger=void 0,t.isNumber=function(e){return Q(e,"Number")},t.isPlainObject=ee,t.isSafariBrowser=function(){return/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)},t.isSafeFrameWindow=function(){if(!es())return!1;var e=P.getWindowSelf();return!!(e.$sf&&e.$sf.ext)},t.isStr=$,t.isValidMediaTypes=function(e){var t=["banner","native","video"];return!!Object.keys(e).every(function(e){return(0,v.includes)(t,e)})&&(!e.video||!e.video.context||(0,v.includes)(["instream","outstream","adpod"],e.video.context))},t.logError=z,t.logInfo=G,t.logMessage=F,t.logWarn=W,t.memoize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},r=new Map,n=function(){var n=t.apply(this,arguments);return r.has(n)||r.set(n,e.apply(this,arguments)),r.get(n)};return n.clear=r.clear.bind(r),n},t.mergeDeep=function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++){var r=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];ee(r)&&function e(t,r){if(ee(t)&&ee(r)){for(var n=Object.keys(r),i=0;i<n.length;i++)if(function(){var o=n[i];if("__proto__"===o||"constructor"===o)return 1;var a=r[o];ee(a)?(t[o]||(t[o]={}),e(t[o],a)):Array.isArray(a)?Array.isArray(t[o])?a.forEach(function(e){t[o].some(function(t){return eg(t,e)})||t[o].push(e)}):t[o]=(0,c.default)(a):t[o]=a}())continue}}(e,r)}return e},t.parseGPTSingleSizeArray=function(e){if(U(e))return N(e)},t.parseGPTSingleSizeArrayToRtbSize=function(e){if(U(e))return B(e)},t.parseQS=ep,t.parseQueryStringParameters=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t+=r+"="+encodeURIComponent(e[r])+"&");return t.replace(/&$/,"")},t.parseSizesInput=function(e){return j(e).map(N)},t.parseUrl=function(e,t){var r=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?r.href=e:r.href=decodeURIComponent(e);var n=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:r.href,protocol:(r.protocol||"").replace(/:$/,""),hostname:r.hostname,port:+r.port,pathname:r.pathname.replace(/^(?!\/)/,"/"),search:n?r.search:P.parseQS(r.search||""),hash:(r.hash||"").replace(/^#/,""),host:r.host||window.location.host}},t.pick=function(e,t){return"object"!==(0,u.default)(e)?{}:t.reduce(function(r,n,i){if("function"==typeof n)return r;var o=n,a=n.match(/^(.+?)\sas\s(.+?)$/i);a&&(n=a[1],o=a[2]);var s=e[n];return"function"==typeof t[i+1]&&(s=t[i+1](s,r)),void 0!==s&&(r[o]=s),r},{})},t.prefixLog=function(e){function t(t){return function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(void 0,[e].concat(n))}}return{logError:t(z),logWarn:t(W),logMessage:t(F),logInfo:t(G)}},t.replaceAuctionPrice=function(e,t){return ed(e,{AUCTION_PRICE:t})},t.replaceClickThrough=function(e,t){if(e&&t&&"string"==typeof t)return e.replace(/\${CLICKTHROUGH}/g,t)},t.replaceMacros=ed,t.resetWinDimensions=x,t.safeJSONEncode=function(e){try{return JSON.stringify(e)}catch(e){return""}},t.safeJSONParse=function(e){try{return JSON.parse(e)}catch(e){}},t.setOnAny=function(e,t){for(var r,n=0;n<e.length;n++)if(r=(0,y.default)(e[n],t))return r},t.setScriptAttributes=function(e,t){Object.entries(t).forEach(function(t){var r=(0,p.default)(t,2),n=r[0],i=r[1];return e.setAttribute(n,i)})},t.shuffle=function(e){for(var t=e.length;t>0;){var r=Math.floor(Math.random()*t),n=e[--t];e[t]=e[r],e[r]=n}return e},t.sizeTupleToRtbSize=B,t.sizeTupleToSizeString=N,t.sizesToSizeTuples=j,t.sortByHighestCpm=void 0,t.timestamp=function(){return new Date().getTime()},t.transformAdServerTargetingObj=function(e){return e&&Object.getOwnPropertyNames(e).length>0?Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&"):""},t.triggerNurlWithCpm=function(e,t){$(e.nurl)&&""!==e.nurl&&(e.nurl=e.nurl.replace(/\${AUCTION_PRICE}/,t),en(e.nurl))},t.triggerPixel=en,t.uniques=function(e,t,r){return r.indexOf(e)===t},t.unsupportedBidderMessage=function(e,t){var r=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return"\n    ".concat(e.code," is a ").concat(r," ad unit\n    containing bidders that don't support ").concat(r,": ").concat(t,".\n    This bidder won't fetch demand.\n  ")},t.waitForElementToLoad=er;var c=d(r(939)),u=d(r(8287)),l=d(r(5794)),p=d(r(5881)),f=r(9926),g=r(9087),v=r(1617),m=r(3103),h=r(6102),b=r(7045),y=d(r(2618)),A=r(1579),I=Object.prototype.toString,E=!!window.console,S=!!(E&&window.console.log),O=!!(E&&window.console.info),_=!!(E&&window.console.warn),T=!!(E&&window.console.error),w=(0,b.getGlobal)();function C(){null!=a&&a.apply(void 0,arguments)}function x(){var e,t,r,n,i,o,a,d,c,u,l,p,f,g,v,m=L()?P.getWindowTop():P.getWindowSelf();s={screen:{width:null==(e=m.screen)?void 0:e.width,height:null==(t=m.screen)?void 0:t.height,availWidth:null==(r=m.screen)?void 0:r.availWidth,availHeight:null==(n=m.screen)?void 0:n.availHeight,colorDepth:null==(i=m.screen)?void 0:i.colorDepth},innerHeight:m.innerHeight,innerWidth:m.innerWidth,outerWidth:m.outerWidth,outerHeight:m.outerHeight,visualViewport:{height:null==(o=m.visualViewport)?void 0:o.height,width:null==(a=m.visualViewport)?void 0:a.width},document:{documentElement:{clientWidth:null==(d=m.document)||null==(d=d.documentElement)?void 0:d.clientWidth,clientHeight:null==(c=m.document)||null==(c=c.documentElement)?void 0:c.clientHeight,scrollTop:null==(u=m.document)||null==(u=u.documentElement)?void 0:u.scrollTop,scrollLeft:null==(l=m.document)||null==(l=l.documentElement)?void 0:l.scrollLeft},body:{scrollTop:null==(p=document.body)?void 0:p.scrollTop,scrollLeft:null==(f=document.body)?void 0:f.scrollLeft,clientWidth:null==(g=document.body)?void 0:g.clientWidth,clientHeight:null==(v=document.body)?void 0:v.clientHeight}}}}t.getWinDimensions=function(){return(!s||!n||Date.now()-n>20)&&(P.resetWinDimensions(),n=Date.now()),s};var P=t.internal={checkCookieSupport:ec,createTrackPixelIframeHtml:eo,getWindowSelf:V,getWindowTop:M,canAccessWindowTop:L,getWindowLocation:q,insertUserSyncIframe:ei,insertElement:et,isFn:X,triggerPixel:en,logError:z,logWarn:W,logMessage:F,logInfo:G,parseQS:ep,formatQS:ef,deepEqual:eg,resetWinDimensions:x},D={},R=(i=0,function(){return++i});function k(){return R()+Math.random().toString(16).substr(2)}function j(e){return"string"==typeof e?e.split(/\s*,\s*/).map(function(e){return e.match(/^(\d+)x(\d+)$/i)}).filter(function(e){return e}).map(function(e){var t=(0,p.default)(e,3),r=(t[0],t[1]),n=t[2];return[parseInt(r,10),parseInt(n,10)]}):Array.isArray(e)?U(e)?[e]:e.filter(U):[]}function N(e){return e[0]+"x"+e[1]}function B(e){return{w:e[0],h:e[1]}}function U(e){return Z(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1])}function M(){return window.top}function V(){return window.self}function q(){return window.location}function L(){try{if(P.getWindowTop().location.href)return!0}catch(e){return!1}}function F(){Y()&&S&&console.log.apply(console,H(arguments,"MESSAGE:"))}function G(){Y()&&O&&console.info.apply(console,H(arguments,"INFO:"))}function W(){Y()&&_&&console.warn.apply(console,H(arguments,"WARNING:")),C(m.EVENTS.AUCTION_DEBUG,{type:"WARNING",arguments:arguments})}function z(){Y()&&T&&console.error.apply(console,H(arguments,"ERROR:")),C(m.EVENTS.AUCTION_DEBUG,{type:"ERROR",arguments:arguments})}function H(e,t){e=[].slice.call(e);var r=f.config.getCurrentBidder();return t&&e.unshift(t),r&&e.unshift(n("#aaa")),e.unshift(n("#3b88c3")),e.unshift("%cPrebid"+(r?"%c".concat(r):"")),e;function n(e){return"display: inline-block; color: #fff; background: ".concat(e,"; padding: 1px 4px; border-radius: 3px;")}}function Y(){return!!f.config.getConfig("debug")}var J=(o={border:"0px",hspace:"0",vspace:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",frameBorder:"0",allowtransparency:"true"},t.createIframe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.createElement("iframe");return Object.assign(n,Object.assign({},o,t)),Object.assign(n.style,r),n});function K(){return J(document,{id:k(),width:0,height:0,src:"about:blank"},{display:"none",height:"0px",width:"0px",border:"0px"})}function Q(e,t){return I.call(e)==="[object "+t+"]"}function X(e){return Q(e,"Function")}function $(e){return Q(e,"String")}var Z=t.isArray=Array.isArray.bind(Array);function ee(e){return Q(e,"Object")}function et(e,t,r,n){t=t||document,i=r?t.getElementsByTagName(r):t.getElementsByTagName("head");try{if((i=i.length?i:t.getElementsByTagName("body")).length){var i=i[0],o=n?null:i.firstChild;return i.insertBefore(e,o)}}catch(e){}}function er(e,t){var r=null;return new h.PbPromise(function(n){var i=function t(){e.removeEventListener("load",t),e.removeEventListener("error",t),null!=r&&window.clearTimeout(r),n()};e.addEventListener("load",i),e.addEventListener("error",i),null!=t&&(r=window.setTimeout(i,t))})}function en(e,t,r){var n=new Image;t&&P.isFn(t)&&er(n,r).then(t),n.src=e}function ei(e,t,r){var n=P.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),i=document.createElement("div");i.innerHTML=n;var o=i.firstChild;t&&P.isFn(t)&&er(o,r).then(t),P.insertElement(o,document,"html",!0)}function eo(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?(t&&(e=encodeURI(e)),r&&(r='sandbox="'.concat(r,'"')),"<iframe ".concat(r,' id="').concat(k(),'"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="').concat(e,'">\n    </iframe>')):""}function ea(e,t){return function(r,n){return r.cpm===n.cpm?t(r[e],n[e])?n:r:r.cpm<n.cpm?n:r}}function es(){try{return P.getWindowSelf()!==P.getWindowTop()}catch(e){return!0}}function ed(e,t){if(e)return Object.entries(t).reduce(function(e,t){var r=(0,p.default)(t,2),n=r[0],i=r[1];return e.replace(RegExp("\\$\\{"+n+"\\}","g"),i||"")},e)}function ec(){if(window.navigator.cookieEnabled||document.cookie.length)return!0}t.getHighestCpm=ea("timeToRespond",function(e,t){return e>t}),t.getOldestHighestCpmBid=ea("responseTimestamp",function(e,t){return e>t}),t.getLatestHighestCpmBid=ea("responseTimestamp",function(e,t){return e<t}),t.sortByHighestCpm=function(e,t){return t.cpm-e.cpm};var eu=t.compareCodeAndSlot=function(e,t){return e.getAdUnitPath()===t||e.getSlotElementId()===t},el=t.isInteger=Number.isInteger.bind(Number);function ep(e){return e?e.replace(/^\?/,"").split("&").reduce(function(e,t){var r=t.split("="),n=(0,p.default)(r,2),i=n[0],o=n[1];return/\[\]$/.test(i)?(e[i=i.replace("[]","")]=e[i]||[],e[i].push(o)):e[i]=o||"",e},{}):{}}function ef(e){return Object.keys(e).map(function(t){return Array.isArray(e[t])?e[t].map(function(e){return"".concat(t,"[]=").concat(e)}).join("&"):"".concat(t,"=").concat(e[t])}).join("&")}function eg(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.checkTypes,i=void 0!==n&&n;if(e===t)return!0;if("object"!==(0,u.default)(e)||null===e||"object"!==(0,u.default)(t)||null===t)return!1;var o=Array.isArray(e),a=Array.isArray(t);if(o&&a){if(e.length!==t.length)return!1;for(var s=0;s<e.length;s++)if(!eg(e[s],t[s],{checkTypes:i}))return!1;return!0}if(o||a||i&&e.constructor!==t.constructor)return!1;var d=Object.keys(e),c=Object.keys(t);if(d.length!==c.length)return!1;for(var l=0;l<d.length;l++){var p=d[l];if(!Object.prototype.hasOwnProperty.call(t,p)||!eg(e[p],t[p],{checkTypes:i}))return!1}return!0}},4908:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adjustCpm=function(e,t,r){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},d=s.index,c=void 0===d?n.auctionManager.index:d,u=s.bs,l=void 0===u?i.bidderSettings:u;r=r||c.getBidRequest(t);var p=null==t?void 0:t.adapterCode,f=(null==t?void 0:t.bidderCode)||(null==(a=r)?void 0:a.bidder),g=l.get(null==t?void 0:t.adapterCode,"adjustAlternateBids"),v=l.getOwn(f,"bidCpmAdjustment")||l.get(g?p:f,"bidCpmAdjustment");if(v&&"function"==typeof v)try{return v(e,Object.assign({},t),r)}catch(e){(0,o.logError)("Error during bid adjustment",e)}return e};var n=r(3479),i=r(3951),o=r(4700)},501:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reset=function(){r=null,n=0,i=[],document.removeEventListener("visibilitychange",o),document.addEventListener("visibilitychange",o)},t.setFocusTimeout=a;var r=null,n=0,i=[];function o(){if(document.hidden)r=Date.now();else{var e;n+=Date.now()-(null!=(e=r)?e:0),r=null,i.forEach(function(e){var t=e.callback,r=e.startTime;return(0,e.setTimerId)(a(t,n-r)())}),i=[]}}function a(e,t){var o=n,s=setTimeout(function(){n===o&&null==r?e():null!=r?i.push({callback:e,startTime:o,setTimerId:function(e){s=e}}):s=a(e,n-o)()},t);return function(){return s}}document.addEventListener("visibilitychange",o)},8700:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasPurpose1Consent=function(e){if(null!=e&&e.gdprApplies){var t;return(null==e||null==(t=e.vendorData)||null==(t=t.purpose)||null==(t=t.consents)?void 0:t[1])===!0}return!0}},7592:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scrubIPv4=function(e){if(!e)return null;var t=e.split(".").map(Number);if(4!=t.length)return null;for(var r=[],n=0;n<4;n++){var i=Math.max(0,Math.min(8,24-8*n));r.push(255<<8-i&255)}return t.map(function(e,t){return e&r[t]}).join(".")},t.scrubIPv6=function(e){if(!e)return null;var t=e.split(":").map(function(e){return parseInt(e,16)});for(t=t.map(function(e){return isNaN(e)?0:e});t.length<8;)t.push(0);if(8!=t.length)return null;for(var r=[],n=0;n<8;n++){var i=Math.max(0,Math.min(16,64-16*n));r.push(65535<<16-i&65535)}return t.map(function(e,t){return e&r[t]}).map(function(e){return e.toString(16)}).join(":")}},9962:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filters=void 0,t.isBidUsable=function(e){return!Object.values(s).some(function(t){return!t(e)})};var n=r(1e3),i=r(3103),o=r(1617),a=r(4700),s=t.filters={isActualBid:function(e){return e.getStatusCode()===i.STATUS.GOOD},isBidNotExpired:function(e){return e.responseTimestamp+1e3*(0,n.getBufferedTTL)(e)>(0,a.timestamp)()},isUnusedBid:function(e){return e&&!e.sharedBidInUse&&(e.status&&!(0,o.includes)([i.BID_STATUS.RENDERED],e.status)||!e.status)}}},8538:function(e,t,r){"use strict";var n,i,o,a,s,d,c=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.CONFIG_TOGGLE=void 0,t.hookTimer=E,t.metricsFactory=m,t.timedBidResponseHook=t.timedAuctionHook=t.newMetrics=void 0,t.useMetrics=I;var u=c(r(5881)),l=r(9926);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=t.CONFIG_TOGGLE="performanceMetrics",g=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},v=new WeakMap;function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.now,r=void 0===t?g:t,n=e.mkNode,i=void 0===n?function e(t){return{metrics:{},timestamps:{},groups:{},addParent:function(e,r){t.push([e,r])},newSibling:function(){return e(t.slice())},dfWalk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.visit,n=e.follow,i=void 0===n?function(){return!0}:n,o=e.visited,a=void 0===o?new Set:o,s=e.inEdge;if(!a.has(this)){if(a.add(this),null!=(d=r(s,this)))return d;var d,c,l=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return p(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(t);try{for(l.s();!(c=l.n()).done;){var f=(0,u.default)(c.value,2),g=f[0],v=f[1];if(i(s,v)&&(d=g.dfWalk({visit:r,follow:i,visited:a,inEdge:v}),null!=d))return d}}catch(e){l.e(e)}finally{l.f()}}}}}:n,o=e.mkTimer,a=void 0===o?b:o,s=e.mkRenamer,d=void 0===s?function(e){return e}:s,c=e.nodes,l=void 0===c?v:c;return function(){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return{forEach:function(t){t(e)}}};n=d(n);var o=function(e){return t.dfWalk({visit:function(t,r){var n=r.timestamps;if(n.hasOwnProperty(e))return n[e]}})};function s(e,r){var i=n(e);t.dfWalk({follow:function(e,t){return t.propagate&&(!e||!e.stopPropagation)},visit:function(e,t){i.forEach(function(n){null==e?t.metrics[n]=r:(t.groups.hasOwnProperty(n)||(t.groups[n]=[]),t.groups[n].push(r))})}})}function c(e){return a(r,function(t){return s(e,t)})}function u(){var e={};return t.dfWalk({visit:function(t,r){e=Object.assign({},!t||t.includeGroups?r.groups:null,r.metrics,e)}}),e}var p={startTiming:c,measureTime:function(e,t){return c(e).stopAfter(t)()},measureHookTime:function(e,t,r){var n,i=c(e);return r(((n=i.stopBefore(t)).bail=t.bail&&i.stopBefore(t.bail),n.stopTiming=i,n.untimed=t,n))},checkpoint:function(e){t.timestamps[e]=r()},timeSince:function(e,t){var n=o(e),i=null!=n?r()-n:null;return null!=t&&s(t,i),i},timeBetween:function(e,t,r){var n=o(e),i=o(t),a=null!=n&&null!=i?i-n:null;return null!=r&&s(r,a),a},setMetric:s,getMetrics:u,fork:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.propagate,a=r.stopPropagation,s=r.includeGroups;return e(i([[t,{propagate:void 0===o||o,stopPropagation:void 0!==a&&a,includeGroups:void 0!==s&&s}]]),n)},join:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.propagate,i=r.stopPropagation,o=r.includeGroups,a=l.get(e);null!=a&&a.addParent(t,{propagate:void 0===n||n,stopPropagation:void 0!==i&&i,includeGroups:void 0!==o&&o})},newMetrics:function(){return e(t.newSibling(),n)},renameWith:function(r){return e(t,r)},toJSON:function(){return u()}};return l.set(p,t),p}(i([]))}}function h(e,t,r){return function(){t&&t();try{return e.apply(this,arguments)}finally{r&&r()}}}function b(e,t){var r=e(),n=!1;function i(){n||(t(e()-r),n=!0)}return i.stopBefore=function(e){return h(e,i)},i.stopAfter=function(e){return h(e,null,i)},i}var y=(i=function(){return{}},o={forEach:n=function(){}},(a=function(){return null}).stopBefore=function(e){return e},a.stopAfter=function(e){return e},s=Object.defineProperties({dfWalk:n,newSibling:function(){return s},addParent:n},Object.fromEntries(["metrics","timestamps","groups"].map(function(e){return[e,{get:i}]}))),m({now:function(){return 0},mkNode:function(){return s},mkRenamer:function(){return function(){return o}},mkTimer:function(){return a},nodes:{get:n,set:n}})()),A=!0;function I(e){return A&&e||y}function E(e,t){return function(r,n){return function(i){for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];var d=this;return I(t.apply(d,a)).measureHookTime(e+r,i,function(e){return n.call.apply(n,[d,e].concat(a))})}}}l.config.getConfig(f,function(e){A=!!e[f]}),d=m(),t.newMetrics=function(){return A?d():y},t.timedAuctionHook=E("requestBids.",function(e){return e.metrics}),t.timedBidResponseHook=E("addBidResponse.",function(e,t){return t.metrics})},2875:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delayIfPrerendering=function(e,t){return function(){if(!(document.prerendering&&e()))return Promise.resolve(t.apply(this,arguments));var r=this,i=Array.from(arguments);return new Promise(function(e){document.addEventListener("prerenderingchange",function(){(0,n.logInfo)("Auctions were suspended while page was prerendering"),e(t.apply(r,i))},{once:!0})})}};var n=r(4700)},6102:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PbPromise=void 0,t.defer=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.promiseFactory;function i(e){return function(t){return e(t)}}return{promise:(void 0===n?function(e){return new s(e)}:n)(function(r,n){e=r,t=n}),resolve:i(e),reject:i(t)}},t.delay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new s(function(t){a(t,e)})},t.pbSetTimeout=void 0,r(555);var n,i,o=r(7045),a=t.pbSetTimeout=null!=(n=(0,o.getGlobal)().setTimeout)?n:setTimeout,s=t.PbPromise=null!=(i=(0,o.getGlobal)().Promise)?i:Promise},2500:function(e,t){"use strict";function r(e,t){return e===t?0:e<t?-1:1}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return function(t,n){return r(e(t),e(n))}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return function(t,r){return-e(t,r)||0}}function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){for(var n=0;n<t.length;n++){var i=(0,t[n])(e,r);if(0!==i)return i}return 0}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return function(t,r){return 0>e(r,t)?r:t}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return a(i(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.getOldestHighestCpmBid=t.getLatestHighestCpmBid=t.getHighestCpm=void 0,t.keyCompare=n,t.maximum=s,t.minimum=a,t.reverseCompare=i,t.simpleCompare=r,t.tiebreakCompare=o;var d=n(function(e){return e.cpm}),c=n(function(e){return e.responseTimestamp});t.getHighestCpm=s(o(d,i(n(function(e){return e.timeToRespond})))),t.getOldestHighestCpmBid=s(o(d,i(c))),t.getLatestHighestCpmBid=s(o(d,c))},1250:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.ttlCollection=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.startTime,u=void 0===n?s.timestamp:n,l=r.ttl,p=void 0===l?function(){return null}:l,f=r.monotonic,g=r.slack,v=void 0===g?5e3:g,m=new Map,h=[],b=[],y=void 0!==f&&f?function(e){return b.push(e)}:function(e){return b.splice((0,s.binarySearch)(b,e,function(e){return e.expiry}),0,e)};function A(){if(t&&clearTimeout(t),b.length>0){var r=(0,s.timestamp)();e=Math.max(r,b[0].expiry+v),t=(0,d.setFocusTimeout)(function(){for(var e=(0,s.timestamp)(),r=0,n=0;n<b.length&&!function(){var t=b[n];if(t.expiry>e)return 1;h.forEach(function(e){try{e(t.item)}catch(e){(0,s.logError)(e)}}),m.delete(t.item),r++}();n++);b.splice(0,r),t=null,A()},e-r)}else t=null}var I={};return(0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)({},Symbol.iterator,function(){return m.keys()}),"add",function(r){var n,i,s,d,c,l,f,g;m.has(r)||m.set(r,(i={},s=I,d=Object.entries({start:u,delta:p}).map(function(d){var c,u=(0,o.default)(d,2),l=u[0],p=u[1];return function(){var o=c={};a.PbPromise.resolve(p(r)).then(function(r){o===c&&(i[l]=r,s===I&&null!=i.start&&null!=i.delta&&(n=i.start+i.delta,y(g),(null==t||e>n+v)&&A()))})}}),l=(c=(0,o.default)(d,2))[0],g={item:r,refresh:f=c[1],get expiry(){return n}},l(),f(),g))}),"clear",function(){b.length=0,A(),m.clear(),I={}}),"clearItem",function(e){m.has(e)&&m.delete(e)}),"toArray",function(){return Array.from(m.keys())}),"refresh",function(){b.length=0,A();var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(m.values());try{for(t.s();!(e=t.n()).done;)e.value.refresh()}catch(e){t.e(e)}finally{t.f()}}),"onExpiry",function(e){return h.push(e),function(){var t=h.indexOf(e);t>=0&&h.splice(t,1)}})};var i=n(r(5794)),o=n(r(5881)),a=r(6102),s=r(4700),d=r(501);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}},5236:function(e,t,r){"use strict";var n=r(2100);Object.defineProperty(t,"__esModule",{value:!0}),t.checkVideoBidSetup=t.OUTSTREAM=t.ORTB_VIDEO_PARAMS=t.INSTREAM=void 0,t.fillVideoDefaults=function(e){var t,r=null==e||null==(t=e.mediaTypes)?void 0:t.video;null!=r&&null==r.plcmt&&(r.context===c||[2,3,4].includes(r.placement)?r.plcmt=4:r.context!==c&&[2,6].includes(r.playbackmethod)&&(r.plcmt=2))},t.isValidVideoBid=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.index,i=void 0===n?d.auctionManager.index:n,o=null==(t=i.getMediaTypes(e))?void 0:t.video,a=o&&(null==o?void 0:o.context),s=o&&(null==o?void 0:o.useCacheKey),c=i.getAdUnit(e);return l(e,c,o,a,s)},t.validateOrtbVideoFields=function(e,t){var r,n=null==e||null==(r=e.mediaTypes)?void 0:r.video;if(!(0,o.isPlainObject)(n))return void(0,o.logWarn)("validateOrtbVideoFields: videoParams must be an object.");null!=n&&Object.entries(n).forEach(function(r){var a=(0,i.default)(r,2),s=a[0],d=a[1];u.has(s)&&(u.get(s)(d)||("function"==typeof t?t(s,d,e):(delete n[s],(0,o.logWarn)('Invalid prop in adUnit "'.concat(e.code,'": Invalid value for mediaTypes.video.').concat(s," ORTB property. The property has been removed.")))))})};var i=n(r(5881)),o=r(4700),a=r(9926),s=r(2508),d=r(3479),c=t.OUTSTREAM="outstream";t.INSTREAM="instream";var u=t.ORTB_VIDEO_PARAMS=new Map([["mimes",function(e){return Array.isArray(e)&&e.length>0&&e.every(function(e){return"string"==typeof e})}],["minduration",o.isInteger],["maxduration",o.isInteger],["startdelay",o.isInteger],["maxseq",o.isInteger],["poddur",o.isInteger],["protocols",o.isArrayOfNums],["w",o.isInteger],["h",o.isInteger],["podid",o.isStr],["podseq",o.isInteger],["rqddurs",o.isArrayOfNums],["placement",o.isInteger],["plcmt",o.isInteger],["linearity",o.isInteger],["skip",function(e){return[1,0].includes(e)}],["skipmin",o.isInteger],["skipafter",o.isInteger],["sequence",o.isInteger],["slotinpod",o.isInteger],["mincpmpersec",o.isNumber],["battr",o.isArrayOfNums],["maxextended",o.isInteger],["minbitrate",o.isInteger],["maxbitrate",o.isInteger],["boxingallowed",o.isInteger],["playbackmethod",o.isArrayOfNums],["playbackend",o.isInteger],["delivery",o.isArrayOfNums],["pos",o.isInteger],["api",o.isArrayOfNums],["companiontype",o.isArrayOfNums],["poddedupe",o.isArrayOfNums]]),l=t.checkVideoBidSetup=(0,s.hook)("sync",function(e,t,r,n,i){if(r&&(i||n!==c)){var s=a.config.getConfig("cache")||{},d=s.url,u=s.useLocal;return d||u||!e.vastXml||e.vastUrl?!!(e.vastUrl||e.vastXml):((0,o.logError)('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling either prebid cache with pbjs.setConfig({ cache: {url: "..."} });\n        or local cache with pbjs.setConfig({ cache: { useLocal: true }});\n      '),!1)}return n!==c||!!i||!!(e.renderer||t&&t.renderer||r.renderer)},"checkVideoBidSetup")},5836:function(e,t,r){"use strict";var n,i,o,a=r(8287);Object.defineProperty(t,"__esModule",{value:!0}),t.batchingCache=t.batchAndStore=t._internal=void 0,t.getCacheUrl=A,t.store=y,t.storeBatch=S,t.vastLocalCache=t.storeLocally=void 0;var s=r(7316),d=r(9926),c=r(3479),u=v(r(1322)),l=v(r(3103)),p=r(4700),f=r(646);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&({}).hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var m=t.vastLocalCache=new Map;function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.index,n=void 0===r?c.auctionManager.index:r,i=b(e),o=n.getAuction(e),a={type:"xml",value:i,ttlseconds:Number(e.ttl)+15};return d.config.getConfig("cache.vasttrack")&&(a.bidder=e.bidder,a.bidid=e.requestId,a.aid=e.auctionId),null!=o&&(a.timestamp=o.getAuctionStart()),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(a.key=e.customCacheKey),a}function b(e){var t,r,n;return e.vastXml?e.vastXml:(t=e.vastUrl,n=(r=(r=e.vastImpUrl)&&(Array.isArray(r)?r:[r]))?r.map(function(e){return"<Impression><![CDATA[".concat(e,"]]></Impression>")}).join(""):"",'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['.concat(t,"]]></VASTAdTagURI>\n        ").concat(n,"\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>"))}function y(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.ajaxBuilder,n={puts:e.map(h)};r(d.config.getConfig("cache.timeout"))(d.config.getConfig("cache.url"),{success:function(e){var r;try{r=JSON.parse(e).responses}catch(e){t(e,[]);return}r?t(null,r):t(Error("The cache server didn't respond with a responses property."),[])},error:function(r,n){(function(e,t){var r=e.responseText;if(r.match(/cache element.\d+ exceeded max size: Payload size .\d+ exceeded max.\d+/)){var n=r.match(/(\d+)/g),i={bids:t,responseSize:n[1],maxSizeAllowed:n[2]};u.emit(l.EVENTS.VAST_EXCEEDED_LIMIT,i)}})(n,e),t(Error("Error storing video ad in the cache: ".concat(r,": ").concat(JSON.stringify(n))),[])}},JSON.stringify(n),{contentType:"text/plain",withCredentials:!0})}function A(e){return"".concat(d.config.getConfig("cache.url"),"?uuid=").concat(e)}t.storeLocally=function(e){var t=b(e),r=URL.createObjectURL(new Blob([t],{type:"text/xml"}));I(e,r),m.set(e.videoCacheKey,r)};var I=function(e,t,r){e.videoCacheKey=r||(0,p.generateUUID)(),e.vastUrl||(e.vastUrl=t)},E=t._internal={store:y};function S(e){var t=e.map(function(e){return e.bidResponse});E.store(t,function(r,n){if(r)(0,p.logError)("Failed to save to the video cache: ".concat(r,". Video bids will be discarded:"),t);else e.length!==n.length?(0,p.logError)("expected ".concat(e.length," cache IDs, got ").concat(n.length," instead")):n.forEach(function(t,r){var n=e[r],i=n.auctionInstance,o=n.bidResponse,a=n.afterBidAdded;""===t.uuid?(0,p.logWarn)("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."):(I(o,A(o.videoCacheKey),t.uuid),(0,f.addBidToAuction)(i,o),a())})})}d.config.getConfig("cache",function(e){var t=e.cache;n="number"==typeof t.batchSize&&t.batchSize>0?t.batchSize:1,i="number"==typeof t.batchTimeout&&t.batchTimeout>0?t.batchTimeout:0,t.useLocal&&!o&&(o=c.auctionManager.onExpiry(function(e){e.getBidsReceived().forEach(function(e){var t=m.get(e.videoCacheKey);t&&t.startsWith("blob")&&URL.revokeObjectURL(t),m.delete(e.videoCacheKey)})}))});var O=t.batchingCache=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:setTimeout,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S,r=[[]],o=!1,a=function(e){return e()};return function(s,d,c){var u=i>0?e:a;r[r.length-1].length>=n&&r.push([]),r[r.length-1].push({auctionInstance:s,bidResponse:d,afterBidAdded:c}),o||(o=!0,u(function(){r.forEach(t),r=[[]],o=!1},i))}};t.batchAndStore=O()},1421:function(e,t,r){var n,i,o,a,s,d,c,u,l,p,f,g,v,m,h;n=r(7973),r(1667),r(278),r(494),r(5518),i=n.lib.BlockCipher,o=n.algo,a=[],s=[],d=[],c=[],u=[],l=[],p=[],f=[],g=[],v=[],function(){for(var e=[],t=0;t<256;t++)t<128?e[t]=t<<1:e[t]=t<<1^283;for(var r=0,n=0,t=0;t<256;t++){var i=n^n<<1^n<<2^n<<3^n<<4;i=i>>>8^255&i^99,a[r]=i,s[i]=r;var o=e[r],m=e[o],h=e[m],b=257*e[i]^0x1010100*i;d[r]=b<<24|b>>>8,c[r]=b<<16|b>>>16,u[r]=b<<8|b>>>24,l[r]=b;var b=0x1010101*h^65537*m^257*o^0x1010100*r;p[i]=b<<24|b>>>8,f[i]=b<<16|b>>>16,g[i]=b<<8|b>>>24,v[i]=b,r?(r=o^e[e[e[h^o]]],n^=e[e[n]]):r=n=1}}(),m=[0,1,2,4,8,16,32,64,128,27,54],h=o.AES=i.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e,t=this._keyPriorReset=this._key,r=t.words,n=t.sigBytes/4,i=((this._nRounds=n+6)+1)*4,o=this._keySchedule=[],s=0;s<i;s++)s<n?o[s]=r[s]:(e=o[s-1],s%n?n>6&&s%n==4&&(e=a[e>>>24]<<24|a[e>>>16&255]<<16|a[e>>>8&255]<<8|a[255&e]):e=(a[(e=e<<8|e>>>24)>>>24]<<24|a[e>>>16&255]<<16|a[e>>>8&255]<<8|a[255&e])^m[s/n|0]<<24,o[s]=o[s-n]^e);for(var d=this._invKeySchedule=[],c=0;c<i;c++){var s=i-c;if(c%4)var e=o[s];else var e=o[s-4];c<4||s<=4?d[c]=e:d[c]=p[a[e>>>24]]^f[a[e>>>16&255]]^g[a[e>>>8&255]]^v[a[255&e]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,d,c,u,l,a)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,p,f,g,v,s);var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,o,a,s){for(var d=this._nRounds,c=e[t]^r[0],u=e[t+1]^r[1],l=e[t+2]^r[2],p=e[t+3]^r[3],f=4,g=1;g<d;g++){var v=n[c>>>24]^i[u>>>16&255]^o[l>>>8&255]^a[255&p]^r[f++],m=n[u>>>24]^i[l>>>16&255]^o[p>>>8&255]^a[255&c]^r[f++],h=n[l>>>24]^i[p>>>16&255]^o[c>>>8&255]^a[255&u]^r[f++],b=n[p>>>24]^i[c>>>16&255]^o[u>>>8&255]^a[255&l]^r[f++];c=v,u=m,l=h,p=b}var v=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&p])^r[f++],m=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[p>>>8&255]<<8|s[255&c])^r[f++],h=(s[l>>>24]<<24|s[p>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^r[f++],b=(s[p>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^r[f++];e[t]=v,e[t+1]=m,e[t+2]=h,e[t+3]=b},keySize:8}),n.AES=i._createHelper(h),e.exports=n.AES},5518:function(e,t,r){var n,i,o,a,s,d,c,u,l,p,f,g,v,m,h,b,y,A;n=r(7973),r(494),e.exports=void(n.lib.Cipher||(o=(i=n.lib).Base,a=i.WordArray,s=i.BufferedBlockAlgorithm,(d=n.enc).Utf8,c=d.Base64,u=n.algo.EvpKDF,l=i.Cipher=s.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?A:b}return function(t){return{encrypt:function(r,n,i){return e(n).encrypt(t,r,n,i)},decrypt:function(r,n,i){return e(n).decrypt(t,r,n,i)}}}}()}),i.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),p=n.mode={},f=i.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),g=p.CBC=function(){var e=f.extend();function t(e,t,r){var n,i=this._iv;i?(n=i,this._iv=void 0):n=this._prevBlock;for(var o=0;o<r;o++)e[t+o]^=n[o]}return e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize;t.call(this,e,r,i),n.encryptBlock(e,r),this._prevBlock=e.slice(r,r+i)}}),e.Decryptor=e.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize,o=e.slice(r,r+i);n.decryptBlock(e,r),t.call(this,e,r,i),this._prevBlock=o}}),e}(),v=(n.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,i=n<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4)o.push(i);var d=a.create(o,n);e.concat(d)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},i.BlockCipher=l.extend({cfg:l.cfg.extend({mode:g,padding:v}),reset:function(){l.reset.call(this);var e,t=this.cfg,r=t.iv,n=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,r&&r.words):(this._mode=e.call(n,this,r&&r.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),m=i.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),h=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;return(r?a.create([0x53616c74,0x65645f5f]).concat(r).concat(t):t).toString(c)},parse:function(e){var t,r=c.parse(e),n=r.words;return 0x53616c74==n[0]&&0x65645f5f==n[1]&&(t=a.create(n.slice(2,4)),n.splice(0,4),r.sigBytes-=16),m.create({ciphertext:r,salt:t})}},b=i.SerializableCipher=o.extend({cfg:o.extend({format:h}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n),o=i.finalize(t),a=i.cfg;return m.create({ciphertext:o,key:r,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(n.kdf={}).OpenSSL={execute:function(e,t,r,n,i){if(n||(n=a.random(8)),i)var o=u.create({keySize:t+r,hasher:i}).compute(e,n);else var o=u.create({keySize:t+r}).compute(e,n);var s=a.create(o.words.slice(t),4*r);return o.sigBytes=4*t,m.create({key:o,iv:s,salt:n})}},A=i.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:y}),encrypt:function(e,t,r,n){var i=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize,n.salt,n.hasher);n.iv=i.iv;var o=b.encrypt.call(this,e,t,i.key,n);return o.mixIn(i),o},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var i=n.kdf.execute(r,e.keySize,e.ivSize,t.salt,n.hasher);return n.iv=i.iv,b.decrypt.call(this,e,t,i.key,n)}})))},7973:function(e,t,r){var n;e.exports=n||function(e,t){if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==r.g&&r.g.crypto&&(n=r.g.crypto),!n)try{n=r(9532)}catch(e){}var n,i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),a={},s=a.lib={},d=s.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=s.WordArray=d.extend({init:function(e,r){e=this.words=e||[],t!=r?this.sigBytes=r:this.sigBytes=4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var a=r[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=a<<24-(n+o)%4*8}else for(var s=0;s<i;s+=4)t[n+s>>>2]=r[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=0xffffffff<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=d.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(i());return new c.init(t,e)}}),u=a.enc={},l=u.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new c.init(r,t/2)}},p=u.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new c.init(r,t)}},f=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},g=s.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,n=this._data,i=n.words,o=n.sigBytes,a=this.blockSize,s=o/(4*a),d=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,u=e.min(4*d,o);if(d){for(var l=0;l<d;l+=a)this._doProcessBlock(i,l);r=i.splice(0,d),n.sigBytes-=u}return new c.init(r,u)},clone:function(){var e=d.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});s.Hasher=g.extend({cfg:d.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new v.HMAC.init(e,r).finalize(t)}}});var v=a.algo={};return a}(Math)},1667:function(e,t,r){var n,i;i=(n=r(7973)).lib.WordArray,n.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var i=[],o=0;o<r;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<r;s++)i.push(n.charAt(a>>>6*(3-s)&63));var d=n.charAt(64);if(d)for(;i.length%4;)i.push(d);return i.join("")},parse:function(e){var t=e.length,r=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var o=0;o<r.length;o++)n[r.charCodeAt(o)]=o}var a=r.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}for(var d=e,c=t,u=n,l=[],p=0,f=0;f<c;f++)if(f%4){var g=u[d.charCodeAt(f-1)]<<f%4*2|u[d.charCodeAt(f)]>>>6-f%4*2;l[p>>>2]|=g<<24-p%4*8,p++}return i.create(l,p)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.exports=n.enc.Base64},5728:function(e,t,r){e.exports=r(7973).enc.Utf8},494:function(e,t,r){var n,i,o,a,s,d,c;n=r(7973),r(5900),r(625),o=(i=n.lib).Base,a=i.WordArray,d=(s=n.algo).MD5,c=s.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:d,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,n=this.cfg,i=n.hasher.create(),o=a.create(),s=o.words,d=n.keySize,c=n.iterations;s.length<d;){r&&i.update(r),r=i.update(e).finalize(t),i.reset();for(var u=1;u<c;u++)r=i.finalize(r),i.reset();o.concat(r)}return o.sigBytes=4*d,o}}),n.EvpKDF=function(e,t,r){return c.create(r).compute(e,t)},e.exports=n.EvpKDF},625:function(e,t,r){var n,i,o;e.exports=void(i=(n=r(7973)).lib.Base,o=n.enc.Utf8,n.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),s=i.words,d=a.words,c=0;c<r;c++)s[c]^=0x5c5c5c5c,d[c]^=0x36363636;i.sigBytes=a.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}}))},278:function(e,t,r){var n;n=r(7973),function(e){for(var t=n.lib,r=t.WordArray,i=t.Hasher,o=n.algo,a=[],s=0;s<64;s++)a[s]=0x100000000*e.abs(e.sin(s+1))|0;var d=o.MD5=i.extend({_doReset:function(){this._hash=new r.init([0x67452301,0xefcdab89,0x98badcfe,0x10325476])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=(i<<8|i>>>24)&0xff00ff|(i<<24|i>>>8)&0xff00ff00}var o=this._hash.words,s=e[t+0],d=e[t+1],f=e[t+2],g=e[t+3],v=e[t+4],m=e[t+5],h=e[t+6],b=e[t+7],y=e[t+8],A=e[t+9],I=e[t+10],E=e[t+11],S=e[t+12],O=e[t+13],_=e[t+14],T=e[t+15],w=o[0],C=o[1],x=o[2],P=o[3];w=c(w,C,x,P,s,7,a[0]),P=c(P,w,C,x,d,12,a[1]),x=c(x,P,w,C,f,17,a[2]),C=c(C,x,P,w,g,22,a[3]),w=c(w,C,x,P,v,7,a[4]),P=c(P,w,C,x,m,12,a[5]),x=c(x,P,w,C,h,17,a[6]),C=c(C,x,P,w,b,22,a[7]),w=c(w,C,x,P,y,7,a[8]),P=c(P,w,C,x,A,12,a[9]),x=c(x,P,w,C,I,17,a[10]),C=c(C,x,P,w,E,22,a[11]),w=c(w,C,x,P,S,7,a[12]),P=c(P,w,C,x,O,12,a[13]),x=c(x,P,w,C,_,17,a[14]),C=c(C,x,P,w,T,22,a[15]),w=u(w,C,x,P,d,5,a[16]),P=u(P,w,C,x,h,9,a[17]),x=u(x,P,w,C,E,14,a[18]),C=u(C,x,P,w,s,20,a[19]),w=u(w,C,x,P,m,5,a[20]),P=u(P,w,C,x,I,9,a[21]),x=u(x,P,w,C,T,14,a[22]),C=u(C,x,P,w,v,20,a[23]),w=u(w,C,x,P,A,5,a[24]),P=u(P,w,C,x,_,9,a[25]),x=u(x,P,w,C,g,14,a[26]),C=u(C,x,P,w,y,20,a[27]),w=u(w,C,x,P,O,5,a[28]),P=u(P,w,C,x,f,9,a[29]),x=u(x,P,w,C,b,14,a[30]),C=u(C,x,P,w,S,20,a[31]),w=l(w,C,x,P,m,4,a[32]),P=l(P,w,C,x,y,11,a[33]),x=l(x,P,w,C,E,16,a[34]),C=l(C,x,P,w,_,23,a[35]),w=l(w,C,x,P,d,4,a[36]),P=l(P,w,C,x,v,11,a[37]),x=l(x,P,w,C,b,16,a[38]),C=l(C,x,P,w,I,23,a[39]),w=l(w,C,x,P,O,4,a[40]),P=l(P,w,C,x,s,11,a[41]),x=l(x,P,w,C,g,16,a[42]),C=l(C,x,P,w,h,23,a[43]),w=l(w,C,x,P,A,4,a[44]),P=l(P,w,C,x,S,11,a[45]),x=l(x,P,w,C,T,16,a[46]),C=l(C,x,P,w,f,23,a[47]),w=p(w,C,x,P,s,6,a[48]),P=p(P,w,C,x,b,10,a[49]),x=p(x,P,w,C,_,15,a[50]),C=p(C,x,P,w,m,21,a[51]),w=p(w,C,x,P,S,6,a[52]),P=p(P,w,C,x,g,10,a[53]),x=p(x,P,w,C,I,15,a[54]),C=p(C,x,P,w,d,21,a[55]),w=p(w,C,x,P,y,6,a[56]),P=p(P,w,C,x,T,10,a[57]),x=p(x,P,w,C,h,15,a[58]),C=p(C,x,P,w,O,21,a[59]),w=p(w,C,x,P,v,6,a[60]),P=p(P,w,C,x,E,10,a[61]),x=p(x,P,w,C,f,15,a[62]),C=p(C,x,P,w,A,21,a[63]),o[0]=o[0]+w|0,o[1]=o[1]+C|0,o[2]=o[2]+x|0,o[3]=o[3]+P|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;var o=e.floor(n/0x100000000);r[(i+64>>>9<<4)+15]=(o<<8|o>>>24)&0xff00ff|(o<<24|o>>>8)&0xff00ff00,r[(i+64>>>9<<4)+14]=(n<<8|n>>>24)&0xff00ff|(n<<24|n>>>8)&0xff00ff00,t.sigBytes=(r.length+1)*4,this._process();for(var a=this._hash,s=a.words,d=0;d<4;d++){var c=s[d];s[d]=(c<<8|c>>>24)&0xff00ff|(c<<24|c>>>8)&0xff00ff00}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,r,n,i,o,a){var s=e+(t&r|~t&n)+i+a;return(s<<o|s>>>32-o)+t}function u(e,t,r,n,i,o,a){var s=e+(t&n|r&~n)+i+a;return(s<<o|s>>>32-o)+t}function l(e,t,r,n,i,o,a){var s=e+(t^r^n)+i+a;return(s<<o|s>>>32-o)+t}function p(e,t,r,n,i,o,a){var s=e+(r^(t|~n))+i+a;return(s<<o|s>>>32-o)+t}n.MD5=i._createHelper(d),n.HmacMD5=i._createHmacHelper(d)}(Math),e.exports=n.MD5},5900:function(e,t,r){var n,i,o,a,s,d,c;o=(i=(n=r(7973)).lib).WordArray,a=i.Hasher,s=n.algo,d=[],c=s.SHA1=a.extend({_doReset:function(){this._hash=new o.init([0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],c=0;c<80;c++){if(c<16)d[c]=0|e[t+c];else{var u=d[c-3]^d[c-8]^d[c-14]^d[c-16];d[c]=u<<1|u>>>31}var l=(n<<5|n>>>27)+s+d[c];c<20?l+=(i&o|~i&a)+0x5a827999:c<40?l+=(i^o^a)+0x6ed9eba1:c<60?l+=(i&o|i&a|o&a)-0x70e44324:l+=(i^o^a)-0x359d3e2a,s=a,a=o,o=i<<30|i>>>2,i=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[(n+64>>>9<<4)+14]=Math.floor(r/0x100000000),t[(n+64>>>9<<4)+15]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=a._createHelper(c),n.HmacSHA1=a._createHmacHelper(c),e.exports=n.SHA1},2618:function(e,t,r){"use strict";function n(e,t,r,n,i){for(n=0,t=t.split?t.split("."):t;n<t.length;n++)e=e?e[t[n]]:i;return e===i?r:e}r.r(t),r.d(t,{default:()=>n})},1579:function(e,t){t.dset=function(e,t,r){t.split&&(t=t.split("."));for(var n,i,o=0,a=t.length,s=e;o<a&&"__proto__"!=(i=""+t[o++])&&"constructor"!==i&&"prototype"!==i;)s=s[i]=o===a?r:typeof(n=s[i])==typeof t?n:0*t[o]!=0||~(""+t[o]).indexOf(".")?{}:[]}},4359:function(e){s.SYNC=1,s.ASYNC=2,s.QUEUE=4;var t="fun-hooks",r=Object.freeze({useProxy:!0,ready:0}),n=new WeakMap,i="2,1,0"===[1].reduce(function(e,t,r){return[e,t,r]},2).toString()?Array.prototype.reduce:function(e,t){var r,n=Object(this),i=n.length>>>0,o=0;if(t)r=t;else{for(;o<i&&!(o in n);)o++;r=n[o++]}for(;o<i;)o in n&&(r=e(r,n[o],o,n)),o++;return r};function o(e,t){return Array.prototype.slice.call(e,t)}var a=Object.assign||function(e){return i.call(o(arguments,1),function(e,t){return t&&Object.keys(t).forEach(function(r){e[r]=t[r]}),e},e)};function s(e){var d,c={},u=[];function l(e,t){return"function"==typeof e?v.call(null,"sync",e,t):"string"==typeof e&&"function"==typeof t?v.apply(null,arguments):"object"==typeof e?p.apply(null,arguments):void 0}function p(e,t,r){var n=!0;void 0===t&&(t=Object.getOwnPropertyNames(e),n=!1);var i={},o=["constructor"];do(t=t.filter(function(t){return"function"==typeof e[t]&&-1===o.indexOf(t)&&!t.match(/^_/)})).forEach(function(t){var n=t.split(":"),o=n[0],a=n[1]||"sync";if(!i[o]){var s=e[o];i[o]=e[o]=v(a,s,r?[r,o]:void 0)}}),e=Object.getPrototypeOf(e);while(n&&e);return i}function f(e){var r=Array.isArray(e)?e:e.split(".");return i.call(r,function(n,i,o){var a=n[i],s=!1;return a||(o===r.length-1?(d||u.push(function(){s||console.warn(t+": referenced '"+e+"' but it was never created")}),n[i]=g(function(e){n[i]=e,s=!0})):n[i]={})},c)}function g(e){var t=[],r=[],i=function(){},o={before:function(e,r){return s.call(this,t,"before",e,r)},after:function(e,t){return s.call(this,r,"after",e,t)},getHooks:function(e){var n=t.concat(r);"object"==typeof e&&(n=n.filter(function(t){return Object.keys(e).every(function(r){return t[r]===e[r]})}));try{a(n,{remove:function(){return n.forEach(function(e){e.remove()}),this}})}catch(e){console.error("error adding `remove` to array, did you modify Array.prototype?")}return n},removeAll:function(){return this.getHooks().remove()}};return n.set(o.after,{install:function(n,o,a){this.type=n,i=a,a(t,r),e&&e(o)}}),o;function s(e,n,o,a){var s={hook:o,type:n,priority:a||10,remove:function(){var n=e.indexOf(s);-1!==n&&(e.splice(n,1),i(t,r))}};return e.push(s),e.sort(function(e,t){return t.priority-e.priority}),i(t,r),this}}function v(r,i,c){var l,p,v=i.after&&n.get(i.after);if(v)if(v.type===r)return i;else throw t+": recreated hookable with different type";var m=c?f(c):g(),h={get:function(e,t){return m[t]||Reflect.get.apply(Reflect,arguments)}};return d||u.push(b),e.useProxy&&"function"==typeof Proxy&&Proxy.revocable?p=new Proxy(i,h):a(p=function(){return h.apply?h.apply(i,this,o(arguments)):i.apply(this,arguments)},m),n.get(p.after).install(r,p,function(e,t){var n,i=[];function a(e){i.push(e.hook)}e.length||t.length?(e.forEach(a),n=i.push(void 0)-1,t.forEach(a),l=function(e,t,a){var s,d=0,c="async"===r&&"function"==typeof a[a.length-1]&&a.pop();function u(e){"sync"===r?s=e:c&&c.apply(null,arguments)}function l(e){if(i[d]){var n=o(arguments);return l.bail=u,n.unshift(l),i[d++].apply(t,n)}"sync"===r?s=e:c&&c.apply(null,arguments)}return i[n]=function(){var n=o(arguments,1);"async"===r&&c&&(delete l.bail,n.push(l));var i=e.apply(t,n);"sync"===r&&l(i)},l.apply(null,a),s}):l=void 0,b()}),p;function b(){!d&&("sync"!==r||e.ready&s.SYNC)&&("async"!==r||e.ready&s.ASYNC)?"sync"!==r&&e.ready&s.QUEUE?h.apply=function(){var e=arguments;u.push(function(){p.apply(e[1],e[2])})}:h.apply=function(){throw t+": hooked function not ready"}:h.apply=l}}return(e=a({},r,e)).ready?l.ready=function(){d=!0;for(var e;e=u.shift();)e()}:d=!0,l.get=f,l}e.exports=s},9087:function(e,t){t.klona=function e(t){var r,n,i;if(Array.isArray(t)){for(n=Array(r=t.length);r--;)n[r]=(i=t[r])&&"object"==typeof i?e(i):i;return n}if("[object Object]"===Object.prototype.toString.call(t)){for(r in n={},t)"__proto__"===r?Object.defineProperty(n,r,{value:e(t[r]),configurable:!0,enumerable:!0,writable:!0}):n[r]=(i=t[r])&&"object"==typeof i?e(i):i;return n}return t}},9532:function(){},9590:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},6413:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},1287:function(e,t,r){var n=r(9590);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},1126:function(e){e.exports=function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},7583:function(e){function t(e,t,r,n,i,o,a){try{var s=e[o](a),d=s.value}catch(e){return void r(e)}s.done?t(d):Promise.resolve(d).then(n,i)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise(function(i,o){var a=e.apply(r,n);function s(e){t(a,i,o,s,d,"next",e)}function d(e){t(a,i,o,s,d,"throw",e)}s(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports},7586:function(e){e.exports=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},1770:function(e,t,r){var n=r(3590);function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}e.exports=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},5794:function(e,t,r){var n=r(3590);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},7196:function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},139:function(e,t,r){var n=r(8884);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},2100:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},4070:function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7731:function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],d=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);d=!0);}catch(e){c=!0,i=e}finally{try{if(!d&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},113:function(e){e.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},3101:function(e){e.exports=function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},4132:function(e,t,r){var n=r(4506);e.exports=function(e,t){if(null==e)return{};var r,i,o=n(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o},e.exports.__esModule=!0,e.exports.default=e.exports},4506:function(e){e.exports=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r},e.exports.__esModule=!0,e.exports.default=e.exports},7001:function(e,t,r){var n=r(8287).default,i=r(1126);e.exports=function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},5519:function(e,t,r){var n=r(8287).default;function i(){"use strict";e.exports=i=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},d="function"==typeof Symbol?Symbol:{},c=d.iterator||"@@iterator",u=d.asyncIterator||"@@asyncIterator",l=d.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,r){return e[t]=r}}function f(e,r,n,i){var o,a,d,c,u=Object.create((r&&r.prototype instanceof y?r:y).prototype);return s(u,"_invoke",{value:(o=e,a=n,d=new P(i||[]),c=v,function(e,r){if(c===m)throw Error("Generator is already running");if(c===h){if("throw"===e)throw r;return{value:t,done:!0}}for(d.method=e,d.arg=r;;){var n=d.delegate;if(n){var i=function e(r,n){var i=n.method,o=r.iterator[i];if(o===t)return n.delegate=null,"throw"===i&&r.iterator.return&&(n.method="return",n.arg=t,e(r,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+i+"' method")),b;var a=g(o,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var s=a.arg;return s?s.done?(n[r.resultName]=s.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):s:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,b)}(n,d);if(i){if(i===b)continue;return i}}if("next"===d.method)d.sent=d._sent=d.arg;else if("throw"===d.method){if(c===v)throw c=h,d.arg;d.dispatchException(d.arg)}else"return"===d.method&&d.abrupt("return",d.arg);c=m;var s=g(o,a,d);if("normal"===s.type){if(c=d.done?h:"suspendedYield",s.arg===b)continue;return{value:s.arg,done:d.done}}"throw"===s.type&&(c=h,d.method="throw",d.arg=s.arg)}})}),u}function g(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var v="suspendedStart",m="executing",h="completed",b={};function y(){}function A(){}function I(){}var E={};p(E,c,function(){return this});var S=Object.getPrototypeOf,O=S&&S(S(D([])));O&&O!==o&&a.call(O,c)&&(E=O);var _=I.prototype=y.prototype=Object.create(E);function T(e){["next","throw","return"].forEach(function(t){p(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){var r;s(this,"_invoke",{value:function(i,o){function s(){return new t(function(r,s){!function r(i,o,s,d){var c=g(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==n(l)&&a.call(l,"__await")?t.resolve(l.__await).then(function(e){r("next",e,s,d)},function(e){r("throw",e,s,d)}):t.resolve(l).then(function(e){u.value=e,s(u)},function(e){return r("throw",e,s,d)})}d(c.arg)}(i,o,r,s)})}return r=r?r.then(s,s):s()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function D(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(a.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw TypeError(n(e)+" is not iterable")}return A.prototype=I,s(_,"constructor",{value:I,configurable:!0}),s(I,"constructor",{value:A,configurable:!0}),A.displayName=p(I,l,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===A||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,I):(e.__proto__=I,p(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},r.awrap=function(e){return{__await:e}},T(w.prototype),p(w.prototype,u,function(){return this}),r.AsyncIterator=w,r.async=function(e,t,n,i,o){void 0===o&&(o=Promise);var a=new w(f(e,t,n,i),o);return r.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},T(_),p(_,l,"Generator"),p(_,c,function(){return this}),p(_,"toString",function(){return"[object Generator]"}),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=D,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var d=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(d&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(d){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:D(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},r}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},8884:function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},5881:function(e,t,r){var n=r(6413),i=r(7731),o=r(8955),a=r(113);e.exports=function(e,t){return n(e)||i(e,t)||o(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},939:function(e,t,r){var n=r(1287),i=r(4070),o=r(8955),a=r(3101);e.exports=function(e){return n(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},5890:function(e,t,r){var n=r(8287).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},3590:function(e,t,r){var n=r(8287).default,i=r(5890);e.exports=function(e){var t=i(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},8287:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},8955:function(e,t,r){var n=r(9590);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},4602:function(e,t,r){var n=r(5519)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},1184:function(e,t){"use strict";let r="[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}",n=RegExp(`^${r}$`,"i"),i=!!String.prototype.trim;function o(e){return null!=e}function a(e){return"[object Array]"===Object.prototype.toString.call(e)}function s(e){return i?(""+e).trim():(""+e).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function d(e){return"string"==typeof e}function c(e){return!!e&&"object"==typeof e&&!a(e)}function u(e,t){return new Date(new Date().getTime()+e*t)}function l(e,t,r){if(c(t)){let n;return(n="message"in t&&"string"==typeof t.message?Error(r||t.message):Error(r)).name=e,"stack"in t&&"string"==typeof t.stack&&(n.stack=t.stack),"lineNumber"in t&&"number"==typeof t.lineNumber&&(n.lineNumber=t.lineNumber),"columnNumber"in t&&"number"==typeof t.columnNumber&&(n.columnNumber=t.columnNumber),n}{let t=Error(r);return t.name=e,t}}let p="li_errors";t.ERRORS_CHANNEL=p,t.ReplayEmitter=class{data;constructor(e){let t=parseInt(e.toString())||5;this.data={h:{},q:{},size:t}}on(e,t,r){let n={callback:t.bind(r),unbound:t};return this.data={...this.data,h:{...this.data.h,[e]:[...this.data.h[e]||[],n]}},(this.data.q[e]||[]).forEach(e=>t.call(r,e)),this}once(e,t,r){let n=this.data.q[e]||[];if(n.length>0)return t.call(r,n[0]),this;{let n=i=>{this.off(e,n),t.call(r,i)};return n._=t,this.on(e,n,r)}}emit(e,t){(this.data.h[e]||[]).forEach(e=>e.callback(t));let r=this.data.q[e]||[];return this.data={...this.data,q:{...this.data.q,[e]:[...r.length<this.data.size?r:r.slice(1),t]}},this}off(e,t){let r=this.data.h[e],n=r&&t&&r.filter(e=>e.unbound!==t)||[];if(n.length)this.data={...this.data,h:{...this.data.h,[e]:n}};else{let{[e]:t,...r}=this.data.h;this.data={...this.data,h:r}}return this}emitErrorWithMessage(e,t,r){let n=l(e,r,t);return this.emit(p,n)}emitError(e,t){let r=l(e,t);return this.emit(p,r)}},t.UUID=r,t.expiresInDays=function(e){return u(e,864e5)},t.expiresInHours=function(e){return u(e,36e5)},t.isArray=a,t.isFunction=function(e){return!!e&&"function"==typeof e},t.isNonEmpty=function(e){return o(e)&&s(e).length>0},t.isObject=c,t.isRecord=function(e){return c(e)},t.isString=d,t.isUUID=function(e){return!!e&&n.test(s(e))},t.nonNull=o,t.onNonNull=function(e,t){return null!=e?t(e):e},t.safeToString=function(e){return"object"==typeof e?JSON.stringify(e):""+e},t.strEqualsIgnoreCase=function(e,t){return d(e)&&d(t)&&s(e.toLowerCase())===s(t.toLowerCase())},t.trim=s,t.wrapError=l},778:function(e,t,r){"use strict";var n=r(7837);r(1184),r(5308);let i=n.LiveConnect,o=n.StandardLiveConnect,a=n.MinimalLiveConnect;t.consts=n.consts,t.eventBus=n.eventBus,t.LiveConnect=i,t.MinimalLiveConnect=a,t.StandardLiveConnect=o},7837:function(e,t,r){"use strict";var n=r(1184),i=r(5308);class o{url;timeout;calls;eventBus;retries;constructor(e){this.url=e.collectorUrl??"https://rp.liadm.com",this.timeout=e.ajaxTimeout??0,this.calls=e.callHandler,this.eventBus=e.eventBus,this.retries=e.ajaxRetries??3}callBakers(e){try{let t=JSON.parse(e).bakers;if(n.isArray(t))for(let e=0;e<t.length;e++)this.calls.pixelGet(`${t[e]}?dtstmp=${Date.now()}`)}catch(t){this.eventBus.emitErrorWithMessage("CallBakers",`Error while calling bakers with ${e}`,t)}}sendState(e,t,r,i){if(e.sendsPixel()){i&&n.isFunction(i)&&i();let o=e.asQuery().add("dtstmp",Date.now(),{prepend:!0}).toQueryString();r(`${this.url}/${t}${o}`)}}sendAjax(e,t={}){this.sendState(e,"j",r=>{let i=o=>{let a=e.asHeaders();this.calls.ajaxGet(r,e=>{t.onLoad&&n.isFunction(t.onLoad)&&t.onLoad(),this.callBakers(e)},r=>{o<=0?(this.sendPixel(e,t),this.eventBus.emitError("AjaxFailed",r)):i(o-1)},this.timeout,a)};i(this.retries)},t.onPreSend)}sendPixel(e,t={}){this.sendState(e,"p",e=>this.calls.pixelGet(e,t.onLoad),t.onPreSend)}}let a="__li__evt_bus",s=n.ERRORS_CHANNEL,d="lips",c="pre_lips",u="_li_duid",l="https://idx.liadm.com/idex",p=[];var f=Object.freeze({__proto__:null,DEFAULT_IDEX_AJAX_TIMEOUT:5e3,DEFAULT_IDEX_URL:l,DEFAULT_REQUESTED_ATTRIBUTES:p,ERRORS_PREFIX:s,EVENT_BUS_NAMESPACE:a,PEOPLE_VERIFIED_LS_ENTRY:u,PIXEL_SENT_PREFIX:d,PRELOAD_PIXEL:c});function g(e){return function(e){e=`${e}`;for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let t="";for(let n=0;n<e.length;n+=3){let i=[void 0,void 0,void 0,void 0];i[0]=e.charCodeAt(n)>>2,i[1]=(3&e.charCodeAt(n))<<4,e.length>n+2?(i[1]|=e.charCodeAt(n+1)>>4,i[2]=(15&e.charCodeAt(n+1))<<2,i[2]|=e.charCodeAt(n+2)>>6,i[3]=63&e.charCodeAt(n+2)):e.length>n+1&&(i[1]|=e.charCodeAt(n+1)>>4,i[2]=(15&e.charCodeAt(n+1))<<2);for(let e=0;e<i.length;e++){var r;let n=i[e];void 0===n?t+="=":t+=(r=n)>=0&&r<64?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[r]:void 0}}return t}(e)||""}let v=/[+/]|=+$/g,m={"+":"-","/":"_"};function h(e){return m[e]||""}function b(e){let t=null,r=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode(parseInt("0x"+t,16)));try{t=window&&n.isFunction(window.btoa)?window.btoa:g}catch(e){t=g}return t(r).replace(v,h)}let y=new Map([[32,"md5"],[40,"sha1"],[64,"sha256"]]);function A(e){let t=e.match(/(\s+)?[a-f0-9]{32,64}(\s+)?/gi);return t&&t.map(n.trim)[0]}function I(e){let t=e.toLowerCase();return{md5:i.md5(t),sha1:i.sha1(t),sha256:i.sha256(t)}}function E(e){return/\S+(@|%40)\S+\.\S+/.test(e)}function S(e){let t=function(e){let t=[],r=RegExp("([\\w\\d.+-]+(@|%40)[\\w\\d-]+.[\\w\\d.-]+)","g"),i=r.exec(e);for(;i;)t.push(n.trim(i[1])),i=r.exec(e);return t}(e),r=[],i=e;for(let e=0;e<t.length;e++){let n=t[e],o=I(n);i=i.replace(n,o.md5),r.push(o)}return{stringWithoutRawEmails:i,hashesFromOriginalString:r}}function O(e,t){return"string"==typeof t&&E(n.trim(t))?"*********":t}function _(e){var t,r;return"false"!==(r="null"===(t=isNaN(+e)?e:+e)||"undefined"===t?null:t)&&("true"===r||r)}function T(e,t){if(t in e){let r=e[t];return n.isArray(r)?r.map(e=>_(C(e))):_(C(r))}}function w(e){let t,r,i,o={};return e&&-1!==(t=e.indexOf("?"))&&(r=e.slice(t+1))&&(-1===(i=r.indexOf("#"))||(r=r.slice(0,i)))&&r.split("&").forEach(function(e){if(e){let t,r=e.split("=");t=r[0];let i=2===r.length?r[1]:"true";if("[]"===t.slice(-2)&&(t=t.slice(0,-2)),t in o){let e=o[t];n.isArray(e)?e.push(i):o[t]=[e,i]}else o[t]=i}}),o}function C(e){return e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)}class x{hash;host;hostname;pathname;port;protocol;search;constructor(e){let t=e.match(/^(https?\:\/\/)?(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);if(null===t)throw TypeError(`Failed to parse URL: ${e}`);this.protocol=t[1]||"",this.host=t[2]||"",this.hostname=t[3]||"",this.port=t[4]||"",this.pathname=t[5]||"",this.search=t[6]||"",this.hash=t[7]||""}toString(){return`${this.protocol}${this.host}${this.pathname}${this.search}${this.hash}`}}let P=["items","itemids"],D=["email","emailhash","hash","hashedemail"];class R{tuples;constructor(e=[]){this.tuples=e}add(e,t,r={}){let{stripEmpty:n=!0,prepend:i=!1}=r;return""===e||n&&""===t?this:i?(this.tuples.unshift([e,t]),this):(this.tuples.push([e,t]),this)}addOptional(e,t,r={}){return n.nonNull(t)?this.add(e,t,r):this}addParamsMap(e){return Object.keys(e).forEach(t=>{let r=e[t];n.nonNull(r)&&(n.isArray(r)?r.forEach(e=>this.add(t,e)):this.add(t,r))}),this}copy(){return new R(this.tuples.slice())}filteredCopy(e){return new R(this.tuples.filter(([t,r])=>e(t,r)))}toQueryString(){let e="";return this.tuples.forEach(([t,r])=>{let n=0===e.length?"?":"&";e=`${e}${n}${encodeURIComponent(t)}=${encodeURIComponent(r)}`}),e}}function k(e){return null===e?"":e}function j(e){if(0!==e.length){let t=new x(e);return t.pathname="",t.search="",t.toString()}}let N=["setemail","setemailhash","sethashedemail"];class B{data;constructor(e,t,r,n){let i=B.safeFiddle(e,t,n);r&&(i.errorDetails=r),this.data=i}static safeFiddle(e,t,r){try{var i;return function(e,t){let r={};function i(e){return n.isObject(e)?e:{}}function o(e){return Object.keys(e)}let a=i(e),s=i(t);return o(a).forEach(e=>{r[e]=a[e]}),o(s).forEach(e=>{r[e]=s[e]}),r}(e,(i=JSON.parse(JSON.stringify(t)),n.isRecord(i)?{...function(e){let t={eventSource:e};for(let r of Object.keys(e)){let i=r.toLowerCase();if(D.indexOf(i)>-1){let i=n.trim(n.safeToString(e[r])),o=function(e){let t=e.match(/\S+(@|%40)\S+\.\S+/);return t&&t.map(n.trim)[0]}(i),a=A(i);if(o){let e=I(C(o));t.hashedEmail=[e.md5,e.sha1,e.sha256];break}if(a&&function(e){let t=A(e);return!!t&&y.has(t.length)}(a)){t.hashedEmail=[a.toLowerCase()];break}}}return"string"==typeof e.userAgent&&(t.providedUserAgent=e.userAgent),"string"==typeof e.ipv4&&(t.providedIPV4=e.ipv4),"string"==typeof e.ipv6&&(t.providedIPV6=e.ipv6),t}(i),eventSource:function(e){let t={};return Object.keys(e).forEach(r=>{let i=r.toLowerCase(),o=e[r];P.indexOf(i)>-1&&n.isArray(o)&&o.length>10?t[r]=o.slice(0,10):t[r]=o}),t}(i)}:{}))}catch(e){return console.error(e),null!=r&&r.emitErrorWithMessage("StateCombineWith","Error while extracting event data",e),{}}}static fromEvent(e,t,r){return new B(e,t,void 0,r)}static fromError(e,t,r){return new B(e,{},t,r)}setHashedEmail(e){this.data.hashedEmail=e}getHashedEmail(){return this.data.hashedEmail||[]}sendsPixel(){let e=n.isObject(this.data.eventSource)?this.data.eventSource:{},t=Object.keys(e).filter(e=>"eventname"===e.toLowerCase()||"event"===e.toLowerCase()),r=t&&t.length>=1&&t[0],i=r&&n.trim(e[r]);return!i||-1===N.indexOf(i.toLowerCase())}asHeaders(){return this.data.providedUserAgent?{"X-LI-Provided-User-Agent":this.data.providedUserAgent}:{}}asQuery(){let e=this.data,t=new R().addOptional("aid",e.appId).addOptional("did",e.distributorId).addOptional("se",n.onNonNull(e.eventSource,e=>b(JSON.stringify(e,O)))).addOptional("duid",e.liveConnectId).addOptional("tv",e.trackerVersion);if(n.nonNull(e.pageUrl)){let[r,n,i]=function(e){var t,r;if(void 0===e.pageUrl||0===e.pageUrl.length)return["",!1,[]];if((void 0===(t=e).urlCollectionMode||"full"===t.urlCollectionMode)&&(void 0===t.queryParametersFilter||""===t.queryParametersFilter))return[e.pageUrl,!1,[]];let n=new x(e.pageUrl),i=function(e){let t=w(e),r=[];return Object.keys(t).forEach(e=>{r.push([e,T(t,e)])}),r}(n.search),o=(r=n,"no_path"===e.urlCollectionMode&&r.pathname.length>1),a=function(e,t){if(void 0===t.queryParametersFilter||""===t.queryParametersFilter)return[];let r=new RegExp(t.queryParametersFilter);return e.map(e=>e[0]).filter(e=>r.test(e))}(i,e);return o&&(n.pathname="/"),a.length>0&&(n.search=function(e,t){let r=e.filter(e=>-1===t.indexOf(e[0])).map(e=>`${e[0]}=${e[1]}`);return r.length>0?`?${r.join("&")}`:""}(i,a)),[n.toString(),o,a]}(e);t.add("pu",r).addOptional("pu_rp",n?"1":void 0).add("pu_rqp",i.join(","))}return t.addOptional("ae",n.onNonNull(e.errorDetails,e=>b(JSON.stringify(e)))),n.isArray(e.retrievedIdentifiers)&&e.retrievedIdentifiers.forEach(e=>t.add(`ext_${e.name}`,e.value)),n.isArray(e.hashesFromIdentifiers)&&e.hashesFromIdentifiers.forEach(e=>t.add("scre",`${e.md5},${e.sha1},${e.sha256}`)),t.addOptional("li_did",e.decisionIds?.join(",")).addOptional("e",e.hashedEmail?.join(",")).addOptional("us_privacy",e.usPrivacyString).addOptional("wpn",e.wrapperName).addOptional("gdpr",n.onNonNull(e.gdprApplies,e=>e?"1":"0")).addOptional("gdpr_consent",e.gdprConsent).addOptional("refr",e.referrer).addOptional("gpp_s",e.gppString).addOptional("gpp_as",e.gppApplicableSections?.join(",")).addOptional("cd",e.cookieDomain).addOptional("ic",k(e.resolvedIdCookie),{stripEmpty:!1}).addOptional("c",e.contextElements).addOptional("pip",n.onNonNull(e.providedIPV4,e=>b(e))).addOptional("pip6",n.onNonNull(e.providedIPV6,e=>b(e))),t}}function U(e){try{return e()}catch(e){return}}let M=e=>({...e,privacyMode:!!e.gdprApplies||(e.gppApplicableSections??[]).indexOf(2)>-1});function V(e,t){if(e&&e.appId&&e.distributorId){let r=e.distributorId;delete e.distributorId,t.emitError("AppIdAndDistributorIdPresent",Error(`Event contains both appId: ${e.appId} and distributorId: ${r}. Ignoring distributorId`))}return e}let q="idCookie";class L{eventBus;calls;idexConfig;externalIds;source;publisherId;url;timeout;extraAttributes;requestedAttributes;query;privacyMode;resolvedIdCookie;generateIdCookie;peopleVerifiedId;pageUrl;constructor(e,t,r){let i=e||{identityResolutionConfig:{}};this.eventBus=r,this.calls=t,this.idexConfig=i.identityResolutionConfig||{},this.extraAttributes=this.idexConfig.extraAttributes||{},this.externalIds=i.retrievedIdentifiers||[],this.source=this.idexConfig.source||"unknown",this.publisherId=this.idexConfig.publisherId||"any",this.url=this.idexConfig.url||l,this.timeout=this.idexConfig.ajaxTimeout||i.ajaxTimeout||5e3,this.requestedAttributes=this.idexConfig.requestedAttributes||p,this.privacyMode=i.privacyMode??!1,this.resolvedIdCookie=i.resolvedIdCookie,this.generateIdCookie="generated"===this.idexConfig.idCookieMode,this.peopleVerifiedId=i.peopleVerifiedId,this.pageUrl=i.pageUrl,this.query=new R().addOptional("duid",i.peopleVerifiedId).addOptional("us_privacy",i.usPrivacyString).addOptional("gdpr",n.onNonNull(i.gdprApplies,e=>+!!e)).addOptional("gdpr_consent",i.gdprConsent).addOptional("did",i.distributorId).addOptional("gpp_s",i.gppString).addOptional("gpp_as",i.gppApplicableSections?.join(",")).addOptional("cd",i.cookieDomain).addOptional("ic",k(i.resolvedIdCookie),{stripEmpty:!1}).addOptional("pu",n.onNonNull(i.pageUrl,j)).addOptional("pip",n.onNonNull(this.extraAttributes.ipv4,e=>b(e))).addOptional("pip6",n.onNonNull(this.extraAttributes.ipv6,e=>b(e))),this.externalIds.forEach(e=>{this.query.add(e.name,e.value)}),this.requestedAttributes.forEach(e=>{this.query.add("resolve",e)})}attributeResolutionAllowed(e){return"uid2"===e?!this.privacyMode:e!==q}filterParams(e){return e.filteredCopy((e,t)=>"resolve"!==e||!!n.isString(t)&&this.attributeResolutionAllowed(t))}enrichExtraIdentifiers(e,t){let r=t.tuples.filter(([e])=>"resolve"===e).map(([,e])=>e),n={...e};return r.indexOf(q)>-1&&(this.generateIdCookie&&this.peopleVerifiedId?n[q]=this.peopleVerifiedId:this.resolvedIdCookie&&(n[q]=this.resolvedIdCookie)),n}responseReceived(e,t){return(r,i)=>{let o={};if(r)try{let e=JSON.parse(r);n.isObject(e)&&(o=e)}catch(e){console.error("Error parsing response",e),this.eventBus.emitError("IdentityResolverParser",e)}let a=function(e){if(n.isObject(e)&&"getResponseHeader"in e&&n.isFunction(e.getResponseHeader)){let t=e.getResponseHeader("expires");if(t)return new Date(t)}}(i);e(this.enrichExtraIdentifiers(o,t),{expiresAt:a})}}buildUrl(e){return`${this.url}/${this.source}/${this.publisherId}${this.filterParams(e).toQueryString()}`}getUrl(e){let t=this.query.copy().addParamsMap(e??{});return this.buildUrl(t)}resolve(e,t,r){try{let n=this.query.copy().addParamsMap(r??{});this.calls.ajaxGet(this.buildUrl(n),this.responseReceived(e,n),t,this.timeout)}catch(e){console.error("IdentityResolve",e),t&&n.isFunction(t)&&t(e),this.eventBus&&this.eventBus.emitError("IdentityResolve",e)}}}function F(e){return new n.ReplayEmitter("number"==typeof e&&e>=0?e:5)}function G(e){n.isFunction(e.emitErrorWithMessage)&&n.isFunction(e.emitError)||(e.emitErrorWithMessage=function(t,r,i={}){let o=n.wrapError(t,r,i);return e.emit(n.ERRORS_CHANNEL,o)},e.emitError=function(t,r){return e.emitErrorWithMessage(t,r.message,r)})}function W(e=5){return F(e)}function z(e){let t=window[e].eventBus||window[a];return G(t),t}var H=Object.freeze({__proto__:null,GlobalEventBus:function(e,t,r){try{return window||r(Error("Bus can only be attached to the window, which is not present")),window&&!window[e]&&(window[e]=F(t)),G(window[e]),window[e]}catch(e){console.error("events.bus.init",e),r(e)}},LocalEventBus:W,getAvailableBus:z});let Y="_li_dcdm_c",J="disabled",K=e=>{let t=e.privacyMode?J:e.storageStrategy||"cookie";return{...e,storageStrategy:t}},Q=n.expiresInDays(30),X="lidids.",$=(e,t,r)=>r.indexOf(e)===t,Z=e=>e&&n.trim(e).length>0,ee="0123456789ABCDEFGHJKMNPQRSTVWXYZ",et=ee.length,er=function(){let e="undefined"!=typeof window?window:null,t=e&&(e.crypto||e.msCrypto);return t?()=>{let e=new Uint8Array(1);return t.getRandomValues(e),e[0]/255}:()=>Math.random()}(),en="_lc2_fpi";function ei(e){try{let t=+e;return isNaN(t)?void 0:t}catch{}}function eo(e){try{if(n.isString(e)&&e.length&&e.length>120)return`${e.substr(0,120)}...`;return`${e}`}catch{}}let ea=()=>void 0;class es{obj;name;errors;eventBus;constructor(e,t,r){this.obj=e,this.name=t,this.errors=[],this.eventBus=r}wrap(e){if(n.isObject(this.obj)){let t=this.obj[e];if(n.isFunction(t))return(...r)=>{try{return t.call(this.obj,...r)}catch(t){this.eventBus.emitErrorWithMessage(this.name,`Failed calling ${e}`,t)}}}return this.errors.push(e),ea}reportErrors(){this.errors.length>0&&this.eventBus.emitErrorWithMessage(this.name,`The functions '${JSON.stringify(this.errors)}' were not provided`)}}let ed=()=>void 0;function ec(e,t,r){return n.strEqualsIgnoreCase(t,J)?ed:e.wrap(r)}function eu(e,t,r){return n.strEqualsIgnoreCase(t,"none")?ed:ec(e,t,r)}class el{minimalFunctions;constructor(e,t){this.minimalFunctions={getCookie:ec(t,e,"getCookie"),getDataFromLocalStorage:ec(t,e,"getDataFromLocalStorage"),localStorageIsEnabled:eu(t,e,"localStorageIsEnabled")}}static make(e,t,r){let n=new es(t,"ReadOnlyStorageHandler",r),i=new el(e,n);return n.reportErrors(),i}localStorageIsEnabled(){return!!this.minimalFunctions.localStorageIsEnabled()}getCookie(e){return this.minimalFunctions.getCookie(e)||null}getDataFromLocalStorage(e){return this.minimalFunctions.getDataFromLocalStorage(e)||null}}class ep extends el{storageStrategy;functions;constructor(e,t){super(e,t),this.storageStrategy=e,this.functions={setCookie:eu(t,e,"setCookie"),removeDataFromLocalStorage:eu(t,e,"removeDataFromLocalStorage"),setDataInLocalStorage:eu(t,e,"setDataInLocalStorage"),findSimilarCookies:ec(t,e,"findSimilarCookies")}}static make(e,t,r){let n=new es(t,"StorageHandler",r),i=new ep(e,n);return n.reportErrors(),i}setCookie(e,t,r,n,i){this.functions.setCookie(e,t,r,n,i)}setDataInLocalStorage(e,t){this.functions.setDataInLocalStorage(e,t)}removeDataFromLocalStorage(e){this.functions.removeDataFromLocalStorage(e)}findSimilarCookies(e){return this.functions.findSimilarCookies(e)||[]}}class ef extends Error{constructor(e){super(e),this.name="ParseError"}}class eg{handler;cookieDomain;eventBus;constructor(e){this.handler=e.storageHandler,this.cookieDomain=e.cookieDomain,this.eventBus=e.eventBus}deleteCookie(e){this.handler.setCookie(e,"",new Date(0),"Lax",this.cookieDomain)}parseMetaRecord(e){let t,r=JSON.parse(e);if(!n.isObject(r))throw new ef("Meta record is not an object");if("e"in r&&isNaN((t=new Date(r.e)).getTime()))throw new ef("Invalid expiresAt");if(!("w"in r))throw new ef("Missing writtenAt");let i=new Date(r.w);if(isNaN(i.getTime()))throw new ef("Invalid writtenAt");return{expiresAt:t,writtenAt:i}}serializeMetaRecord(e){let t;return e.expiresAt&&(t=e.expiresAt.getTime()),JSON.stringify({w:e.writtenAt.getTime(),e:t})}getCookieRecord(e,t){let r,n=this.handler.getCookie(t);if(!n||0===n.length)return null;try{r=this.parseMetaRecord(n)}catch(r){return this.eventBus.emitErrorWithMessage("Cache","Failed reading meta from cookies",r),this.deleteCookie(e),this.deleteCookie(t),null}let i=r.expiresAt;if(i&&i.getTime()<=Date.now())return null;let o=this.handler.getCookie(e);return o?{data:o,meta:r}:null}getLSRecord(e,t){let r,n=this.handler.getDataFromLocalStorage(t);if(!n||0===n.length)return null;try{r=this.parseMetaRecord(n)}catch(r){return this.eventBus.emitErrorWithMessage("Cache","Failed reading meta from ls",r),this.handler.removeDataFromLocalStorage(e),this.handler.removeDataFromLocalStorage(t),null}let i=r.expiresAt;if(i&&i.getTime()<=Date.now())return this.handler.removeDataFromLocalStorage(e),this.handler.removeDataFromLocalStorage(t),null;let o=this.handler.getDataFromLocalStorage(e);return o?{data:o,meta:r}:null}get(e){var t;let r=(t=e,`${t}_meta`),n=this.getCookieRecord(e,r),i=this.getLSRecord(e,r);if(n&&i)if(n.meta.writtenAt.getTime()===i.meta.writtenAt.getTime())return n;else if(n.meta.writtenAt>i.meta.writtenAt)return this.handler.setDataInLocalStorage(e,n.data),this.handler.setDataInLocalStorage(r,this.serializeMetaRecord(n.meta)),n;else return this.handler.setCookie(e,i.data,i.meta.expiresAt,"Lax",this.cookieDomain),this.handler.setCookie(r,this.serializeMetaRecord(i.meta),i.meta.expiresAt,"Lax",this.cookieDomain),i;return n?(this.handler.setDataInLocalStorage(e,n.data),this.handler.setDataInLocalStorage(r,this.serializeMetaRecord(n.meta)),n):i?(this.handler.setCookie(e,i.data,i.meta.expiresAt,"Lax",this.cookieDomain),this.handler.setCookie(r,this.serializeMetaRecord(i.meta),i.meta.expiresAt,"Lax",this.cookieDomain),i):null}set(e,t,r){var i;let o=(i=e,`${i}_meta`),a=this.serializeMetaRecord({writtenAt:new Date,expiresAt:r});this.handler.setDataInLocalStorage(e,t),this.handler.setDataInLocalStorage(o,a);let s=r||n.expiresInDays(730);this.handler.setCookie(e,t,s,"Lax",this.cookieDomain),this.handler.setCookie(o,a,s,"Lax",this.cookieDomain)}}let ev=()=>void 0;class em{functions;constructor(e,t,r){let n=new es(e,"CallHandler",t);this.functions={ajaxGet:r?ev:n.wrap("ajaxGet"),pixelGet:r?ev:n.wrap("pixelGet")},n.reportErrors()}ajaxGet(e,t,r,n,i){this.functions.ajaxGet(e,t,r,n,i)}pixelGet(e,t){this.functions.pixelGet(e,t)}}function eh(e){return t=>t.idCookie?.strategy==="cookie"&&"string"==typeof t.idCookie?.name?{...t,resolvedIdCookie:e.getCookie(t.idCookie.name)}:t.idCookie?.strategy==="localStorage"&&"string"==typeof t.idCookie?.name?{...t,resolvedIdCookie:e.getDataFromLocalStorage(t.idCookie.name)}:t}let eb={};function ey(e,t,r,i){if(e&&n.isObject(e))if("config"in e)i.emitErrorWithMessage("StrayConfig","Received a config after LC has already been initialised",Error(JSON.stringify(e)));else{let n=B.fromEvent(r,e,i);n.getHashedEmail().length>0?eb.hashedEmail=n.getHashedEmail():eb.hashedEmail&&n.setHashedEmail(eb.hashedEmail),t.sendAjax(n,{onPreSend:()=>i.emit(c,"0"),onLoad:()=>i.emit(d,r)})}else i.emitErrorWithMessage("EventNotAnObject","Received event was not an object",Error(e))}function eA(e,t,r,a){try{var s,d,c,l;let p={...V(e,a),identifiersToResolve:e.identifiersToResolve||[],contextSelectors:e.contextSelectors||"",contextElementsLength:e.contextElementsLength||0},f={...s=K(M(p)),pageUrl:function(e=window){let t,r=U(()=>e.location.ancestorOrigins)||[],n=[],i=e;for(;i!==top;)n.push(i),i=i.parent;n.push(i);for(let e=n.length-1;e>=0&&!t;e--)t=U(()=>n[e].location.href),0!==e&&(t||(t=U(()=>n[e-1].document.referrer)),t||(t=r[e-1]));return t}(),referrer:function(e=window){return U(()=>e.top.document.referrer)}(),contextElements:(d=s.privacyMode,c=s.contextSelectors,l=s.contextElementsLength,!d&&c&&""!==c&&l?b(function(e,t){let r=window.document.querySelectorAll(e),n="";for(let e=0;e<r.length;e++){var i;let o=n+S(r[e].outerHTML).stringWithoutRawEmails;if(i=o,Math.ceil(4*new Blob([i]).size/3)<=t)n=o;else break}return n}(c,l)):"")},g=new em(r,a,f.privacyMode),v=ep.make(f.storageStrategy,t,a),m=(e=>({...e,cookieDomain:function(e){let t=e.getCookie(Y);if(t)return t;let r=document.domain||document.location&&document.location.host||window&&window.location&&window.location.host||"localhost",n=r.split(".");for(let t=n.length;t>0;t--){let r=`.${n.slice(t-1,n.length).join(".")}`;if(e.setCookie(Y,r,void 0,"Lax",r),e.getCookie(Y))return r}return`.${r}`}(v)}))(f),h=new eg({storageHandler:v,eventBus:a,cookieDomain:m.cookieDomain}),y=eh(v)((e=>{let t,r=h.get(en);if(r)t=r.data;else{let r=v.getCookie(en);if(r)h.set(en,r),t=r;else{let r=`${(function(e,t=12){return i.sha1(e.replace(/^\./,"")).substring(0,t)})(e.cookieDomain)}--${(function(e,t){let r;if(e>0xffffffffffff)throw function(e){let t=Error(e);return t.source="Ulid",t}("cannot encode time greater than 281474976710655");let n="";for(;t>0;t--)r=e%et,n=ee.charAt(r)+n,e=(e-r)/et;return n})(Date.now(),10)+function(e){let t="";for(;e>0;e--)t=function(){let e=Math.floor(er()*et);return e===et&&(e=et-1),ee.charAt(e)}()+t;return t}(16)}`.toLocaleLowerCase();h.set(en,r),t=h.get(en)?.data}}return t&&v.setDataInLocalStorage(u,t),{...e,liveConnectId:t,peopleVerifiedId:t}})((e=>{function t(e,t){try{return t()}catch(t){return a.emitErrorWithMessage("DecisionsResolve",e,t),[]}}let r=t("Error while extracting new decision ids",()=>{var t;return[].concat(e.pageUrl&&(t=e.pageUrl,T(w(t),"li_did"))||[]).map(n.trim).filter(Z).filter(n.isUUID).filter($)}),i=t("Error while retrieving stored decision ids",()=>v.findSimilarCookies(X).map(n.trim).filter(Z).filter(n.isUUID));return r.forEach(t=>{try{t&&v.setCookie(`${X}${t}`,t,Q,"Lax",e.cookieDomain)}catch(e){a.emitErrorWithMessage("DecisionsResolve","Error while storing new decision id",e)}}),{...e,decisionIds:r.concat(i).filter($)}})((e=>{try{return{...e,...function(e,t){let r=[],i=[];for(let o=0;o<e.length;o++){let a=e[o],s=t.getCookie(a)||t.getDataFromLocalStorage(a);if(s){let e=S(n.safeToString(s));r.push({name:a,value:e.stringWithoutRawEmails}),i=i.concat(e.hashesFromOriginalString)}}return{retrievedIdentifiers:r,hashesFromIdentifiers:function(e){let t=new Set,r=[];for(let n=0;n<e.length;n++)t.has(e[n].md5)||(r.push(e[n]),t.add(e[n].md5));return r}(i)}}(function(e){let t=[];e&&(n.isArray(e)?t=e:n.isString(e)&&(t=e.split(",")));for(let e=0;e<t.length;e++)t[e]=t[e].trim();return t}(e.identifiersToResolve),v)}}catch(t){return a.emitError("IdentifiersEnricher",t),{...e,retrievedIdentifiers:[],hashesFromIdentifiers:[]}}})(m)))),A=new o({collectorUrl:p.collectorUrl,ajaxTimeout:p.ajaxTimeout,eventBus:a,callHandler:g});try{a.on(n.ERRORS_CHANNEL,e=>{let t=B.fromError(y,n.isRecord(e)?{message:eo(e.message)||"",name:eo(e.name)||"",stackTrace:eo(e.stack),lineNumber:ei(e.lineNumber),columnNumber:ei(e.columnNumber),fileName:eo(e.fileName)}:{message:"Unknown message",name:"Unknown name"},a);A.sendPixel(t)})}catch(e){console.error("handlers.error.register",e)}let I=new L(y,g,a),E=(...e)=>(function(e,t,r,i){try{e.forEach(e=>{n.isArray(e)?e.forEach(e=>ey(e,t,r,i)):ey(e,t,r,i)})}catch(e){console.error("Error sending events",e),i.emitErrorWithMessage("LCPush","Failed sending an event",e)}})(e,A,y,a);return{push:E,fire:()=>E({}),peopleVerifiedId:y.peopleVerifiedId,ready:!0,resolve:I.resolve.bind(I),resolutionCallUrl:I.getUrl.bind(I),config:p,eventBus:a,storageHandler:v,cache:h}}catch(e){console.error(e),a.emitErrorWithMessage("LCConstruction","Failed to build LC",e)}}function eI(e,t,r,i){let o,a=n.isObject(e)&&e||{},s=i||W();try{o=a.globalVarName?function(e,t,r,i){let o=window[e.globalVarName]||[],a=function(e){try{if(window&&window[e.globalVarName]&&window[e.globalVarName].ready){let t=window[e.globalVarName].config&&function(e,t){if(e.appId!==t.appId||e.wrapperName!==t.wrapperName||e.collectorUrl!==t.collectorUrl)return{appId:[e.appId,t.appId],wrapperName:[e.wrapperName,t.wrapperName],collectorUrl:[e.collectorUrl,t.collectorUrl]}}(window[e.globalVarName].config,e);if(t){let r=Error();r.name="ConfigSent",r.message="Additional configuration received";let n=z(e.globalVarName);window[e.globalVarName].eventBus=n,n.emitErrorWithMessage("LCDuplication",JSON.stringify(t),r)}return window[e.globalVarName]}}catch(e){console.error("Could not initialize error bus")}}(e)||eA(e,t,r,i)||o;if(n.isArray(o))for(let e=0;e<o.length;e++)a.push(o[e]);return window[a.config.globalVarName]=a,window.liQ_instances=window.liQ_instances||[],0===window.liQ_instances.filter(e=>e.config.globalVarName===a.config.globalVarName).length&&window.liQ_instances.push(a),a}(a,t,r,s):function(e,t,r,n){let i=eA(e,t,r,n);return window.liQ_instances=window.liQ_instances||[],window.liQ_instances.push(i),i}(a,t,r,s)}catch(e){console.error(e),s.emitErrorWithMessage("LCConstruction","Failed to build LC",e)}return o}function eE(e,t,r,i,o){try{let a={...V(e,i),identifiersToResolve:e.identifiersToResolve||[]},s=K(M(a)),d=el.make(s.storageStrategy,t,i),c=new em(r,i,s.privacyMode),l=(e=>{try{return{...e,retrievedIdentifiers:function(e,t){let r=n.isArray(e)?e:n.safeToString(e).split(","),i=[];for(let e=0;e<r.length;e++){var o;let a=n.trim(r[e]),s=t.getCookie(a)||t.getDataFromLocalStorage(a);!s||(o=n.safeToString(s),/\S+(@|%40)\S+\.\S+/.test(o))||E(n.safeToString(s))||i.push({name:a,value:n.safeToString(s)})}return i}(e.identifiersToResolve,d)}}catch(t){return i.emitError("IdentifiersEnrich",t),{...e,retrievedIdentifiers:[]}}})(eh(d)((e=>{try{return{...e,peopleVerifiedId:e.peopleVerifiedId||d.getDataFromLocalStorage(u)||void 0}}catch(t){return i.emitError("PeopleVerifiedEnrich",t),e}})(s))),p=new L(l,c,i);return{push:e=>o(e),fire:()=>o({}),peopleVerifiedId:l.peopleVerifiedId,ready:!0,resolve:p.resolve.bind(p),resolutionCallUrl:p.getUrl.bind(p),config:a,eventBus:i,storageHandler:d}}catch(e){console.error(e)}}function eS(e,t,r,i){let o=n.isObject(e)&&e||{},a=i||W();try{return o.globalVarName?function(e,t,r,n){let i=window[e.globalVarName]=window[e.globalVarName]||[],o=eE(e,t,r,n,i.push.bind(i));return window.liQ_instances=window.liQ_instances||[],0===window.liQ_instances.filter(e=>e.config.globalVarName===o.config.globalVarName).length&&window.liQ_instances.push(o),o}(o,t,r,a):function(e,t,r,n){let i=eE(e,t,r,n,()=>{});return window.liQ_instances=window.liQ_instances||[],window.liQ_instances.push(i),i}(o,t,r,a)}catch(e){console.error(e)}return{}}t.LiveConnect=function(e,t,r,i,o){let a=o||W();return("minimal"===i?eS:eI)(n.isObject(e)&&e||{},t,r,a)},t.MinimalLiveConnect=eS,t.QueryBuilder=R,t.StandardLiveConnect=eI,t.StorageHandlerBackedCache=eg,t.WrappedStorageHandler=ep,t.consts=f,t.encodeIdCookie=k,t.eventBus=H},5308:function(e,t,r){"use strict";r.r(t),r.d(t,{md5:()=>o,sha1:()=>a,sha256:()=>f});for(var n=[],i=0;i<64;)n[i]=0|0x100000000*Math.sin(++i%Math.PI);function o(e){var t,r,o,a=[t=0x67452301,r=0xefcdab89,~t,~r],s=[],d=unescape(encodeURI(e))+"\x80",c=d.length;for(e=--c/4+2|15,s[--e]=8*c;~c;)s[c>>2]|=d.charCodeAt(c)<<8*c--;for(i=d=0;i<e;i+=16){for(c=a;d<64;c=[o=c[3],t+((o=c[0]+[t&r|~t&o,o&t|~o&r,t^r^o,r^(t|~o)][c=d>>4]+n[d]+~~s[i|15&[d,5*d+1,3*d+5,7*d][c]])<<(c=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*c+d++%4])|o>>>-c),t,r])t=0|c[1],r=c[2];for(d=4;d;)a[--d]+=c[d]}for(e="";d<32;)e+=(a[d>>3]>>4*(1^d++)&15).toString(16);return e}function a(e){var t,r,n,i,o,a=[],s=[r=0x67452301,n=0xefcdab89,~r,~n,0xc3d2e1f0],d=[],c=unescape(encodeURI(e))+"\x80",u=c.length;for(d[e=--u/4+2|15]=8*u;~u;)d[u>>2]|=c.charCodeAt(u)<<8*~u--;for(t=u=0;t<e;t+=16){for(r=s;u<80;r=[r[4]+(a[u]=u<16?~~d[t+u]:2*c|c<0)+0x5a827999+[n&i|~n&o,c=0x14577208+(n^i^o),0x34994343+(n&i|n&o|i&o),c+0x5b88d635][u++/5>>2]+((c=r[0])<<5|c>>>27),c,n<<30|n>>>2,i,o])c=a[u-3]^a[u-8]^a[u-14]^a[u-16],n=r[1],i=r[2],o=r[3];for(u=5;u;)s[--u]+=r[u]}for(c="";u<40;)c+=(s[u>>3]>>4*(7-u++)&15).toString(16);return c}for(var s,d=18,c=[],u=[];d>1;d--)for(s=d;s<320;)c[s+=d]=1;function l(e,t){return 0x100000000*Math.pow(e,1/t)|0}for(s=0;s<64;)c[++d]||(u[s]=l(d,2),c[s++]=l(d,3));function p(e,t){return e>>>t|e<<-t}function f(e){var t=u.slice(d=s=0,8),r=[],n=unescape(encodeURI(e))+"\x80",i=n.length;for(r[e=--i/4+2|15]=8*i;~i;)r[i>>2]|=n.charCodeAt(i)<<8*~i--;for(i=[];d<e;d+=16){for(l=t.slice();s<64;l.unshift(n+(p(n=l[0],2)^p(n,13)^p(n,22))+(n&l[1]^l[1]&l[2]^l[2]&n)))l[3]+=n=0|(i[s]=s<16?~~r[s+d]:(p(n=i[s-2],17)^p(n,19)^n>>>10)+i[s-7]+(p(n=i[s-15],7)^p(n,18)^n>>>3)+i[s-16])+l.pop()+(p(n=l[4],6)^p(n,11)^p(n,25))+(n&l[5]^~n&l[6])+c[s++];for(s=8;s;)t[--s]+=l[s]}for(n="";s<64;)n+=(t[s>>3]>>4*(7-s++)&15).toString(16);return n}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.rv=()=>"1.4.11",r.ruid="bundler=rspack@1.4.11",(()=>{"use strict";var e=r(6507);r(7630),r(4067),r(8313),r(4764),r(3984),r(4692),r(5369),r(5872),r(2673),r(554),r(5952),r(3797),r(6523),r(7724),r(5782),r(4943),r(8555),r(9325),r(7948),r(3249),r(3081),r(447),r(9359),r(427),r(2041),r(2757),r(4136),r(8004),r(6525),r(8950),r(5284),r(2362),r(9398),r(8776),r(5175),r(6363),r(7738),r(2392),r(5949),r(7697),r(6687),r(5635),r(5080),r(9564),r(4934),r(1996),r(3870),r(7472),r(9609),r(3183),r(5917),r(1035),r(5801),e.default.processQueue()})()})();